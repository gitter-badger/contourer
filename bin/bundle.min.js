"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isPointInRect(e,t){return e.x>=t.left&&e.x<t.right&&e.y>=t.top&&e.y<t.bottom}function compute1DArray(e,t){return new Array(e).fill(void 0).map(function(e,n){return t(n)})}function compute2DArray(e,t){return compute1DArray(e.height,function(n){return compute1DArray(e.width,function(e){return t(new Vector(e,n))})})}function flatten(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getCanvasMousePos(e,t){var n=e.getBoundingClientRect();return new Vector((t.clientX-n.left)*(e.width/n.width),(t.clientY-n.top)*(e.height/n.height))}function getScrollDir(e){return 0==e.deltaY?0:e.deltaY/Math.abs(e.deltaY)}function setCanvasSmoothing(e,t){e.imageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.webkitImageSmoothingEnabled=t,e.mnImageSmoothingEnabled=t}function createCanvas(e,t){var n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.style.position="absolute",n.style.left=t.left.toString()+"px",n.style.top=t.top.toString()+"px",e.appendChild(n),n.getContext("2d")}function getCanvasDims(e){return new Dimensions(e.canvas.width,e.canvas.height)}function compileShader(e,t,n){var a=e.createShader(n);if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw console.log(t),"Shader compile error: "+e.getShaderInfoLog(a);return a}function createProgram(e,t,n){var a=e.createProgram();return e.attachShader(a,compileShader(e,t,e.VERTEX_SHADER)),e.attachShader(a,compileShader(e,n,e.FRAGMENT_SHADER)),e.linkProgram(a),a}function createComputeTexture(e,t){var n=arguments.length<=2||void 0===arguments[2]?e.FLOAT:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3],r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,n,a),r}function createFBO(e,t,n){var a=e.createFramebuffer();if(e.bindFramebuffer(e.FRAMEBUFFER,a),n.length>1?(t.drawBuffersWEBGL(compute1DArray(n.length,function(e){return t["COLOR_ATTACHMENT"+e.toString()+"_WEBGL"]})),n.forEach(function(n,a){e.framebufferTexture2D(e.FRAMEBUFFER,t["COLOR_ATTACHMENT"+a.toString()+"_WEBGL"],e.TEXTURE_2D,n,0)})):e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n[0],0),e.checkFramebufferStatus(e.FRAMEBUFFER)!=e.FRAMEBUFFER_COMPLETE)throw"GL_FRAMEBUFFER_COMPLETE failed.";return a}function createArrayBuffer(e,t,n){var a=e.createBuffer();return e.bindBuffer(t,a),e.bufferData(t,n,e.STATIC_DRAW),a}function registerVertexAttrib(e,t,n,a,r){var i=e.getAttribLocation(t,n);e.enableVertexAttribArray(i),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(i,a,e.FLOAT,!1,0,0)}function registerTextures(e,t,n){n.forEach(function(n,a){var r=e.getUniformLocation(t,n);e.uniform1i(r,a)})}function registerUniforms(e,t,n,a){n.forEach(function(n){var r=e.getUniformLocation(t,n.name);"int"==n.type?e.uniform1i(r,a[n.name]):"float"==n.type?e.uniform1f(r,a[n.name]):/^ivec[2-4]$/g.test(n.type)?e["uniform"+n.type[4].toString()+"iv"](r,new Int32Array(a[n.name])):/^vec[2-4]$/g.test(n.type)&&e["uniform"+n.type[3].toString()+"fv"](r,new Float32Array(a[n.name]))})}function bindTextures(e,t){t.forEach(function(t,n){e.activeTexture(e["TEXTURE"+n.toString()]),e.bindTexture(e.TEXTURE_2D,t)})}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function init(){var e=new ContourerManager;initRender(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function initRender(e){var t=document.getElementById("indexContainer");ReactDOM.render(React.createElement(ContourerApp,{manager:e}),t),document.getElementById("github-ribbon").innerHTML='<a href="https://github.com/krawthekrow/contourer"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>'}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Vector=function(){function e(t,n){_classCallCheck(this,e),this.x=t,this.y=n}return _createClass(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"multiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"divide",value:function(t){return new e(this.x/t,this.y/t)}},{key:"equals",value:function(e){return this.x==e.x&&this.y==e.y}},{key:"floor",value:function(){return new e(Math.floor(this.x),Math.floor(this.y))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"getLength",value:function(){return Math.sqrt(this.dot(this))}},{key:"getAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"toArray",value:function(){return[this.x,this.y]}}],[{key:"fromPolar",value:function(t,n){return new e(t*Math.cos(n),t*Math.sin(n))}}]),e}(),Dimensions=function(){function e(t,n){_classCallCheck(this,e),this.width=t,this.height=n}return _createClass(e,[{key:"contains",value:function(e){return isPointInRect(e,new Rect(new Vector(0,0),this))}},{key:"getArea",value:function(){return this.width*this.height}},{key:"toArray",value:function(){return[this.width,this.height]}}]),e}(),Color=function(){function e(t,n,a){_classCallCheck(this,e),this.r=t,this.g=n,this.b=a}return _createClass(e,[{key:"toArray",value:function(){return[this.r,this.g,this.b]}}]),e}(),Rect=function(){function e(t,n){_classCallCheck(this,e),this.pos=t,this.dims=n}return _createClass(e,[{key:"x",get:function(){return this.pos.x}},{key:"y",get:function(){return this.pos.y}},{key:"width",get:function(){return this.dims.width}},{key:"height",get:function(){return this.dims.height}},{key:"left",get:function(){return this.pos.x}},{key:"right",get:function(){return this.pos.x+this.dims.width}},{key:"top",get:function(){return this.pos.y}},{key:"bottom",get:function(){return this.pos.y+this.dims.height}}]),e}(),MOUSE_LEFT=0,MOUSE_RIGHT=2,MOUSE_MIDDLE=1,DIRS4=[new Vector(1,0),new Vector(0,1),new Vector((-1),0),new Vector(0,(-1))],ScalableViewportManager=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?new Vector(0,0):arguments[0],n=arguments.length<=1||void 0===arguments[1]?1:arguments[1];_classCallCheck(this,e),this.pos=t,this.scale=n}return _createClass(e,[{key:"viewportToWorld",value:function(e){return e.multiply(this.scale).add(this.pos)}},{key:"worldToViewport",value:function(e){return e.subtract(this.pos).divide(this.scale)}},{key:"translate",value:function(e){this.pos=this.pos.subtract(e.multiply(this.scale))}},{key:"scaleAtPoint",value:function(e,t){var n=this.scale*Math.exp(e),a=this.pos.add(t.multiply(this.scale-n));this.scale=n,this.pos=a}}]),e}(),MouseDownTracker=function e(t,n,a){var r=this,i=arguments.length<=3||void 0===arguments[3]?function(e){return!0}:arguments[3];_classCallCheck(this,e),this.initTrackCallback=n,this.trackCallback=a,this.isTrackingEnabled=i,this.canvas=t,this.onMouseDown=function(e){r.isTrackingEnabled(e)&&(r.initTrackCallback(e),window.addEventListener("mousemove",r.onMouseMove),window.addEventListener("mouseup",r.onMouseUp),r.canvas.removeEventListener("mousedown",r.onMouseDown),e.preventDefault())},this.onMouseUp=function(e){window.removeEventListener("mousemove",r.onMouseMove),window.removeEventListener("mouseup",r.onMouseUp),r.canvas.addEventListener("mousedown",r.onMouseDown)},this.onMouseMove=function(e){r.trackCallback(e)},this.canvas.addEventListener("mousedown",this.onMouseDown)},DragManager=function(e){function t(e,n){var a=arguments.length<=2||void 0===arguments[2]?function(e){return!0}:arguments[2];_classCallCheck(this,t);var r=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,function(e){r.prevMousePos=getCanvasMousePos(r.canvas,e)},function(e){var t=getCanvasMousePos(r.canvas,e);n(t.subtract(r.prevMousePos)),r.prevMousePos=t},a));return r.prevMousePos=new Vector(0,0),r}return _inherits(t,e),t}(MouseDownTracker),FULLSCREEN_QUAD_POS_ARRAY=new Float32Array([-1,-1,1,-1,1,1,-1,1]),FULLSCREEN_QUAD_INDEX_ARRAY=new Uint16Array([0,1,2,0,2,3]),FULLSCREEN_QUAD_NUM_VERTICES=6,_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),GPGPUKernelResult=function(){function e(t,n,a){_classCallCheck(this,e),this.ctx=t,this.fbo=n,this.textures=a}return _createClass(e,[{key:"dispose",value:function(){var e=this;null!=this.fbo&&this.ctx.deleteFramebuffer(this.fbo),this.textures.forEach(function(t){e.ctx.deleteTexture(t)})}}]),e}(),GPGPUKernel=function(){function e(t,n){var a=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],r=arguments.length<=3||void 0===arguments[3]?1:arguments[3],i=!(arguments.length<=4||void 0===arguments[4])&&arguments[4];_classCallCheck(this,e),this.manager=t,this.program=n,this.params=a,this.numOutputs=r,this.isGraphical=i}return _createClass(e,[{key:"run",value:function(e,t){var n=this,a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]||arguments[3];this.ctx.useProgram(this.program),registerUniforms(this.ctx,this.program,this.params,a),registerUniforms(this.ctx,this.program,[{name:"uDims",type:"ivec2"}],{uDims:t.toArray()});var i=compute1DArray(this.numOutputs,function(e){return createComputeTexture(n.ctx,t,r?n.ctx.FLOAT:n.ctx.UNSIGNED_BYTE)}),o=this.isGraphical?null:createFBO(this.ctx,this.extDB,i);return this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,o),bindTextures(this.ctx,e),this.ctx.viewport(0,0,t.width,t.height),this.manager.drawFullscreenQuad(this.program),new GPGPUKernelResult(this.ctx,o,i)}},{key:"ctx",get:function(){return this.manager.ctx}},{key:"extDB",get:function(){return this.manager.extDB}}]),e}(),GPGPUManager=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]||arguments[1];_classCallCheck(this,e),this.ctx=t,this.extDB=this.ctx.getExtension("WEBGL_draw_buffers"),n&&this.ctx.getExtension("OES_texture_float"),this.quadPosBuffer=createArrayBuffer(this.ctx,this.ctx.ARRAY_BUFFER,FULLSCREEN_QUAD_POS_ARRAY),this.quadIndexBuffer=createArrayBuffer(this.ctx,this.ctx.ELEMENT_ARRAY_BUFFER,FULLSCREEN_QUAD_INDEX_ARRAY)}return _createClass(e,[{key:"drawFullscreenQuad",value:function(e){this.ctx.useProgram(e),this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER,this.quadIndexBuffer),this.ctx.drawElements(this.ctx.TRIANGLE_STRIP,FULLSCREEN_QUAD_NUM_VERTICES,this.ctx.UNSIGNED_SHORT,0)}},{key:"readPackedFloatData",value:function(e){var t=new Uint8Array(4*e.getArea());return this.ctx.readPixels(0,0,e.width,e.height,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,t),new Uint8Array(t.buffer)}},{key:"arrayToTexture",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2],a=new Float32Array(flatten(flatten(t))),r=n?a:new Uint8Array(r.buffer);return createComputeTexture(this.ctx,e,n?this.ctx.FLOAT:this.ctx.UNSIGNED_BYTE,r)}},{key:"textureToArray",value:function(t,n){var a=arguments.length<=2||void 0===arguments[2]||arguments[2],r=arguments.length<=3||void 0===arguments[3]?0:arguments[3],i="vec4 cVal = texture2D(uInput, vCoord);\ngl_FragData[0] = "+(a?"packFloat(cVal."+"xyzw"[r]+")":"cVal")+";\n",o=["uInput"],s=this.createKernel(i,o,t,[],1,e.PACK_FLOAT_INCLUDE),c=s.run([n],t,{},!1),l=this.readPackedFloatData(t);return c.dispose(),compute2DArray(t,function(e){var n=l.slice(4*(e.y*t.width+e.x),4*(e.y*t.width+e.x)+4),a="",r=!0,i=!1,o=void 0;try{for(var s,c=n[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var u=s.value;a+=("00000000"+u.toString(2)).substr(-8)}}catch(m){i=!0,o=m}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw o}}return a})}},{key:"createKernel",value:function(t,n,a){var r=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],i=arguments.length<=4||void 0===arguments[4]?1:arguments[4],o=arguments.length<=5||void 0===arguments[5]?"":arguments[5],s=!(arguments.length<=6||void 0===arguments[6])&&arguments[6],c=[].concat(r,n.map(function(e){return{type:"sampler2D",name:e}}),[{type:"ivec2",name:"uDims"}]),l=e.createVertShaderSrc(s),u=e.createFragShaderSrc(t.trim().split("\n").map(function(e){return"    "+e}).join("\n")+"\n",c,o,i>1),m=createProgram(this.ctx,l,u);return this.ctx.useProgram(m),registerVertexAttrib(this.ctx,m,"aPos",2,this.quadPosBuffer),registerTextures(this.ctx,m,n),new GPGPUKernel(this,m,r,i,s)}},{key:"createGraphicalKernel",value:function(e,t,n){var a=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],r=arguments.length<=4||void 0===arguments[4]?"":arguments[4];return this.createKernel(e,t,n,a,0,r,!0)}}]),e}();GPGPUManager.endianness=function(){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e);if(t[0]=3735928559,239==n[0])return"LE";if(222==n[0])return"BE";throw new Error("unknown endianness")}(),GPGPUManager.getCanvasContext=function(e){var t={depth:!1,antialias:!1};return e.getContext("webgl",t)||e.getContext("webgl-experimental",t)},GPGPUManager.createVertShaderSrc=function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];return"precision highp float;\n\nattribute vec2 aPos;\n\nvarying vec2 vCoord;\n\nvoid main(){\n    gl_Position = vec4("+(e?"aPos.x, -aPos.y":"aPos")+", 0.0, 1.0);\n    vCoord = (aPos + 1.0) / 2.0;\n}"},GPGPUManager.PACK_FLOAT_INCLUDE="float round(float x) {\n    return floor(x + 0.5);\n}\n\nvec2 integerMod(vec2 x, float y) {\n    vec2 res = floor(mod(x, y));\n    return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n    float res = floor(mod(x, y));\n    return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat unpackFloat(vec4 rgba) {\n"+("LE"==GPGPUManager.endianness?"":"    rgba.rgba = rgba.abgr;\n")+"    rgba *= 255.0;\n    vec2 gte128;\n    gte128.x = rgba.b >= 128.0 ? 1.0 : 0.0;\n    gte128.y = rgba.a >= 128.0 ? 1.0 : 0.0;\n    float exponent = 2.0 * rgba.a - 127.0 + dot(gte128, MAGIC_VEC);\n    float res = exp2(round(exponent));\n    rgba.b = rgba.b - 128.0 * gte128.x;\n    res = dot(rgba, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n    res *= gte128.y * -2.0 + 1.0;\n    return res;\n}\n\nvec4 packFloat(float f) {\n    float F = abs(f);\n    float sign = f < 0.0 ? 1.0 : 0.0;\n    float exponent = floor(log2(F));\n    float mantissa = (exp2(-exponent) * F);\n    // exponent += floor(log2(mantissa));\n    vec4 rgba = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n    rgba.rg = integerMod(rgba.rg, 256.0);\n    rgba.b = integerMod(rgba.b, 128.0);\n    rgba.a = exponent*0.5 + 63.5;\n    rgba.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n    rgba *= 0.003921569; // 1/255\n"+("LE"==GPGPUManager.endianness?"":"    rgba.rgba = rgba.abgr;\n")+"    return rgba;\n}\n\n",GPGPUManager.createFragShaderSrc=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],a=arguments.length<=3||void 0===arguments[3]||arguments[3];return[a?"#extension GL_EXT_draw_buffers: require\n":"","precision highp float;\nprecision highp sampler2D;\n\n#define EPS 0.0000001\n\n"].concat(_toConsumableArray(t.map(function(e){return"uniform "+e.type+" "+e.name+";\n"})),["\nvarying vec2 vCoord;\n\nvec4 arrGet(sampler2D arr, ivec2 id){\n    return texture2D(arr, (vec2(id) + vec2(0.5)) / vec2(uDims));\n}\n\n",n,"void computeFunc(){\n    ivec2 threadId = ivec2(vCoord * vec2(uDims));\n",e,"}\n\nvoid main(){\n    computeFunc();\n}"]).join("")};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),RED=new Color(255,0,0),GREEN=new Color(0,255,0),BLUE=new Color(0,0,255),WHITE=new Color(255,255,255),ContourerManager=function(){function e(t){_classCallCheck(this,e),this.viewport=new ScalableViewportManager(new Vector(0,0),.01),this.zoomSensitivity=.3,this.contourSpacing=1}return _createClass(e,[{key:"changeDrawFunc",value:function(e,t){var n=this,a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=function(r){var i="vec2 cPos = (vec2(threadId) * uScale) + uPos;\nvec2 res;\n"+e.trim()+"\ngl_FragData[0] = packFloat(res."+r+");\n";return n.gpgpuManager.createKernel(i,[],n.dims,[{type:"float",name:"uScale"},{type:"vec2",name:"uPos"}].concat(a?[{type:"float",name:"time"}]:[]),1,GPGPUManager.PACK_FLOAT_INCLUDE+t.trim()+"\n\n")};this.fieldKernelX=r("x"),this.fieldKernelY=r("y"),this.viewport.scale=10/this.dims.width,this.viewport.pos=new Vector((-this.dims.width),(-this.dims.height)).divide(2).multiply(this.viewport.scale),this.contourSpacing=1,this.isAnimated=a}},{key:"useCanvas",value:function(t){this.ctx=GPGPUManager.getCanvasContext(t),this.gpgpuManager=new GPGPUManager(this.ctx,(!1)),this.dims=getCanvasDims(this.ctx),this.plotKernel=this.gpgpuManager.createGraphicalKernel(e.plotFunc,["uFieldX","uFieldY"],this.dims,[{type:"float",name:"uContourSpacing"}],GPGPUManager.PACK_FLOAT_INCLUDE+e.FIELD_CHECK_INCLUDE);var n=new Dimensions(5,1);console.log(this.gpgpuManager.textureToArray(n,this.gpgpuManager.createKernel("gl_FragData[0] = packFloat(-1.0 - float(threadId.x) / 5.0);\n",[],n,[],1,GPGPUManager.PACK_FLOAT_INCLUDE).run([],n,[],!1).textures[0],!1)[0].join("\n"))}},{key:"destroyContext",value:function(){this.ctx.canvas.width=1,this.ctx.canvas.height=1}},{key:"changeZoom",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?new Vector(this.dims.width/2,this.dims.height/2):arguments[1];this.viewport.scaleAtPoint(-e*this.zoomSensitivity,t)}},{key:"changeContourSpacing",value:function(e){this.contourSpacing*=Math.exp(e*this.zoomSensitivity)}},{key:"translate",value:function(e){this.viewport.translate(e)}},{key:"drawContours",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t={uScale:this.viewport.scale,uPos:this.viewport.pos.toArray()};this.isAnimated&&(t.time=e);var n=this.fieldKernelX.run([],this.dims,t,!1),a=this.fieldKernelY.run([],this.dims,t,!1);this.plotKernel.run([n.textures[0],a.textures[0]],this.dims,{uContourSpacing:this.contourSpacing}),n.dispose(),a.dispose()}}]),e}();ContourerManager.plotFunc="ivec2 lineIndex = ivec2(floor(vec2(\n    unpackFloat(texture2D(uFieldX, vCoord)),\n    unpackFloat(texture2D(uFieldY, vCoord))\n) / uContourSpacing));\nvec2 cmpField = vec2(lineIndex) * uContourSpacing;\nivec2 drawData = ivec2(greaterThanEqual(\n    fieldCheck(threadId, ivec2(0, 1), cmpField) +\n    fieldCheck(threadId, ivec2(1, 0), cmpField) +\n    fieldCheck(threadId, ivec2(0, -1), cmpField) +\n    fieldCheck(threadId, ivec2(-1, 0), cmpField),\n    ivec2(1)));\nif(all(equal(drawData, ivec2(0)))){\n    gl_FragData[0] = vec4(1.0, 1.0, 1.0, 1.0);\n}\nelse{\n    vec2 isAxis = vec2(equal(lineIndex, ivec2(0)));\n    vec2 lineColor = vec2(drawData) * (1.0 - 0.5 * isAxis);\n    gl_FragData[0] = vec4(lineColor.x, 0.5 * dot(vec2(drawData), isAxis), lineColor.y, 1.0);\n}\n",ContourerManager.FIELD_CHECK_INCLUDE="vec2 getField(ivec2 pos){\n    return vec2(\n        unpackFloat(arrGet(uFieldX, pos)),\n        unpackFloat(arrGet(uFieldY, pos))\n    );\n}\n\nivec2 fieldCheck(ivec2 cPos, ivec2 dir, vec2 cmpField){\n    ivec2 oPos = cPos + dir;\n    if(all(greaterThanEqual(oPos, ivec2(0))) && all(lessThan(oPos, uDims))){\n        return ivec2(lessThan(getField(oPos), cmpField));\n    }\n    else return ivec2(0);\n}\n\n";var ContourerAnimationManager=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?1e3:arguments[1];_classCallCheck(this,e),this.manager=t,this.isAnimating=!1,this.numFrames=n,this.currentFrame=0,this.onStopCallback=null,this.animationLoop=this.animationLoop.bind(this)}return _createClass(e,[{key:"start",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.currentFrame=e,this.isAnimating=!0,this.onDraw=t,window.requestAnimationFrame(this.animationLoop)}},{key:"animationLoop",value:function(e){this.isAnimating?(this.manager.drawContours(this.currentFrame/this.numFrames),null!=this.onDraw&&this.onDraw(this.currentFrame),this.currentFrame=(this.currentFrame+1)%this.numFrames,window.requestAnimationFrame(this.animationLoop)):null!=this.onStopCallback&&this.onStopCallback()}},{key:"stop",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];this.isAnimating?(this.isAnimating=!1,this.onStopCallback=e):null!=e&&e()}}]),e}(),DemoFunctions=function t(){_classCallCheck(this,t)};DemoFunctions.INCLUDES={pi:"const float PI = 3.1415926535897932384626433832795;\n\n",complexLib:"vec2 complexMult(vec2 a, vec2 b){\n    return vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\n}\n\nvec2 complexDiv(vec2 a, vec2 b){\n    float divisor = dot(b, b);\n    return vec2(dot(a, b), a.y * b.x - a.x * b.y) / divisor;\n}\n\nvec2 complexPow(vec2 a, vec2 b){\n    float r = length(a), phi = atan(a.y, a.x);\n    float newR = pow(r, b.x) * exp(-b.y * phi);\n    float newPhi = b.y * log(r) + b.x * phi;\n    return newR * vec2(cos(newPhi), sin(newPhi));\n}\n\nvec2 complexExp(vec2 b){\n    return exp(b.x) * vec2(cos(b.y), sin(b.y));\n}\n\nvec2 complexLog(vec2 x){\n    return vec2(log(length(x)), atan(x.y, x.x));\n}\n\n",gamma:'/**\n * Translated to OpenGL ES from math.js\n * https://github.com/josdejong/mathjs\n *\n * Math.js is an extensive math library for JavaScript and Node.js,\n * It features real and complex numbers, units, matrices, a large set of\n * mathematical functions, and a flexible expression parser.\n *\n * @version 3.2.1\n * @date    2016-04-26\n *\n * @license\n * Copyright (C) 2013-2016 Jos de Jong <wjosdejong@gmail.com>\n *\n * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n * use this file except in compliance with the License. You may obtain a copy\n * of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n\nvec2 gammaStep(vec2 x, int i, vec2 n, float p){\n    float real = n.x + float(i);\n    float den = real * real + n.y * n.y;\n    if(den != 0.0){\n        return x + vec2(p * real / den, -(p * n.y) / den);\n    }\n    else return vec2(0.0);\n}\n\nvec2 gamma(vec2 n){\n    n.x -= 1.0;\n    vec2 x = vec2(0.99999999999999709182, 0.0);\n\tx = gammaStep(x, 1, n, 57.156235665862923517);\n\tx = gammaStep(x, 2, n, -59.597960355475491248);\n\tx = gammaStep(x, 3, n, 14.136097974741747174);\n\tx = gammaStep(x, 4, n, -0.49191381609762019978);\n\tx = gammaStep(x, 5, n, 0.33994649984811888699e-4);\n\tx = gammaStep(x, 6, n, 0.46523628927048575665e-4);\n\tx = gammaStep(x, 7, n, -0.98374475304879564677e-4);\n\tx = gammaStep(x, 8, n, 0.15808870322491248884e-3);\n\tx = gammaStep(x, 9, n, -0.21026444172410488319e-3);\n\tx = gammaStep(x, 10, n, 0.21743961811521264320e-3);\n\tx = gammaStep(x, 11, n, -0.16431810653676389022e-3);\n\tx = gammaStep(x, 12, n, 0.84418223983852743293e-4);\n\tx = gammaStep(x, 13, n, -0.26190838401581408670e-4);\n\tx = gammaStep(x, 14, n, 0.36899182659531622704e-5);\n    vec2 t = vec2(n.x + 4.7421875 + 0.5, n.y);\n    float twoPiSqrt = sqrt(2.0 * PI);\n\n    n.x += 0.5;\n    vec2 result = complexPow(t, n);\n    result *= twoPiSqrt;\n    float r = exp(-t.x);\n    t = r * vec2(cos(-t.y), sin(-t.y));\n\n    return complexMult(complexMult(result, t), x);\n}\n\n',rotateWithTime:"vec2 rotateWithTime(vec2 v){\n    float cosT = cos(time * 2.0 * PI), sinT = sin(time * 2.0 * PI);\n    return vec2(\n        v.x * cosT - v.y * sinT,\n        v.x * sinT + v.y * cosT\n    );\n}\n\n",snoise:"//\n// Description : Array and textureless GLSL 2D/3D/4D simplex \n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n  }\n\t\t\t\t\t\t\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\n"},DemoFunctions.functions={lorentz:{displayName:"Lorentz Boost",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float beta = sin(time * 2.0 * PI) * 0.9;\nfloat gamma = 1.0 / sqrt(1.0 - beta * beta);\nres = gamma * vec2(\n    cPos.x * 1.0 + cPos.y * beta,\n    cPos.y * 1.0 + cPos.x * beta\n);\n\n"},mercatorwarp:{displayName:"Mercator Warp",isAnimated:!0,numFrames:800,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"vec2 scaledPos = cPos * 0.6;\nvec2 invMercator = vec2(scaledPos.x, 2.0 * atan(exp(scaledPos.y)) - 0.5 * PI) * 8.0;\nres = rotateWithTime(invMercator);\n"},mercatorMollweide:{displayName:"Mercator to Mollweide",isAnimated:!0,numFrames:100,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"vec2 scaledPos = cPos * 0.3;\nfloat theta = asin(scaledPos.y * 2.0 / PI);\nvec2 invMollweide = vec2(\n    scaledPos.x / cos(theta),\n    asin((2.0 * theta + sin(2.0 * theta)) / PI)\n);\nvec2 invMercator = vec2(scaledPos.x, 2.0 * atan(exp(scaledPos.y)) - 0.5 * PI);\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = (invMollweide * mixParam + invMercator * (1.0 - mixParam)) * 8.0;\n"},dipole:{displayName:"Dipole Formation",isAnimated:!0,numFrames:300,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"float dist = sin(time * 2.0 * PI + PI / 2.0) * 2.0 + 2.5;\nres = 50.0 / (2.0 * dist) * (\n    complexLog(cPos - vec2(dist, 0.0)) -\n    complexLog(cPos - vec2(-dist, 0.0))\n);\n"
},attractRepel:{displayName:"Attraction to Repulsion",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"res = 10.0 * (\n    complexLog(cPos - vec2(1.0, 0.0)) +\n    sin(time * 2.0 * PI - PI / 2.0) * complexLog(cPos - vec2(-1.0, 0.0))\n);\n"},neuralnetwork:{displayName:"Neural Network",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float mixParam = -cos(time * 2.0 * PI) / 2.0 + 0.5;\nvec2 unsigmoid = -log(1.0 / ((cPos + vec2(3.3, 3.0)) / 6.3) - 1.0);\nres = (vec2(\n    unsigmoid.x * 2.0 + unsigmoid.y * 1.0,\n    unsigmoid.x * 2.0 + unsigmoid.y * 3.0\n) - vec2(1.0, -2.0)) * mixParam + cPos * (1.0 - mixParam);\n"},galaxy:{displayName:"Galaxy Warp",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float mixParam = -cos(time * 2.0 * PI) / 2.0 + 0.5;\nvec2 polPos = vec2(length(cPos), atan(cPos.y, cPos.x));\npolPos = vec2(polPos.x, polPos.y - mixParam / 50.0 * sqrt(1.0 / pow(polPos.x / 40.0, 3.0)));\nres = vec2(polPos.x * cos(polPos.y), polPos.x * sin(polPos.y));\n"},simplex:{displayName:"Simplex Warp",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.snoise,drawFunc:"vec2 circleVary = 2.0 * vec2(\n    cos(time * 2.0 * PI),\n    sin(time * 2.0 * PI)\n);\nres = 2.0 * (cPos +\n0.5 * vec2(\n    snoise(vec4(cPos * 0.25, circleVary + vec2(100.0, 100.0))),\n    snoise(vec4(cPos * 0.25, circleVary + vec2(200.0, 200.0)))\n));\n"},exponentiation:{displayName:"Complex Exponentiation",isAnimated:!0,numFrames:300,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 cartRes = 10.0 * complexPow(cPos, vec2(1.0 / (2.5 - 1.5 * cos(time * 2.0 * PI)), 0.0));\nres = vec2(length(cartRes), 10.0 * atan(cartRes.y, cartRes.x));\n"},mobius:{displayName:"Mobius Transformation",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"res = rotateWithTime(10.0 * complexDiv(\n    complexMult(vec2(0.5, 3.0), cPos) + vec2(0.5, 1.5),\n    complexMult(vec2(4.0, 1.5), cPos) + vec2(2.0, 3.5)\n));\n"},arcsin:{displayName:"Complex Inverse Sine",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 invSin = - 10.0 * complexMult(complexLog(complexPow(vec2(1.0, 0.0) - complexPow(cPos, vec2(2.0, 0.0)), vec2(0.5, 0.0)) + complexMult(cPos, vec2(0.0, 1.0))), vec2(0.0, 1.0));\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = invSin * mixParam + cPos * (1.0 - mixParam);\n"},gamma:{displayName:"Gamma Function",isAnimated:!0,numFrames:400,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.gamma+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"res = rotateWithTime(10.0 * gamma((cPos + vec2(2.0, 0.0)) / 2.0));\n"},madness:{displayName:"Complex ???",isAnimated:!0,numFrames:800,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 madness = - 10.0 * complexMult(complexLog(complexPow(vec2(2.0, 3.0) - complexPow(cPos * 2.0, vec2(2.0, 1.0)), vec2(0.5, 1.0)) + complexMult(cPos * 2.0, vec2(2.0, 1.0))), vec2(2.0, 1.0));\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = madness * mixParam + cPos * (1.0 - mixParam);\n"}};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),CanvasDisplayPane=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){if("onMountCallback"in this.props){var e=ReactDOM.findDOMNode(this);this.props.onMountCallback(e)}}},{key:"componentWillUnmount",value:function(){"onDismountCallback"in this.props&&this.props.onDismountCallback()}},{key:"render",value:function(){return React.createElement("canvas",{width:this.props.dims.width,height:this.props.dims.height,style:{width:"100%"}})}}]),t}(React.Component);CanvasDisplayPane.propTypes={dims:React.PropTypes.instanceOf(Dimensions).isRequired,onMountCallback:React.PropTypes.func};var DrawFunctionSelectorButton=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("button",{type:"button",className:"list-group-item"+(this.props.selected?" active":""),onClick:function(){e.props.onClick(e.props.funcName)}},this.props.displayName)}}]),t}(React.Component),DrawFunctionSelector=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.state={selectedFunc:t.DEFAULT_FUNC},n.handleClick=n.handleClick.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"list-group"},Object.keys(DemoFunctions.functions).map(function(t){return React.createElement(DrawFunctionSelectorButton,{displayName:DemoFunctions.functions[t].displayName,key:t,funcName:t,selected:t==e.state.selectedFunc,onClick:e.handleClick})}))}},{key:"handleClick",value:function(e){this.setState({selectedFunc:e}),this.props.onSelect(e)}}]),t}(React.Component);DrawFunctionSelector.DEFAULT_FUNC="attractRepel";var AceEditor=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=ReactDOM.findDOMNode(this);this.editor=ace.edit(e),this.editor.setTheme("ace/theme/monokai"),this.editor.getSession().setUseWorker(!1),this.editor.getSession().setMode("ace/mode/glsl"),this.editor.$blockScrolling=1/0,this.editor.setFontSize(18),this.editor.setOptions({maxLines:1/0}),this.editor.getSession().setUseWrapMode(!0)}},{key:"componentWillUnmount",value:function(){this.editor.destroy()}},{key:"setValue",value:function(e){this.editor.setValue(e),this.editor.clearSelection()}},{key:"getValue",value:function(){return this.editor.getSession().getValue()}},{key:"render",value:function(){return React.createElement("div",{style:{height:this.props.height.toString()+"px"}})}}]),t}(React.Component),ContourerApp=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.animationManager=new ContourerAnimationManager(n.props.manager),n.state={isAnimated:!1,isAnimating:!1,currentFrame:0,numFrames:0,isAnimatedSelectState:!1,numFramesInputVal:"0",shaderCompileError:""},n.useCanvas=n.useCanvas.bind(n),n.setDrawFunc=n.setDrawFunc.bind(n),n.onDrawFuncSelect=n.onDrawFuncSelect.bind(n),n.redraw=n.redraw.bind(n),n.changeZoomAndRedraw=n.changeZoomAndRedraw.bind(n),n.changeContourSpacingAndRedraw=n.changeContourSpacingAndRedraw.bind(n),n.translateAndRedraw=n.translateAndRedraw.bind(n),n.handlePlotClick=n.handlePlotClick.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){this.onDrawFuncSelect(DrawFunctionSelector.DEFAULT_FUNC)}},{key:"render",value:function(){var e=this,t=new Dimensions(640,480);return React.createElement("div",_defineProperty({className:"container"},"className","col-lg-12"),React.createElement("div",{className:"page-header"},React.createElement("h1",null,"Fun with Contours")),React.createElement("div",{className:"well"},React.createElement("p",null,React.createElement("b",null,"Drag")," to move the graph, ",React.createElement("b",null,"scroll")," to zoom, and ",React.createElement("b",null,"Ctrl + scroll")," to change the contour density."),React.createElement("p",null,"Modify ",React.createElement("b",null,React.createElement("a",{href:"#",onClick:function(t){e.numFramesInput.focus(),t.preventDefault()}},"Frames"))," (number of frames), then click ",React.createElement("b",null,"Plot")," to change the animation speed."),React.createElement("p",null,"Use the ",React.createElement("b",null,"slider")," to explore the animation in more detail."),React.createElement("p",null,"Plot your own functions with the ",React.createElement("b",null,"text editors")," below."),React.createElement("p",null,"Just enjoy the pretty animations, or ",React.createElement("b",null,React.createElement("a",{href:"https://github.com/krawthekrow/contourer"},"click here"))," to learn more."),React.createElement("p",null,React.createElement("b",null,"Note: This app uses WebGL, so it needs a sufficiently modern browser and GPU to work."))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3"},React.createElement(DrawFunctionSelector,{onSelect:this.onDrawFuncSelect})),React.createElement("div",{className:"col-sm-9"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-8"},React.createElement("div",{role:"toolbar"},React.createElement("div",{className:"btn-group",role:"group"},React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeZoomAndRedraw(1)}},React.createElement("span",{className:"glyphicon glyphicon-zoom-in"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeZoomAndRedraw(-1)}},React.createElement("span",{className:"glyphicon glyphicon-zoom-out"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeContourSpacingAndRedraw(-1)}},React.createElement("span",{className:"glyphicon glyphicon-plus"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeContourSpacingAndRedraw(1)}},React.createElement("span",{className:"glyphicon glyphicon-minus"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(1,0))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-left"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(0,1))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-up"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(0,(-1)))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-down"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector((-1),0))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-right"})),this.state.isAnimated&&this.state.isAnimating?React.createElement("button",{type:"button",className:classNames("btn","btn-default",{disabled:!this.state.isAnimated}),onClick:function(t){e.state.isAnimated&&e.state.isAnimating&&e.animationManager.stop(function(){e.setState({isAnimating:!1})})}},React.createElement("span",{className:"glyphicon glyphicon-pause"})):React.createElement("button",{type:"button",className:classNames("btn","btn-default",{disabled:!this.state.isAnimated}),onClick:function(t){e.state.isAnimated&&!e.state.isAnimating&&(e.animationManager.start(e.state.currentFrame,function(t){e.setState({currentFrame:t})}),e.setState({isAnimating:!0}))}},React.createElement("span",{className:"glyphicon glyphicon-play"}))))),React.createElement("div",{className:"col-xs-4"},this.state.isAnimated?React.createElement("input",{type:"range",min:"0",max:(this.state.numFrames-1).toString(),value:this.state.currentFrame,style:{marginTop:"5px"},onChange:function(t){e.setState({currentFrame:parseInt(t.target.value)}),e.state.isAnimating?e.animationManager.stop(function(){e.setState({isAnimating:!1}),e.props.manager.drawContours(e.state.currentFrame/e.state.numFrames)}):e.props.manager.drawContours(e.state.currentFrame/e.state.numFrames)}}):null)),React.createElement("div",{style:{marginTop:"10px"}},React.createElement(CanvasDisplayPane,{dims:t,onMountCallback:function(t){e.useCanvas(t)},onDismountCallback:function(){e.props.manager.destroyContext()}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("h1",null,"Plot Function"),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-9"},React.createElement("div",{className:"form-inline"},React.createElement("div",{className:"btn-group",style:{marginRight:"10px"},role:"group"},React.createElement("button",{type:"button",className:classNames("btn",this.state.isAnimatedSelectState?"btn-default":"btn-primary",{active:!this.state.isAnimatedSelectState}),onClick:function(t){e.setState({isAnimatedSelectState:!1})}},"Graph"),React.createElement("button",{type:"button",className:classNames("btn",this.state.isAnimatedSelectState?"btn-primary":"btn-default",{active:this.state.isAnimatedSelectState}),onClick:function(t){e.setState({isAnimatedSelectState:!0})}},"Animation")),React.createElement("div",{className:classNames("form-group",{"has-error":this.isNumFramesInputInvalid()}),style:{display:"inline-block",marginBottom:0,verticalAlign:"middle"}},React.createElement("div",{className:"input-group"},React.createElement("span",{className:"input-group-addon"},"Frames"),React.createElement("input",{type:"text",className:"form-control",value:this.state.numFramesInputVal,disabled:!this.state.isAnimatedSelectState,ref:function(t){e.numFramesInput=t},onChange:function(t){e.setState({numFramesInputVal:t.target.value})},style:{width:"60px"}})),React.createElement("div",{className:"help-block",style:{display:this.isNumFramesInputInvalid()?"inline-block":"none",marginLeft:"10px"}},"Must be an integer")))),React.createElement("div",{className:"col-xs-3"},React.createElement("button",{type:"button",className:"btn btn-success btn-block pull-right",style:{width:"80px"},disabled:this.isNumFramesInputInvalid(),ref:function(t){e.plotButton=t},onClick:this.handlePlotClick},"Plot"))),""==this.state.shaderCompileError?null:React.createElement("div",{className:"has-error"},React.createElement("div",{className:"help-block"},React.createElement("p",null,"Your code failed to compile with the following error:"),React.createElement("p",null,this.state.shaderCompileError.trim().split("\n").map(function(e,t){return React.createElement("span",{key:t},e,React.createElement("br",null))})),this.state.shaderCompileError.indexOf("wrong operand types")!=-1?React.createElement("p",null,React.createElement("b",null,'Note that GLSL ES does not implicitly cast ints to floats. Write numbers like "23" as "23.0".')):null,this.state.shaderCompileError.indexOf("gl_FragData")!=-1?React.createElement("p",null,React.createElement("b",null,"Did you forget a semicolon on the last line?")):null,React.createElement("p",null,"View the console to see the full generated WebGL shader code."))),React.createElement("div",{style:{marginTop:"10px"}},React.createElement(AceEditor,{height:"200",key:"drawFuncEditor",ref:function(t){e.drawFuncEditor=t}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("h1",null,"Library Functions"),React.createElement("div",{style:{marginBottom:"10px"}},React.createElement(AceEditor,{height:"200",key:"includeSrcEditor",ref:function(t){e.includeSrcEditor=t}})))))}},{key:"useCanvas",value:function(e){var t=this;new DragManager(e,function(e){t.props.manager.viewport.translate(e),t.redraw()},function(e){return!0});e.addEventListener("wheel",function(n){n.ctrlKey?t.changeContourSpacingAndRedraw(getScrollDir(n)):(t.props.manager.changeZoom(-getScrollDir(n),getCanvasMousePos(e,n)),t.redraw()),n.preventDefault()}),this.props.manager.useCanvas(e)}},{key:"isNumFramesInputInvalid",value:function(){return this.state.isAnimatedSelectState&&this.state.numFramesInputVal.split("").some(function(e){return e.charCodeAt()<"0".charCodeAt()||e.charCodeAt()>"9".charCodeAt()})}},{key:"handlePlotClick",value:function(e){this.setDrawFunc(this.drawFuncEditor.getValue(),this.includeSrcEditor.getValue(),this.state.isAnimatedSelectState,this.state.isAnimatedSelectState?parseInt(this.state.numFramesInputVal):0)}},{key:"redraw",value:function(){this.state.isAnimated?this.props.manager.drawContours(this.state.currentFrame/this.state.numFrames):this.props.manager.drawContours()}},{key:"changeZoomAndRedraw",value:function(e){this.props.manager.changeZoom(e),this.redraw()}},{key:"changeContourSpacingAndRedraw",value:function(e){this.props.manager.changeContourSpacing(e),this.redraw()}},{key:"translateAndRedraw",value:function(e){this.props.manager.translate(e.multiply(50)),this.redraw()}},{key:"setDrawFunc",value:function(e,t){var n=this,a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];try{this.props.manager.changeDrawFunc(e,t,a)}catch(i){return void this.setState({shaderCompileError:i})}a&&0==r&&(r=1),this.setState({isAnimated:a,isAnimating:a,currentFrame:0,numFrames:r,isAnimatedSelectState:a,numFramesInputVal:r.toString(),shaderCompileError:""}),this.animationManager.numFrames=r,a?this.animationManager.stop(function(){n.animationManager.start(0,function(e){n.setState({currentFrame:e})})}):this.animationManager.stop(function(){n.props.manager.drawContours()})}},{key:"onDrawFuncSelect",value:function(e){var t=DemoFunctions.functions[e];this.drawFuncEditor.setValue(t.drawFunc.trim()),this.includeSrcEditor.setValue(t.includeSrc.trim()),t.isAnimated?this.setDrawFunc(t.drawFunc,t.includeSrc,t.isAnimated,t.numFrames):this.setDrawFunc(t.drawFunc,t.includeSrc)}}]),t}(React.Component);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwiYnVuZGxlLm1pbi5qcyIsImNhbnZhc1V0aWxzLmpzIiwid2ViZ2xVdGlscy5qcyIsImNvbnRvdXJlci5qcyIsInJlYWN0Q29tcG9uZW50cy5qc3giLCJncGdwdVV0aWxzLmpzIiwiZGVtb0Z1bmN0aW9ucy5qcyJdLCJuYW1lcyI6WyJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwiYXJyMiIsImxlbmd0aCIsImZyb20iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiaXNQb2ludEluUmVjdCIsInAiLCJyZWN0IiwieCIsImxlZnQiLCJyaWdodCIsInkiLCJ0b3AiLCJib3R0b20iLCJjb21wdXRlMURBcnJheSIsImZ1bmMiLCJmaWxsIiwidW5kZWZpbmVkIiwibWFwIiwidW51c2VkIiwiY29tcHV0ZTJEQXJyYXkiLCJkaW1zIiwiaGVpZ2h0Iiwid2lkdGgiLCJpMiIsIlZlY3RvciIsImZsYXR0ZW4iLCJfcmVmIiwiY29uY2F0IiwiYXBwbHkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJjYWxsIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJnZXRDYW52YXNNb3VzZVBvcyIsImNhbnZhcyIsImV2IiwiYm91bmRpbmdSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50WCIsImNsaWVudFkiLCJnZXRTY3JvbGxEaXIiLCJkZWx0YVkiLCJNYXRoIiwiYWJzIiwic2V0Q2FudmFzU21vb3RoaW5nIiwiY3R4IiwiZW5hYmxlIiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwid2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibW5JbWFnZVNtb290aGluZ0VuYWJsZWQiLCJjcmVhdGVDYW52YXMiLCJjb250YWluZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBvc2l0aW9uIiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsImdldENvbnRleHQiLCJnZXRDYW52YXNEaW1zIiwiRGltZW5zaW9ucyIsImNvbXBpbGVTaGFkZXIiLCJzcmMiLCJ0eXBlIiwic2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwic2hhZGVyU291cmNlIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJjb25zb2xlIiwibG9nIiwiZ2V0U2hhZGVySW5mb0xvZyIsImNyZWF0ZVByb2dyYW0iLCJ2ZXJ0U3JjIiwiZnJhZ1NyYyIsInByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwiRlJBR01FTlRfU0hBREVSIiwibGlua1Byb2dyYW0iLCJjcmVhdGVDb21wdXRlVGV4dHVyZSIsInRleFR5cGUiLCJhcmd1bWVudHMiLCJGTE9BVCIsImNvbnRlbnRzIiwidGV4IiwiY3JlYXRlVGV4dHVyZSIsImJpbmRUZXh0dXJlIiwiVEVYVFVSRV8yRCIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX01JTl9GSUxURVIiLCJORUFSRVNUIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiVEVYVFVSRV9XUkFQX1MiLCJDTEFNUF9UT19FREdFIiwiVEVYVFVSRV9XUkFQX1QiLCJ0ZXhJbWFnZTJEIiwiUkdCQSIsImNyZWF0ZUZCTyIsImV4dERCIiwidGV4dHVyZXMiLCJmYm8iLCJjcmVhdGVGcmFtZWJ1ZmZlciIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiZHJhd0J1ZmZlcnNXRUJHTCIsImZvckVhY2giLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyIsIkZSQU1FQlVGRkVSX0NPTVBMRVRFIiwiY3JlYXRlQXJyYXlCdWZmZXIiLCJidWZUeXBlIiwiYnVmIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsInJlZ2lzdGVyVmVydGV4QXR0cmliIiwiYXR0cmliTmFtZSIsIml0ZW1TaXplIiwiYXR0cmliIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsIkFSUkFZX0JVRkZFUiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJyZWdpc3RlclRleHR1cmVzIiwidGV4TmFtZXMiLCJ0ZXhOYW1lIiwidGV4TG9jIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidW5pZm9ybTFpIiwicmVnaXN0ZXJVbmlmb3JtcyIsInVuaWZvcm1zIiwidmFscyIsInVuaWZvcm0iLCJ1bmlmb3JtTG9jIiwibmFtZSIsInVuaWZvcm0xZiIsInRlc3QiLCJJbnQzMkFycmF5IiwiRmxvYXQzMkFycmF5IiwiYmluZFRleHR1cmVzIiwidGV4dHVyZSIsImFjdGl2ZVRleHR1cmUiLCJpbml0IiwibWFuYWdlciIsIkNvbnRvdXJlck1hbmFnZXIiLCJpbml0UmVuZGVyIiwiX2RlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRFbGVtZW50QnlJZCIsIlJlYWN0RE9NIiwicmVuZGVyIiwiUmVhY3QiLCJDb250b3VyZXJBcHAiLCJpbm5lckhUTUwiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwidGhpcyIsIm9WZWMiLCJzY2FsZSIsImZsb29yIiwic3FydCIsImRvdCIsImF0YW4yIiwiciIsInBoaSIsImNvcyIsInNpbiIsInBvcyIsIlJlY3QiLCJDb2xvciIsImciLCJiIiwiZ2V0IiwiTU9VU0VfTEVGVCIsIk1PVVNFX1JJR0hUIiwiTU9VU0VfTUlERExFIiwiRElSUzQiLCJTY2FsYWJsZVZpZXdwb3J0TWFuYWdlciIsInZlYyIsIm11bHRpcGx5IiwiYWRkIiwic3VidHJhY3QiLCJkaXZpZGUiLCJzY2FsZUFtb3VudCIsInNjYWxlUG9pbnQiLCJuZXdTY2FsZSIsImV4cCIsIm5ld1BvcyIsIk1vdXNlRG93blRyYWNrZXIiLCJpbml0VHJhY2tDYWxsYmFjayIsInRyYWNrQ2FsbGJhY2siLCJfdGhpcyIsImlzVHJhY2tpbmdFbmFibGVkIiwib25Nb3VzZURvd24iLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib25Nb3VzZU1vdmUiLCJvbk1vdXNlVXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJEcmFnTWFuYWdlciIsIl9Nb3VzZURvd25UcmFja2VyIiwiZHJhZ0NhbGxiYWNrIiwiaXNEcmFnRW5hYmxlZCIsIl90aGlzMiIsImdldFByb3RvdHlwZU9mIiwicHJldk1vdXNlUG9zIiwibW91c2VQb3MiLCJGVUxMU0NSRUVOX1FVQURfUE9TX0FSUkFZIiwiRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZIiwiVWludDE2QXJyYXkiLCJGVUxMU0NSRUVOX1FVQURfTlVNX1ZFUlRJQ0VTIiwiR1BHUFVLZXJuZWxSZXN1bHQiLCJkZWxldGVGcmFtZWJ1ZmZlciIsImRlbGV0ZVRleHR1cmUiLCJHUEdQVUtlcm5lbCIsInBhcmFtcyIsIm51bU91dHB1dHMiLCJpc0dyYXBoaWNhbCIsImlucHV0VGV4dHVyZXMiLCJvdXRwdXREaW1zIiwicGFyYW1WYWxzIiwidXNlRmxvYXQiLCJ1c2VQcm9ncmFtIiwidURpbXMiLCJ0b0FycmF5Iiwib3V0cHV0VGV4dHVyZXMiLCJVTlNJR05FRF9CWVRFIiwidmlld3BvcnQiLCJkcmF3RnVsbHNjcmVlblF1YWQiLCJHUEdQVU1hbmFnZXIiLCJnZXRFeHRlbnNpb24iLCJxdWFkUG9zQnVmZmVyIiwicXVhZEluZGV4QnVmZmVyIiwiRUxFTUVOVF9BUlJBWV9CVUZGRVIiLCJkcmF3RWxlbWVudHMiLCJUUklBTkdMRV9TVFJJUCIsIlVOU0lHTkVEX1NIT1JUIiwiVWludDhBcnJheSIsImdldEFyZWEiLCJyZWFkUGl4ZWxzIiwiYnVmZmVyIiwiZmxvYXRGbGF0dGVuZWRBcnIiLCJmbGF0dGVuZWRBcnIiLCJjb21wb25lbnQiLCJjb21wdXRlRnVuYyIsImlucHV0TmFtZXMiLCJrZXJuZWwiLCJjcmVhdGVLZXJuZWwiLCJQQUNLX0ZMT0FUX0lOQ0xVREUiLCJyZXN1bHRzIiwicnVuIiwib3V0cHV0IiwicmVhZFBhY2tlZEZsb2F0RGF0YSIsImRpc3Bvc2UiLCJyZXMiLCJzbGljZSIsImFzU3RyaW5nIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJzdWJzdHIiLCJlcnIiLCJpbmNsdWRlU3JjIiwiaW5wdXROYW1lIiwidmVydFNoYWRlclNyYyIsImNyZWF0ZVZlcnRTaGFkZXJTcmMiLCJmcmFnU2hhZGVyU3JjIiwiY3JlYXRlRnJhZ1NoYWRlclNyYyIsInRyaW0iLCJzcGxpdCIsImxpbmUiLCJqb2luIiwiZW5kaWFubmVzcyIsIkFycmF5QnVmZmVyIiwiYSIsIlVpbnQzMkFycmF5IiwiYyIsIkVycm9yIiwiZ2V0Q2FudmFzQ29udGV4dCIsIm9wdGlvbnMiLCJkZXB0aCIsImFudGlhbGlhcyIsImZsaXBZIiwidXNlRHJhd0J1ZmZlcnMiLCJSRUQiLCJHUkVFTiIsIkJMVUUiLCJXSElURSIsImRyYXdGdW5jIiwiem9vbVNlbnNpdGl2aXR5IiwiY29udG91clNwYWNpbmciLCJpc0FuaW1hdGVkIiwiY3JlYXRlRmllbGRLZXJuZWwiLCJjb29yZCIsImZpZWxkRnVuYyIsImdwZ3B1TWFuYWdlciIsImZpZWxkS2VybmVsWCIsImZpZWxkS2VybmVsWSIsInBsb3RLZXJuZWwiLCJjcmVhdGVHcmFwaGljYWxLZXJuZWwiLCJwbG90RnVuYyIsIkZJRUxEX0NIRUNLX0lOQ0xVREUiLCJ0ZXN0RGltcyIsInRleHR1cmVUb0FycmF5IiwiY2hhbmdlQW1vdW50Iiwiem9vbVBvaW50Iiwic2NhbGVBdFBvaW50IiwidHJhbnNsYXRlQW1vdW50IiwidHJhbnNsYXRlIiwidGltZSIsInVuaWZvcm1Bc3NpZ25tZW50cyIsInVTY2FsZSIsInVQb3MiLCJmaWVsZFJlc3VsdFgiLCJmaWVsZFJlc3VsdFkiLCJ1Q29udG91clNwYWNpbmciLCJDb250b3VyZXJBbmltYXRpb25NYW5hZ2VyIiwibnVtRnJhbWVzIiwiaXNBbmltYXRpbmciLCJjdXJyZW50RnJhbWUiLCJvblN0b3BDYWxsYmFjayIsImFuaW1hdGlvbkxvb3AiLCJiaW5kIiwic3RhcnRGcmFtZSIsIm9uRHJhdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInRpbWVzdGFtcCIsImRyYXdDb250b3VycyIsIkRlbW9GdW5jdGlvbnMiLCJJTkNMVURFUyIsInBpIiwiY29tcGxleExpYiIsImdhbW1hIiwicm90YXRlV2l0aFRpbWUiLCJzbm9pc2UiLCJmdW5jdGlvbnMiLCJsb3JlbnR6IiwiZGlzcGxheU5hbWUiLCJtZXJjYXRvcndhcnAiLCJtZXJjYXRvck1vbGx3ZWlkZSIsImRpcG9sZSIsImF0dHJhY3RSZXBlbCIsIm5ldXJhbG5ldHdvcmsiLCJnYWxheHkiLCJzaW1wbGV4IiwiZXhwb25lbnRpYXRpb24iLCJtb2JpdXMiLCJhcmNzaW4iLCJtYWRuZXNzIiwiQ2FudmFzRGlzcGxheVBhbmUiLCJfUmVhY3QkQ29tcG9uZW50IiwiZmluZERPTU5vZGUiLCJvbk1vdW50Q2FsbGJhY2siLCJvbkRpc21vdW50Q2FsbGJhY2siLCJDb21wb25lbnQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJpbnN0YW5jZU9mIiwiaXNSZXF1aXJlZCIsIkRyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uIiwiX1JlYWN0JENvbXBvbmVudDIiLCJfdGhpczMiLCJjbGFzc05hbWUiLCJzZWxlY3RlZCIsIm9uQ2xpY2siLCJmdW5jTmFtZSIsIkRyYXdGdW5jdGlvblNlbGVjdG9yIiwiX1JlYWN0JENvbXBvbmVudDMiLCJfdGhpczQiLCJzdGF0ZSIsInNlbGVjdGVkRnVuYyIsIkRFRkFVTFRfRlVOQyIsImhhbmRsZUNsaWNrIiwiX3RoaXM1Iiwia2V5cyIsInNldFN0YXRlIiwib25TZWxlY3QiLCJBY2VFZGl0b3IiLCJfUmVhY3QkQ29tcG9uZW50NCIsImVkaXRvckRpdiIsImVkaXRvciIsImFjZSIsImVkaXQiLCJzZXRUaGVtZSIsImdldFNlc3Npb24iLCJzZXRVc2VXb3JrZXIiLCJzZXRNb2RlIiwiJGJsb2NrU2Nyb2xsaW5nIiwiSW5maW5pdHkiLCJzZXRGb250U2l6ZSIsInNldE9wdGlvbnMiLCJtYXhMaW5lcyIsInNldFVzZVdyYXBNb2RlIiwiZGVzdHJveSIsIm5ld0NvbnRlbnRzIiwic2V0VmFsdWUiLCJjbGVhclNlbGVjdGlvbiIsImdldFZhbHVlIiwiX1JlYWN0JENvbXBvbmVudDUiLCJfdGhpczciLCJhbmltYXRpb25NYW5hZ2VyIiwiaXNBbmltYXRlZFNlbGVjdFN0YXRlIiwibnVtRnJhbWVzSW5wdXRWYWwiLCJzaGFkZXJDb21waWxlRXJyb3IiLCJ1c2VDYW52YXMiLCJzZXREcmF3RnVuYyIsIm9uRHJhd0Z1bmNTZWxlY3QiLCJyZWRyYXciLCJjaGFuZ2Vab29tQW5kUmVkcmF3IiwiY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXciLCJ0cmFuc2xhdGVBbmRSZWRyYXciLCJoYW5kbGVQbG90Q2xpY2siLCJfdGhpczgiLCJDQU5WQVNfRElNUyIsImhyZWYiLCJudW1GcmFtZXNJbnB1dCIsImZvY3VzIiwicm9sZSIsImUiLCJjbGFzc05hbWVzIiwiZGlzYWJsZWQiLCJzdG9wIiwic3RhcnQiLCJtaW4iLCJtYXgiLCJtYXJnaW5Ub3AiLCJvbkNoYW5nZSIsInBhcnNlSW50IiwiZGVzdHJveUNvbnRleHQiLCJtYXJnaW5SaWdodCIsImFjdGl2ZSIsImhhcy1lcnJvciIsImlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkIiwiZGlzcGxheSIsIm1hcmdpbkJvdHRvbSIsInZlcnRpY2FsQWxpZ24iLCJyZWYiLCJpbnB1dCIsIm1hcmdpbkxlZnQiLCJidXR0b24iLCJwbG90QnV0dG9uIiwiaW5kZXgiLCJpbmRleE9mIiwiZHJhd0Z1bmNFZGl0b3IiLCJpbmNsdWRlU3JjRWRpdG9yIiwiX3RoaXM5IiwiZHJhZ1ZlYyIsImN0cmxLZXkiLCJjaGFuZ2Vab29tIiwic29tZSIsImNoYXJDb2RlQXQiLCJjaGFuZ2VDb250b3VyU3BhY2luZyIsIl90aGlzMTAiLCJjaGFuZ2VEcmF3RnVuYyJdLCJtYXBwaW5ncyI6IkFBQUEsWUNJQSxTQUFTQSxvQkFBbUJDLEdBQU8sR0FBSUMsTUFBTUMsUUFBUUYsR0FBTSxDQUFFLElBQUssR0FBSUcsR0FBSSxFQUFHQyxFQUFPSCxNQUFNRCxFQUFJSyxRQUFTRixFQUFJSCxFQUFJSyxPQUFRRixJQUFPQyxFQUFLRCxHQUFLSCxFQUFJRyxFQUFNLE9BQU9DLEdBQWUsTUFBT0gsT0FBTUssS0FBS04sR0FFMUwsUUFBU08saUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNEd0hoSCxRQUFTQyxlQUFjQyxFQUFHQyxHQUN0QixNQUFPRCxHQUFFRSxHQUFLRCxFQUFLRSxNQUFRSCxFQUFFRSxFQUFJRCxFQUFLRyxPQUMvQkosRUFBRUssR0FBS0osRUFBS0ssS0FBT04sRUFBRUssRUFBSUosRUFBS00sT0FPekMsUUFBU0MsZ0JBQWVmLEVBQVFnQixHQUM1QixNQUFPLElBQUlwQixPQUFNSSxHQUFRaUIsS0FBS0MsUUFBV0MsSUFDckMsU0FBQ0MsRUFBUXRCLEdBQVQsTUFBZWtCLEdBQUtsQixLQUk1QixRQUFTdUIsZ0JBQWVDLEVBQU1OLEdBQzFCLE1BQU9ELGdCQUFlTyxFQUFLQyxPQUN2QixTQUFBekIsR0FBQSxNQUFLaUIsZ0JBQWVPLEVBQUtFLE1BQ3JCLFNBQUFDLEdBQUEsTUFBTVQsR0FBSyxHQUFJVSxRQUFPRCxFQUFJM0IsUUFZ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c3RyaWN0JztcblxuY2xhc3MgVmVjdG9ye1xuICAgIGNvbnN0cnVjdG9yKHgsIHkpe1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBvbGFyKHIsIHBoaSl7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgciAqIE1hdGguY29zKHBoaSksXG4gICAgICAgICAgICByICogTWF0aC5zaW4ocGhpKVxuICAgICAgICApO1xuICAgIH1cbiAgICBhZGQob1ZlYyl7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdGhpcy54ICsgb1ZlYy54LFxuICAgICAgICAgICAgdGhpcy55ICsgb1ZlYy55XG4gICAgICAgICk7XG4gICAgfVxuICAgIHN1YnRyYWN0KG9WZWMpe1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIHRoaXMueCAtIG9WZWMueCxcbiAgICAgICAgICAgIHRoaXMueSAtIG9WZWMueVxuICAgICAgICApO1xuICAgIH1cbiAgICBtdWx0aXBseShzY2FsZSl7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdGhpcy54ICogc2NhbGUsXG4gICAgICAgICAgICB0aGlzLnkgKiBzY2FsZVxuICAgICAgICApO1xuICAgIH1cbiAgICBkaXZpZGUoc2NhbGUpe1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIHRoaXMueCAvIHNjYWxlLFxuICAgICAgICAgICAgdGhpcy55IC8gc2NhbGVcbiAgICAgICAgKTtcbiAgICB9XG4gICAgZXF1YWxzKG9WZWMpe1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy54ID09IG9WZWMueCAmJlxuICAgICAgICAgICAgdGhpcy55ID09IG9WZWMueVxuICAgICAgICApO1xuICAgIH1cbiAgICBmbG9vcigpe1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIE1hdGguZmxvb3IodGhpcy54KSxcbiAgICAgICAgICAgIE1hdGguZmxvb3IodGhpcy55KVxuICAgICAgICApO1xuICAgIH1cbiAgICBkb3Qob1ZlYyl7XG4gICAgICAgIHJldHVybiB0aGlzLnggKiBvVmVjLnggKyB0aGlzLnkgKiBvVmVjLnk7XG4gICAgfVxuICAgIGdldExlbmd0aCgpe1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZG90KHRoaXMpKTtcbiAgICB9XG4gICAgZ2V0QW5nbGUoKXtcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy55LCB0aGlzLngpO1xuICAgIH1cbiAgICB0b0FycmF5KCl7XG4gICAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldO1xuICAgIH1cbn07XG5cbmNsYXNzIERpbWVuc2lvbnN7XG4gICAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCl7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuICAgIGNvbnRhaW5zKHBvcyl7XG4gICAgICAgIHJldHVybiBpc1BvaW50SW5SZWN0KHBvcyxcbiAgICAgICAgICAgIG5ldyBSZWN0KFxuICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgMCksXG4gICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbiAgICBnZXRBcmVhKCl7XG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoICogdGhpcy5oZWlnaHQ7XG4gICAgfVxuICAgIHRvQXJyYXkoKXtcbiAgICAgICAgcmV0dXJuIFt0aGlzLndpZHRoLCB0aGlzLmhlaWdodF07XG4gICAgfVxufTtcblxuY2xhc3MgQ29sb3J7XG4gICAgY29uc3RydWN0b3IociwgZywgYil7XG4gICAgICAgIHRoaXMuciA9IHI7XG4gICAgICAgIHRoaXMuZyA9IGc7XG4gICAgICAgIHRoaXMuYiA9IGI7XG4gICAgfVxuICAgIHRvQXJyYXkoKXtcbiAgICAgICAgcmV0dXJuIFt0aGlzLnIsIHRoaXMuZywgdGhpcy5iXTtcbiAgICB9XG59O1xuXG5jbGFzcyBSZWN0e1xuICAgIGNvbnN0cnVjdG9yKHBvcywgZGltcyl7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmRpbXMgPSBkaW1zO1xuICAgIH1cbiAgICBnZXQgeCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MueDtcbiAgICB9XG4gICAgZ2V0IHkoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLnk7XG4gICAgfVxuICAgIGdldCB3aWR0aCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5kaW1zLndpZHRoO1xuICAgIH1cbiAgICBnZXQgaGVpZ2h0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLmRpbXMuaGVpZ2h0O1xuICAgIH1cbiAgICBnZXQgbGVmdCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MueDtcbiAgICB9XG4gICAgZ2V0IHJpZ2h0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcy54ICsgdGhpcy5kaW1zLndpZHRoO1xuICAgIH1cbiAgICBnZXQgdG9wKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcy55O1xuICAgIH1cbiAgICBnZXQgYm90dG9tKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcy55ICsgdGhpcy5kaW1zLmhlaWdodDtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBpc1BvaW50SW5SZWN0KHAsIHJlY3Qpe1xuICAgIHJldHVybiBwLnggPj0gcmVjdC5sZWZ0ICYmIHAueCA8IHJlY3QucmlnaHQgJiZcbiAgICAgICAgICAgcC55ID49IHJlY3QudG9wICYmIHAueSA8IHJlY3QuYm90dG9tO1xufVxuXG5jb25zdCBNT1VTRV9MRUZUID0gMDtcbmNvbnN0IE1PVVNFX1JJR0hUID0gMjtcbmNvbnN0IE1PVVNFX01JRERMRSA9IDE7XG5cbmZ1bmN0aW9uIGNvbXB1dGUxREFycmF5KGxlbmd0aCwgZnVuYyl7XG4gICAgcmV0dXJuIG5ldyBBcnJheShsZW5ndGgpLmZpbGwodW5kZWZpbmVkKS5tYXAoXG4gICAgICAgICh1bnVzZWQsIGkpID0+IGZ1bmMoaSlcbiAgICApO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlMkRBcnJheShkaW1zLCBmdW5jKXtcbiAgICByZXR1cm4gY29tcHV0ZTFEQXJyYXkoZGltcy5oZWlnaHQsXG4gICAgICAgIGkgPT4gY29tcHV0ZTFEQXJyYXkoZGltcy53aWR0aCxcbiAgICAgICAgICAgIGkyID0+IGZ1bmMobmV3IFZlY3RvcihpMiwgaSkpXG4gICAgICAgIClcbiAgICApO1xufVxuXG5jb25zdCBESVJTNCA9IFtcbiAgICBuZXcgVmVjdG9yKDEsIDApLFxuICAgIG5ldyBWZWN0b3IoMCwgMSksXG4gICAgbmV3IFZlY3RvcigtMSwgMCksXG4gICAgbmV3IFZlY3RvcigwLCAtMSlcbl07XG5cbmZ1bmN0aW9uIGZsYXR0ZW4oYXJyKXtcbiAgICByZXR1cm4gW10uY29uY2F0KC4uLmFycik7XG59XG5cbmNsYXNzIFNjYWxhYmxlVmlld3BvcnRNYW5hZ2Vye1xuICAgIGNvbnN0cnVjdG9yKHBvcyA9IG5ldyBWZWN0b3IoMCwgMCksIHNjYWxlID0gMS4wKXtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcbiAgICB9XG4gICAgdmlld3BvcnRUb1dvcmxkKHZlYyl7XG4gICAgICAgIHJldHVybiB2ZWMubXVsdGlwbHkodGhpcy5zY2FsZSkuYWRkKHRoaXMucG9zKTtcbiAgICB9XG4gICAgd29ybGRUb1ZpZXdwb3J0KHZlYyl7XG4gICAgICAgIHJldHVybiB2ZWMuc3VidHJhY3QodGhpcy5wb3MpLmRpdmlkZSh0aGlzLnNjYWxlKTtcbiAgICB9XG4gICAgdHJhbnNsYXRlKHZlYyl7XG4gICAgICAgIHRoaXMucG9zID0gdGhpcy5wb3Muc3VidHJhY3QodmVjLm11bHRpcGx5KHRoaXMuc2NhbGUpKTtcbiAgICB9XG4gICAgc2NhbGVBdFBvaW50KHNjYWxlQW1vdW50LCBzY2FsZVBvaW50KXtcbiAgICAgICAgY29uc3QgbmV3U2NhbGUgPSB0aGlzLnNjYWxlICogTWF0aC5leHAoc2NhbGVBbW91bnQpO1xuICAgICAgICBjb25zdCBuZXdQb3MgPSB0aGlzLnBvcy5hZGQoc2NhbGVQb2ludC5tdWx0aXBseSh0aGlzLnNjYWxlIC0gbmV3U2NhbGUpKTtcbiAgICAgICAgdGhpcy5zY2FsZSA9IG5ld1NjYWxlO1xuICAgICAgICB0aGlzLnBvcyA9IG5ld1BvcztcbiAgICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFZlY3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBWZWN0b3IoeCwgeSkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVmVjdG9yKTtcblxuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhWZWN0b3IsIFt7XG4gICAgICAgIGtleTogJ2FkZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQob1ZlYykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54ICsgb1ZlYy54LCB0aGlzLnkgKyBvVmVjLnkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzdWJ0cmFjdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJ0cmFjdChvVmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzLnggLSBvVmVjLngsIHRoaXMueSAtIG9WZWMueSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ211bHRpcGx5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG11bHRpcGx5KHNjYWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzLnggKiBzY2FsZSwgdGhpcy55ICogc2NhbGUpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkaXZpZGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGl2aWRlKHNjYWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzLnggLyBzY2FsZSwgdGhpcy55IC8gc2NhbGUpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdlcXVhbHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXF1YWxzKG9WZWMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnggPT0gb1ZlYy54ICYmIHRoaXMueSA9PSBvVmVjLnk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2Zsb29yJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZsb29yKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoTWF0aC5mbG9vcih0aGlzLngpLCBNYXRoLmZsb29yKHRoaXMueSkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkb3QnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZG90KG9WZWMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnggKiBvVmVjLnggKyB0aGlzLnkgKiBvVmVjLnk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldExlbmd0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMZW5ndGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZG90KHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0QW5nbGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QW5nbGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnksIHRoaXMueCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RvQXJyYXknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9BcnJheSgpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldO1xuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ2Zyb21Qb2xhcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmcm9tUG9sYXIociwgcGhpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihyICogTWF0aC5jb3MocGhpKSwgciAqIE1hdGguc2luKHBoaSkpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFZlY3Rvcjtcbn0oKTtcblxuO1xuXG52YXIgRGltZW5zaW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEaW1lbnNpb25zKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERpbWVuc2lvbnMpO1xuXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKERpbWVuc2lvbnMsIFt7XG4gICAgICAgIGtleTogJ2NvbnRhaW5zJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnRhaW5zKHBvcykge1xuICAgICAgICAgICAgcmV0dXJuIGlzUG9pbnRJblJlY3QocG9zLCBuZXcgUmVjdChuZXcgVmVjdG9yKDAsIDApLCB0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEFyZWEnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXJlYSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndpZHRoICogdGhpcy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RvQXJyYXknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9BcnJheSgpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy53aWR0aCwgdGhpcy5oZWlnaHRdO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIERpbWVuc2lvbnM7XG59KCk7XG5cbjtcblxudmFyIENvbG9yID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbG9yKHIsIGcsIGIpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbG9yKTtcblxuICAgICAgICB0aGlzLnIgPSByO1xuICAgICAgICB0aGlzLmcgPSBnO1xuICAgICAgICB0aGlzLmIgPSBiO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDb2xvciwgW3tcbiAgICAgICAga2V5OiAndG9BcnJheScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b0FycmF5KCkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnIsIHRoaXMuZywgdGhpcy5iXTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDb2xvcjtcbn0oKTtcblxuO1xuXG52YXIgUmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZWN0KHBvcywgZGltcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjdCk7XG5cbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuZGltcyA9IGRpbXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFJlY3QsIFt7XG4gICAgICAgIGtleTogJ3gnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcy54O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd5JyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3MueTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnd2lkdGgnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpbXMud2lkdGg7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hlaWdodCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGltcy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2xlZnQnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcy54O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyaWdodCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zLnggKyB0aGlzLmRpbXMud2lkdGg7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RvcCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zLnk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2JvdHRvbScsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zLnkgKyB0aGlzLmRpbXMuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFJlY3Q7XG59KCk7XG5cbjtcblxuZnVuY3Rpb24gaXNQb2ludEluUmVjdChwLCByZWN0KSB7XG4gICAgcmV0dXJuIHAueCA+PSByZWN0LmxlZnQgJiYgcC54IDwgcmVjdC5yaWdodCAmJiBwLnkgPj0gcmVjdC50b3AgJiYgcC55IDwgcmVjdC5ib3R0b207XG59XG5cbnZhciBNT1VTRV9MRUZUID0gMDtcbnZhciBNT1VTRV9SSUdIVCA9IDI7XG52YXIgTU9VU0VfTUlERExFID0gMTtcblxuZnVuY3Rpb24gY29tcHV0ZTFEQXJyYXkobGVuZ3RoLCBmdW5jKSB7XG4gICAgcmV0dXJuIG5ldyBBcnJheShsZW5ndGgpLmZpbGwodW5kZWZpbmVkKS5tYXAoZnVuY3Rpb24gKHVudXNlZCwgaSkge1xuICAgICAgICByZXR1cm4gZnVuYyhpKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZTJEQXJyYXkoZGltcywgZnVuYykge1xuICAgIHJldHVybiBjb21wdXRlMURBcnJheShkaW1zLmhlaWdodCwgZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIGNvbXB1dGUxREFycmF5KGRpbXMud2lkdGgsIGZ1bmN0aW9uIChpMikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmMobmV3IFZlY3RvcihpMiwgaSkpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxudmFyIERJUlM0ID0gW25ldyBWZWN0b3IoMSwgMCksIG5ldyBWZWN0b3IoMCwgMSksIG5ldyBWZWN0b3IoLTEsIDApLCBuZXcgVmVjdG9yKDAsIC0xKV07XG5cbmZ1bmN0aW9uIGZsYXR0ZW4oYXJyKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICByZXR1cm4gKF9yZWYgPSBbXSkuY29uY2F0LmFwcGx5KF9yZWYsIF90b0NvbnN1bWFibGVBcnJheShhcnIpKTtcbn1cblxudmFyIFNjYWxhYmxlVmlld3BvcnRNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNjYWxhYmxlVmlld3BvcnRNYW5hZ2VyKCkge1xuICAgICAgICB2YXIgcG9zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gbmV3IFZlY3RvcigwLCAwKSA6IGFyZ3VtZW50c1swXTtcbiAgICAgICAgdmFyIHNjYWxlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gMS4wIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTY2FsYWJsZVZpZXdwb3J0TWFuYWdlcik7XG5cbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2NhbGFibGVWaWV3cG9ydE1hbmFnZXIsIFt7XG4gICAgICAgIGtleTogJ3ZpZXdwb3J0VG9Xb3JsZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2aWV3cG9ydFRvV29ybGQodmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gdmVjLm11bHRpcGx5KHRoaXMuc2NhbGUpLmFkZCh0aGlzLnBvcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3dvcmxkVG9WaWV3cG9ydCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB3b3JsZFRvVmlld3BvcnQodmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gdmVjLnN1YnRyYWN0KHRoaXMucG9zKS5kaXZpZGUodGhpcy5zY2FsZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RyYW5zbGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFuc2xhdGUodmVjKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IHRoaXMucG9zLnN1YnRyYWN0KHZlYy5tdWx0aXBseSh0aGlzLnNjYWxlKSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NjYWxlQXRQb2ludCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY2FsZUF0UG9pbnQoc2NhbGVBbW91bnQsIHNjYWxlUG9pbnQpIHtcbiAgICAgICAgICAgIHZhciBuZXdTY2FsZSA9IHRoaXMuc2NhbGUgKiBNYXRoLmV4cChzY2FsZUFtb3VudCk7XG4gICAgICAgICAgICB2YXIgbmV3UG9zID0gdGhpcy5wb3MuYWRkKHNjYWxlUG9pbnQubXVsdGlwbHkodGhpcy5zY2FsZSAtIG5ld1NjYWxlKSk7XG4gICAgICAgICAgICB0aGlzLnNjYWxlID0gbmV3U2NhbGU7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IG5ld1BvcztcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBTY2FsYWJsZVZpZXdwb3J0TWFuYWdlcjtcbn0oKTtcblxuO1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIGdldENhbnZhc01vdXNlUG9zKGNhbnZhcywgZXYpIHtcbiAgICB2YXIgYm91bmRpbmdSZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiBuZXcgVmVjdG9yKChldi5jbGllbnRYIC0gYm91bmRpbmdSZWN0LmxlZnQpICogKGNhbnZhcy53aWR0aCAvIGJvdW5kaW5nUmVjdC53aWR0aCksIChldi5jbGllbnRZIC0gYm91bmRpbmdSZWN0LnRvcCkgKiAoY2FudmFzLmhlaWdodCAvIGJvdW5kaW5nUmVjdC5oZWlnaHQpKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsRGlyKGV2KSB7XG4gICAgaWYgKGV2LmRlbHRhWSA9PSAwKSByZXR1cm4gMDtlbHNlIHJldHVybiBldi5kZWx0YVkgLyBNYXRoLmFicyhldi5kZWx0YVkpO1xufVxuXG52YXIgTW91c2VEb3duVHJhY2tlciA9IGZ1bmN0aW9uIE1vdXNlRG93blRyYWNrZXIoY2FudmFzLCBpbml0VHJhY2tDYWxsYmFjaywgdHJhY2tDYWxsYmFjaykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgaXNUcmFja2luZ0VuYWJsZWQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSA6IGFyZ3VtZW50c1szXTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb3VzZURvd25UcmFja2VyKTtcblxuICAgIHRoaXMuaW5pdFRyYWNrQ2FsbGJhY2sgPSBpbml0VHJhY2tDYWxsYmFjaztcbiAgICB0aGlzLnRyYWNrQ2FsbGJhY2sgPSB0cmFja0NhbGxiYWNrO1xuICAgIHRoaXMuaXNUcmFja2luZ0VuYWJsZWQgPSBpc1RyYWNraW5nRW5hYmxlZDtcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcblxuICAgIHRoaXMub25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgaWYgKF90aGlzLmlzVHJhY2tpbmdFbmFibGVkKGV2KSkge1xuICAgICAgICAgICAgX3RoaXMuaW5pdFRyYWNrQ2FsbGJhY2soZXYpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIF90aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgX3RoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgICAgIF90aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBfdGhpcy5vbk1vdXNlRG93bik7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0aGlzLm9uTW91c2VVcCA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICAvL3RoaXMudHJhY2tDYWxsYmFjayhldik7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBfdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgX3RoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgX3RoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIF90aGlzLm9uTW91c2VEb3duKTtcbiAgICB9O1xuICAgIHRoaXMub25Nb3VzZU1vdmUgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgX3RoaXMudHJhY2tDYWxsYmFjayhldik7XG4gICAgfTtcblxuICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xufTtcblxuO1xuXG52YXIgRHJhZ01hbmFnZXIgPSBmdW5jdGlvbiAoX01vdXNlRG93blRyYWNrZXIpIHtcbiAgICBfaW5oZXJpdHMoRHJhZ01hbmFnZXIsIF9Nb3VzZURvd25UcmFja2VyKTtcblxuICAgIGZ1bmN0aW9uIERyYWdNYW5hZ2VyKGNhbnZhcywgZHJhZ0NhbGxiYWNrKSB7XG4gICAgICAgIHZhciBpc0RyYWdFbmFibGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSA6IGFyZ3VtZW50c1syXTtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJhZ01hbmFnZXIpO1xuXG4gICAgICAgIHZhciBfdGhpczIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRHJhZ01hbmFnZXIpLmNhbGwodGhpcywgY2FudmFzLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIF90aGlzMi5wcmV2TW91c2VQb3MgPSBnZXRDYW52YXNNb3VzZVBvcyhfdGhpczIuY2FudmFzLCBldik7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgdmFyIG1vdXNlUG9zID0gZ2V0Q2FudmFzTW91c2VQb3MoX3RoaXMyLmNhbnZhcywgZXYpO1xuICAgICAgICAgICAgZHJhZ0NhbGxiYWNrKG1vdXNlUG9zLnN1YnRyYWN0KF90aGlzMi5wcmV2TW91c2VQb3MpKTtcbiAgICAgICAgICAgIF90aGlzMi5wcmV2TW91c2VQb3MgPSBtb3VzZVBvcztcbiAgICAgICAgfSwgaXNEcmFnRW5hYmxlZCkpO1xuXG4gICAgICAgIF90aGlzMi5wcmV2TW91c2VQb3MgPSBuZXcgVmVjdG9yKDAsIDApO1xuICAgICAgICByZXR1cm4gX3RoaXMyO1xuICAgIH1cblxuICAgIHJldHVybiBEcmFnTWFuYWdlcjtcbn0oTW91c2VEb3duVHJhY2tlcik7XG5cbjtcblxuZnVuY3Rpb24gc2V0Q2FudmFzU21vb3RoaW5nKGN0eCwgZW5hYmxlKSB7XG4gICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbiAgICBjdHgubW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xuICAgIGN0eC53ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBlbmFibGU7XG4gICAgY3R4Lm1uSW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYW52YXMoY29udGFpbmVyLCBib3VuZGluZ1JlY3QpIHtcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLndpZHRoID0gYm91bmRpbmdSZWN0LndpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBib3VuZGluZ1JlY3QuaGVpZ2h0O1xuICAgIGNhbnZhcy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgY2FudmFzLnN0eWxlLmxlZnQgPSBib3VuZGluZ1JlY3QubGVmdC50b1N0cmluZygpICsgJ3B4JztcbiAgICBjYW52YXMuc3R5bGUudG9wID0gYm91bmRpbmdSZWN0LnRvcC50b1N0cmluZygpICsgJ3B4JztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcbiAgICByZXR1cm4gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG59XG5cbmZ1bmN0aW9uIGdldENhbnZhc0RpbXMoY3R4KSB7XG4gICAgcmV0dXJuIG5ldyBEaW1lbnNpb25zKGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbn1cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gY29tcGlsZVNoYWRlcihjdHgsIHNyYywgdHlwZSkge1xuICAgIHZhciBzaGFkZXIgPSBjdHguY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgIGN0eC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzcmMpO1xuICAgIGN0eC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgaWYgKCFjdHguZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgY3R4LkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhzcmMpO1xuICAgICAgICB0aHJvdyAnU2hhZGVyIGNvbXBpbGUgZXJyb3I6ICcgKyBjdHguZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpO1xuICAgIH1cbiAgICByZXR1cm4gc2hhZGVyO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9ncmFtKGN0eCwgdmVydFNyYywgZnJhZ1NyYykge1xuICAgIHZhciBwcm9ncmFtID0gY3R4LmNyZWF0ZVByb2dyYW0oKTtcbiAgICBjdHguYXR0YWNoU2hhZGVyKHByb2dyYW0sIGNvbXBpbGVTaGFkZXIoY3R4LCB2ZXJ0U3JjLCBjdHguVkVSVEVYX1NIQURFUikpO1xuICAgIGN0eC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgY29tcGlsZVNoYWRlcihjdHgsIGZyYWdTcmMsIGN0eC5GUkFHTUVOVF9TSEFERVIpKTtcbiAgICBjdHgubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgcmV0dXJuIHByb2dyYW07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbXB1dGVUZXh0dXJlKGN0eCwgZGltcykge1xuICAgIHZhciB0ZXhUeXBlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gY3R4LkZMT0FUIDogYXJndW1lbnRzWzJdO1xuICAgIHZhciBjb250ZW50cyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbM107XG5cbiAgICB2YXIgdGV4ID0gY3R4LmNyZWF0ZVRleHR1cmUoKTtcbiAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleCk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1MsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9ULCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgY3R4LnRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGN0eC5SR0JBLCBkaW1zLndpZHRoLCBkaW1zLmhlaWdodCwgMCwgY3R4LlJHQkEsIHRleFR5cGUsIGNvbnRlbnRzKTtcbiAgICByZXR1cm4gdGV4O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGQk8oY3R4LCBleHREQiwgdGV4dHVyZXMpIHtcbiAgICB2YXIgZmJvID0gY3R4LmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZibyk7XG4gICAgaWYgKHRleHR1cmVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZXh0REIuZHJhd0J1ZmZlcnNXRUJHTChjb21wdXRlMURBcnJheSh0ZXh0dXJlcy5sZW5ndGgsIGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICByZXR1cm4gZXh0REJbJ0NPTE9SX0FUVEFDSE1FTlQnICsgaS50b1N0cmluZygpICsgJ19XRUJHTCddO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRleHR1cmVzLmZvckVhY2goZnVuY3Rpb24gKHRleCwgaSkge1xuICAgICAgICAgICAgY3R4LmZyYW1lYnVmZmVyVGV4dHVyZTJEKGN0eC5GUkFNRUJVRkZFUiwgZXh0REJbJ0NPTE9SX0FUVEFDSE1FTlQnICsgaS50b1N0cmluZygpICsgJ19XRUJHTCddLCBjdHguVEVYVFVSRV8yRCwgdGV4LCAwKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmZyYW1lYnVmZmVyVGV4dHVyZTJEKGN0eC5GUkFNRUJVRkZFUiwgY3R4LkNPTE9SX0FUVEFDSE1FTlQwLCBjdHguVEVYVFVSRV8yRCwgdGV4dHVyZXNbMF0sIDApO1xuICAgIH1cbiAgICBpZiAoY3R4LmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoY3R4LkZSQU1FQlVGRkVSKSAhPSBjdHguRlJBTUVCVUZGRVJfQ09NUExFVEUpIHtcbiAgICAgICAgdGhyb3cgJ0dMX0ZSQU1FQlVGRkVSX0NPTVBMRVRFIGZhaWxlZC4nO1xuICAgIH1cbiAgICByZXR1cm4gZmJvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcnJheUJ1ZmZlcihjdHgsIGJ1ZlR5cGUsIGNvbnRlbnRzKSB7XG4gICAgdmFyIGJ1ZiA9IGN0eC5jcmVhdGVCdWZmZXIoKTtcbiAgICBjdHguYmluZEJ1ZmZlcihidWZUeXBlLCBidWYpO1xuICAgIGN0eC5idWZmZXJEYXRhKGJ1ZlR5cGUsIGNvbnRlbnRzLCBjdHguU1RBVElDX0RSQVcpO1xuICAgIHJldHVybiBidWY7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVmVydGV4QXR0cmliKGN0eCwgcHJvZ3JhbSwgYXR0cmliTmFtZSwgaXRlbVNpemUsIGJ1Zikge1xuICAgIHZhciBhdHRyaWIgPSBjdHguZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgYXR0cmliTmFtZSk7XG4gICAgY3R4LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGF0dHJpYik7XG4gICAgY3R4LmJpbmRCdWZmZXIoY3R4LkFSUkFZX0JVRkZFUiwgYnVmKTtcbiAgICBjdHgudmVydGV4QXR0cmliUG9pbnRlcihhdHRyaWIsIGl0ZW1TaXplLCBjdHguRkxPQVQsIGZhbHNlLCAwLCAwKTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJUZXh0dXJlcyhjdHgsIHByb2dyYW0sIHRleE5hbWVzKSB7XG4gICAgdGV4TmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodGV4TmFtZSwgaSkge1xuICAgICAgICB2YXIgdGV4TG9jID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0ZXhOYW1lKTtcbiAgICAgICAgY3R4LnVuaWZvcm0xaSh0ZXhMb2MsIGkpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclVuaWZvcm1zKGN0eCwgcHJvZ3JhbSwgdW5pZm9ybXMsIHZhbHMpIHtcbiAgICB1bmlmb3Jtcy5mb3JFYWNoKGZ1bmN0aW9uICh1bmlmb3JtKSB7XG4gICAgICAgIHZhciB1bmlmb3JtTG9jID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB1bmlmb3JtLm5hbWUpO1xuICAgICAgICBpZiAodW5pZm9ybS50eXBlID09ICdpbnQnKSB7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFpKHVuaWZvcm1Mb2MsIHZhbHNbdW5pZm9ybS5uYW1lXSk7XG4gICAgICAgIH0gZWxzZSBpZiAodW5pZm9ybS50eXBlID09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIGN0eC51bmlmb3JtMWYodW5pZm9ybUxvYywgdmFsc1t1bmlmb3JtLm5hbWVdKTtcbiAgICAgICAgfSBlbHNlIGlmICgvXml2ZWNbMi00XSQvZy50ZXN0KHVuaWZvcm0udHlwZSkpIHtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyB1bmlmb3JtLnR5cGVbNF0udG9TdHJpbmcoKSArICdpdiddKHVuaWZvcm1Mb2MsIG5ldyBJbnQzMkFycmF5KHZhbHNbdW5pZm9ybS5uYW1lXSkpO1xuICAgICAgICB9IGVsc2UgaWYgKC9edmVjWzItNF0kL2cudGVzdCh1bmlmb3JtLnR5cGUpKSB7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgdW5pZm9ybS50eXBlWzNdLnRvU3RyaW5nKCkgKyAnZnYnXSh1bmlmb3JtTG9jLCBuZXcgRmxvYXQzMkFycmF5KHZhbHNbdW5pZm9ybS5uYW1lXSkpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGJpbmRUZXh0dXJlcyhjdHgsIHRleHR1cmVzKSB7XG4gICAgdGV4dHVyZXMuZm9yRWFjaChmdW5jdGlvbiAodGV4dHVyZSwgaSkge1xuICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHhbJ1RFWFRVUkUnICsgaS50b1N0cmluZygpXSk7XG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4dHVyZSk7XG4gICAgfSk7XG59XG5cbnZhciBGVUxMU0NSRUVOX1FVQURfUE9TX0FSUkFZID0gbmV3IEZsb2F0MzJBcnJheShbLTEuMCwgLTEuMCwgMS4wLCAtMS4wLCAxLjAsIDEuMCwgLTEuMCwgMS4wXSk7XG5cbnZhciBGVUxMU0NSRUVOX1FVQURfSU5ERVhfQVJSQVkgPSBuZXcgVWludDE2QXJyYXkoWzAsIDEsIDIsIDAsIDIsIDNdKTtcblxudmFyIEZVTExTQ1JFRU5fUVVBRF9OVU1fVkVSVElDRVMgPSA2O1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIEdQR1BVS2VybmVsUmVzdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdQR1BVS2VybmVsUmVzdWx0KGN0eCwgZmJvLCB0ZXh0dXJlcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR1BHUFVLZXJuZWxSZXN1bHQpO1xuXG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLmZibyA9IGZibztcbiAgICAgICAgdGhpcy50ZXh0dXJlcyA9IHRleHR1cmVzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhHUEdQVUtlcm5lbFJlc3VsdCwgW3tcbiAgICAgICAga2V5OiAnZGlzcG9zZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKHRoaXMuZmJvICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5kZWxldGVGcmFtZWJ1ZmZlcih0aGlzLmZibyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRleHR1cmVzLmZvckVhY2goZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jdHguZGVsZXRlVGV4dHVyZSh0ZXh0dXJlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEdQR1BVS2VybmVsUmVzdWx0O1xufSgpO1xuXG47XG5cbnZhciBHUEdQVUtlcm5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHUEdQVUtlcm5lbChtYW5hZ2VyLCBwcm9ncmFtKSB7XG4gICAgICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyBbXSA6IGFyZ3VtZW50c1syXTtcbiAgICAgICAgdmFyIG51bU91dHB1dHMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzNdO1xuICAgICAgICB2YXIgaXNHcmFwaGljYWwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDQgfHwgYXJndW1lbnRzWzRdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1s0XTtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR1BHUFVLZXJuZWwpO1xuXG4gICAgICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgICB0aGlzLm51bU91dHB1dHMgPSBudW1PdXRwdXRzO1xuICAgICAgICB0aGlzLmlzR3JhcGhpY2FsID0gaXNHcmFwaGljYWw7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEdQR1BVS2VybmVsLCBbe1xuICAgICAgICBrZXk6ICdydW4nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcnVuKGlucHV0VGV4dHVyZXMsIG91dHB1dERpbXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgcGFyYW1WYWxzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICB2YXIgdXNlRmxvYXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzNdO1xuXG4gICAgICAgICAgICB0aGlzLmN0eC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XG4gICAgICAgICAgICByZWdpc3RlclVuaWZvcm1zKHRoaXMuY3R4LCB0aGlzLnByb2dyYW0sIHRoaXMucGFyYW1zLCBwYXJhbVZhbHMpO1xuICAgICAgICAgICAgcmVnaXN0ZXJVbmlmb3Jtcyh0aGlzLmN0eCwgdGhpcy5wcm9ncmFtLCBbe1xuICAgICAgICAgICAgICAgIG5hbWU6ICd1RGltcycsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2l2ZWMyJ1xuICAgICAgICAgICAgfV0sIHtcbiAgICAgICAgICAgICAgICB1RGltczogb3V0cHV0RGltcy50b0FycmF5KClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgb3V0cHV0VGV4dHVyZXMgPSBjb21wdXRlMURBcnJheSh0aGlzLm51bU91dHB1dHMsIGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbXB1dGVUZXh0dXJlKF90aGlzMi5jdHgsIG91dHB1dERpbXMsIHVzZUZsb2F0ID8gX3RoaXMyLmN0eC5GTE9BVCA6IF90aGlzMi5jdHguVU5TSUdORURfQllURSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGZibyA9IHRoaXMuaXNHcmFwaGljYWwgPyBudWxsIDogY3JlYXRlRkJPKHRoaXMuY3R4LCB0aGlzLmV4dERCLCBvdXRwdXRUZXh0dXJlcyk7XG4gICAgICAgICAgICB0aGlzLmN0eC5iaW5kRnJhbWVidWZmZXIodGhpcy5jdHguRlJBTUVCVUZGRVIsIGZibyk7XG5cbiAgICAgICAgICAgIGJpbmRUZXh0dXJlcyh0aGlzLmN0eCwgaW5wdXRUZXh0dXJlcyk7XG5cbiAgICAgICAgICAgIHRoaXMuY3R4LnZpZXdwb3J0KDAsIDAsIG91dHB1dERpbXMud2lkdGgsIG91dHB1dERpbXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5kcmF3RnVsbHNjcmVlblF1YWQodGhpcy5wcm9ncmFtKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHUEdQVUtlcm5lbFJlc3VsdCh0aGlzLmN0eCwgZmJvLCBvdXRwdXRUZXh0dXJlcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2N0eCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFuYWdlci5jdHg7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2V4dERCJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYW5hZ2VyLmV4dERCO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEdQR1BVS2VybmVsO1xufSgpO1xuXG47XG5cbnZhciBHUEdQVU1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR1BHUFVNYW5hZ2VyKGN0eCkge1xuICAgICAgICB2YXIgdXNlRmxvYXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHUEdQVU1hbmFnZXIpO1xuXG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLmV4dERCID0gdGhpcy5jdHguZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kcmF3X2J1ZmZlcnMnKTtcbiAgICAgICAgaWYgKHVzZUZsb2F0KSB7XG4gICAgICAgICAgICB0aGlzLmN0eC5nZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2Zsb2F0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnF1YWRQb3NCdWZmZXIgPSBjcmVhdGVBcnJheUJ1ZmZlcih0aGlzLmN0eCwgdGhpcy5jdHguQVJSQVlfQlVGRkVSLCBGVUxMU0NSRUVOX1FVQURfUE9TX0FSUkFZKTtcbiAgICAgICAgdGhpcy5xdWFkSW5kZXhCdWZmZXIgPSBjcmVhdGVBcnJheUJ1ZmZlcih0aGlzLmN0eCwgdGhpcy5jdHguRUxFTUVOVF9BUlJBWV9CVUZGRVIsIEZVTExTQ1JFRU5fUVVBRF9JTkRFWF9BUlJBWSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEdQR1BVTWFuYWdlciwgW3tcbiAgICAgICAga2V5OiAnZHJhd0Z1bGxzY3JlZW5RdWFkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdGdWxsc2NyZWVuUXVhZChwcm9ncmFtKSB7XG4gICAgICAgICAgICB0aGlzLmN0eC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICAgICAgdGhpcy5jdHguYmluZEJ1ZmZlcih0aGlzLmN0eC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5xdWFkSW5kZXhCdWZmZXIpO1xuICAgICAgICAgICAgdGhpcy5jdHguZHJhd0VsZW1lbnRzKHRoaXMuY3R4LlRSSUFOR0xFX1NUUklQLCBGVUxMU0NSRUVOX1FVQURfTlVNX1ZFUlRJQ0VTLCB0aGlzLmN0eC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlYWRQYWNrZWRGbG9hdERhdGEnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZFBhY2tlZEZsb2F0RGF0YShkaW1zKSB7XG4gICAgICAgICAgICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkoZGltcy5nZXRBcmVhKCkgKiA0KTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnJlYWRQaXhlbHMoMCwgMCwgZGltcy53aWR0aCwgZGltcy5oZWlnaHQsIHRoaXMuY3R4LlJHQkEsIHRoaXMuY3R4LlVOU0lHTkVEX0JZVEUsIGJ1Zik7XG4gICAgICAgICAgICByZXR1cm4gbmV3IC8qRmxvYXQzMkFycmF5Ki9VaW50OEFycmF5KGJ1Zi5idWZmZXIpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhcnJheVRvVGV4dHVyZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhcnJheVRvVGV4dHVyZShkaW1zLCBhcnIpIHtcbiAgICAgICAgICAgIHZhciB1c2VGbG9hdCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMl07XG5cbiAgICAgICAgICAgIHZhciBmbG9hdEZsYXR0ZW5lZEFyciA9IG5ldyBGbG9hdDMyQXJyYXkoZmxhdHRlbihmbGF0dGVuKGFycikpKTtcbiAgICAgICAgICAgIHZhciBmbGF0dGVuZWRBcnIgPSB1c2VGbG9hdCA/IGZsb2F0RmxhdHRlbmVkQXJyIDogbmV3IFVpbnQ4QXJyYXkoZmxhdHRlbmVkQXJyLmJ1ZmZlcik7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlQ29tcHV0ZVRleHR1cmUodGhpcy5jdHgsIGRpbXMsIHVzZUZsb2F0ID8gdGhpcy5jdHguRkxPQVQgOiB0aGlzLmN0eC5VTlNJR05FRF9CWVRFLCBmbGF0dGVuZWRBcnIpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0ZXh0dXJlVG9BcnJheScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0ZXh0dXJlVG9BcnJheShkaW1zLCB0ZXgpIHtcbiAgICAgICAgICAgIHZhciB1c2VGbG9hdCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgICAgICAgdmFyIGNvbXB1dGVGdW5jID0gJ3ZlYzQgY1ZhbCA9IHRleHR1cmUyRCh1SW5wdXQsIHZDb29yZCk7XFxuZ2xfRnJhZ0RhdGFbMF0gPSAnICsgKHVzZUZsb2F0ID8gJ3BhY2tGbG9hdChjVmFsLicgKyAneHl6dydbY29tcG9uZW50XSArICcpJyA6ICdjVmFsJykgKyAnO1xcbic7XG4gICAgICAgICAgICB2YXIgaW5wdXROYW1lcyA9IFsndUlucHV0J107XG4gICAgICAgICAgICB2YXIga2VybmVsID0gdGhpcy5jcmVhdGVLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIGRpbXMsIFtdLCAxLCBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFKTtcblxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBrZXJuZWwucnVuKFt0ZXhdLCBkaW1zLCB7fSwgZmFsc2UpO1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMucmVhZFBhY2tlZEZsb2F0RGF0YShkaW1zKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZGlzcG9zZSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gY29tcHV0ZTJEQXJyYXkoZGltcywgZnVuY3Rpb24gKHBvcylcbiAgICAgICAgICAgIC8vb3V0cHV0W3Bvcy55ICogZGltcy53aWR0aCArIHBvcy54XVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSBvdXRwdXQuc2xpY2UoKHBvcy55ICogZGltcy53aWR0aCArIHBvcy54KSAqIDQsIChwb3MueSAqIGRpbXMud2lkdGggKyBwb3MueCkgKiA0ICsgNCk7XG4gICAgICAgICAgICAgICAgdmFyIGFzU3RyaW5nID0gJyc7XG4gICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHJlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFzU3RyaW5nICs9ICgnMDAwMDAwMDAnICsgeC50b1N0cmluZygyKSkuc3Vic3RyKC04KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzU3RyaW5nO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZUtlcm5lbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIG91dHB1dERpbXMpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBbXSA6IGFyZ3VtZW50c1szXTtcbiAgICAgICAgICAgIHZhciBudW1PdXRwdXRzID0gYXJndW1lbnRzLmxlbmd0aCA8PSA0IHx8IGFyZ3VtZW50c1s0XSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1s0XTtcbiAgICAgICAgICAgIHZhciBpbmNsdWRlU3JjID0gYXJndW1lbnRzLmxlbmd0aCA8PSA1IHx8IGFyZ3VtZW50c1s1XSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbNV07XG4gICAgICAgICAgICB2YXIgaXNHcmFwaGljYWwgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDYgfHwgYXJndW1lbnRzWzZdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1s2XTtcblxuICAgICAgICAgICAgdmFyIHVuaWZvcm1zID0gW10uY29uY2F0KHBhcmFtcywgaW5wdXROYW1lcy5tYXAoZnVuY3Rpb24gKGlucHV0TmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzYW1wbGVyMkQnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpbnB1dE5hbWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksIFt7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2l2ZWMyJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAndURpbXMnXG4gICAgICAgICAgICB9XSk7XG4gICAgICAgICAgICB2YXIgdmVydFNoYWRlclNyYyA9IEdQR1BVTWFuYWdlci5jcmVhdGVWZXJ0U2hhZGVyU3JjKGlzR3JhcGhpY2FsKTtcbiAgICAgICAgICAgIHZhciBmcmFnU2hhZGVyU3JjID0gR1BHUFVNYW5hZ2VyLmNyZWF0ZUZyYWdTaGFkZXJTcmMoY29tcHV0ZUZ1bmMudHJpbSgpLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyAgICAnICsgbGluZTtcbiAgICAgICAgICAgIH0pLmpvaW4oJ1xcbicpICsgJ1xcbicsIHVuaWZvcm1zLCBpbmNsdWRlU3JjLCBudW1PdXRwdXRzID4gMSk7XG4gICAgICAgICAgICB2YXIgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW0odGhpcy5jdHgsIHZlcnRTaGFkZXJTcmMsIGZyYWdTaGFkZXJTcmMpO1xuXG4gICAgICAgICAgICB0aGlzLmN0eC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICAgICAgcmVnaXN0ZXJWZXJ0ZXhBdHRyaWIodGhpcy5jdHgsIHByb2dyYW0sICdhUG9zJywgMiwgdGhpcy5xdWFkUG9zQnVmZmVyKTtcbiAgICAgICAgICAgIHJlZ2lzdGVyVGV4dHVyZXModGhpcy5jdHgsIHByb2dyYW0sIGlucHV0TmFtZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBHUEdQVUtlcm5lbCh0aGlzLCBwcm9ncmFtLCBwYXJhbXMsIG51bU91dHB1dHMsIGlzR3JhcGhpY2FsKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlR3JhcGhpY2FsS2VybmVsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUdyYXBoaWNhbEtlcm5lbChjb21wdXRlRnVuYywgaW5wdXROYW1lcywgb3V0cHV0RGltcykge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IFtdIDogYXJndW1lbnRzWzNdO1xuICAgICAgICAgICAgdmFyIGluY2x1ZGVTcmMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDQgfHwgYXJndW1lbnRzWzRdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1s0XTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zLCBwYXJhbXMsIDAsIGluY2x1ZGVTcmMsIHRydWUpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEdQR1BVTWFuYWdlcjtcbn0oKTtcblxuO1xuXG4vLyBDcmVkaXQ6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL1Rvb1RhbGxOYXRlLzQ3NTA5NTNcbkdQR1BVTWFuYWdlci5lbmRpYW5uZXNzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBiID0gbmV3IEFycmF5QnVmZmVyKDQpO1xuICAgIHZhciBhID0gbmV3IFVpbnQzMkFycmF5KGIpO1xuICAgIHZhciBjID0gbmV3IFVpbnQ4QXJyYXkoYik7XG4gICAgYVswXSA9IDB4ZGVhZGJlZWY7XG4gICAgaWYgKGNbMF0gPT0gMHhlZikgcmV0dXJuICdMRSc7XG4gICAgaWYgKGNbMF0gPT0gMHhkZSkgcmV0dXJuICdCRSc7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGVuZGlhbm5lc3MnKTtcbn0oKTtcblxuR1BHUFVNYW5hZ2VyLmdldENhbnZhc0NvbnRleHQgPSBmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIGRlcHRoOiBmYWxzZSxcbiAgICAgICAgYW50aWFsaWFzOiBmYWxzZVxuICAgIH07XG4gICAgcmV0dXJuIGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcsIG9wdGlvbnMpIHx8IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbC1leHBlcmltZW50YWwnLCBvcHRpb25zKTtcbn07XG5cbkdQR1BVTWFuYWdlci5jcmVhdGVWZXJ0U2hhZGVyU3JjID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmbGlwWSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzBdO1xuICAgIHJldHVybiAncHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcblxcbmF0dHJpYnV0ZSB2ZWMyIGFQb3M7XFxuXFxudmFyeWluZyB2ZWMyIHZDb29yZDtcXG5cXG52b2lkIG1haW4oKXtcXG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCcgKyAoZmxpcFkgPyAnYVBvcy54LCAtYVBvcy55JyA6ICdhUG9zJykgKyAnLCAwLjAsIDEuMCk7XFxuICAgIHZDb29yZCA9IChhUG9zICsgMS4wKSAvIDIuMDtcXG59Jztcbn07XG5cbkdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREUgPSAnZmxvYXQgcm91bmQoZmxvYXQgeCkge1xcbiAgICByZXR1cm4gZmxvb3IoeCArIDAuNSk7XFxufVxcblxcbnZlYzIgaW50ZWdlck1vZCh2ZWMyIHgsIGZsb2F0IHkpIHtcXG4gICAgdmVjMiByZXMgPSBmbG9vcihtb2QoeCwgeSkpO1xcbiAgICByZXR1cm4gcmVzICogc3RlcCgxLjAgLSBmbG9vcih5KSwgLXJlcyk7XFxufVxcblxcbmZsb2F0IGludGVnZXJNb2QoZmxvYXQgeCwgZmxvYXQgeSkge1xcbiAgICBmbG9hdCByZXMgPSBmbG9vcihtb2QoeCwgeSkpO1xcbiAgICByZXR1cm4gcmVzICogKHJlcyA+IGZsb29yKHkpIC0gMS4wID8gMC4wIDogMS4wKTtcXG59XFxuXFxuY29uc3QgdmVjMiBNQUdJQ19WRUMgPSB2ZWMyKDEuMCwgLTI1Ni4wKTtcXG5jb25zdCB2ZWM0IFNDQUxFX0ZBQ1RPUiA9IHZlYzQoMS4wLCAyNTYuMCwgNjU1MzYuMCwgMC4wKTtcXG5jb25zdCB2ZWM0IFNDQUxFX0ZBQ1RPUl9JTlYgPSB2ZWM0KDEuMCwgMC4wMDM5MDYyNSwgMC4wMDAwMTUyNTg3ODkwNjI1LCAwLjApOyAvLyAxLCAxLzI1NiwgMS82NTUzNlxcbmZsb2F0IHVucGFja0Zsb2F0KHZlYzQgcmdiYSkge1xcbicgKyAoR1BHUFVNYW5hZ2VyLmVuZGlhbm5lc3MgPT0gJ0xFJyA/ICcnIDogJyAgICByZ2JhLnJnYmEgPSByZ2JhLmFiZ3I7XFxuJykgKyAnICAgIHJnYmEgKj0gMjU1LjA7XFxuICAgIHZlYzIgZ3RlMTI4O1xcbiAgICBndGUxMjgueCA9IHJnYmEuYiA+PSAxMjguMCA/IDEuMCA6IDAuMDtcXG4gICAgZ3RlMTI4LnkgPSByZ2JhLmEgPj0gMTI4LjAgPyAxLjAgOiAwLjA7XFxuICAgIGZsb2F0IGV4cG9uZW50ID0gMi4wICogcmdiYS5hIC0gMTI3LjAgKyBkb3QoZ3RlMTI4LCBNQUdJQ19WRUMpO1xcbiAgICBmbG9hdCByZXMgPSBleHAyKHJvdW5kKGV4cG9uZW50KSk7XFxuICAgIHJnYmEuYiA9IHJnYmEuYiAtIDEyOC4wICogZ3RlMTI4Lng7XFxuICAgIHJlcyA9IGRvdChyZ2JhLCBTQ0FMRV9GQUNUT1IpICogZXhwMihyb3VuZChleHBvbmVudC0yMy4wKSkgKyByZXM7XFxuICAgIHJlcyAqPSBndGUxMjgueSAqIC0yLjAgKyAxLjA7XFxuICAgIHJldHVybiByZXM7XFxufVxcblxcbnZlYzQgcGFja0Zsb2F0KGZsb2F0IGYpIHtcXG4gICAgZmxvYXQgRiA9IGFicyhmKTtcXG4gICAgZmxvYXQgc2lnbiA9IGYgPCAwLjAgPyAxLjAgOiAwLjA7XFxuICAgIGZsb2F0IGV4cG9uZW50ID0gZmxvb3IobG9nMihGKSk7XFxuICAgIGZsb2F0IG1hbnRpc3NhID0gKGV4cDIoLWV4cG9uZW50KSAqIEYpO1xcbiAgICAvLyBleHBvbmVudCArPSBmbG9vcihsb2cyKG1hbnRpc3NhKSk7XFxuICAgIHZlYzQgcmdiYSA9IHZlYzQoRiAqIGV4cDIoMjMuMC1leHBvbmVudCkpICogU0NBTEVfRkFDVE9SX0lOVjtcXG4gICAgcmdiYS5yZyA9IGludGVnZXJNb2QocmdiYS5yZywgMjU2LjApO1xcbiAgICByZ2JhLmIgPSBpbnRlZ2VyTW9kKHJnYmEuYiwgMTI4LjApO1xcbiAgICByZ2JhLmEgPSBleHBvbmVudCowLjUgKyA2My41O1xcbiAgICByZ2JhLmJhICs9IHZlYzIoaW50ZWdlck1vZChleHBvbmVudCsxMjcuMCwgMi4wKSwgc2lnbikgKiAxMjguMDtcXG4gICAgcmdiYSAqPSAwLjAwMzkyMTU2OTsgLy8gMS8yNTVcXG4nICsgKEdQR1BVTWFuYWdlci5lbmRpYW5uZXNzID09ICdMRScgPyAnJyA6ICcgICAgcmdiYS5yZ2JhID0gcmdiYS5hYmdyO1xcbicpICsgJyAgICByZXR1cm4gcmdiYTtcXG59XFxuXFxuJztcblxuR1BHUFVNYW5hZ2VyLmNyZWF0ZUZyYWdTaGFkZXJTcmMgPSBmdW5jdGlvbiAoY29tcHV0ZUZ1bmMsIHVuaWZvcm1zKSB7XG4gICAgdmFyIGluY2x1ZGVTcmMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1syXTtcbiAgICB2YXIgdXNlRHJhd0J1ZmZlcnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB0cnVlIDogYXJndW1lbnRzWzNdO1xuICAgIHJldHVybiBbdXNlRHJhd0J1ZmZlcnMgPyAnI2V4dGVuc2lvbiBHTF9FWFRfZHJhd19idWZmZXJzOiByZXF1aXJlXFxuJyA6ICcnLCAncHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnByZWNpc2lvbiBoaWdocCBzYW1wbGVyMkQ7XFxuXFxuI2RlZmluZSBFUFMgMC4wMDAwMDAxXFxuXFxuJ10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh1bmlmb3Jtcy5tYXAoZnVuY3Rpb24gKHVuaWZvcm0pIHtcbiAgICAgICAgcmV0dXJuICd1bmlmb3JtICcgKyB1bmlmb3JtLnR5cGUgKyAnICcgKyB1bmlmb3JtLm5hbWUgKyAnO1xcbic7XG4gICAgfSkpLCBbJ1xcbnZhcnlpbmcgdmVjMiB2Q29vcmQ7XFxuXFxudmVjNCBhcnJHZXQoc2FtcGxlcjJEIGFyciwgaXZlYzIgaWQpe1xcbiAgICByZXR1cm4gdGV4dHVyZTJEKGFyciwgKHZlYzIoaWQpICsgdmVjMigwLjUpKSAvIHZlYzIodURpbXMpKTtcXG59XFxuXFxuJywgaW5jbHVkZVNyYywgJ3ZvaWQgY29tcHV0ZUZ1bmMoKXtcXG4gICAgaXZlYzIgdGhyZWFkSWQgPSBpdmVjMih2Q29vcmQgKiB2ZWMyKHVEaW1zKSk7XFxuJywgY29tcHV0ZUZ1bmMsICd9XFxuXFxudm9pZCBtYWluKCl7XFxuICAgIGNvbXB1dGVGdW5jKCk7XFxufSddKS5qb2luKCcnKTtcbn07XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBSRUQgPSBuZXcgQ29sb3IoMjU1LCAwLCAwKTtcbnZhciBHUkVFTiA9IG5ldyBDb2xvcigwLCAyNTUsIDApO1xudmFyIEJMVUUgPSBuZXcgQ29sb3IoMCwgMCwgMjU1KTtcbnZhciBXSElURSA9IG5ldyBDb2xvcigyNTUsIDI1NSwgMjU1KTtcblxudmFyIENvbnRvdXJlck1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29udG91cmVyTWFuYWdlcihkcmF3RnVuYykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udG91cmVyTWFuYWdlcik7XG5cbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IG5ldyBTY2FsYWJsZVZpZXdwb3J0TWFuYWdlcihuZXcgVmVjdG9yKDAsIDApLCAwLjAxKTtcbiAgICAgICAgdGhpcy56b29tU2Vuc2l0aXZpdHkgPSAwLjM7XG4gICAgICAgIHRoaXMuY29udG91clNwYWNpbmcgPSAxLjA7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbnRvdXJlck1hbmFnZXIsIFt7XG4gICAgICAgIGtleTogJ2NoYW5nZURyYXdGdW5jJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZURyYXdGdW5jKGRyYXdGdW5jLCBpbmNsdWRlU3JjKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgaXNBbmltYXRlZCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzJdO1xuXG4gICAgICAgICAgICB2YXIgY3JlYXRlRmllbGRLZXJuZWwgPSBmdW5jdGlvbiBjcmVhdGVGaWVsZEtlcm5lbChjb29yZCkge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZEZ1bmMgPSAndmVjMiBjUG9zID0gKHZlYzIodGhyZWFkSWQpICogdVNjYWxlKSArIHVQb3M7XFxudmVjMiByZXM7XFxuJyArIGRyYXdGdW5jLnRyaW0oKSArICdcXG4nICtcbiAgICAgICAgICAgICAgICAvL2BnbF9GcmFnRGF0YVswXSA9IHZlYzQoXG4gICAgICAgICAgICAgICAgLy8gICAgcmVzLFxuICAgICAgICAgICAgICAgIC8vICAgIDAuMCwgMC4wXG4gICAgICAgICAgICAgICAgLy8pO1xuICAgICAgICAgICAgICAgICdnbF9GcmFnRGF0YVswXSA9IHBhY2tGbG9hdChyZXMuJyArIGNvb3JkICsgJyk7XFxuJztcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ3BncHVNYW5hZ2VyLmNyZWF0ZUtlcm5lbChmaWVsZEZ1bmMsIFtdLCBfdGhpcy5kaW1zLCBbe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndVNjYWxlJ1xuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZlYzInLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndVBvcydcbiAgICAgICAgICAgICAgICB9XS5jb25jYXQoaXNBbmltYXRlZCA/IFt7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0aW1lJ1xuICAgICAgICAgICAgICAgIH1dIDogW10pLCAxLCBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFICsgaW5jbHVkZVNyYy50cmltKCkgKyAnXFxuXFxuJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5maWVsZEtlcm5lbFggPSBjcmVhdGVGaWVsZEtlcm5lbCgneCcpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEtlcm5lbFkgPSBjcmVhdGVGaWVsZEtlcm5lbCgneScpO1xuXG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNjYWxlID0gMTAuMCAvIHRoaXMuZGltcy53aWR0aDtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQucG9zID0gbmV3IFZlY3RvcigtdGhpcy5kaW1zLndpZHRoLCAtdGhpcy5kaW1zLmhlaWdodCkuZGl2aWRlKDIuMCkubXVsdGlwbHkodGhpcy52aWV3cG9ydC5zY2FsZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRvdXJTcGFjaW5nID0gMS4wO1xuXG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0ZWQgPSBpc0FuaW1hdGVkO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1c2VDYW52YXMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXNlQ2FudmFzKGNhbnZhcykge1xuICAgICAgICAgICAgdGhpcy5jdHggPSBHUEdQVU1hbmFnZXIuZ2V0Q2FudmFzQ29udGV4dChjYW52YXMpO1xuICAgICAgICAgICAgdGhpcy5ncGdwdU1hbmFnZXIgPSBuZXcgR1BHUFVNYW5hZ2VyKHRoaXMuY3R4LCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmRpbXMgPSBnZXRDYW52YXNEaW1zKHRoaXMuY3R4KTtcblxuICAgICAgICAgICAgdGhpcy5wbG90S2VybmVsID0gdGhpcy5ncGdwdU1hbmFnZXIuY3JlYXRlR3JhcGhpY2FsS2VybmVsKENvbnRvdXJlck1hbmFnZXIucGxvdEZ1bmMsIFsndUZpZWxkWCcsICd1RmllbGRZJ10sIHRoaXMuZGltcywgW3tcbiAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICd1Q29udG91clNwYWNpbmcnXG4gICAgICAgICAgICB9XSwgR1BHUFVNYW5hZ2VyLlBBQ0tfRkxPQVRfSU5DTFVERSArIENvbnRvdXJlck1hbmFnZXIuRklFTERfQ0hFQ0tfSU5DTFVERSk7XG5cbiAgICAgICAgICAgIHZhciB0ZXN0RGltcyA9IG5ldyBEaW1lbnNpb25zKDUsIDEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5ncGdwdU1hbmFnZXIudGV4dHVyZVRvQXJyYXkodGVzdERpbXMsIHRoaXMuZ3BncHVNYW5hZ2VyLmNyZWF0ZUtlcm5lbCgnZ2xfRnJhZ0RhdGFbMF0gPSBwYWNrRmxvYXQoLTEuMCAtIGZsb2F0KHRocmVhZElkLngpIC8gNS4wKTtcXG4nLCBbXSwgdGVzdERpbXMsIFtdLCAxLCBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFKS5ydW4oW10sIHRlc3REaW1zLCBbXSwgZmFsc2UpLnRleHR1cmVzWzBdLCBmYWxzZSlbMF0uam9pbignXFxuJykpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkZXN0cm95Q29udGV4dCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95Q29udGV4dCgpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IDE7XG4gICAgICAgICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0ID0gMTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2hhbmdlWm9vbScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2Vab29tKGNoYW5nZUFtb3VudCkge1xuICAgICAgICAgICAgdmFyIHpvb21Qb2ludCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IG5ldyBWZWN0b3IodGhpcy5kaW1zLndpZHRoIC8gMiwgdGhpcy5kaW1zLmhlaWdodCAvIDIpIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnNjYWxlQXRQb2ludCgtY2hhbmdlQW1vdW50ICogdGhpcy56b29tU2Vuc2l0aXZpdHksIHpvb21Qb2ludCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NoYW5nZUNvbnRvdXJTcGFjaW5nJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZUNvbnRvdXJTcGFjaW5nKGNoYW5nZUFtb3VudCkge1xuICAgICAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyAqPSBNYXRoLmV4cChjaGFuZ2VBbW91bnQgKiB0aGlzLnpvb21TZW5zaXRpdml0eSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RyYW5zbGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFuc2xhdGUodHJhbnNsYXRlQW1vdW50KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnRyYW5zbGF0ZSh0cmFuc2xhdGVBbW91bnQpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkcmF3Q29udG91cnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0NvbnRvdXJzKCkge1xuICAgICAgICAgICAgdmFyIHRpbWUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzBdO1xuXG4gICAgICAgICAgICB2YXIgdW5pZm9ybUFzc2lnbm1lbnRzID0ge1xuICAgICAgICAgICAgICAgIHVTY2FsZTogdGhpcy52aWV3cG9ydC5zY2FsZSxcbiAgICAgICAgICAgICAgICB1UG9zOiB0aGlzLnZpZXdwb3J0LnBvcy50b0FycmF5KClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FuaW1hdGVkKSB7XG4gICAgICAgICAgICAgICAgdW5pZm9ybUFzc2lnbm1lbnRzWyd0aW1lJ10gPSB0aW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpZWxkUmVzdWx0WCA9IHRoaXMuZmllbGRLZXJuZWxYLnJ1bihbXSwgdGhpcy5kaW1zLCB1bmlmb3JtQXNzaWdubWVudHMsIGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBmaWVsZFJlc3VsdFkgPSB0aGlzLmZpZWxkS2VybmVsWS5ydW4oW10sIHRoaXMuZGltcywgdW5pZm9ybUFzc2lnbm1lbnRzLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnBsb3RLZXJuZWwucnVuKFtmaWVsZFJlc3VsdFgudGV4dHVyZXNbMF0sIGZpZWxkUmVzdWx0WS50ZXh0dXJlc1swXV0sIHRoaXMuZGltcywge1xuICAgICAgICAgICAgICAgIHVDb250b3VyU3BhY2luZzogdGhpcy5jb250b3VyU3BhY2luZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmaWVsZFJlc3VsdFguZGlzcG9zZSgpO1xuICAgICAgICAgICAgZmllbGRSZXN1bHRZLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDb250b3VyZXJNYW5hZ2VyO1xufSgpO1xuXG47XG5cbkNvbnRvdXJlck1hbmFnZXIucGxvdEZ1bmMgPSAnaXZlYzIgbGluZUluZGV4ID0gaXZlYzIoZmxvb3IodmVjMihcXG4gICAgdW5wYWNrRmxvYXQodGV4dHVyZTJEKHVGaWVsZFgsIHZDb29yZCkpLFxcbiAgICB1bnBhY2tGbG9hdCh0ZXh0dXJlMkQodUZpZWxkWSwgdkNvb3JkKSlcXG4pIC8gdUNvbnRvdXJTcGFjaW5nKSk7XFxudmVjMiBjbXBGaWVsZCA9IHZlYzIobGluZUluZGV4KSAqIHVDb250b3VyU3BhY2luZztcXG5pdmVjMiBkcmF3RGF0YSA9IGl2ZWMyKGdyZWF0ZXJUaGFuRXF1YWwoXFxuICAgIGZpZWxkQ2hlY2sodGhyZWFkSWQsIGl2ZWMyKDAsIDEpLCBjbXBGaWVsZCkgK1xcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigxLCAwKSwgY21wRmllbGQpICtcXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoMCwgLTEpLCBjbXBGaWVsZCkgK1xcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigtMSwgMCksIGNtcEZpZWxkKSxcXG4gICAgaXZlYzIoMSkpKTtcXG5pZihhbGwoZXF1YWwoZHJhd0RhdGEsIGl2ZWMyKDApKSkpe1xcbiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgMS4wKTtcXG59XFxuZWxzZXtcXG4gICAgdmVjMiBpc0F4aXMgPSB2ZWMyKGVxdWFsKGxpbmVJbmRleCwgaXZlYzIoMCkpKTtcXG4gICAgdmVjMiBsaW5lQ29sb3IgPSB2ZWMyKGRyYXdEYXRhKSAqICgxLjAgLSAwLjUgKiBpc0F4aXMpO1xcbiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQobGluZUNvbG9yLngsIDAuNSAqIGRvdCh2ZWMyKGRyYXdEYXRhKSwgaXNBeGlzKSwgbGluZUNvbG9yLnksIDEuMCk7XFxufVxcbic7XG5cbkNvbnRvdXJlck1hbmFnZXIuRklFTERfQ0hFQ0tfSU5DTFVERSA9ICd2ZWMyIGdldEZpZWxkKGl2ZWMyIHBvcyl7XFxuICAgIHJldHVybiB2ZWMyKFxcbiAgICAgICAgdW5wYWNrRmxvYXQoYXJyR2V0KHVGaWVsZFgsIHBvcykpLFxcbiAgICAgICAgdW5wYWNrRmxvYXQoYXJyR2V0KHVGaWVsZFksIHBvcykpXFxuICAgICk7XFxufVxcblxcbml2ZWMyIGZpZWxkQ2hlY2soaXZlYzIgY1BvcywgaXZlYzIgZGlyLCB2ZWMyIGNtcEZpZWxkKXtcXG4gICAgaXZlYzIgb1BvcyA9IGNQb3MgKyBkaXI7XFxuICAgIGlmKGFsbChncmVhdGVyVGhhbkVxdWFsKG9Qb3MsIGl2ZWMyKDApKSkgJiYgYWxsKGxlc3NUaGFuKG9Qb3MsIHVEaW1zKSkpe1xcbiAgICAgICAgcmV0dXJuIGl2ZWMyKGxlc3NUaGFuKGdldEZpZWxkKG9Qb3MpLCBjbXBGaWVsZCkpO1xcbiAgICB9XFxuICAgIGVsc2UgcmV0dXJuIGl2ZWMyKDApO1xcbn1cXG5cXG4nO1xuXG52YXIgQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb250b3VyZXJBbmltYXRpb25NYW5hZ2VyKG1hbmFnZXIpIHtcbiAgICAgICAgdmFyIG51bUZyYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IDEwMDAgOiBhcmd1bWVudHNbMV07XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIpO1xuXG4gICAgICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5udW1GcmFtZXMgPSBudW1GcmFtZXM7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcbiAgICAgICAgdGhpcy5vblN0b3BDYWxsYmFjayA9IG51bGw7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uTG9vcCA9IHRoaXMuYW5pbWF0aW9uTG9vcC5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDb250b3VyZXJBbmltYXRpb25NYW5hZ2VyLCBbe1xuICAgICAgICBrZXk6ICdzdGFydCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgICAgIHZhciBzdGFydEZyYW1lID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIHZhciBvbkRyYXcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IHN0YXJ0RnJhbWU7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMub25EcmF3ID0gb25EcmF3O1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkxvb3ApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhbmltYXRpb25Mb29wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFuaW1hdGlvbkxvb3AodGltZXN0YW1wKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5jdXJyZW50RnJhbWUgLyB0aGlzLm51bUZyYW1lcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25EcmF3ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRyYXcodGhpcy5jdXJyZW50RnJhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9ICh0aGlzLmN1cnJlbnRGcmFtZSArIDEpICUgdGhpcy5udW1GcmFtZXM7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkxvb3ApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vblN0b3BDYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TdG9wQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3N0b3AnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgICAgIHZhciBvblN0b3BDYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMub25TdG9wQ2FsbGJhY2sgPSBvblN0b3BDYWxsYmFjaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9uU3RvcENhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb25TdG9wQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlcjtcbn0oKTtcblxuO1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBtYW5hZ2VyID0gbmV3IENvbnRvdXJlck1hbmFnZXIoKTtcbiAgICBpbml0UmVuZGVyKG1hbmFnZXIpO1xufVxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgRGVtb0Z1bmN0aW9ucyA9IGZ1bmN0aW9uIERlbW9GdW5jdGlvbnMoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERlbW9GdW5jdGlvbnMpO1xufTtcblxuO1xuXG5EZW1vRnVuY3Rpb25zLklOQ0xVREVTID0ge1xuICAgIHBpOiAnY29uc3QgZmxvYXQgUEkgPSAzLjE0MTU5MjY1MzU4OTc5MzIzODQ2MjY0MzM4MzI3OTU7XFxuXFxuJyxcbiAgICBjb21wbGV4TGliOiAndmVjMiBjb21wbGV4TXVsdCh2ZWMyIGEsIHZlYzIgYil7XFxuICAgIHJldHVybiB2ZWMyKGEueCAqIGIueCAtIGEueSAqIGIueSwgYS55ICogYi54ICsgYS54ICogYi55KTtcXG59XFxuXFxudmVjMiBjb21wbGV4RGl2KHZlYzIgYSwgdmVjMiBiKXtcXG4gICAgZmxvYXQgZGl2aXNvciA9IGRvdChiLCBiKTtcXG4gICAgcmV0dXJuIHZlYzIoZG90KGEsIGIpLCBhLnkgKiBiLnggLSBhLnggKiBiLnkpIC8gZGl2aXNvcjtcXG59XFxuXFxudmVjMiBjb21wbGV4UG93KHZlYzIgYSwgdmVjMiBiKXtcXG4gICAgZmxvYXQgciA9IGxlbmd0aChhKSwgcGhpID0gYXRhbihhLnksIGEueCk7XFxuICAgIGZsb2F0IG5ld1IgPSBwb3cociwgYi54KSAqIGV4cCgtYi55ICogcGhpKTtcXG4gICAgZmxvYXQgbmV3UGhpID0gYi55ICogbG9nKHIpICsgYi54ICogcGhpO1xcbiAgICByZXR1cm4gbmV3UiAqIHZlYzIoY29zKG5ld1BoaSksIHNpbihuZXdQaGkpKTtcXG59XFxuXFxudmVjMiBjb21wbGV4RXhwKHZlYzIgYil7XFxuICAgIHJldHVybiBleHAoYi54KSAqIHZlYzIoY29zKGIueSksIHNpbihiLnkpKTtcXG59XFxuXFxudmVjMiBjb21wbGV4TG9nKHZlYzIgeCl7XFxuICAgIHJldHVybiB2ZWMyKGxvZyhsZW5ndGgoeCkpLCBhdGFuKHgueSwgeC54KSk7XFxufVxcblxcbicsXG4gICAgZ2FtbWE6ICcvKipcXG4gKiBUcmFuc2xhdGVkIHRvIE9wZW5HTCBFUyBmcm9tIG1hdGguanNcXG4gKiBodHRwczovL2dpdGh1Yi5jb20vam9zZGVqb25nL21hdGhqc1xcbiAqXFxuICogTWF0aC5qcyBpcyBhbiBleHRlbnNpdmUgbWF0aCBsaWJyYXJ5IGZvciBKYXZhU2NyaXB0IGFuZCBOb2RlLmpzLFxcbiAqIEl0IGZlYXR1cmVzIHJlYWwgYW5kIGNvbXBsZXggbnVtYmVycywgdW5pdHMsIG1hdHJpY2VzLCBhIGxhcmdlIHNldCBvZlxcbiAqIG1hdGhlbWF0aWNhbCBmdW5jdGlvbnMsIGFuZCBhIGZsZXhpYmxlIGV4cHJlc3Npb24gcGFyc2VyLlxcbiAqXFxuICogQHZlcnNpb24gMy4yLjFcXG4gKiBAZGF0ZSAgICAyMDE2LTA0LTI2XFxuICpcXG4gKiBAbGljZW5zZVxcbiAqIENvcHlyaWdodCAoQykgMjAxMy0yMDE2IEpvcyBkZSBKb25nIDx3am9zZGVqb25nQGdtYWlsLmNvbT5cXG4gKlxcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90XFxuICogdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcXG4gKiBvZiB0aGUgTGljZW5zZSBhdFxcbiAqXFxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXFxuICpcXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXFxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUXFxuICogV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlXFxuICogTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXJcXG4gKiB0aGUgTGljZW5zZS5cXG4gKi9cXG5cXG52ZWMyIGdhbW1hU3RlcCh2ZWMyIHgsIGludCBpLCB2ZWMyIG4sIGZsb2F0IHApe1xcbiAgICBmbG9hdCByZWFsID0gbi54ICsgZmxvYXQoaSk7XFxuICAgIGZsb2F0IGRlbiA9IHJlYWwgKiByZWFsICsgbi55ICogbi55O1xcbiAgICBpZihkZW4gIT0gMC4wKXtcXG4gICAgICAgIHJldHVybiB4ICsgdmVjMihwICogcmVhbCAvIGRlbiwgLShwICogbi55KSAvIGRlbik7XFxuICAgIH1cXG4gICAgZWxzZSByZXR1cm4gdmVjMigwLjApO1xcbn1cXG5cXG52ZWMyIGdhbW1hKHZlYzIgbil7XFxuICAgIG4ueCAtPSAxLjA7XFxuICAgIHZlYzIgeCA9IHZlYzIoMC45OTk5OTk5OTk5OTk5OTcwOTE4MiwgMC4wKTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDEsIG4sIDU3LjE1NjIzNTY2NTg2MjkyMzUxNyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAyLCBuLCAtNTkuNTk3OTYwMzU1NDc1NDkxMjQ4KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDMsIG4sIDE0LjEzNjA5Nzk3NDc0MTc0NzE3NCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA0LCBuLCAtMC40OTE5MTM4MTYwOTc2MjAxOTk3OCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA1LCBuLCAwLjMzOTk0NjQ5OTg0ODExODg4Njk5ZS00KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDYsIG4sIDAuNDY1MjM2Mjg5MjcwNDg1NzU2NjVlLTQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgNywgbiwgLTAuOTgzNzQ0NzUzMDQ4Nzk1NjQ2NzdlLTQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgOCwgbiwgMC4xNTgwODg3MDMyMjQ5MTI0ODg4NGUtMyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA5LCBuLCAtMC4yMTAyNjQ0NDE3MjQxMDQ4ODMxOWUtMyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAxMCwgbiwgMC4yMTc0Mzk2MTgxMTUyMTI2NDMyMGUtMyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAxMSwgbiwgLTAuMTY0MzE4MTA2NTM2NzYzODkwMjJlLTMpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgMTIsIG4sIDAuODQ0MTgyMjM5ODM4NTI3NDMyOTNlLTQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgMTMsIG4sIC0wLjI2MTkwODM4NDAxNTgxNDA4NjcwZS00KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDE0LCBuLCAwLjM2ODk5MTgyNjU5NTMxNjIyNzA0ZS01KTtcXG4gICAgdmVjMiB0ID0gdmVjMihuLnggKyA0Ljc0MjE4NzUgKyAwLjUsIG4ueSk7XFxuICAgIGZsb2F0IHR3b1BpU3FydCA9IHNxcnQoMi4wICogUEkpO1xcblxcbiAgICBuLnggKz0gMC41O1xcbiAgICB2ZWMyIHJlc3VsdCA9IGNvbXBsZXhQb3codCwgbik7XFxuICAgIHJlc3VsdCAqPSB0d29QaVNxcnQ7XFxuICAgIGZsb2F0IHIgPSBleHAoLXQueCk7XFxuICAgIHQgPSByICogdmVjMihjb3MoLXQueSksIHNpbigtdC55KSk7XFxuXFxuICAgIHJldHVybiBjb21wbGV4TXVsdChjb21wbGV4TXVsdChyZXN1bHQsIHQpLCB4KTtcXG59XFxuXFxuJyxcbiAgICByb3RhdGVXaXRoVGltZTogJ3ZlYzIgcm90YXRlV2l0aFRpbWUodmVjMiB2KXtcXG4gICAgZmxvYXQgY29zVCA9IGNvcyh0aW1lICogMi4wICogUEkpLCBzaW5UID0gc2luKHRpbWUgKiAyLjAgKiBQSSk7XFxuICAgIHJldHVybiB2ZWMyKFxcbiAgICAgICAgdi54ICogY29zVCAtIHYueSAqIHNpblQsXFxuICAgICAgICB2LnggKiBzaW5UICsgdi55ICogY29zVFxcbiAgICApO1xcbn1cXG5cXG4nLFxuICAgIHNub2lzZTogJy8vXFxuLy8gRGVzY3JpcHRpb24gOiBBcnJheSBhbmQgdGV4dHVyZWxlc3MgR0xTTCAyRC8zRC80RCBzaW1wbGV4IFxcbi8vICAgICAgICAgICAgICAgbm9pc2UgZnVuY3Rpb25zLlxcbi8vICAgICAgQXV0aG9yIDogSWFuIE1jRXdhbiwgQXNoaW1hIEFydHMuXFxuLy8gIE1haW50YWluZXIgOiBzdGVndVxcbi8vICAgICBMYXN0bW9kIDogMjAxMTA4MjIgKGlqbSlcXG4vLyAgICAgTGljZW5zZSA6IENvcHlyaWdodCAoQykgMjAxMSBBc2hpbWEgQXJ0cy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cXG4vLyAgICAgICAgICAgICAgIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZS5cXG4vLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2hpbWEvd2ViZ2wtbm9pc2VcXG4vLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9zdGVndS93ZWJnbC1ub2lzZVxcbi8vIFxcblxcbnZlYzQgbW9kMjg5KHZlYzQgeCkge1xcbiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsgfVxcblxcbmZsb2F0IG1vZDI4OShmbG9hdCB4KSB7XFxuICByZXR1cm4geCAtIGZsb29yKHggKiAoMS4wIC8gMjg5LjApKSAqIDI4OS4wOyB9XFxuXFxudmVjNCBwZXJtdXRlKHZlYzQgeCkge1xcbiAgICAgcmV0dXJuIG1vZDI4OSgoKHgqMzQuMCkrMS4wKSp4KTtcXG59XFxuXFxuZmxvYXQgcGVybXV0ZShmbG9hdCB4KSB7XFxuICAgICByZXR1cm4gbW9kMjg5KCgoeCozNC4wKSsxLjApKngpO1xcbn1cXG5cXG52ZWM0IHRheWxvckludlNxcnQodmVjNCByKVxcbntcXG4gIHJldHVybiAxLjc5Mjg0MjkxNDAwMTU5IC0gMC44NTM3MzQ3MjA5NTMxNCAqIHI7XFxufVxcblxcbmZsb2F0IHRheWxvckludlNxcnQoZmxvYXQgcilcXG57XFxuICByZXR1cm4gMS43OTI4NDI5MTQwMDE1OSAtIDAuODUzNzM0NzIwOTUzMTQgKiByO1xcbn1cXG5cXG52ZWM0IGdyYWQ0KGZsb2F0IGosIHZlYzQgaXApXFxuICB7XFxuICBjb25zdCB2ZWM0IG9uZXMgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIC0xLjApO1xcbiAgdmVjNCBwLHM7XFxuXFxuICBwLnh5eiA9IGZsb29yKCBmcmFjdCAodmVjMyhqKSAqIGlwLnh5eikgKiA3LjApICogaXAueiAtIDEuMDtcXG4gIHAudyA9IDEuNSAtIGRvdChhYnMocC54eXopLCBvbmVzLnh5eik7XFxuICBzID0gdmVjNChsZXNzVGhhbihwLCB2ZWM0KDAuMCkpKTtcXG4gIHAueHl6ID0gcC54eXogKyAocy54eXoqMi4wIC0gMS4wKSAqIHMud3d3OyBcXG5cXG4gIHJldHVybiBwO1xcbiAgfVxcblxcdFxcdFxcdFxcdFxcdFxcdFxcbi8vIChzcXJ0KDUpIC0gMSkvNCA9IEY0LCB1c2VkIG9uY2UgYmVsb3dcXG4jZGVmaW5lIEY0IDAuMzA5MDE2OTk0Mzc0OTQ3NDUxXFxuXFxuZmxvYXQgc25vaXNlKHZlYzQgdilcXG4gIHtcXG4gIGNvbnN0IHZlYzQgIEMgPSB2ZWM0KCAwLjEzODE5NjYwMTEyNTAxMSwgIC8vICg1IC0gc3FydCg1KSkvMjAgIEc0XFxuICAgICAgICAgICAgICAgICAgICAgICAgMC4yNzYzOTMyMDIyNTAwMjEsICAvLyAyICogRzRcXG4gICAgICAgICAgICAgICAgICAgICAgICAwLjQxNDU4OTgwMzM3NTAzMiwgIC8vIDMgKiBHNFxcbiAgICAgICAgICAgICAgICAgICAgICAgLTAuNDQ3MjEzNTk1NDk5OTU4KTsgLy8gLTEgKyA0ICogRzRcXG5cXG4vLyBGaXJzdCBjb3JuZXJcXG4gIHZlYzQgaSAgPSBmbG9vcih2ICsgZG90KHYsIHZlYzQoRjQpKSApO1xcbiAgdmVjNCB4MCA9IHYgLSAgIGkgKyBkb3QoaSwgQy54eHh4KTtcXG5cXG4vLyBPdGhlciBjb3JuZXJzXFxuXFxuLy8gUmFuayBzb3J0aW5nIG9yaWdpbmFsbHkgY29udHJpYnV0ZWQgYnkgQmlsbCBMaWNlYS1LYW5lLCBBTUQgKGZvcm1lcmx5IEFUSSlcXG4gIHZlYzQgaTA7XFxuICB2ZWMzIGlzWCA9IHN0ZXAoIHgwLnl6dywgeDAueHh4ICk7XFxuICB2ZWMzIGlzWVogPSBzdGVwKCB4MC56d3csIHgwLnl5eiApO1xcbi8vICBpMC54ID0gZG90KCBpc1gsIHZlYzMoIDEuMCApICk7XFxuICBpMC54ID0gaXNYLnggKyBpc1gueSArIGlzWC56O1xcbiAgaTAueXp3ID0gMS4wIC0gaXNYO1xcbi8vICBpMC55ICs9IGRvdCggaXNZWi54eSwgdmVjMiggMS4wICkgKTtcXG4gIGkwLnkgKz0gaXNZWi54ICsgaXNZWi55O1xcbiAgaTAuencgKz0gMS4wIC0gaXNZWi54eTtcXG4gIGkwLnogKz0gaXNZWi56O1xcbiAgaTAudyArPSAxLjAgLSBpc1laLno7XFxuXFxuICAvLyBpMCBub3cgY29udGFpbnMgdGhlIHVuaXF1ZSB2YWx1ZXMgMCwxLDIsMyBpbiBlYWNoIGNoYW5uZWxcXG4gIHZlYzQgaTMgPSBjbGFtcCggaTAsIDAuMCwgMS4wICk7XFxuICB2ZWM0IGkyID0gY2xhbXAoIGkwLTEuMCwgMC4wLCAxLjAgKTtcXG4gIHZlYzQgaTEgPSBjbGFtcCggaTAtMi4wLCAwLjAsIDEuMCApO1xcblxcbiAgLy8gIHgwID0geDAgLSAwLjAgKyAwLjAgKiBDLnh4eHhcXG4gIC8vICB4MSA9IHgwIC0gaTEgICsgMS4wICogQy54eHh4XFxuICAvLyAgeDIgPSB4MCAtIGkyICArIDIuMCAqIEMueHh4eFxcbiAgLy8gIHgzID0geDAgLSBpMyAgKyAzLjAgKiBDLnh4eHhcXG4gIC8vICB4NCA9IHgwIC0gMS4wICsgNC4wICogQy54eHh4XFxuICB2ZWM0IHgxID0geDAgLSBpMSArIEMueHh4eDtcXG4gIHZlYzQgeDIgPSB4MCAtIGkyICsgQy55eXl5O1xcbiAgdmVjNCB4MyA9IHgwIC0gaTMgKyBDLnp6eno7XFxuICB2ZWM0IHg0ID0geDAgKyBDLnd3d3c7XFxuXFxuLy8gUGVybXV0YXRpb25zXFxuICBpID0gbW9kMjg5KGkpOyBcXG4gIGZsb2F0IGowID0gcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZShpLncpICsgaS56KSArIGkueSkgKyBpLngpO1xcbiAgdmVjNCBqMSA9IHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUgKFxcbiAgICAgICAgICAgICBpLncgKyB2ZWM0KGkxLncsIGkyLncsIGkzLncsIDEuMCApKVxcbiAgICAgICAgICAgKyBpLnogKyB2ZWM0KGkxLnosIGkyLnosIGkzLnosIDEuMCApKVxcbiAgICAgICAgICAgKyBpLnkgKyB2ZWM0KGkxLnksIGkyLnksIGkzLnksIDEuMCApKVxcbiAgICAgICAgICAgKyBpLnggKyB2ZWM0KGkxLngsIGkyLngsIGkzLngsIDEuMCApKTtcXG5cXG4vLyBHcmFkaWVudHM6IDd4N3g2IHBvaW50cyBvdmVyIGEgY3ViZSwgbWFwcGVkIG9udG8gYSA0LWNyb3NzIHBvbHl0b3BlXFxuLy8gNyo3KjYgPSAyOTQsIHdoaWNoIGlzIGNsb3NlIHRvIHRoZSByaW5nIHNpemUgMTcqMTcgPSAyODkuXFxuICB2ZWM0IGlwID0gdmVjNCgxLjAvMjk0LjAsIDEuMC80OS4wLCAxLjAvNy4wLCAwLjApIDtcXG5cXG4gIHZlYzQgcDAgPSBncmFkNChqMCwgICBpcCk7XFxuICB2ZWM0IHAxID0gZ3JhZDQoajEueCwgaXApO1xcbiAgdmVjNCBwMiA9IGdyYWQ0KGoxLnksIGlwKTtcXG4gIHZlYzQgcDMgPSBncmFkNChqMS56LCBpcCk7XFxuICB2ZWM0IHA0ID0gZ3JhZDQoajEudywgaXApO1xcblxcbi8vIE5vcm1hbGlzZSBncmFkaWVudHNcXG4gIHZlYzQgbm9ybSA9IHRheWxvckludlNxcnQodmVjNChkb3QocDAscDApLCBkb3QocDEscDEpLCBkb3QocDIsIHAyKSwgZG90KHAzLHAzKSkpO1xcbiAgcDAgKj0gbm9ybS54O1xcbiAgcDEgKj0gbm9ybS55O1xcbiAgcDIgKj0gbm9ybS56O1xcbiAgcDMgKj0gbm9ybS53O1xcbiAgcDQgKj0gdGF5bG9ySW52U3FydChkb3QocDQscDQpKTtcXG5cXG4vLyBNaXggY29udHJpYnV0aW9ucyBmcm9tIHRoZSBmaXZlIGNvcm5lcnNcXG4gIHZlYzMgbTAgPSBtYXgoMC42IC0gdmVjMyhkb3QoeDAseDApLCBkb3QoeDEseDEpLCBkb3QoeDIseDIpKSwgMC4wKTtcXG4gIHZlYzIgbTEgPSBtYXgoMC42IC0gdmVjMihkb3QoeDMseDMpLCBkb3QoeDQseDQpICAgICAgICAgICAgKSwgMC4wKTtcXG4gIG0wID0gbTAgKiBtMDtcXG4gIG0xID0gbTEgKiBtMTtcXG4gIHJldHVybiA0OS4wICogKCBkb3QobTAqbTAsIHZlYzMoIGRvdCggcDAsIHgwICksIGRvdCggcDEsIHgxICksIGRvdCggcDIsIHgyICkpKVxcbiAgICAgICAgICAgICAgICsgZG90KG0xKm0xLCB2ZWMyKCBkb3QoIHAzLCB4MyApLCBkb3QoIHA0LCB4NCApICkgKSApIDtcXG5cXG59XFxuXFxuJ1xufTtcblxuRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnMgPSB7XG4gICAgbG9yZW50ejoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0xvcmVudHogQm9vc3QnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6ICdmbG9hdCBiZXRhID0gc2luKHRpbWUgKiAyLjAgKiBQSSkgKiAwLjk7XFxuZmxvYXQgZ2FtbWEgPSAxLjAgLyBzcXJ0KDEuMCAtIGJldGEgKiBiZXRhKTtcXG5yZXMgPSBnYW1tYSAqIHZlYzIoXFxuICAgIGNQb3MueCAqIDEuMCArIGNQb3MueSAqIGJldGEsXFxuICAgIGNQb3MueSAqIDEuMCArIGNQb3MueCAqIGJldGFcXG4pO1xcblxcbidcbiAgICB9LFxuICAgIC8vICAgIHJvdGF0aW9uOiB7XG4gICAgLy8gICAgICAgIGRpc3BsYXlOYW1lOiAnUm90YXRpb24nLFxuICAgIC8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgIC8vICAgICAgICBudW1GcmFtZXM6IDgwMCxcbiAgICAvLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgLy8gICAgICAgIGRyYXdGdW5jOlxuICAgIC8vYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKGNQb3MpO1xuICAgIC8vYFxuICAgIC8vICAgIH0sXG4gICAgbWVyY2F0b3J3YXJwOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTWVyY2F0b3IgV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogODAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6ICd2ZWMyIHNjYWxlZFBvcyA9IGNQb3MgKiAwLjY7XFxudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSkgKiA4LjA7XFxucmVzID0gcm90YXRlV2l0aFRpbWUoaW52TWVyY2F0b3IpO1xcbidcbiAgICB9LFxuICAgIG1lcmNhdG9yTW9sbHdlaWRlOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTWVyY2F0b3IgdG8gTW9sbHdlaWRlJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBzY2FsZWRQb3MgPSBjUG9zICogMC4zO1xcbmZsb2F0IHRoZXRhID0gYXNpbihzY2FsZWRQb3MueSAqIDIuMCAvIFBJKTtcXG52ZWMyIGludk1vbGx3ZWlkZSA9IHZlYzIoXFxuICAgIHNjYWxlZFBvcy54IC8gY29zKHRoZXRhKSxcXG4gICAgYXNpbigoMi4wICogdGhldGEgKyBzaW4oMi4wICogdGhldGEpKSAvIFBJKVxcbik7XFxudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSk7XFxuZmxvYXQgbWl4UGFyYW0gPSAtIGNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnJlcyA9IChpbnZNb2xsd2VpZGUgKiBtaXhQYXJhbSArIGludk1lcmNhdG9yICogKDEuMCAtIG1peFBhcmFtKSkgKiA4LjA7XFxuJ1xuICAgIH0sXG4gICAgZGlwb2xlOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnRGlwb2xlIEZvcm1hdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogJ2Zsb2F0IGRpc3QgPSBzaW4odGltZSAqIDIuMCAqIFBJICsgUEkgLyAyLjApICogMi4wICsgMi41O1xcbnJlcyA9IDUwLjAgLyAoMi4wICogZGlzdCkgKiAoXFxuICAgIGNvbXBsZXhMb2coY1BvcyAtIHZlYzIoZGlzdCwgMC4wKSkgLVxcbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKC1kaXN0LCAwLjApKVxcbik7XFxuJ1xuICAgIH0sXG4gICAgYXR0cmFjdFJlcGVsOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnQXR0cmFjdGlvbiB0byBSZXB1bHNpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiAncmVzID0gMTAuMCAqIChcXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMigxLjAsIDAuMCkpICtcXG4gICAgc2luKHRpbWUgKiAyLjAgKiBQSSAtIFBJIC8gMi4wKSAqIGNvbXBsZXhMb2coY1BvcyAtIHZlYzIoLTEuMCwgMC4wKSlcXG4pO1xcbidcbiAgICB9LFxuICAgIG5ldXJhbG5ldHdvcms6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdOZXVyYWwgTmV0d29yaycsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzogJ2Zsb2F0IG1peFBhcmFtID0gLWNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnZlYzIgdW5zaWdtb2lkID0gLWxvZygxLjAgLyAoKGNQb3MgKyB2ZWMyKDMuMywgMy4wKSkgLyA2LjMpIC0gMS4wKTtcXG5yZXMgPSAodmVjMihcXG4gICAgdW5zaWdtb2lkLnggKiAyLjAgKyB1bnNpZ21vaWQueSAqIDEuMCxcXG4gICAgdW5zaWdtb2lkLnggKiAyLjAgKyB1bnNpZ21vaWQueSAqIDMuMFxcbikgLSB2ZWMyKDEuMCwgLTIuMCkpICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcXG4nXG4gICAgfSxcbiAgICBnYWxheHk6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdHYWxheHkgV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzogJ2Zsb2F0IG1peFBhcmFtID0gLWNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnZlYzIgcG9sUG9zID0gdmVjMihsZW5ndGgoY1BvcyksIGF0YW4oY1Bvcy55LCBjUG9zLngpKTtcXG5wb2xQb3MgPSB2ZWMyKHBvbFBvcy54LCBwb2xQb3MueSAtIG1peFBhcmFtIC8gNTAuMCAqIHNxcnQoMS4wIC8gcG93KHBvbFBvcy54IC8gNDAuMCwgMy4wKSkpO1xcbnJlcyA9IHZlYzIocG9sUG9zLnggKiBjb3MocG9sUG9zLnkpLCBwb2xQb3MueCAqIHNpbihwb2xQb3MueSkpO1xcbidcbiAgICB9LFxuICAgIHNpbXBsZXg6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdTaW1wbGV4IFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnNub2lzZSxcbiAgICAgICAgZHJhd0Z1bmM6ICd2ZWMyIGNpcmNsZVZhcnkgPSAyLjAgKiB2ZWMyKFxcbiAgICBjb3ModGltZSAqIDIuMCAqIFBJKSxcXG4gICAgc2luKHRpbWUgKiAyLjAgKiBQSSlcXG4pO1xcbnJlcyA9IDIuMCAqIChjUG9zICtcXG4wLjUgKiB2ZWMyKFxcbiAgICBzbm9pc2UodmVjNChjUG9zICogMC4yNSwgY2lyY2xlVmFyeSArIHZlYzIoMTAwLjAsIDEwMC4wKSkpLFxcbiAgICBzbm9pc2UodmVjNChjUG9zICogMC4yNSwgY2lyY2xlVmFyeSArIHZlYzIoMjAwLjAsIDIwMC4wKSkpXFxuKSk7XFxuJ1xuICAgIH0sXG4gICAgZXhwb25lbnRpYXRpb246IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IEV4cG9uZW50aWF0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAzMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBjYXJ0UmVzID0gMTAuMCAqIGNvbXBsZXhQb3coY1BvcywgdmVjMigxLjAgLyAoMi41IC0gMS41ICogY29zKHRpbWUgKiAyLjAgKiBQSSkpLCAwLjApKTtcXG5yZXMgPSB2ZWMyKGxlbmd0aChjYXJ0UmVzKSwgMTAuMCAqIGF0YW4oY2FydFJlcy55LCBjYXJ0UmVzLngpKTtcXG4nXG4gICAgfSxcbiAgICBtb2JpdXM6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdNb2JpdXMgVHJhbnNmb3JtYXRpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgICAgICBkcmF3RnVuYzogJ3JlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBjb21wbGV4RGl2KFxcbiAgICBjb21wbGV4TXVsdCh2ZWMyKDAuNSwgMy4wKSwgY1BvcykgKyB2ZWMyKDAuNSwgMS41KSxcXG4gICAgY29tcGxleE11bHQodmVjMig0LjAsIDEuNSksIGNQb3MpICsgdmVjMigyLjAsIDMuNSlcXG4pKTtcXG4nXG4gICAgfSxcbiAgICAvLyAgICBsb2c6IHtcbiAgICAvLyAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IExvZ2FyaXRobScsXG4gICAgLy8gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgLy8gICAgICAgIG51bUZyYW1lczogMTAwMCxcbiAgICAvLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgLy8gICAgICAgIGRyYXdGdW5jOlxuICAgIC8vYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBjb21wbGV4TG9nKGNQb3MpKTtcbiAgICAvL2BcbiAgICAvLyAgICB9LFxuICAgIC8vICAgIHNpbjoge1xuICAgIC8vICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggU2luZScsXG4gICAgLy8gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgLy8gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgIC8vICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgIC8vICAgICAgICBkcmF3RnVuYzpcbiAgICAvL2B2ZWMyIGV4cG9uZW50ID0gdmVjMigtY1Bvcy55LCBjUG9zLngpO1xuICAgIC8vcmVzID0gcm90YXRlV2l0aFRpbWUoY29tcGxleERpdihcbiAgICAvLyAgICBjb21wbGV4RXhwKGV4cG9uZW50KSAtIGNvbXBsZXhFeHAoLWV4cG9uZW50KSxcbiAgICAvLyAgICB2ZWMyKDAuMCwgMi4wKVxuICAgIC8vKSk7XG4gICAgLy9gXG4gICAgLy8gICAgfSxcbiAgICBhcmNzaW46IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IEludmVyc2UgU2luZScsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogJ3ZlYzIgaW52U2luID0gLSAxMC4wICogY29tcGxleE11bHQoY29tcGxleExvZyhjb21wbGV4UG93KHZlYzIoMS4wLCAwLjApIC0gY29tcGxleFBvdyhjUG9zLCB2ZWMyKDIuMCwgMC4wKSksIHZlYzIoMC41LCAwLjApKSArIGNvbXBsZXhNdWx0KGNQb3MsIHZlYzIoMC4wLCAxLjApKSksIHZlYzIoMC4wLCAxLjApKTtcXG5mbG9hdCBtaXhQYXJhbSA9IC0gY29zKHRpbWUgKiAyLjAgKiBQSSkgLyAyLjAgKyAwLjU7XFxucmVzID0gaW52U2luICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcXG4nXG4gICAgfSxcbiAgICBnYW1tYToge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0dhbW1hIEZ1bmN0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiA0MDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmdhbW1hICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6ICdyZXMgPSByb3RhdGVXaXRoVGltZSgxMC4wICogZ2FtbWEoKGNQb3MgKyB2ZWMyKDIuMCwgMC4wKSkgLyAyLjApKTtcXG4nXG4gICAgfSxcbiAgICBtYWRuZXNzOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnQ29tcGxleCA/Pz8nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDgwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYixcbiAgICAgICAgZHJhd0Z1bmM6ICd2ZWMyIG1hZG5lc3MgPSAtIDEwLjAgKiBjb21wbGV4TXVsdChjb21wbGV4TG9nKGNvbXBsZXhQb3codmVjMigyLjAsIDMuMCkgLSBjb21wbGV4UG93KGNQb3MgKiAyLjAsIHZlYzIoMi4wLCAxLjApKSwgdmVjMigwLjUsIDEuMCkpICsgY29tcGxleE11bHQoY1BvcyAqIDIuMCwgdmVjMigyLjAsIDEuMCkpKSwgdmVjMigyLjAsIDEuMCkpO1xcbmZsb2F0IG1peFBhcmFtID0gLSBjb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcXG5yZXMgPSBtYWRuZXNzICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcXG4nXG4gICAgfVxufTtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQ2FudmFzRGlzcGxheVBhbmUgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhDYW52YXNEaXNwbGF5UGFuZSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBDYW52YXNEaXNwbGF5UGFuZSgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbnZhc0Rpc3BsYXlQYW5lKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKENhbnZhc0Rpc3BsYXlQYW5lKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ2FudmFzRGlzcGxheVBhbmUsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgICAgaWYgKCdvbk1vdW50Q2FsbGJhY2snIGluIHRoaXMucHJvcHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbk1vdW50Q2FsbGJhY2soY2FudmFzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgICBpZiAoJ29uRGlzbW91bnRDYWxsYmFjaycgaW4gdGhpcy5wcm9wcykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25EaXNtb3VudENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnY2FudmFzJywgeyB3aWR0aDogdGhpcy5wcm9wcy5kaW1zLndpZHRoLCBoZWlnaHQ6IHRoaXMucHJvcHMuZGltcy5oZWlnaHQsIHN0eWxlOiB7IHdpZHRoOiAnMTAwJScgfSB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDYW52YXNEaXNwbGF5UGFuZTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuO1xuQ2FudmFzRGlzcGxheVBhbmUucHJvcFR5cGVzID0ge1xuICAgIGRpbXM6IFJlYWN0LlByb3BUeXBlcy5pbnN0YW5jZU9mKERpbWVuc2lvbnMpLmlzUmVxdWlyZWQsXG4gICAgb25Nb3VudENhbGxiYWNrOiBSZWFjdC5Qcm9wVHlwZXMuZnVuY1xufTtcblxudmFyIERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQyKSB7XG4gICAgX2luaGVyaXRzKERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uLCBfUmVhY3QkQ29tcG9uZW50Mik7XG5cbiAgICBmdW5jdGlvbiBEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24sIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnbGlzdC1ncm91cC1pdGVtJyArICh0aGlzLnByb3BzLnNlbGVjdGVkID8gJyBhY3RpdmUnIDogJycpLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnByb3BzLm9uQ2xpY2soX3RoaXMzLnByb3BzLmZ1bmNOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGxheU5hbWVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b247XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbjtcblxudmFyIERyYXdGdW5jdGlvblNlbGVjdG9yID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQzKSB7XG4gICAgX2luaGVyaXRzKERyYXdGdW5jdGlvblNlbGVjdG9yLCBfUmVhY3QkQ29tcG9uZW50Myk7XG5cbiAgICBmdW5jdGlvbiBEcmF3RnVuY3Rpb25TZWxlY3Rvcihwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJhd0Z1bmN0aW9uU2VsZWN0b3IpO1xuXG4gICAgICAgIHZhciBfdGhpczQgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRHJhd0Z1bmN0aW9uU2VsZWN0b3IpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpczQuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZEZ1bmM6IERyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQ1xuICAgICAgICB9O1xuICAgICAgICBfdGhpczQuaGFuZGxlQ2xpY2sgPSBfdGhpczQuaGFuZGxlQ2xpY2suYmluZChfdGhpczQpO1xuICAgICAgICByZXR1cm4gX3RoaXM0O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhEcmF3RnVuY3Rpb25TZWxlY3RvciwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2xpc3QtZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnMpLm1hcChmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbiwgeyBkaXNwbGF5TmFtZTogRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnNbZnVuY10uZGlzcGxheU5hbWUsIGtleTogZnVuYywgZnVuY05hbWU6IGZ1bmMsIHNlbGVjdGVkOiBmdW5jID09IF90aGlzNS5zdGF0ZS5zZWxlY3RlZEZ1bmMsIG9uQ2xpY2s6IF90aGlzNS5oYW5kbGVDbGljayB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soZnVuY05hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkRnVuYzogZnVuY05hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdChmdW5jTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRHJhd0Z1bmN0aW9uU2VsZWN0b3I7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbjtcbkRyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQyA9ICdhdHRyYWN0UmVwZWwnO1xuXG52YXIgQWNlRWRpdG9yID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQ0KSB7XG4gICAgX2luaGVyaXRzKEFjZUVkaXRvciwgX1JlYWN0JENvbXBvbmVudDQpO1xuXG4gICAgZnVuY3Rpb24gQWNlRWRpdG9yKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWNlRWRpdG9yKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKEFjZUVkaXRvcikuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEFjZUVkaXRvciwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICB2YXIgZWRpdG9yRGl2ID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvciA9IGFjZS5lZGl0KGVkaXRvckRpdik7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zZXRUaGVtZSgnYWNlL3RoZW1lL21vbm9rYWknKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXb3JrZXIoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldE1vZGUoJ2FjZS9tb2RlL2dsc2wnKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLiRibG9ja1Njcm9sbGluZyA9IEluZmluaXR5O1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0Rm9udFNpemUoMTgpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0T3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgbWF4TGluZXM6IEluZmluaXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXcmFwTW9kZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFZhbHVlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKG5ld0NvbnRlbnRzKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zZXRWYWx1ZShuZXdDb250ZW50cyk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRWYWx1ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IHN0eWxlOiB7IGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQudG9TdHJpbmcoKSArICdweCcgfSB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBBY2VFZGl0b3I7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbjtcblxudmFyIENvbnRvdXJlckFwcCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50NSkge1xuICAgIF9pbmhlcml0cyhDb250b3VyZXJBcHAsIF9SZWFjdCRDb21wb25lbnQ1KTtcblxuICAgIGZ1bmN0aW9uIENvbnRvdXJlckFwcChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udG91cmVyQXBwKTtcblxuICAgICAgICB2YXIgX3RoaXM3ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbnRvdXJlckFwcCkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzNy5hbmltYXRpb25NYW5hZ2VyID0gbmV3IENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIoX3RoaXM3LnByb3BzLm1hbmFnZXIpO1xuICAgICAgICBfdGhpczcuc3RhdGUgPSB7XG4gICAgICAgICAgICBpc0FuaW1hdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogMCxcbiAgICAgICAgICAgIG51bUZyYW1lczogMCxcbiAgICAgICAgICAgIGlzQW5pbWF0ZWRTZWxlY3RTdGF0ZTogZmFsc2UsXG4gICAgICAgICAgICBudW1GcmFtZXNJbnB1dFZhbDogJzAnLFxuICAgICAgICAgICAgc2hhZGVyQ29tcGlsZUVycm9yOiAnJ1xuICAgICAgICB9O1xuICAgICAgICBfdGhpczcudXNlQ2FudmFzID0gX3RoaXM3LnVzZUNhbnZhcy5iaW5kKF90aGlzNyk7XG4gICAgICAgIF90aGlzNy5zZXREcmF3RnVuYyA9IF90aGlzNy5zZXREcmF3RnVuYy5iaW5kKF90aGlzNyk7XG4gICAgICAgIF90aGlzNy5vbkRyYXdGdW5jU2VsZWN0ID0gX3RoaXM3Lm9uRHJhd0Z1bmNTZWxlY3QuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcucmVkcmF3ID0gX3RoaXM3LnJlZHJhdy5iaW5kKF90aGlzNyk7XG4gICAgICAgIF90aGlzNy5jaGFuZ2Vab29tQW5kUmVkcmF3ID0gX3RoaXM3LmNoYW5nZVpvb21BbmRSZWRyYXcuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcgPSBfdGhpczcuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcudHJhbnNsYXRlQW5kUmVkcmF3ID0gX3RoaXM3LnRyYW5zbGF0ZUFuZFJlZHJhdy5iaW5kKF90aGlzNyk7XG4gICAgICAgIF90aGlzNy5oYW5kbGVQbG90Q2xpY2sgPSBfdGhpczcuaGFuZGxlUGxvdENsaWNrLmJpbmQoX3RoaXM3KTtcbiAgICAgICAgcmV0dXJuIF90aGlzNztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29udG91cmVyQXBwLCBbe1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMub25EcmF3RnVuY1NlbGVjdChEcmF3RnVuY3Rpb25TZWxlY3Rvci5ERUZBVUxUX0ZVTkMpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBDQU5WQVNfRElNUyA9IG5ldyBEaW1lbnNpb25zKDY0MCwgNDgwKTtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh7IGNsYXNzTmFtZTogJ2NvbnRhaW5lcicgfSwgJ2NsYXNzTmFtZScsICdjb2wtbGctMTInKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYWdlLWhlYWRlcicgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0Z1biB3aXRoIENvbnRvdXJzJ1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd3ZWxsJyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0RyYWcnXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyB0byBtb3ZlIHRoZSBncmFwaCwgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Njcm9sbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIHpvb20sIGFuZCAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ3RybCArIHNjcm9sbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIGNoYW5nZSB0aGUgY29udG91ciBkZW5zaXR5LidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnTW9kaWZ5ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnIycsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgubnVtRnJhbWVzSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRnJhbWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIChudW1iZXIgb2YgZnJhbWVzKSwgdGhlbiBjbGljayAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUGxvdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIGNoYW5nZSB0aGUgYW5pbWF0aW9uIHNwZWVkLidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVXNlIHRoZSAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2xpZGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgdG8gZXhwbG9yZSB0aGUgYW5pbWF0aW9uIGluIG1vcmUgZGV0YWlsLidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnUGxvdCB5b3VyIG93biBmdW5jdGlvbnMgd2l0aCB0aGUgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RleHQgZWRpdG9ycydcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIGJlbG93LidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnSnVzdCBlbmpveSB0aGUgcHJldHR5IGFuaW1hdGlvbnMsIG9yICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnaHR0cHM6Ly9naXRodWIuY29tL2tyYXd0aGVrcm93L2NvbnRvdXJlcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrIGhlcmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgdG8gbGVhcm4gbW9yZS4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm90ZTogVGhpcyBhcHAgdXNlcyBXZWJHTCwgc28gaXQgbmVlZHMgYSBzdWZmaWNpZW50bHkgbW9kZXJuIGJyb3dzZXIgYW5kIEdQVSB0byB3b3JrLidcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0zJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEcmF3RnVuY3Rpb25TZWxlY3RvciwgeyBvblNlbGVjdDogdGhpcy5vbkRyYXdGdW5jU2VsZWN0IH0pXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTknIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC14cy04JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICd0b29sYmFyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2J0bi1ncm91cCcsIHJvbGU6ICdncm91cCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmNoYW5nZVpvb21BbmRSZWRyYXcoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tem9vbS1pbicgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguY2hhbmdlWm9vbUFuZFJlZHJhdygtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tem9vbS1vdXQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzJyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdygxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1taW51cycgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoMSwgMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LWxlZnQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDAsIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy11cCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoMCwgLTEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1kb3duJyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC50cmFuc2xhdGVBbmRSZWRyYXcobmV3IFZlY3RvcigtMSwgMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LXJpZ2h0JyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc3RhdGUuaXNBbmltYXRlZCB8fCAhdGhpcy5zdGF0ZS5pc0FuaW1hdGluZyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2J0bicsICdidG4tZGVmYXVsdCcsIHsgZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWQgfSksIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczguc3RhdGUuaXNBbmltYXRlZCAmJiAhX3RoaXM4LnN0YXRlLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5hbmltYXRpb25NYW5hZ2VyLnN0YXJ0KF90aGlzOC5zdGF0ZS5jdXJyZW50RnJhbWUsIGZ1bmN0aW9uIChjdXJyZW50RnJhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZyYW1lOiBjdXJyZW50RnJhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1wbGF5JyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdidG4nLCAnYnRuLWRlZmF1bHQnLCB7IGRpc2FibGVkOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkIH0pLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LnN0YXRlLmlzQW5pbWF0ZWQgJiYgX3RoaXM4LnN0YXRlLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5hbmltYXRpb25NYW5hZ2VyLnN0b3AoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcGF1c2UnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtNCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkID8gUmVhY3QuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5cGU6ICdyYW5nZScsIG1pbjogJzAnLCBtYXg6ICh0aGlzLnN0YXRlLm51bUZyYW1lcyAtIDEpLnRvU3RyaW5nKCksIHZhbHVlOiB0aGlzLnN0YXRlLmN1cnJlbnRGcmFtZSwgc3R5bGU6IHsgbWFyZ2luVG9wOiAnNXB4JyB9LCBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzOC5zdGF0ZS5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguYW5pbWF0aW9uTWFuYWdlci5zdG9wKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3VycyhfdGhpczguc3RhdGUuY3VycmVudEZyYW1lIC8gX3RoaXM4LnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3VycyhfdGhpczguc3RhdGUuY3VycmVudEZyYW1lIC8gX3RoaXM4LnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiB7IG1hcmdpblRvcDogJzEwcHgnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhc0Rpc3BsYXlQYW5lLCB7IGRpbXM6IENBTlZBU19ESU1TLCBvbk1vdW50Q2FsbGJhY2s6IGZ1bmN0aW9uIG9uTW91bnRDYWxsYmFjayhjYW52YXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC51c2VDYW52YXMoY2FudmFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgb25EaXNtb3VudENhbGxiYWNrOiBmdW5jdGlvbiBvbkRpc21vdW50Q2FsbGJhY2soKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvcHMubWFuYWdlci5kZXN0cm95Q29udGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMTInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUGxvdCBGdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC14cy05JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvcm0taW5saW5lJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2J0bi1ncm91cCcsIHN0eWxlOiB7IG1hcmdpblJpZ2h0OiAnMTBweCcgfSwgcm9sZTogJ2dyb3VwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2J0bicsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gJ2J0bi1kZWZhdWx0JyA6ICdidG4tcHJpbWFyeScsIHsgJ2FjdGl2ZSc6ICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSB9KSwgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHsgaXNBbmltYXRlZFNlbGVjdFN0YXRlOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0dyYXBoJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogY2xhc3NOYW1lcygnYnRuJywgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgPyAnYnRuLXByaW1hcnknIDogJ2J0bi1kZWZhdWx0JywgeyAnYWN0aXZlJzogdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgfSksIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7IGlzQW5pbWF0ZWRTZWxlY3RTdGF0ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FuaW1hdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcygnZm9ybS1ncm91cCcsIHsgJ2hhcy1lcnJvcic6IHRoaXMuaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKSB9KSwgc3R5bGU6IHsgZGlzcGxheTogJ2lubGluZS1ibG9jaycsIG1hcmdpbkJvdHRvbTogMCwgdmVydGljYWxBbGlnbjogJ21pZGRsZScgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2lucHV0LWdyb3VwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdpbnB1dC1ncm91cC1hZGRvbicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGcmFtZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIGNsYXNzTmFtZTogJ2Zvcm0tY29udHJvbCcsIHZhbHVlOiB0aGlzLnN0YXRlLm51bUZyYW1lc0lucHV0VmFsLCBkaXNhYmxlZDogIXRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlLCByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5udW1GcmFtZXNJbnB1dCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoeyBudW1GcmFtZXNJbnB1dFZhbDogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBzdHlsZTogeyB3aWR0aDogJzYwcHgnIH0gfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2hlbHAtYmxvY2snLCBzdHlsZTogeyBkaXNwbGF5OiB0aGlzLmlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCkgPyAnaW5saW5lLWJsb2NrJyA6ICdub25lJywgbWFyZ2luTGVmdDogJzEwcHgnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ011c3QgYmUgYW4gaW50ZWdlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC14cy0zJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLXN1Y2Nlc3MgYnRuLWJsb2NrIHB1bGwtcmlnaHQnLCBzdHlsZTogeyB3aWR0aDogJzgwcHgnIH0sIGRpc2FibGVkOiB0aGlzLmlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCksIHJlZjogZnVuY3Rpb24gcmVmKGJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucGxvdEJ1dHRvbiA9IGJ1dHRvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvbkNsaWNrOiB0aGlzLmhhbmRsZVBsb3RDbGljayB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1Bsb3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IgPT0gJycgPyBudWxsIDogUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2hhcy1lcnJvcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoZWxwLWJsb2NrJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdZb3VyIGNvZGUgZmFpbGVkIHRvIGNvbXBpbGUgd2l0aCB0aGUgZm9sbG93aW5nIGVycm9yOidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNoYWRlckNvbXBpbGVFcnJvci50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbiAobGluZSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGtleTogaW5kZXggfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnYnInLCBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNoYWRlckNvbXBpbGVFcnJvci5pbmRleE9mKCd3cm9uZyBvcGVyYW5kIHR5cGVzJykgIT0gLTEgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vdGUgdGhhdCBHTFNMIEVTIGRvZXMgbm90IGltcGxpY2l0bHkgY2FzdCBpbnRzIHRvIGZsb2F0cy4gV3JpdGUgbnVtYmVycyBsaWtlIFwiMjNcIiBhcyBcIjIzLjBcIi4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNoYWRlckNvbXBpbGVFcnJvci5pbmRleE9mKCdnbF9GcmFnRGF0YScpICE9IC0xID8gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEaWQgeW91IGZvcmdldCBhIHNlbWljb2xvbiBvbiB0aGUgbGFzdCBsaW5lPydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1ZpZXcgdGhlIGNvbnNvbGUgdG8gc2VlIHRoZSBmdWxsIGdlbmVyYXRlZCBXZWJHTCBzaGFkZXIgY29kZS4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiB7IG1hcmdpblRvcDogJzEwcHgnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEFjZUVkaXRvciwgeyBoZWlnaHQ6ICcyMDAnLCBrZXk6ICdkcmF3RnVuY0VkaXRvcicsIHJlZjogZnVuY3Rpb24gcmVmKGVkaXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmRyYXdGdW5jRWRpdG9yID0gZWRpdG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMTInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTGlicmFyeSBGdW5jdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiB7IG1hcmdpbkJvdHRvbTogJzEwcHgnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEFjZUVkaXRvciwgeyBoZWlnaHQ6ICcyMDAnLCBrZXk6ICdpbmNsdWRlU3JjRWRpdG9yJywgcmVmOiBmdW5jdGlvbiByZWYoZWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguaW5jbHVkZVNyY0VkaXRvciA9IGVkaXRvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXNlQ2FudmFzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVzZUNhbnZhcyhjYW52YXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgZHJhZ01hbmFnZXIgPSBuZXcgRHJhZ01hbmFnZXIoY2FudmFzLCBmdW5jdGlvbiAoZHJhZ1ZlYykge1xuICAgICAgICAgICAgICAgIF90aGlzOS5wcm9wcy5tYW5hZ2VyLnZpZXdwb3J0LnRyYW5zbGF0ZShkcmFnVmVjKTtcbiAgICAgICAgICAgICAgICBfdGhpczkucmVkcmF3KCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXYuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczkuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcoZ2V0U2Nyb2xsRGlyKGV2KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnByb3BzLm1hbmFnZXIuY2hhbmdlWm9vbSgtZ2V0U2Nyb2xsRGlyKGV2KSwgZ2V0Q2FudmFzTW91c2VQb3MoY2FudmFzLCBldikpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczkucmVkcmF3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLnVzZUNhbnZhcyhjYW52YXMpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdpc051bUZyYW1lc0lucHV0SW52YWxpZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc051bUZyYW1lc0lucHV0SW52YWxpZCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSAmJiB0aGlzLnN0YXRlLm51bUZyYW1lc0lucHV0VmFsLnNwbGl0KCcnKS5zb21lKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGMuY2hhckNvZGVBdCgpIDwgJzAnLmNoYXJDb2RlQXQoKSB8fCBjLmNoYXJDb2RlQXQoKSA+ICc5Jy5jaGFyQ29kZUF0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlUGxvdENsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVBsb3RDbGljayhlKSB7XG4gICAgICAgICAgICB0aGlzLnNldERyYXdGdW5jKHRoaXMuZHJhd0Z1bmNFZGl0b3IuZ2V0VmFsdWUoKSwgdGhpcy5pbmNsdWRlU3JjRWRpdG9yLmdldFZhbHVlKCksIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlLCB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSA/IHBhcnNlSW50KHRoaXMuc3RhdGUubnVtRnJhbWVzSW5wdXRWYWwpIDogMCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlZHJhdycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWRyYXcoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0FuaW1hdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3Vycyh0aGlzLnN0YXRlLmN1cnJlbnRGcmFtZSAvIHRoaXMuc3RhdGUubnVtRnJhbWVzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3VycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjaGFuZ2Vab29tQW5kUmVkcmF3JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZVpvb21BbmRSZWRyYXcoY2hhbmdlQW1vdW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlWm9vbShjaGFuZ2VBbW91bnQpO1xuICAgICAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcoY2hhbmdlQW1vdW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlQ29udG91clNwYWNpbmcoY2hhbmdlQW1vdW50KTtcbiAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RyYW5zbGF0ZUFuZFJlZHJhdycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFuc2xhdGVBbmRSZWRyYXcodHJhbnNsYXRlQW1vdW50KSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIudHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudC5tdWx0aXBseSg1MC4wKSk7XG4gICAgICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXREcmF3RnVuYycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREcmF3RnVuYyhkcmF3RnVuYywgaW5jbHVkZVNyYykge1xuICAgICAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgaXNBbmltYXRlZCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgdmFyIG51bUZyYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbM107XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmNoYW5nZURyYXdGdW5jKGRyYXdGdW5jLCBpbmNsdWRlU3JjLCBpc0FuaW1hdGVkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBzaGFkZXJDb21waWxlRXJyb3I6IGVyclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzQW5pbWF0ZWQgJiYgbnVtRnJhbWVzID09IDApIHtcbiAgICAgICAgICAgICAgICBudW1GcmFtZXMgPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBpc0FuaW1hdGVkOiBpc0FuaW1hdGVkLFxuICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBpc0FuaW1hdGVkLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogMCxcbiAgICAgICAgICAgICAgICBudW1GcmFtZXM6IG51bUZyYW1lcyxcbiAgICAgICAgICAgICAgICBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IGlzQW5pbWF0ZWQsXG4gICAgICAgICAgICAgICAgbnVtRnJhbWVzSW5wdXRWYWw6IG51bUZyYW1lcy50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogJydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLm51bUZyYW1lcyA9IG51bUZyYW1lcztcbiAgICAgICAgICAgIGlmIChpc0FuaW1hdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0b3AoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczEwLmFuaW1hdGlvbk1hbmFnZXIuc3RhcnQoMCwgZnVuY3Rpb24gKGN1cnJlbnRGcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZyYW1lOiBjdXJyZW50RnJhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0b3AoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczEwLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ29uRHJhd0Z1bmNTZWxlY3QnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmF3RnVuY1NlbGVjdChmdW5jKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRGdW5jID0gRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnNbZnVuY107XG4gICAgICAgICAgICB0aGlzLmRyYXdGdW5jRWRpdG9yLnNldFZhbHVlKHNlbGVjdGVkRnVuYy5kcmF3RnVuYy50cmltKCkpO1xuICAgICAgICAgICAgdGhpcy5pbmNsdWRlU3JjRWRpdG9yLnNldFZhbHVlKHNlbGVjdGVkRnVuYy5pbmNsdWRlU3JjLnRyaW0oKSk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRGdW5jLmlzQW5pbWF0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERyYXdGdW5jKHNlbGVjdGVkRnVuYy5kcmF3RnVuYywgc2VsZWN0ZWRGdW5jLmluY2x1ZGVTcmMsIHNlbGVjdGVkRnVuYy5pc0FuaW1hdGVkLCBzZWxlY3RlZEZ1bmMubnVtRnJhbWVzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXREcmF3RnVuYyhzZWxlY3RlZEZ1bmMuZHJhd0Z1bmMsIHNlbGVjdGVkRnVuYy5pbmNsdWRlU3JjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDb250b3VyZXJBcHA7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbjtcblxuZnVuY3Rpb24gaW5pdFJlbmRlcihtYW5hZ2VyKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmRleENvbnRhaW5lcicpO1xuICAgIFJlYWN0RE9NLnJlbmRlcihSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRvdXJlckFwcCwgeyBtYW5hZ2VyOiBtYW5hZ2VyIH0pLCBjb250YWluZXIpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnaXRodWItcmliYm9uJykuaW5uZXJIVE1MID0gJzxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20va3Jhd3RoZWtyb3cvY29udG91cmVyXCI+PGltZyBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyByaWdodDogMDsgYm9yZGVyOiAwO1wiIHNyYz1cImh0dHBzOi8vY2Ftby5naXRodWJ1c2VyY29udGVudC5jb20vMzY1OTg2YTEzMmNjZDZhNDRjMjNhOTE2OTAyMmMwYjVjODkwYzM4Ny82ODc0NzQ3MDczM2EyZjJmNzMzMzJlNjE2ZDYxN2E2ZjZlNjE3NzczMmU2MzZmNmQyZjY3Njk3NDY4NzU2MjJmNzI2OTYyNjI2ZjZlNzMyZjY2NmY3MjZiNmQ2NTVmNzI2OTY3Njg3NDVmNzI2NTY0NWY2MTYxMzAzMDMwMzAyZTcwNmU2N1wiIGFsdD1cIkZvcmsgbWUgb24gR2l0SHViXCIgZGF0YS1jYW5vbmljYWwtc3JjPVwiaHR0cHM6Ly9zMy5hbWF6b25hd3MuY29tL2dpdGh1Yi9yaWJib25zL2ZvcmttZV9yaWdodF9yZWRfYWEwMDAwLnBuZ1wiPjwvYT4nO1xufSIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gZ2V0Q2FudmFzTW91c2VQb3MoY2FudmFzLCBldil7XG4gICAgY29uc3QgYm91bmRpbmdSZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAoZXYuY2xpZW50WCAtIGJvdW5kaW5nUmVjdC5sZWZ0KSAqIChjYW52YXMud2lkdGggLyBib3VuZGluZ1JlY3Qud2lkdGgpLFxuICAgICAgICAoZXYuY2xpZW50WSAtIGJvdW5kaW5nUmVjdC50b3ApICogKGNhbnZhcy5oZWlnaHQgLyBib3VuZGluZ1JlY3QuaGVpZ2h0KVxuICAgICk7XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbERpcihldil7XG4gICAgaWYoZXYuZGVsdGFZID09IDApIHJldHVybiAwO1xuICAgIGVsc2UgcmV0dXJuIGV2LmRlbHRhWSAvIE1hdGguYWJzKGV2LmRlbHRhWSk7XG59XG5cbmNsYXNzIE1vdXNlRG93blRyYWNrZXJ7XG4gICAgY29uc3RydWN0b3IoY2FudmFzLCBpbml0VHJhY2tDYWxsYmFjaywgdHJhY2tDYWxsYmFjaywgaXNUcmFja2luZ0VuYWJsZWQgPSBldiA9PiB0cnVlKXtcbiAgICAgICAgdGhpcy5pbml0VHJhY2tDYWxsYmFjayA9IGluaXRUcmFja0NhbGxiYWNrO1xuICAgICAgICB0aGlzLnRyYWNrQ2FsbGJhY2sgPSB0cmFja0NhbGxiYWNrO1xuICAgICAgICB0aGlzLmlzVHJhY2tpbmdFbmFibGVkID0gaXNUcmFja2luZ0VuYWJsZWQ7XG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuXG4gICAgICAgIHRoaXMub25Nb3VzZURvd24gPSBldiA9PiB7XG4gICAgICAgICAgICBpZih0aGlzLmlzVHJhY2tpbmdFbmFibGVkKGV2KSl7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0VHJhY2tDYWxsYmFjayhldik7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Nb3VzZVVwID0gZXYgPT4ge1xuICAgICAgICAgICAgLy90aGlzLnRyYWNrQ2FsbGJhY2soZXYpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZSA9IGV2ID0+IHtcbiAgICAgICAgICAgIHRoaXMudHJhY2tDYWxsYmFjayhldik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgfVxufTtcblxuY2xhc3MgRHJhZ01hbmFnZXIgZXh0ZW5kcyBNb3VzZURvd25UcmFja2Vye1xuICAgIGNvbnN0cnVjdG9yKGNhbnZhcywgZHJhZ0NhbGxiYWNrLCBpc0RyYWdFbmFibGVkID0gZXYgPT4gdHJ1ZSl7XG4gICAgICAgIHN1cGVyKGNhbnZhcyxcbiAgICAgICAgICAgIGV2ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZNb3VzZVBvcyA9IGdldENhbnZhc01vdXNlUG9zKHRoaXMuY2FudmFzLCBldik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXYgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vdXNlUG9zID0gZ2V0Q2FudmFzTW91c2VQb3ModGhpcy5jYW52YXMsIGV2KTtcbiAgICAgICAgICAgICAgICBkcmFnQ2FsbGJhY2sobW91c2VQb3Muc3VidHJhY3QodGhpcy5wcmV2TW91c2VQb3MpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZNb3VzZVBvcyA9IG1vdXNlUG9zO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzRHJhZ0VuYWJsZWQpO1xuICAgICAgICB0aGlzLnByZXZNb3VzZVBvcyA9IG5ldyBWZWN0b3IoMCwgMCk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gc2V0Q2FudmFzU21vb3RoaW5nKGN0eCwgZW5hYmxlKXtcbiAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xuICAgIGN0eC5tb3pJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBlbmFibGU7XG4gICAgY3R4LndlYmtpdEltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbiAgICBjdHgubW5JbWFnZVNtb290aGluZ0VuYWJsZWQgPSBlbmFibGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhbnZhcyhjb250YWluZXIsIGJvdW5kaW5nUmVjdCl7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLndpZHRoID0gYm91bmRpbmdSZWN0LndpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBib3VuZGluZ1JlY3QuaGVpZ2h0O1xuICAgIGNhbnZhcy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgY2FudmFzLnN0eWxlLmxlZnQgPSBib3VuZGluZ1JlY3QubGVmdC50b1N0cmluZygpICsgJ3B4JztcbiAgICBjYW52YXMuc3R5bGUudG9wID0gYm91bmRpbmdSZWN0LnRvcC50b1N0cmluZygpICsgJ3B4JztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcbiAgICByZXR1cm4gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG59XG5cbmZ1bmN0aW9uIGdldENhbnZhc0RpbXMoY3R4KXtcbiAgICByZXR1cm4gbmV3IERpbWVuc2lvbnMoY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBjb21waWxlU2hhZGVyKGN0eCwgc3JjLCB0eXBlKXtcbiAgICBjb25zdCBzaGFkZXIgPSBjdHguY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgIGN0eC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzcmMpO1xuICAgIGN0eC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgaWYoIWN0eC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBjdHguQ09NUElMRV9TVEFUVVMpKXtcbiAgICAgICAgY29uc29sZS5sb2coc3JjKTtcbiAgICAgICAgdGhyb3cgJ1NoYWRlciBjb21waWxlIGVycm9yOiAnICsgY3R4LmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShjdHgsIHZlcnRTcmMsIGZyYWdTcmMpe1xuICAgIGNvbnN0IHByb2dyYW0gPSBjdHguY3JlYXRlUHJvZ3JhbSgpO1xuICAgIGN0eC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgY29tcGlsZVNoYWRlcihjdHgsIHZlcnRTcmMsIGN0eC5WRVJURVhfU0hBREVSKSk7XG4gICAgY3R4LmF0dGFjaFNoYWRlcihwcm9ncmFtLCBjb21waWxlU2hhZGVyKGN0eCwgZnJhZ1NyYywgY3R4LkZSQUdNRU5UX1NIQURFUikpO1xuICAgIGN0eC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcbiAgICByZXR1cm4gcHJvZ3JhbTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29tcHV0ZVRleHR1cmUoY3R4LCBkaW1zLCB0ZXhUeXBlID0gY3R4LkZMT0FULCBjb250ZW50cyA9IG51bGwpe1xuICAgIGNvbnN0IHRleCA9IGN0eC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXgpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTkVBUkVTVCk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9TLCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfVCwgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgIGN0eC50ZXhJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBjdHguUkdCQSwgZGltcy53aWR0aCwgZGltcy5oZWlnaHQsIDAsIGN0eC5SR0JBLCB0ZXhUeXBlLCBjb250ZW50cyk7XG4gICAgcmV0dXJuIHRleDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRkJPKGN0eCwgZXh0REIsIHRleHR1cmVzKXtcbiAgICBjb25zdCBmYm8gPSBjdHguY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZmJvKTtcbiAgICBpZih0ZXh0dXJlcy5sZW5ndGggPiAxKXtcbiAgICAgICAgZXh0REIuZHJhd0J1ZmZlcnNXRUJHTChjb21wdXRlMURBcnJheSh0ZXh0dXJlcy5sZW5ndGgsXG4gICAgICAgICAgICBpID0+IGV4dERCWydDT0xPUl9BVFRBQ0hNRU5UJyArIGkudG9TdHJpbmcoKSArICdfV0VCR0wnXVxuICAgICAgICApKTtcbiAgICAgICAgdGV4dHVyZXMuZm9yRWFjaCgodGV4LCBpKSA9PiB7XG4gICAgICAgICAgICBjdHguZnJhbWVidWZmZXJUZXh0dXJlMkQoY3R4LkZSQU1FQlVGRkVSLCBleHREQlsnQ09MT1JfQVRUQUNITUVOVCcgKyBpLnRvU3RyaW5nKCkgKyAnX1dFQkdMJ10sIGN0eC5URVhUVVJFXzJELCB0ZXgsIDApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgY3R4LmZyYW1lYnVmZmVyVGV4dHVyZTJEKGN0eC5GUkFNRUJVRkZFUiwgY3R4LkNPTE9SX0FUVEFDSE1FTlQwLCBjdHguVEVYVFVSRV8yRCwgdGV4dHVyZXNbMF0sIDApO1xuICAgIH1cbiAgICBpZihjdHguY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhjdHguRlJBTUVCVUZGRVIpICE9IGN0eC5GUkFNRUJVRkZFUl9DT01QTEVURSl7XG4gICAgICAgIHRocm93ICdHTF9GUkFNRUJVRkZFUl9DT01QTEVURSBmYWlsZWQuJztcbiAgICB9XG4gICAgcmV0dXJuIGZibztcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXJyYXlCdWZmZXIoY3R4LCBidWZUeXBlLCBjb250ZW50cyl7XG4gICAgY29uc3QgYnVmID0gY3R4LmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGN0eC5iaW5kQnVmZmVyKGJ1ZlR5cGUsIGJ1Zik7XG4gICAgY3R4LmJ1ZmZlckRhdGEoYnVmVHlwZSwgY29udGVudHMsIGN0eC5TVEFUSUNfRFJBVyk7XG4gICAgcmV0dXJuIGJ1Zjtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJ0ZXhBdHRyaWIoY3R4LCBwcm9ncmFtLCBhdHRyaWJOYW1lLCBpdGVtU2l6ZSwgYnVmKXtcbiAgICBjb25zdCBhdHRyaWIgPSBjdHguZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgYXR0cmliTmFtZSk7XG4gICAgY3R4LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGF0dHJpYik7XG4gICAgY3R4LmJpbmRCdWZmZXIoY3R4LkFSUkFZX0JVRkZFUiwgYnVmKTtcbiAgICBjdHgudmVydGV4QXR0cmliUG9pbnRlcihhdHRyaWIsIGl0ZW1TaXplLCBjdHguRkxPQVQsIGZhbHNlLCAwLCAwKTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJUZXh0dXJlcyhjdHgsIHByb2dyYW0sIHRleE5hbWVzKXtcbiAgICB0ZXhOYW1lcy5mb3JFYWNoKCh0ZXhOYW1lLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IHRleExvYyA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGV4TmFtZSk7XG4gICAgICAgIGN0eC51bmlmb3JtMWkodGV4TG9jLCBpKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJVbmlmb3JtcyhjdHgsIHByb2dyYW0sIHVuaWZvcm1zLCB2YWxzKXtcbiAgICB1bmlmb3Jtcy5mb3JFYWNoKHVuaWZvcm0gPT4ge1xuICAgICAgICBjb25zdCB1bmlmb3JtTG9jID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB1bmlmb3JtLm5hbWUpO1xuICAgICAgICBpZih1bmlmb3JtLnR5cGUgPT0gJ2ludCcpe1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xaSh1bmlmb3JtTG9jLCB2YWxzW3VuaWZvcm0ubmFtZV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodW5pZm9ybS50eXBlID09ICdmbG9hdCcpe1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xZih1bmlmb3JtTG9jLCB2YWxzW3VuaWZvcm0ubmFtZV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoL15pdmVjWzItNF0kL2cudGVzdCh1bmlmb3JtLnR5cGUpKXtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyB1bmlmb3JtLnR5cGVbNF0udG9TdHJpbmcoKSArICdpdiddKHVuaWZvcm1Mb2MsIG5ldyBJbnQzMkFycmF5KHZhbHNbdW5pZm9ybS5uYW1lXSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoL152ZWNbMi00XSQvZy50ZXN0KHVuaWZvcm0udHlwZSkpe1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHVuaWZvcm0udHlwZVszXS50b1N0cmluZygpICsgJ2Z2J10odW5pZm9ybUxvYywgbmV3IEZsb2F0MzJBcnJheSh2YWxzW3VuaWZvcm0ubmFtZV0pKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBiaW5kVGV4dHVyZXMoY3R4LCB0ZXh0dXJlcyl7XG4gICAgdGV4dHVyZXMuZm9yRWFjaCgodGV4dHVyZSwgaSkgPT4ge1xuICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHhbJ1RFWFRVUkUnICsgaS50b1N0cmluZygpXSk7XG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4dHVyZSk7XG4gICAgfSk7XG59XG5cbmNvbnN0IEZVTExTQ1JFRU5fUVVBRF9QT1NfQVJSQVkgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAtMS4wLCAtMS4wLFxuICAgIDEuMCwgLTEuMCxcbiAgICAxLjAsIDEuMCxcbiAgICAtMS4wLCAxLjAsXG5dKTtcblxuY29uc3QgRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZID0gbmV3IFVpbnQxNkFycmF5KFtcbiAgICAwLCAxLCAyLFxuICAgIDAsIDIsIDNcbl0pO1xuXG5jb25zdCBGVUxMU0NSRUVOX1FVQURfTlVNX1ZFUlRJQ0VTID0gNjtcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgUkVEID0gbmV3IENvbG9yKDI1NSwgMCwgMCk7XG5jb25zdCBHUkVFTiA9IG5ldyBDb2xvcigwLCAyNTUsIDApO1xuY29uc3QgQkxVRSA9IG5ldyBDb2xvcigwLCAwLCAyNTUpO1xuY29uc3QgV0hJVEUgPSBuZXcgQ29sb3IoMjU1LCAyNTUsIDI1NSk7XG5cbmNsYXNzIENvbnRvdXJlck1hbmFnZXJ7XG4gICAgY29uc3RydWN0b3IoZHJhd0Z1bmMpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gbmV3IFNjYWxhYmxlVmlld3BvcnRNYW5hZ2VyKFxuICAgICAgICAgICAgbmV3IFZlY3RvcigwLCAwKSxcbiAgICAgICAgICAgIDAuMDFcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy56b29tU2Vuc2l0aXZpdHkgPSAwLjM7XG4gICAgICAgIHRoaXMuY29udG91clNwYWNpbmcgPSAxLjA7XG4gICAgfVxuICAgIGNoYW5nZURyYXdGdW5jKGRyYXdGdW5jLCBpbmNsdWRlU3JjLCBpc0FuaW1hdGVkID0gZmFsc2Upe1xuICAgICAgICBjb25zdCBjcmVhdGVGaWVsZEtlcm5lbCA9IGNvb3JkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkRnVuYyA9XG5gdmVjMiBjUG9zID0gKHZlYzIodGhyZWFkSWQpICogdVNjYWxlKSArIHVQb3M7XG52ZWMyIHJlcztcbmAgK1xuICAgICAgICAgICAgZHJhd0Z1bmMudHJpbSgpICsgJ1xcbicgK1xuLy9gZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KFxuLy8gICAgcmVzLFxuLy8gICAgMC4wLCAwLjBcbi8vKTtcbmBnbF9GcmFnRGF0YVswXSA9IHBhY2tGbG9hdChyZXMuYCArIGNvb3JkICsgYCk7XG5gO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3BncHVNYW5hZ2VyLmNyZWF0ZUtlcm5lbChcbiAgICAgICAgICAgICAgICBmaWVsZEZ1bmMsIFtdLCB0aGlzLmRpbXMsIFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1U2NhbGUnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2ZWMyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1UG9zJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXS5jb25jYXQoaXNBbmltYXRlZCA/IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0aW1lJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSA6IFtdKSwgMSwgR1BHUFVNYW5hZ2VyLlBBQ0tfRkxPQVRfSU5DTFVERSArIGluY2x1ZGVTcmMudHJpbSgpICsgJ1xcblxcbidcbiAgICAgICAgICAgICk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmllbGRLZXJuZWxYID0gY3JlYXRlRmllbGRLZXJuZWwoJ3gnKTtcbiAgICAgICAgdGhpcy5maWVsZEtlcm5lbFkgPSBjcmVhdGVGaWVsZEtlcm5lbCgneScpO1xuXG4gICAgICAgIHRoaXMudmlld3BvcnQuc2NhbGUgPSAxMC4wIC8gdGhpcy5kaW1zLndpZHRoO1xuICAgICAgICB0aGlzLnZpZXdwb3J0LnBvcyA9IG5ldyBWZWN0b3IoLXRoaXMuZGltcy53aWR0aCwgLXRoaXMuZGltcy5oZWlnaHQpLmRpdmlkZSgyLjApLm11bHRpcGx5KHRoaXMudmlld3BvcnQuc2NhbGUpO1xuICAgICAgICB0aGlzLmNvbnRvdXJTcGFjaW5nID0gMS4wO1xuXG4gICAgICAgIHRoaXMuaXNBbmltYXRlZCA9IGlzQW5pbWF0ZWQ7XG4gICAgfVxuICAgIHVzZUNhbnZhcyhjYW52YXMpe1xuICAgICAgICB0aGlzLmN0eCA9IEdQR1BVTWFuYWdlci5nZXRDYW52YXNDb250ZXh0KGNhbnZhcyk7XG4gICAgICAgIHRoaXMuZ3BncHVNYW5hZ2VyID0gbmV3IEdQR1BVTWFuYWdlcih0aGlzLmN0eCwgZmFsc2UpO1xuICAgICAgICB0aGlzLmRpbXMgPSBnZXRDYW52YXNEaW1zKHRoaXMuY3R4KTtcblxuICAgICAgICB0aGlzLnBsb3RLZXJuZWwgPSB0aGlzLmdwZ3B1TWFuYWdlci5jcmVhdGVHcmFwaGljYWxLZXJuZWwoXG4gICAgICAgICAgICBDb250b3VyZXJNYW5hZ2VyLnBsb3RGdW5jLCBbJ3VGaWVsZFgnLCAndUZpZWxkWSddLCB0aGlzLmRpbXMsIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1Q29udG91clNwYWNpbmcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSwgR1BHUFVNYW5hZ2VyLlBBQ0tfRkxPQVRfSU5DTFVERSArIENvbnRvdXJlck1hbmFnZXIuRklFTERfQ0hFQ0tfSU5DTFVERVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHRlc3REaW1zID0gbmV3IERpbWVuc2lvbnMoNSwgMSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ3BncHVNYW5hZ2VyLnRleHR1cmVUb0FycmF5KHRlc3REaW1zLCB0aGlzLmdwZ3B1TWFuYWdlci5jcmVhdGVLZXJuZWwoXG5gZ2xfRnJhZ0RhdGFbMF0gPSBwYWNrRmxvYXQoLTEuMCAtIGZsb2F0KHRocmVhZElkLngpIC8gNS4wKTtcbmAsIFtdLCB0ZXN0RGltcywgW10sIDEsIEdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREUpLnJ1bihbXSwgdGVzdERpbXMsIFtdLCBmYWxzZSkudGV4dHVyZXNbMF0sIGZhbHNlKVswXS5qb2luKCdcXG4nKSk7XG4gICAgfVxuICAgIGRlc3Ryb3lDb250ZXh0KCl7XG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IDE7XG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQgPSAxO1xuICAgIH1cbiAgICBjaGFuZ2Vab29tKGNoYW5nZUFtb3VudCwgem9vbVBvaW50ID0gbmV3IFZlY3Rvcih0aGlzLmRpbXMud2lkdGggLyAyLCB0aGlzLmRpbXMuaGVpZ2h0IC8gMikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LnNjYWxlQXRQb2ludChcbiAgICAgICAgICAgIC1jaGFuZ2VBbW91bnQgKiB0aGlzLnpvb21TZW5zaXRpdml0eSxcbiAgICAgICAgICAgIHpvb21Qb2ludFxuICAgICAgICApO1xuICAgIH1cbiAgICBjaGFuZ2VDb250b3VyU3BhY2luZyhjaGFuZ2VBbW91bnQpe1xuICAgICAgICB0aGlzLmNvbnRvdXJTcGFjaW5nICo9IE1hdGguZXhwKGNoYW5nZUFtb3VudCAqIHRoaXMuem9vbVNlbnNpdGl2aXR5KTtcbiAgICB9XG4gICAgdHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudCl7XG4gICAgICAgIHRoaXMudmlld3BvcnQudHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudCk7XG4gICAgfVxuICAgIGRyYXdDb250b3Vycyh0aW1lID0gMCl7XG4gICAgICAgIGNvbnN0IHVuaWZvcm1Bc3NpZ25tZW50cyA9IHtcbiAgICAgICAgICAgIHVTY2FsZTogdGhpcy52aWV3cG9ydC5zY2FsZSxcbiAgICAgICAgICAgIHVQb3M6IHRoaXMudmlld3BvcnQucG9zLnRvQXJyYXkoKVxuICAgICAgICB9O1xuICAgICAgICBpZih0aGlzLmlzQW5pbWF0ZWQpe1xuICAgICAgICAgICAgdW5pZm9ybUFzc2lnbm1lbnRzWyd0aW1lJ10gPSB0aW1lO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpZWxkUmVzdWx0WCA9IHRoaXMuZmllbGRLZXJuZWxYLnJ1bihbXSwgdGhpcy5kaW1zLCB1bmlmb3JtQXNzaWdubWVudHMsIGZhbHNlKTtcbiAgICAgICAgY29uc3QgZmllbGRSZXN1bHRZID0gdGhpcy5maWVsZEtlcm5lbFkucnVuKFtdLCB0aGlzLmRpbXMsIHVuaWZvcm1Bc3NpZ25tZW50cywgZmFsc2UpO1xuICAgICAgICB0aGlzLnBsb3RLZXJuZWwucnVuKFtmaWVsZFJlc3VsdFgudGV4dHVyZXNbMF0sIGZpZWxkUmVzdWx0WS50ZXh0dXJlc1swXV0sIHRoaXMuZGltcywge1xuICAgICAgICAgICAgdUNvbnRvdXJTcGFjaW5nOiB0aGlzLmNvbnRvdXJTcGFjaW5nXG4gICAgICAgIH0pO1xuICAgICAgICBmaWVsZFJlc3VsdFguZGlzcG9zZSgpO1xuICAgICAgICBmaWVsZFJlc3VsdFkuZGlzcG9zZSgpO1xuICAgIH1cbn07XG5cbkNvbnRvdXJlck1hbmFnZXIucGxvdEZ1bmMgPVxuYGl2ZWMyIGxpbmVJbmRleCA9IGl2ZWMyKGZsb29yKHZlYzIoXG4gICAgdW5wYWNrRmxvYXQodGV4dHVyZTJEKHVGaWVsZFgsIHZDb29yZCkpLFxuICAgIHVucGFja0Zsb2F0KHRleHR1cmUyRCh1RmllbGRZLCB2Q29vcmQpKVxuKSAvIHVDb250b3VyU3BhY2luZykpO1xudmVjMiBjbXBGaWVsZCA9IHZlYzIobGluZUluZGV4KSAqIHVDb250b3VyU3BhY2luZztcbml2ZWMyIGRyYXdEYXRhID0gaXZlYzIoZ3JlYXRlclRoYW5FcXVhbChcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigwLCAxKSwgY21wRmllbGQpICtcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigxLCAwKSwgY21wRmllbGQpICtcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigwLCAtMSksIGNtcEZpZWxkKSArXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoLTEsIDApLCBjbXBGaWVsZCksXG4gICAgaXZlYzIoMSkpKTtcbmlmKGFsbChlcXVhbChkcmF3RGF0YSwgaXZlYzIoMCkpKSl7XG4gICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIDEuMCk7XG59XG5lbHNle1xuICAgIHZlYzIgaXNBeGlzID0gdmVjMihlcXVhbChsaW5lSW5kZXgsIGl2ZWMyKDApKSk7XG4gICAgdmVjMiBsaW5lQ29sb3IgPSB2ZWMyKGRyYXdEYXRhKSAqICgxLjAgLSAwLjUgKiBpc0F4aXMpO1xuICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNChsaW5lQ29sb3IueCwgMC41ICogZG90KHZlYzIoZHJhd0RhdGEpLCBpc0F4aXMpLCBsaW5lQ29sb3IueSwgMS4wKTtcbn1cbmA7XG5cbkNvbnRvdXJlck1hbmFnZXIuRklFTERfQ0hFQ0tfSU5DTFVERSA9XG5gdmVjMiBnZXRGaWVsZChpdmVjMiBwb3Mpe1xuICAgIHJldHVybiB2ZWMyKFxuICAgICAgICB1bnBhY2tGbG9hdChhcnJHZXQodUZpZWxkWCwgcG9zKSksXG4gICAgICAgIHVucGFja0Zsb2F0KGFyckdldCh1RmllbGRZLCBwb3MpKVxuICAgICk7XG59XG5cbml2ZWMyIGZpZWxkQ2hlY2soaXZlYzIgY1BvcywgaXZlYzIgZGlyLCB2ZWMyIGNtcEZpZWxkKXtcbiAgICBpdmVjMiBvUG9zID0gY1BvcyArIGRpcjtcbiAgICBpZihhbGwoZ3JlYXRlclRoYW5FcXVhbChvUG9zLCBpdmVjMigwKSkpICYmIGFsbChsZXNzVGhhbihvUG9zLCB1RGltcykpKXtcbiAgICAgICAgcmV0dXJuIGl2ZWMyKGxlc3NUaGFuKGdldEZpZWxkKG9Qb3MpLCBjbXBGaWVsZCkpO1xuICAgIH1cbiAgICBlbHNlIHJldHVybiBpdmVjMigwKTtcbn1cblxuYDtcblxuY2xhc3MgQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlcntcbiAgICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBudW1GcmFtZXMgPSAxMDAwKXtcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm51bUZyYW1lcyA9IG51bUZyYW1lcztcbiAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAwO1xuICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25Mb29wID0gdGhpcy5hbmltYXRpb25Mb29wLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIHN0YXJ0KHN0YXJ0RnJhbWUgPSAwLCBvbkRyYXcgPSBudWxsKXtcbiAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSBzdGFydEZyYW1lO1xuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vbkRyYXcgPSBvbkRyYXc7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25Mb29wKTtcbiAgICB9XG4gICAgYW5pbWF0aW9uTG9vcCh0aW1lc3RhbXApe1xuICAgICAgICBpZih0aGlzLmlzQW5pbWF0aW5nKXtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5jdXJyZW50RnJhbWUgLyB0aGlzLm51bUZyYW1lcyk7XG4gICAgICAgICAgICBpZih0aGlzLm9uRHJhdyAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRHJhdyh0aGlzLmN1cnJlbnRGcmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9ICh0aGlzLmN1cnJlbnRGcmFtZSArIDEpICUgdGhpcy5udW1GcmFtZXM7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uTG9vcCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGlmKHRoaXMub25TdG9wQ2FsbGJhY2sgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgdGhpcy5vblN0b3BDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3Aob25TdG9wQ2FsbGJhY2sgPSBudWxsKXtcbiAgICAgICAgaWYodGhpcy5pc0FuaW1hdGluZyl7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrID0gb25TdG9wQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGlmKG9uU3RvcENhbGxiYWNrICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9uU3RvcENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5mdW5jdGlvbiBpbml0KCl7XG4gICAgY29uc3QgbWFuYWdlciA9IG5ldyBDb250b3VyZXJNYW5hZ2VyKCk7XG4gICAgaW5pdFJlbmRlcihtYW5hZ2VyKTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuY2xhc3MgQ2FudmFzRGlzcGxheVBhbmUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICAgICAgaWYoJ29uTW91bnRDYWxsYmFjaycgaW4gdGhpcy5wcm9wcyl7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25Nb3VudENhbGxiYWNrKGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKXtcbiAgICAgICAgaWYoJ29uRGlzbW91bnRDYWxsYmFjaycgaW4gdGhpcy5wcm9wcyl7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uRGlzbW91bnRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpe1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGNhbnZhcyB3aWR0aD17dGhpcy5wcm9wcy5kaW1zLndpZHRofSBoZWlnaHQ9e3RoaXMucHJvcHMuZGltcy5oZWlnaHR9IHN0eWxlPXt7d2lkdGg6ICcxMDAlJ319PjwvY2FudmFzPlxuICAgICAgICApO1xuICAgIH1cbn07XG5DYW52YXNEaXNwbGF5UGFuZS5wcm9wVHlwZXMgPSB7XG4gICAgZGltczogUmVhY3QuUHJvcFR5cGVzLmluc3RhbmNlT2YoRGltZW5zaW9ucykuaXNSZXF1aXJlZCxcbiAgICBvbk1vdW50Q2FsbGJhY2s6IFJlYWN0LlByb3BUeXBlcy5mdW5jXG59O1xuXG5jbGFzcyBEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgICByZW5kZXIoKXtcbiAgICAgICAgcmV0dXJuIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT17J2xpc3QtZ3JvdXAtaXRlbScgKyAodGhpcy5wcm9wcy5zZWxlY3RlZCA/ICcgYWN0aXZlJyA6ICcnKX0gb25DbGljaz17KCkgPT4ge3RoaXMucHJvcHMub25DbGljayh0aGlzLnByb3BzLmZ1bmNOYW1lKTt9fT57dGhpcy5wcm9wcy5kaXNwbGF5TmFtZX08L2J1dHRvbj47XG4gICAgfVxufTtcblxuY2xhc3MgRHJhd0Z1bmN0aW9uU2VsZWN0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29uc3RydWN0b3IocHJvcHMpe1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZEZ1bmM6IERyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUNsaWNrID0gdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICByZW5kZXIoKXtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC1ncm91cFwiPlxuICAgICAgICAgICAgICAgIHtPYmplY3Qua2V5cyhEZW1vRnVuY3Rpb25zLmZ1bmN0aW9ucykubWFwKGZ1bmMgPT5cbiAgICAgICAgICAgICAgICAgICAgPERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uIGRpc3BsYXlOYW1lPXtEZW1vRnVuY3Rpb25zLmZ1bmN0aW9uc1tmdW5jXS5kaXNwbGF5TmFtZX0ga2V5PXtmdW5jfSBmdW5jTmFtZT17ZnVuY30gc2VsZWN0ZWQ9e2Z1bmMgPT0gdGhpcy5zdGF0ZS5zZWxlY3RlZEZ1bmN9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9IC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbiAgICBoYW5kbGVDbGljayhmdW5jTmFtZSl7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VsZWN0ZWRGdW5jOiBmdW5jTmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdChmdW5jTmFtZSk7XG4gICAgfVxufTtcbkRyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQyA9ICdhdHRyYWN0UmVwZWwnO1xuXG5jbGFzcyBBY2VFZGl0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICAgICAgY29uc3QgZWRpdG9yRGl2ID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgIHRoaXMuZWRpdG9yID0gYWNlLmVkaXQoZWRpdG9yRGl2KTtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VGhlbWUoJ2FjZS90aGVtZS9tb25va2FpJyk7XG4gICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXb3JrZXIoZmFsc2UpO1xuICAgICAgICB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgnYWNlL21vZGUvZ2xzbCcpO1xuICAgICAgICB0aGlzLmVkaXRvci4kYmxvY2tTY3JvbGxpbmcgPSBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0Rm9udFNpemUoMTgpO1xuICAgICAgICB0aGlzLmVkaXRvci5zZXRPcHRpb25zKHtcbiAgICAgICAgICAgIG1heExpbmVzOiBJbmZpbml0eVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFVzZVdyYXBNb2RlKHRydWUpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpe1xuICAgICAgICB0aGlzLmVkaXRvci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHNldFZhbHVlKG5ld0NvbnRlbnRzKXtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VmFsdWUobmV3Q29udGVudHMpO1xuICAgICAgICB0aGlzLmVkaXRvci5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldFZhbHVlKCk7XG4gICAgfVxuICAgIHJlbmRlcigpe1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2hlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQudG9TdHJpbmcoKSArICdweCd9fT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn07XG5cbmNsYXNzIENvbnRvdXJlckFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcyl7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyID0gbmV3IENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIodGhpcy5wcm9wcy5tYW5hZ2VyKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGlzQW5pbWF0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgY3VycmVudEZyYW1lOiAwLFxuICAgICAgICAgICAgbnVtRnJhbWVzOiAwLFxuICAgICAgICAgICAgaXNBbmltYXRlZFNlbGVjdFN0YXRlOiBmYWxzZSxcbiAgICAgICAgICAgIG51bUZyYW1lc0lucHV0VmFsOiAnMCcsXG4gICAgICAgICAgICBzaGFkZXJDb21waWxlRXJyb3I6ICcnXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlQ2FudmFzID0gdGhpcy51c2VDYW52YXMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zZXREcmF3RnVuYyA9IHRoaXMuc2V0RHJhd0Z1bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkRyYXdGdW5jU2VsZWN0ID0gdGhpcy5vbkRyYXdGdW5jU2VsZWN0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVkcmF3ID0gdGhpcy5yZWRyYXcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jaGFuZ2Vab29tQW5kUmVkcmF3ID0gdGhpcy5jaGFuZ2Vab29tQW5kUmVkcmF3LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcgPSB0aGlzLmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudHJhbnNsYXRlQW5kUmVkcmF3ID0gdGhpcy50cmFuc2xhdGVBbmRSZWRyYXcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVQbG90Q2xpY2sgPSB0aGlzLmhhbmRsZVBsb3RDbGljay5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpe1xuICAgICAgICB0aGlzLm9uRHJhd0Z1bmNTZWxlY3QoRHJhd0Z1bmN0aW9uU2VsZWN0b3IuREVGQVVMVF9GVU5DKTtcbiAgICB9XG4gICAgcmVuZGVyKCl7XG4gICAgICAgIGNvbnN0IENBTlZBU19ESU1TID0gbmV3IERpbWVuc2lvbnMoNjQwLCA0ODApO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIiBjbGFzc05hbWU9XCJjb2wtbGctMTJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2UtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5GdW4gd2l0aCBDb250b3VyczwvaDE+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3ZWxsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGI+RHJhZzwvYj4gdG8gbW92ZSB0aGUgZ3JhcGgsIDxiPnNjcm9sbDwvYj4gdG8gem9vbSwgYW5kIDxiPkN0cmwgKyBzY3JvbGw8L2I+IHRvIGNoYW5nZSB0aGUgY29udG91ciBkZW5zaXR5LlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kaWZ5IDxiPjxhIGhyZWY9XCIjXCIgb25DbGljaz17KGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5udW1GcmFtZXNJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fT5GcmFtZXM8L2E+PC9iPiAobnVtYmVyIG9mIGZyYW1lcyksIHRoZW4gY2xpY2sgPGI+UGxvdDwvYj4gdG8gY2hhbmdlIHRoZSBhbmltYXRpb24gc3BlZWQuXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICBVc2UgdGhlIDxiPnNsaWRlcjwvYj4gdG8gZXhwbG9yZSB0aGUgYW5pbWF0aW9uIGluIG1vcmUgZGV0YWlsLlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgUGxvdCB5b3VyIG93biBmdW5jdGlvbnMgd2l0aCB0aGUgPGI+dGV4dCBlZGl0b3JzPC9iPiBiZWxvdy5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIEp1c3QgZW5qb3kgdGhlIHByZXR0eSBhbmltYXRpb25zLCBvciA8Yj48YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL2tyYXd0aGVrcm93L2NvbnRvdXJlclwiPmNsaWNrIGhlcmU8L2E+PC9iPiB0byBsZWFybiBtb3JlLlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGI+Tm90ZTogVGhpcyBhcHAgdXNlcyBXZWJHTCwgc28gaXQgbmVlZHMgYSBzdWZmaWNpZW50bHkgbW9kZXJuIGJyb3dzZXIgYW5kIEdQVSB0byB3b3JrLjwvYj5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEcmF3RnVuY3Rpb25TZWxlY3RvciBvblNlbGVjdD17dGhpcy5vbkRyYXdGdW5jU2VsZWN0fS8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS05XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhzLThcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiByb2xlPVwidG9vbGJhclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tZ3JvdXBcIiByb2xlPVwiZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLmNoYW5nZVpvb21BbmRSZWRyYXcoMSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi16b29tLWluXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMuY2hhbmdlWm9vbUFuZFJlZHJhdygtMSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi16b29tLW91dFwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KC0xKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXBsdXNcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdygxKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLW1pbnVzXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoMSwgMCkpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctbGVmdFwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDAsIDEpKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LXVwXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoMCwgLTEpKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LWRvd25cIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy50cmFuc2xhdGVBbmRSZWRyYXcobmV3IFZlY3RvcigtMSwgMCkpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctcmlnaHRcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAoIXRoaXMuc3RhdGUuaXNBbmltYXRlZCB8fCAhdGhpcy5zdGF0ZS5pc0FuaW1hdGluZykgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYnRuJywgJ2J0bi1kZWZhdWx0Jywge2Rpc2FibGVkOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkfSl9IG9uQ2xpY2s9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN0YXRlLmlzQW5pbWF0ZWQgJiYgIXRoaXMuc3RhdGUuaXNBbmltYXRpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0YXJ0KHRoaXMuc3RhdGUuY3VycmVudEZyYW1lLCBjdXJyZW50RnJhbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWU6IGN1cnJlbnRGcmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXBsYXlcIj48L3NwYW4+PC9idXR0b24+IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2J0bicsICdidG4tZGVmYXVsdCcsIHtkaXNhYmxlZDogIXRoaXMuc3RhdGUuaXNBbmltYXRlZH0pfSBvbkNsaWNrPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5pc0FuaW1hdGVkICYmIHRoaXMuc3RhdGUuaXNBbmltYXRpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0b3AoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wYXVzZVwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC14cy00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNBbmltYXRlZCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMFwiIG1heD17KHRoaXMuc3RhdGUubnVtRnJhbWVzIC0gMSkudG9TdHJpbmcoKX0gdmFsdWU9e3RoaXMuc3RhdGUuY3VycmVudEZyYW1lfSBzdHlsZT17e21hcmdpblRvcDogJzVweCd9fSBvbkNoYW5nZT17ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5pc0FuaW1hdGluZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdG9wKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3Vycyh0aGlzLnN0YXRlLmN1cnJlbnRGcmFtZSAvIHRoaXMuc3RhdGUubnVtRnJhbWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5zdGF0ZS5jdXJyZW50RnJhbWUgLyB0aGlzLnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0gLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpblRvcDogJzEwcHgnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbnZhc0Rpc3BsYXlQYW5lIGRpbXM9e0NBTlZBU19ESU1TfSBvbk1vdW50Q2FsbGJhY2s9e2NhbnZhcyA9PiB7dGhpcy51c2VDYW52YXMoY2FudmFzKTt9fSBvbkRpc21vdW50Q2FsbGJhY2s9eygpID0+IHt0aGlzLnByb3BzLm1hbmFnZXIuZGVzdHJveUNvbnRleHQoKTt9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+UGxvdCBGdW5jdGlvbjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhzLTlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWlubGluZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tZ3JvdXBcIiBzdHlsZT17e21hcmdpblJpZ2h0OiAnMTBweCd9fSByb2xlPVwiZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2J0bicsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gJ2J0bi1kZWZhdWx0JyA6ICdidG4tcHJpbWFyeScsIHsnYWN0aXZlJzogIXRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlfSl9IG9uQ2xpY2s9eyBlID0+IHsgdGhpcy5zZXRTdGF0ZSh7aXNBbmltYXRlZFNlbGVjdFN0YXRlOiBmYWxzZX0pO30gfT5HcmFwaDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYnRuJywgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgPyAnYnRuLXByaW1hcnknIDogJ2J0bi1kZWZhdWx0JywgeydhY3RpdmUnOiB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZX0pfSBvbkNsaWNrPXsgZSA9PiB7IHRoaXMuc2V0U3RhdGUoe2lzQW5pbWF0ZWRTZWxlY3RTdGF0ZTogdHJ1ZX0pO30gfT5BbmltYXRpb248L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2Zvcm0tZ3JvdXAnLCB7J2hhcy1lcnJvcic6IHRoaXMuaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKX0pfSBzdHlsZT17e2Rpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCBtYXJnaW5Cb3R0b206IDAsIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbnB1dC1ncm91cC1hZGRvblwiPkZyYW1lczwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sXCIgdmFsdWU9e3RoaXMuc3RhdGUubnVtRnJhbWVzSW5wdXRWYWx9IGRpc2FibGVkPXshdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGV9IHJlZj17aW5wdXQgPT4ge3RoaXMubnVtRnJhbWVzSW5wdXQgPSBpbnB1dDt9fSBvbkNoYW5nZT17ZSA9PiB7dGhpcy5zZXRTdGF0ZSh7bnVtRnJhbWVzSW5wdXRWYWw6IGUudGFyZ2V0LnZhbHVlfSk7fX0gc3R5bGU9e3t3aWR0aDogJzYwcHgnfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIiBzdHlsZT17e2Rpc3BsYXk6IHRoaXMuaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKSA/ICdpbmxpbmUtYmxvY2snIDogJ25vbmUnLCBtYXJnaW5MZWZ0OiAnMTBweCd9fT5NdXN0IGJlIGFuIGludGVnZXI8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC14cy0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tc3VjY2VzcyBidG4tYmxvY2sgcHVsbC1yaWdodFwiIHN0eWxlPXt7d2lkdGg6ICc4MHB4J319IGRpc2FibGVkPXt0aGlzLmlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCl9IHJlZj17YnV0dG9uID0+IHt0aGlzLnBsb3RCdXR0b24gPSBidXR0b247fX0gb25DbGljaz17dGhpcy5oYW5kbGVQbG90Q2xpY2t9PlBsb3Q8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyB0aGlzLnN0YXRlLnNoYWRlckNvbXBpbGVFcnJvciA9PSAnJyA/IG51bGwgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGFzLWVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91ciBjb2RlIGZhaWxlZCB0byBjb21waWxlIHdpdGggdGhlIGZvbGxvd2luZyBlcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IudHJpbSgpLnNwbGl0KCdcXG4nKS5tYXAoKGxpbmUsIGluZGV4KSA9PiA8c3BhbiBrZXk9e2luZGV4fT57bGluZX08YnIgLz48L3NwYW4+KSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICh0aGlzLnN0YXRlLnNoYWRlckNvbXBpbGVFcnJvci5pbmRleE9mKCd3cm9uZyBvcGVyYW5kIHR5cGVzJykgIT0gLTEpID8gPHA+PGI+Tm90ZSB0aGF0IEdMU0wgRVMgZG9lcyBub3QgaW1wbGljaXRseSBjYXN0IGludHMgdG8gZmxvYXRzLiBXcml0ZSBudW1iZXJzIGxpa2UgXCIyM1wiIGFzIFwiMjMuMFwiLjwvYj48L3A+IDogbnVsbCB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICh0aGlzLnN0YXRlLnNoYWRlckNvbXBpbGVFcnJvci5pbmRleE9mKCdnbF9GcmFnRGF0YScpICE9IC0xKSA/IDxwPjxiPkRpZCB5b3UgZm9yZ2V0IGEgc2VtaWNvbG9uIG9uIHRoZSBsYXN0IGxpbmU/PC9iPjwvcD4gOiBudWxsIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaWV3IHRoZSBjb25zb2xlIHRvIHNlZSB0aGUgZnVsbCBnZW5lcmF0ZWQgV2ViR0wgc2hhZGVyIGNvZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luVG9wOiAnMTBweCd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNlRWRpdG9yIGhlaWdodD1cIjIwMFwiIGtleT1cImRyYXdGdW5jRWRpdG9yXCIgcmVmPXsgZWRpdG9yID0+IHt0aGlzLmRyYXdGdW5jRWRpdG9yID0gZWRpdG9yO30gfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+TGlicmFyeSBGdW5jdGlvbnM8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpbkJvdHRvbTogJzEwcHgnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjZUVkaXRvciBoZWlnaHQ9XCIyMDBcIiBrZXk9XCJpbmNsdWRlU3JjRWRpdG9yXCIgcmVmPXsgZWRpdG9yID0+IHt0aGlzLmluY2x1ZGVTcmNFZGl0b3IgPSBlZGl0b3I7fSB9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG4gICAgdXNlQ2FudmFzKGNhbnZhcyl7XG4gICAgICAgIGNvbnN0IGRyYWdNYW5hZ2VyID0gbmV3IERyYWdNYW5hZ2VyKGNhbnZhcyxcbiAgICAgICAgICAgIGRyYWdWZWMgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci52aWV3cG9ydC50cmFuc2xhdGUoZHJhZ1ZlYyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBldiA9PiB0cnVlXG4gICAgICAgICk7XG5cbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZXYgPT4ge1xuICAgICAgICAgICAgaWYoZXYuY3RybEtleSl7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdyhnZXRTY3JvbGxEaXIoZXYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmNoYW5nZVpvb20oLWdldFNjcm9sbERpcihldiksIGdldENhbnZhc01vdXNlUG9zKGNhbnZhcywgZXYpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLnVzZUNhbnZhcyhjYW52YXMpO1xuICAgIH1cbiAgICBpc051bUZyYW1lc0lucHV0SW52YWxpZCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgJiYgdGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbC5zcGxpdCgnJykuc29tZShjID0+IHtcbiAgICAgICAgICAgIHJldHVybiBjLmNoYXJDb2RlQXQoKSA8ICcwJy5jaGFyQ29kZUF0KCkgfHwgYy5jaGFyQ29kZUF0KCkgPiAnOScuY2hhckNvZGVBdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlUGxvdENsaWNrKGUpe1xuICAgICAgICB0aGlzLnNldERyYXdGdW5jKHRoaXMuZHJhd0Z1bmNFZGl0b3IuZ2V0VmFsdWUoKSwgdGhpcy5pbmNsdWRlU3JjRWRpdG9yLmdldFZhbHVlKCksIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlLCB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSA/IHBhcnNlSW50KHRoaXMuc3RhdGUubnVtRnJhbWVzSW5wdXRWYWwpIDogMCk7XG4gICAgfVxuICAgIHJlZHJhdygpe1xuICAgICAgICBpZih0aGlzLnN0YXRlLmlzQW5pbWF0ZWQpe1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3Vycyh0aGlzLnN0YXRlLmN1cnJlbnRGcmFtZSAvIHRoaXMuc3RhdGUubnVtRnJhbWVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3VycygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNoYW5nZVpvb21BbmRSZWRyYXcoY2hhbmdlQW1vdW50KXtcbiAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmNoYW5nZVpvb20oY2hhbmdlQW1vdW50KTtcbiAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICB9XG4gICAgY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcoY2hhbmdlQW1vdW50KXtcbiAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmNoYW5nZUNvbnRvdXJTcGFjaW5nKGNoYW5nZUFtb3VudCk7XG4gICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgfVxuICAgIHRyYW5zbGF0ZUFuZFJlZHJhdyh0cmFuc2xhdGVBbW91bnQpe1xuICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIudHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudC5tdWx0aXBseSg1MC4wKSk7XG4gICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgfVxuICAgIHNldERyYXdGdW5jKGRyYXdGdW5jLCBpbmNsdWRlU3JjLCBpc0FuaW1hdGVkID0gZmFsc2UsIG51bUZyYW1lcyA9IDApe1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlRHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMsIGlzQW5pbWF0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoKGVycil7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzaGFkZXJDb21waWxlRXJyb3I6IGVyclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZihpc0FuaW1hdGVkICYmIG51bUZyYW1lcyA9PSAwKXtcbiAgICAgICAgICAgIG51bUZyYW1lcyA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzQW5pbWF0ZWQ6IGlzQW5pbWF0ZWQsXG4gICAgICAgICAgICBpc0FuaW1hdGluZzogaXNBbmltYXRlZCxcbiAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogMCxcbiAgICAgICAgICAgIG51bUZyYW1lczogbnVtRnJhbWVzLFxuICAgICAgICAgICAgaXNBbmltYXRlZFNlbGVjdFN0YXRlOiBpc0FuaW1hdGVkLFxuICAgICAgICAgICAgbnVtRnJhbWVzSW5wdXRWYWw6IG51bUZyYW1lcy50b1N0cmluZygpLFxuICAgICAgICAgICAgc2hhZGVyQ29tcGlsZUVycm9yOiAnJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLm51bUZyYW1lcyA9IG51bUZyYW1lcztcbiAgICAgICAgaWYoaXNBbmltYXRlZCl7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc3RvcCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0YXJ0KDAsIGN1cnJlbnRGcmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZyYW1lOiBjdXJyZW50RnJhbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0b3AoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRHJhd0Z1bmNTZWxlY3QoZnVuYyl7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkRnVuYyA9IERlbW9GdW5jdGlvbnMuZnVuY3Rpb25zW2Z1bmNdO1xuICAgICAgICB0aGlzLmRyYXdGdW5jRWRpdG9yLnNldFZhbHVlKHNlbGVjdGVkRnVuYy5kcmF3RnVuYy50cmltKCkpO1xuICAgICAgICB0aGlzLmluY2x1ZGVTcmNFZGl0b3Iuc2V0VmFsdWUoc2VsZWN0ZWRGdW5jLmluY2x1ZGVTcmMudHJpbSgpKTtcbiAgICAgICAgaWYoc2VsZWN0ZWRGdW5jLmlzQW5pbWF0ZWQpe1xuICAgICAgICAgICAgdGhpcy5zZXREcmF3RnVuYyhzZWxlY3RlZEZ1bmMuZHJhd0Z1bmMsIHNlbGVjdGVkRnVuYy5pbmNsdWRlU3JjLCBzZWxlY3RlZEZ1bmMuaXNBbmltYXRlZCwgc2VsZWN0ZWRGdW5jLm51bUZyYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHRoaXMuc2V0RHJhd0Z1bmMoc2VsZWN0ZWRGdW5jLmRyYXdGdW5jLCBzZWxlY3RlZEZ1bmMuaW5jbHVkZVNyYyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5mdW5jdGlvbiBpbml0UmVuZGVyKG1hbmFnZXIpe1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmRleENvbnRhaW5lcicpO1xuICAgIFJlYWN0RE9NLnJlbmRlcihcbiAgICAgICAgPENvbnRvdXJlckFwcCBtYW5hZ2VyPXttYW5hZ2VyfSAvPixcbiAgICAgICAgY29udGFpbmVyXG4gICAgKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2l0aHViLXJpYmJvbicpLmlubmVySFRNTCA9ICc8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL2tyYXd0aGVrcm93L2NvbnRvdXJlclwiPjxpbWcgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgcmlnaHQ6IDA7IGJvcmRlcjogMDtcIiBzcmM9XCJodHRwczovL2NhbW8uZ2l0aHVidXNlcmNvbnRlbnQuY29tLzM2NTk4NmExMzJjY2Q2YTQ0YzIzYTkxNjkwMjJjMGI1Yzg5MGMzODcvNjg3NDc0NzA3MzNhMmYyZjczMzMyZTYxNmQ2MTdhNmY2ZTYxNzc3MzJlNjM2ZjZkMmY2NzY5NzQ2ODc1NjIyZjcyNjk2MjYyNmY2ZTczMmY2NjZmNzI2YjZkNjU1ZjcyNjk2NzY4NzQ1ZjcyNjU2NDVmNjE2MTMwMzAzMDMwMmU3MDZlNjdcIiBhbHQ9XCJGb3JrIG1lIG9uIEdpdEh1YlwiIGRhdGEtY2Fub25pY2FsLXNyYz1cImh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9naXRodWIvcmliYm9ucy9mb3JrbWVfcmlnaHRfcmVkX2FhMDAwMC5wbmdcIj48L2E+Jztcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuY2xhc3MgR1BHUFVLZXJuZWxSZXN1bHR7XG4gICAgY29uc3RydWN0b3IoY3R4LCBmYm8sIHRleHR1cmVzKXtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuZmJvID0gZmJvO1xuICAgICAgICB0aGlzLnRleHR1cmVzID0gdGV4dHVyZXM7XG4gICAgfVxuICAgIGRpc3Bvc2UoKXtcbiAgICAgICAgaWYodGhpcy5mYm8gIT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLmN0eC5kZWxldGVGcmFtZWJ1ZmZlcih0aGlzLmZibyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0dXJlcy5mb3JFYWNoKHRleHR1cmUgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdHguZGVsZXRlVGV4dHVyZSh0ZXh0dXJlKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuY2xhc3MgR1BHUFVLZXJuZWx7XG4gICAgY29uc3RydWN0b3IobWFuYWdlciwgcHJvZ3JhbSwgcGFyYW1zID0gW10sIG51bU91dHB1dHMgPSAxLCBpc0dyYXBoaWNhbCA9IGZhbHNlKXtcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMubnVtT3V0cHV0cyA9IG51bU91dHB1dHM7XG4gICAgICAgIHRoaXMuaXNHcmFwaGljYWwgPSBpc0dyYXBoaWNhbDtcbiAgICB9XG4gICAgZ2V0IGN0eCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5tYW5hZ2VyLmN0eDtcbiAgICB9XG4gICAgZ2V0IGV4dERCKCl7XG4gICAgICAgIHJldHVybiB0aGlzLm1hbmFnZXIuZXh0REI7XG4gICAgfVxuICAgIHJ1bihpbnB1dFRleHR1cmVzLCBvdXRwdXREaW1zLCBwYXJhbVZhbHMgPSB7fSwgdXNlRmxvYXQgPSB0cnVlKXtcbiAgICAgICAgdGhpcy5jdHgudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xuICAgICAgICByZWdpc3RlclVuaWZvcm1zKHRoaXMuY3R4LCB0aGlzLnByb2dyYW0sIHRoaXMucGFyYW1zLCBwYXJhbVZhbHMpO1xuICAgICAgICByZWdpc3RlclVuaWZvcm1zKHRoaXMuY3R4LCB0aGlzLnByb2dyYW0sIFt7XG4gICAgICAgICAgICBuYW1lOiAndURpbXMnLFxuICAgICAgICAgICAgdHlwZTogJ2l2ZWMyJ1xuICAgICAgICB9XSwge1xuICAgICAgICAgICAgdURpbXM6IG91dHB1dERpbXMudG9BcnJheSgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG91dHB1dFRleHR1cmVzID0gY29tcHV0ZTFEQXJyYXkodGhpcy5udW1PdXRwdXRzLCBpID0+XG4gICAgICAgICAgICBjcmVhdGVDb21wdXRlVGV4dHVyZSh0aGlzLmN0eCwgb3V0cHV0RGltcywgdXNlRmxvYXQgPyB0aGlzLmN0eC5GTE9BVCA6IHRoaXMuY3R4LlVOU0lHTkVEX0JZVEUpXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZmJvID0gdGhpcy5pc0dyYXBoaWNhbCA/IG51bGwgOiBjcmVhdGVGQk8odGhpcy5jdHgsIHRoaXMuZXh0REIsIG91dHB1dFRleHR1cmVzKTtcbiAgICAgICAgdGhpcy5jdHguYmluZEZyYW1lYnVmZmVyKHRoaXMuY3R4LkZSQU1FQlVGRkVSLCBmYm8pO1xuXG4gICAgICAgIGJpbmRUZXh0dXJlcyh0aGlzLmN0eCwgaW5wdXRUZXh0dXJlcyk7XG5cbiAgICAgICAgdGhpcy5jdHgudmlld3BvcnQoMCwgMCwgb3V0cHV0RGltcy53aWR0aCwgb3V0cHV0RGltcy5oZWlnaHQpO1xuICAgICAgICB0aGlzLm1hbmFnZXIuZHJhd0Z1bGxzY3JlZW5RdWFkKHRoaXMucHJvZ3JhbSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBHUEdQVUtlcm5lbFJlc3VsdCh0aGlzLmN0eCwgZmJvLCBvdXRwdXRUZXh0dXJlcyk7XG4gICAgfVxufTtcblxuY2xhc3MgR1BHUFVNYW5hZ2Vye1xuICAgIGNvbnN0cnVjdG9yKGN0eCwgdXNlRmxvYXQgPSB0cnVlKXtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuZXh0REIgPSB0aGlzLmN0eC5nZXRFeHRlbnNpb24oJ1dFQkdMX2RyYXdfYnVmZmVycycpO1xuICAgICAgICBpZih1c2VGbG9hdCl7XG4gICAgICAgICAgICB0aGlzLmN0eC5nZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2Zsb2F0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnF1YWRQb3NCdWZmZXIgPSBjcmVhdGVBcnJheUJ1ZmZlcih0aGlzLmN0eCwgdGhpcy5jdHguQVJSQVlfQlVGRkVSLCBGVUxMU0NSRUVOX1FVQURfUE9TX0FSUkFZKTtcbiAgICAgICAgdGhpcy5xdWFkSW5kZXhCdWZmZXIgPSBjcmVhdGVBcnJheUJ1ZmZlcih0aGlzLmN0eCwgdGhpcy5jdHguRUxFTUVOVF9BUlJBWV9CVUZGRVIsIEZVTExTQ1JFRU5fUVVBRF9JTkRFWF9BUlJBWSk7XG4gICAgfVxuICAgIGRyYXdGdWxsc2NyZWVuUXVhZChwcm9ncmFtKXtcbiAgICAgICAgdGhpcy5jdHgudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgdGhpcy5jdHguYmluZEJ1ZmZlcih0aGlzLmN0eC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5xdWFkSW5kZXhCdWZmZXIpO1xuICAgICAgICB0aGlzLmN0eC5kcmF3RWxlbWVudHModGhpcy5jdHguVFJJQU5HTEVfU1RSSVAsIEZVTExTQ1JFRU5fUVVBRF9OVU1fVkVSVElDRVMsIHRoaXMuY3R4LlVOU0lHTkVEX1NIT1JULCAwKTtcbiAgICB9XG4gICAgcmVhZFBhY2tlZEZsb2F0RGF0YShkaW1zKXtcbiAgICAgICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkoZGltcy5nZXRBcmVhKCkgKiA0KTtcbiAgICAgICAgdGhpcy5jdHgucmVhZFBpeGVscygwLCAwLCBkaW1zLndpZHRoLCBkaW1zLmhlaWdodCwgdGhpcy5jdHguUkdCQSwgdGhpcy5jdHguVU5TSUdORURfQllURSwgYnVmKTtcbiAgICAgICAgcmV0dXJuIG5ldyAvKkZsb2F0MzJBcnJheSovVWludDhBcnJheShidWYuYnVmZmVyKTtcbiAgICB9XG4gICAgYXJyYXlUb1RleHR1cmUoZGltcywgYXJyLCB1c2VGbG9hdCA9IHRydWUpe1xuICAgICAgICBjb25zdCBmbG9hdEZsYXR0ZW5lZEFyciA9IG5ldyBGbG9hdDMyQXJyYXkoZmxhdHRlbihmbGF0dGVuKGFycikpKVxuICAgICAgICBjb25zdCBmbGF0dGVuZWRBcnIgPSB1c2VGbG9hdCA/IGZsb2F0RmxhdHRlbmVkQXJyIDogKG5ldyBVaW50OEFycmF5KGZsYXR0ZW5lZEFyci5idWZmZXIpKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbXB1dGVUZXh0dXJlKHRoaXMuY3R4LCBkaW1zLCB1c2VGbG9hdCA/IHRoaXMuY3R4LkZMT0FUIDogdGhpcy5jdHguVU5TSUdORURfQllURSwgZmxhdHRlbmVkQXJyKTtcbiAgICB9XG4gICAgdGV4dHVyZVRvQXJyYXkoZGltcywgdGV4LCB1c2VGbG9hdCA9IHRydWUsIGNvbXBvbmVudCA9IDApe1xuICAgICAgICBjb25zdCBjb21wdXRlRnVuYyA9IFxuYHZlYzQgY1ZhbCA9IHRleHR1cmUyRCh1SW5wdXQsIHZDb29yZCk7XG5nbF9GcmFnRGF0YVswXSA9IGAgKyAodXNlRmxvYXQgPyAoYHBhY2tGbG9hdChjVmFsLmAgKyAneHl6dydbY29tcG9uZW50XSArIGApYCkgOiBgY1ZhbGApICsgYDtcbmA7XG4gICAgICAgIGNvbnN0IGlucHV0TmFtZXMgPSBbJ3VJbnB1dCddO1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLmNyZWF0ZUtlcm5lbChcbiAgICAgICAgICAgIGNvbXB1dGVGdW5jLFxuICAgICAgICAgICAgaW5wdXROYW1lcyxcbiAgICAgICAgICAgIGRpbXMsXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgICAgIDEsXG4gICAgICAgICAgICBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGtlcm5lbC5ydW4oW3RleF0sIGRpbXMsIHt9LCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHRoaXMucmVhZFBhY2tlZEZsb2F0RGF0YShkaW1zKTtcbiAgICAgICAgcmVzdWx0cy5kaXNwb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIGNvbXB1dGUyREFycmF5KGRpbXMsIHBvcyA9PlxuICAgICAgICAgICAgLy9vdXRwdXRbcG9zLnkgKiBkaW1zLndpZHRoICsgcG9zLnhdXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gb3V0cHV0LnNsaWNlKChwb3MueSAqIGRpbXMud2lkdGggKyBwb3MueCkgKiA0LCAocG9zLnkgKiBkaW1zLndpZHRoICsgcG9zLngpICogNCArIDQpO1xuICAgICAgICAgICAgICAgIGxldCBhc1N0cmluZyA9ICcnO1xuICAgICAgICAgICAgICAgIGZvcihjb25zdCB4IG9mIHJlcyl7XG4gICAgICAgICAgICAgICAgICAgIGFzU3RyaW5nICs9ICgnMDAwMDAwMDAnICsgeC50b1N0cmluZygyKSkuc3Vic3RyKC04KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzU3RyaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cbiAgICBjcmVhdGVLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIG91dHB1dERpbXMsIHBhcmFtcyA9IFtdLCBudW1PdXRwdXRzID0gMSwgaW5jbHVkZVNyYyA9ICcnLCBpc0dyYXBoaWNhbCA9IGZhbHNlKXtcbiAgICAgICAgY29uc3QgdW5pZm9ybXMgPSBbXS5jb25jYXQocGFyYW1zLCBpbnB1dE5hbWVzLm1hcChcbiAgICAgICAgICAgIGlucHV0TmFtZSA9PiAoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzYW1wbGVyMkQnLFxuICAgICAgICAgICAgICAgIG5hbWU6IGlucHV0TmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKSxbe1xuICAgICAgICAgICAgdHlwZTogJ2l2ZWMyJyxcbiAgICAgICAgICAgIG5hbWU6ICd1RGltcydcbiAgICAgICAgfV0pO1xuICAgICAgICBjb25zdCB2ZXJ0U2hhZGVyU3JjID0gR1BHUFVNYW5hZ2VyLmNyZWF0ZVZlcnRTaGFkZXJTcmMoaXNHcmFwaGljYWwpO1xuICAgICAgICBjb25zdCBmcmFnU2hhZGVyU3JjID0gR1BHUFVNYW5hZ2VyLmNyZWF0ZUZyYWdTaGFkZXJTcmMoY29tcHV0ZUZ1bmMudHJpbSgpLnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiAnICAgICcgKyBsaW5lKS5qb2luKCdcXG4nKSArICdcXG4nLCB1bmlmb3JtcywgaW5jbHVkZVNyYywgbnVtT3V0cHV0cyA+IDEpO1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbSh0aGlzLmN0eCwgdmVydFNoYWRlclNyYywgZnJhZ1NoYWRlclNyYyk7XG5cbiAgICAgICAgdGhpcy5jdHgudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgcmVnaXN0ZXJWZXJ0ZXhBdHRyaWIodGhpcy5jdHgsIHByb2dyYW0sICdhUG9zJywgMiwgdGhpcy5xdWFkUG9zQnVmZmVyKTtcbiAgICAgICAgcmVnaXN0ZXJUZXh0dXJlcyh0aGlzLmN0eCwgcHJvZ3JhbSwgaW5wdXROYW1lcyk7XG4gICAgICAgIHJldHVybiBuZXcgR1BHUFVLZXJuZWwodGhpcywgcHJvZ3JhbSwgcGFyYW1zLCBudW1PdXRwdXRzLCBpc0dyYXBoaWNhbCk7XG4gICAgfVxuICAgIGNyZWF0ZUdyYXBoaWNhbEtlcm5lbChjb21wdXRlRnVuYywgaW5wdXROYW1lcywgb3V0cHV0RGltcywgcGFyYW1zID0gW10sIGluY2x1ZGVTcmMgPSAnJyl7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUtlcm5lbChjb21wdXRlRnVuYywgaW5wdXROYW1lcywgb3V0cHV0RGltcywgcGFyYW1zLCAwLCBpbmNsdWRlU3JjLCB0cnVlKTtcbiAgICB9XG59O1xuXG4vLyBDcmVkaXQ6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL1Rvb1RhbGxOYXRlLzQ3NTA5NTNcbkdQR1BVTWFuYWdlci5lbmRpYW5uZXNzID0gKCgpID0+IHtcbiAgICBjb25zdCBiID0gbmV3IEFycmF5QnVmZmVyKDQpO1xuICAgIGNvbnN0IGEgPSBuZXcgVWludDMyQXJyYXkoYik7XG4gICAgY29uc3QgYyA9IG5ldyBVaW50OEFycmF5KGIpO1xuICAgIGFbMF0gPSAweGRlYWRiZWVmO1xuICAgIGlmIChjWzBdID09IDB4ZWYpIHJldHVybiAnTEUnO1xuICAgIGlmIChjWzBdID09IDB4ZGUpIHJldHVybiAnQkUnO1xuICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBlbmRpYW5uZXNzJyk7XG59KSgpO1xuXG5HUEdQVU1hbmFnZXIuZ2V0Q2FudmFzQ29udGV4dCA9IGNhbnZhcyA9PiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgZGVwdGg6IGZhbHNlLFxuICAgICAgICBhbnRpYWxpYXM6IGZhbHNlXG4gICAgfTtcbiAgICByZXR1cm4gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJywgb3B0aW9ucykgfHwgY2FudmFzLmdldENvbnRleHQoJ3dlYmdsLWV4cGVyaW1lbnRhbCcsIG9wdGlvbnMpO1xufTtcblxuR1BHUFVNYW5hZ2VyLmNyZWF0ZVZlcnRTaGFkZXJTcmMgPSAoZmxpcFkgPSBmYWxzZSkgPT5cbmBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbmF0dHJpYnV0ZSB2ZWMyIGFQb3M7XG5cbnZhcnlpbmcgdmVjMiB2Q29vcmQ7XG5cbnZvaWQgbWFpbigpe1xuICAgIGdsX1Bvc2l0aW9uID0gdmVjNChgICtcbiAgICAoZmxpcFkgPyBgYVBvcy54LCAtYVBvcy55YCA6IGBhUG9zYCkgK1xuICAgIGAsIDAuMCwgMS4wKTtcbiAgICB2Q29vcmQgPSAoYVBvcyArIDEuMCkgLyAyLjA7XG59YDtcblxuR1BHUFVNYW5hZ2VyLlBBQ0tfRkxPQVRfSU5DTFVERSA9XG5gZmxvYXQgcm91bmQoZmxvYXQgeCkge1xuICAgIHJldHVybiBmbG9vcih4ICsgMC41KTtcbn1cblxudmVjMiBpbnRlZ2VyTW9kKHZlYzIgeCwgZmxvYXQgeSkge1xuICAgIHZlYzIgcmVzID0gZmxvb3IobW9kKHgsIHkpKTtcbiAgICByZXR1cm4gcmVzICogc3RlcCgxLjAgLSBmbG9vcih5KSwgLXJlcyk7XG59XG5cbmZsb2F0IGludGVnZXJNb2QoZmxvYXQgeCwgZmxvYXQgeSkge1xuICAgIGZsb2F0IHJlcyA9IGZsb29yKG1vZCh4LCB5KSk7XG4gICAgcmV0dXJuIHJlcyAqIChyZXMgPiBmbG9vcih5KSAtIDEuMCA/IDAuMCA6IDEuMCk7XG59XG5cbmNvbnN0IHZlYzIgTUFHSUNfVkVDID0gdmVjMigxLjAsIC0yNTYuMCk7XG5jb25zdCB2ZWM0IFNDQUxFX0ZBQ1RPUiA9IHZlYzQoMS4wLCAyNTYuMCwgNjU1MzYuMCwgMC4wKTtcbmNvbnN0IHZlYzQgU0NBTEVfRkFDVE9SX0lOViA9IHZlYzQoMS4wLCAwLjAwMzkwNjI1LCAwLjAwMDAxNTI1ODc4OTA2MjUsIDAuMCk7IC8vIDEsIDEvMjU2LCAxLzY1NTM2XG5mbG9hdCB1bnBhY2tGbG9hdCh2ZWM0IHJnYmEpIHtcbmAgKyAoKEdQR1BVTWFuYWdlci5lbmRpYW5uZXNzID09ICdMRScpID8gJycgOlxuYCAgICByZ2JhLnJnYmEgPSByZ2JhLmFiZ3I7XG5gKSArXG5gICAgIHJnYmEgKj0gMjU1LjA7XG4gICAgdmVjMiBndGUxMjg7XG4gICAgZ3RlMTI4LnggPSByZ2JhLmIgPj0gMTI4LjAgPyAxLjAgOiAwLjA7XG4gICAgZ3RlMTI4LnkgPSByZ2JhLmEgPj0gMTI4LjAgPyAxLjAgOiAwLjA7XG4gICAgZmxvYXQgZXhwb25lbnQgPSAyLjAgKiByZ2JhLmEgLSAxMjcuMCArIGRvdChndGUxMjgsIE1BR0lDX1ZFQyk7XG4gICAgZmxvYXQgcmVzID0gZXhwMihyb3VuZChleHBvbmVudCkpO1xuICAgIHJnYmEuYiA9IHJnYmEuYiAtIDEyOC4wICogZ3RlMTI4Lng7XG4gICAgcmVzID0gZG90KHJnYmEsIFNDQUxFX0ZBQ1RPUikgKiBleHAyKHJvdW5kKGV4cG9uZW50LTIzLjApKSArIHJlcztcbiAgICByZXMgKj0gZ3RlMTI4LnkgKiAtMi4wICsgMS4wO1xuICAgIHJldHVybiByZXM7XG59XG5cbnZlYzQgcGFja0Zsb2F0KGZsb2F0IGYpIHtcbiAgICBmbG9hdCBGID0gYWJzKGYpO1xuICAgIGZsb2F0IHNpZ24gPSBmIDwgMC4wID8gMS4wIDogMC4wO1xuICAgIGZsb2F0IGV4cG9uZW50ID0gZmxvb3IobG9nMihGKSk7XG4gICAgZmxvYXQgbWFudGlzc2EgPSAoZXhwMigtZXhwb25lbnQpICogRik7XG4gICAgLy8gZXhwb25lbnQgKz0gZmxvb3IobG9nMihtYW50aXNzYSkpO1xuICAgIHZlYzQgcmdiYSA9IHZlYzQoRiAqIGV4cDIoMjMuMC1leHBvbmVudCkpICogU0NBTEVfRkFDVE9SX0lOVjtcbiAgICByZ2JhLnJnID0gaW50ZWdlck1vZChyZ2JhLnJnLCAyNTYuMCk7XG4gICAgcmdiYS5iID0gaW50ZWdlck1vZChyZ2JhLmIsIDEyOC4wKTtcbiAgICByZ2JhLmEgPSBleHBvbmVudCowLjUgKyA2My41O1xuICAgIHJnYmEuYmEgKz0gdmVjMihpbnRlZ2VyTW9kKGV4cG9uZW50KzEyNy4wLCAyLjApLCBzaWduKSAqIDEyOC4wO1xuICAgIHJnYmEgKj0gMC4wMDM5MjE1Njk7IC8vIDEvMjU1XG5gICsgKChHUEdQVU1hbmFnZXIuZW5kaWFubmVzcyA9PSAnTEUnKSA/ICcnIDpcbmAgICAgcmdiYS5yZ2JhID0gcmdiYS5hYmdyO1xuYCkgK1xuYCAgICByZXR1cm4gcmdiYTtcbn1cblxuYDtcblxuR1BHUFVNYW5hZ2VyLmNyZWF0ZUZyYWdTaGFkZXJTcmMgPSAoY29tcHV0ZUZ1bmMsIHVuaWZvcm1zLCBpbmNsdWRlU3JjID0gJycsIHVzZURyYXdCdWZmZXJzID0gdHJ1ZSkgPT4gW1xuICAgIHVzZURyYXdCdWZmZXJzID9cbmAjZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnM6IHJlcXVpcmVcbmAgOiAnJyxcbmBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5wcmVjaXNpb24gaGlnaHAgc2FtcGxlcjJEO1xuXG4jZGVmaW5lIEVQUyAwLjAwMDAwMDFcblxuYCxcbiAgICAuLi51bmlmb3Jtcy5tYXAodW5pZm9ybSA9PlxuYHVuaWZvcm0gYCArIHVuaWZvcm0udHlwZSArIGAgYCArIHVuaWZvcm0ubmFtZSArIGA7XG5gXG4gICAgKSxcbmBcbnZhcnlpbmcgdmVjMiB2Q29vcmQ7XG5cbnZlYzQgYXJyR2V0KHNhbXBsZXIyRCBhcnIsIGl2ZWMyIGlkKXtcbiAgICByZXR1cm4gdGV4dHVyZTJEKGFyciwgKHZlYzIoaWQpICsgdmVjMigwLjUpKSAvIHZlYzIodURpbXMpKTtcbn1cblxuYCxcbiAgICBpbmNsdWRlU3JjLFxuYHZvaWQgY29tcHV0ZUZ1bmMoKXtcbiAgICBpdmVjMiB0aHJlYWRJZCA9IGl2ZWMyKHZDb29yZCAqIHZlYzIodURpbXMpKTtcbmAsXG4gICAgY29tcHV0ZUZ1bmMsXG5gfVxuXG52b2lkIG1haW4oKXtcbiAgICBjb21wdXRlRnVuYygpO1xufWBdLmpvaW4oJycpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBEZW1vRnVuY3Rpb25ze1xufTtcblxuRGVtb0Z1bmN0aW9ucy5JTkNMVURFUyA9IHtcbiAgICBwaTpcbmBjb25zdCBmbG9hdCBQSSA9IDMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NTtcblxuYCxcbiAgICBjb21wbGV4TGliOlxuYHZlYzIgY29tcGxleE11bHQodmVjMiBhLCB2ZWMyIGIpe1xuICAgIHJldHVybiB2ZWMyKGEueCAqIGIueCAtIGEueSAqIGIueSwgYS55ICogYi54ICsgYS54ICogYi55KTtcbn1cblxudmVjMiBjb21wbGV4RGl2KHZlYzIgYSwgdmVjMiBiKXtcbiAgICBmbG9hdCBkaXZpc29yID0gZG90KGIsIGIpO1xuICAgIHJldHVybiB2ZWMyKGRvdChhLCBiKSwgYS55ICogYi54IC0gYS54ICogYi55KSAvIGRpdmlzb3I7XG59XG5cbnZlYzIgY29tcGxleFBvdyh2ZWMyIGEsIHZlYzIgYil7XG4gICAgZmxvYXQgciA9IGxlbmd0aChhKSwgcGhpID0gYXRhbihhLnksIGEueCk7XG4gICAgZmxvYXQgbmV3UiA9IHBvdyhyLCBiLngpICogZXhwKC1iLnkgKiBwaGkpO1xuICAgIGZsb2F0IG5ld1BoaSA9IGIueSAqIGxvZyhyKSArIGIueCAqIHBoaTtcbiAgICByZXR1cm4gbmV3UiAqIHZlYzIoY29zKG5ld1BoaSksIHNpbihuZXdQaGkpKTtcbn1cblxudmVjMiBjb21wbGV4RXhwKHZlYzIgYil7XG4gICAgcmV0dXJuIGV4cChiLngpICogdmVjMihjb3MoYi55KSwgc2luKGIueSkpO1xufVxuXG52ZWMyIGNvbXBsZXhMb2codmVjMiB4KXtcbiAgICByZXR1cm4gdmVjMihsb2cobGVuZ3RoKHgpKSwgYXRhbih4LnksIHgueCkpO1xufVxuXG5gLFxuICAgIGdhbW1hOlxuYC8qKlxuICogVHJhbnNsYXRlZCB0byBPcGVuR0wgRVMgZnJvbSBtYXRoLmpzXG4gKiBodHRwczovL2dpdGh1Yi5jb20vam9zZGVqb25nL21hdGhqc1xuICpcbiAqIE1hdGguanMgaXMgYW4gZXh0ZW5zaXZlIG1hdGggbGlicmFyeSBmb3IgSmF2YVNjcmlwdCBhbmQgTm9kZS5qcyxcbiAqIEl0IGZlYXR1cmVzIHJlYWwgYW5kIGNvbXBsZXggbnVtYmVycywgdW5pdHMsIG1hdHJpY2VzLCBhIGxhcmdlIHNldCBvZlxuICogbWF0aGVtYXRpY2FsIGZ1bmN0aW9ucywgYW5kIGEgZmxleGlibGUgZXhwcmVzc2lvbiBwYXJzZXIuXG4gKlxuICogQHZlcnNpb24gMy4yLjFcbiAqIEBkYXRlICAgIDIwMTYtMDQtMjZcbiAqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChDKSAyMDEzLTIwMTYgSm9zIGRlIEpvbmcgPHdqb3NkZWpvbmdAZ21haWwuY29tPlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90XG4gKiB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVRcbiAqIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZVxuICogTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXJcbiAqIHRoZSBMaWNlbnNlLlxuICovXG5cbnZlYzIgZ2FtbWFTdGVwKHZlYzIgeCwgaW50IGksIHZlYzIgbiwgZmxvYXQgcCl7XG4gICAgZmxvYXQgcmVhbCA9IG4ueCArIGZsb2F0KGkpO1xuICAgIGZsb2F0IGRlbiA9IHJlYWwgKiByZWFsICsgbi55ICogbi55O1xuICAgIGlmKGRlbiAhPSAwLjApe1xuICAgICAgICByZXR1cm4geCArIHZlYzIocCAqIHJlYWwgLyBkZW4sIC0ocCAqIG4ueSkgLyBkZW4pO1xuICAgIH1cbiAgICBlbHNlIHJldHVybiB2ZWMyKDAuMCk7XG59XG5cbnZlYzIgZ2FtbWEodmVjMiBuKXtcbiAgICBuLnggLT0gMS4wO1xuICAgIHZlYzIgeCA9IHZlYzIoMC45OTk5OTk5OTk5OTk5OTcwOTE4MiwgMC4wKTtcblx0eCA9IGdhbW1hU3RlcCh4LCAxLCBuLCA1Ny4xNTYyMzU2NjU4NjI5MjM1MTcpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDIsIG4sIC01OS41OTc5NjAzNTU0NzU0OTEyNDgpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDMsIG4sIDE0LjEzNjA5Nzk3NDc0MTc0NzE3NCk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgNCwgbiwgLTAuNDkxOTEzODE2MDk3NjIwMTk5NzgpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDUsIG4sIDAuMzM5OTQ2NDk5ODQ4MTE4ODg2OTllLTQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDYsIG4sIDAuNDY1MjM2Mjg5MjcwNDg1NzU2NjVlLTQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDcsIG4sIC0wLjk4Mzc0NDc1MzA0ODc5NTY0Njc3ZS00KTtcblx0eCA9IGdhbW1hU3RlcCh4LCA4LCBuLCAwLjE1ODA4ODcwMzIyNDkxMjQ4ODg0ZS0zKTtcblx0eCA9IGdhbW1hU3RlcCh4LCA5LCBuLCAtMC4yMTAyNjQ0NDE3MjQxMDQ4ODMxOWUtMyk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgMTAsIG4sIDAuMjE3NDM5NjE4MTE1MjEyNjQzMjBlLTMpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDExLCBuLCAtMC4xNjQzMTgxMDY1MzY3NjM4OTAyMmUtMyk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgMTIsIG4sIDAuODQ0MTgyMjM5ODM4NTI3NDMyOTNlLTQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDEzLCBuLCAtMC4yNjE5MDgzODQwMTU4MTQwODY3MGUtNCk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgMTQsIG4sIDAuMzY4OTkxODI2NTk1MzE2MjI3MDRlLTUpO1xuICAgIHZlYzIgdCA9IHZlYzIobi54ICsgNC43NDIxODc1ICsgMC41LCBuLnkpO1xuICAgIGZsb2F0IHR3b1BpU3FydCA9IHNxcnQoMi4wICogUEkpO1xuXG4gICAgbi54ICs9IDAuNTtcbiAgICB2ZWMyIHJlc3VsdCA9IGNvbXBsZXhQb3codCwgbik7XG4gICAgcmVzdWx0ICo9IHR3b1BpU3FydDtcbiAgICBmbG9hdCByID0gZXhwKC10LngpO1xuICAgIHQgPSByICogdmVjMihjb3MoLXQueSksIHNpbigtdC55KSk7XG5cbiAgICByZXR1cm4gY29tcGxleE11bHQoY29tcGxleE11bHQocmVzdWx0LCB0KSwgeCk7XG59XG5cbmAsXG4gICAgcm90YXRlV2l0aFRpbWU6XG5gdmVjMiByb3RhdGVXaXRoVGltZSh2ZWMyIHYpe1xuICAgIGZsb2F0IGNvc1QgPSBjb3ModGltZSAqIDIuMCAqIFBJKSwgc2luVCA9IHNpbih0aW1lICogMi4wICogUEkpO1xuICAgIHJldHVybiB2ZWMyKFxuICAgICAgICB2LnggKiBjb3NUIC0gdi55ICogc2luVCxcbiAgICAgICAgdi54ICogc2luVCArIHYueSAqIGNvc1RcbiAgICApO1xufVxuXG5gLFxuICAgIHNub2lzZTpcbmAvL1xuLy8gRGVzY3JpcHRpb24gOiBBcnJheSBhbmQgdGV4dHVyZWxlc3MgR0xTTCAyRC8zRC80RCBzaW1wbGV4IFxuLy8gICAgICAgICAgICAgICBub2lzZSBmdW5jdGlvbnMuXG4vLyAgICAgIEF1dGhvciA6IElhbiBNY0V3YW4sIEFzaGltYSBBcnRzLlxuLy8gIE1haW50YWluZXIgOiBzdGVndVxuLy8gICAgIExhc3Rtb2QgOiAyMDExMDgyMiAoaWptKVxuLy8gICAgIExpY2Vuc2UgOiBDb3B5cmlnaHQgKEMpIDIwMTEgQXNoaW1hIEFydHMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyAgICAgICAgICAgICAgIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZS5cbi8vICAgICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2FzaGltYS93ZWJnbC1ub2lzZVxuLy8gICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vc3RlZ3Uvd2ViZ2wtbm9pc2Vcbi8vIFxuXG52ZWM0IG1vZDI4OSh2ZWM0IHgpIHtcbiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsgfVxuXG5mbG9hdCBtb2QyODkoZmxvYXQgeCkge1xuICByZXR1cm4geCAtIGZsb29yKHggKiAoMS4wIC8gMjg5LjApKSAqIDI4OS4wOyB9XG5cbnZlYzQgcGVybXV0ZSh2ZWM0IHgpIHtcbiAgICAgcmV0dXJuIG1vZDI4OSgoKHgqMzQuMCkrMS4wKSp4KTtcbn1cblxuZmxvYXQgcGVybXV0ZShmbG9hdCB4KSB7XG4gICAgIHJldHVybiBtb2QyODkoKCh4KjM0LjApKzEuMCkqeCk7XG59XG5cbnZlYzQgdGF5bG9ySW52U3FydCh2ZWM0IHIpXG57XG4gIHJldHVybiAxLjc5Mjg0MjkxNDAwMTU5IC0gMC44NTM3MzQ3MjA5NTMxNCAqIHI7XG59XG5cbmZsb2F0IHRheWxvckludlNxcnQoZmxvYXQgcilcbntcbiAgcmV0dXJuIDEuNzkyODQyOTE0MDAxNTkgLSAwLjg1MzczNDcyMDk1MzE0ICogcjtcbn1cblxudmVjNCBncmFkNChmbG9hdCBqLCB2ZWM0IGlwKVxuICB7XG4gIGNvbnN0IHZlYzQgb25lcyA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgLTEuMCk7XG4gIHZlYzQgcCxzO1xuXG4gIHAueHl6ID0gZmxvb3IoIGZyYWN0ICh2ZWMzKGopICogaXAueHl6KSAqIDcuMCkgKiBpcC56IC0gMS4wO1xuICBwLncgPSAxLjUgLSBkb3QoYWJzKHAueHl6KSwgb25lcy54eXopO1xuICBzID0gdmVjNChsZXNzVGhhbihwLCB2ZWM0KDAuMCkpKTtcbiAgcC54eXogPSBwLnh5eiArIChzLnh5eioyLjAgLSAxLjApICogcy53d3c7IFxuXG4gIHJldHVybiBwO1xuICB9XG5cdFx0XHRcdFx0XHRcbi8vIChzcXJ0KDUpIC0gMSkvNCA9IEY0LCB1c2VkIG9uY2UgYmVsb3dcbiNkZWZpbmUgRjQgMC4zMDkwMTY5OTQzNzQ5NDc0NTFcblxuZmxvYXQgc25vaXNlKHZlYzQgdilcbiAge1xuICBjb25zdCB2ZWM0ICBDID0gdmVjNCggMC4xMzgxOTY2MDExMjUwMTEsICAvLyAoNSAtIHNxcnQoNSkpLzIwICBHNFxuICAgICAgICAgICAgICAgICAgICAgICAgMC4yNzYzOTMyMDIyNTAwMjEsICAvLyAyICogRzRcbiAgICAgICAgICAgICAgICAgICAgICAgIDAuNDE0NTg5ODAzMzc1MDMyLCAgLy8gMyAqIEc0XG4gICAgICAgICAgICAgICAgICAgICAgIC0wLjQ0NzIxMzU5NTQ5OTk1OCk7IC8vIC0xICsgNCAqIEc0XG5cbi8vIEZpcnN0IGNvcm5lclxuICB2ZWM0IGkgID0gZmxvb3IodiArIGRvdCh2LCB2ZWM0KEY0KSkgKTtcbiAgdmVjNCB4MCA9IHYgLSAgIGkgKyBkb3QoaSwgQy54eHh4KTtcblxuLy8gT3RoZXIgY29ybmVyc1xuXG4vLyBSYW5rIHNvcnRpbmcgb3JpZ2luYWxseSBjb250cmlidXRlZCBieSBCaWxsIExpY2VhLUthbmUsIEFNRCAoZm9ybWVybHkgQVRJKVxuICB2ZWM0IGkwO1xuICB2ZWMzIGlzWCA9IHN0ZXAoIHgwLnl6dywgeDAueHh4ICk7XG4gIHZlYzMgaXNZWiA9IHN0ZXAoIHgwLnp3dywgeDAueXl6ICk7XG4vLyAgaTAueCA9IGRvdCggaXNYLCB2ZWMzKCAxLjAgKSApO1xuICBpMC54ID0gaXNYLnggKyBpc1gueSArIGlzWC56O1xuICBpMC55encgPSAxLjAgLSBpc1g7XG4vLyAgaTAueSArPSBkb3QoIGlzWVoueHksIHZlYzIoIDEuMCApICk7XG4gIGkwLnkgKz0gaXNZWi54ICsgaXNZWi55O1xuICBpMC56dyArPSAxLjAgLSBpc1laLnh5O1xuICBpMC56ICs9IGlzWVouejtcbiAgaTAudyArPSAxLjAgLSBpc1laLno7XG5cbiAgLy8gaTAgbm93IGNvbnRhaW5zIHRoZSB1bmlxdWUgdmFsdWVzIDAsMSwyLDMgaW4gZWFjaCBjaGFubmVsXG4gIHZlYzQgaTMgPSBjbGFtcCggaTAsIDAuMCwgMS4wICk7XG4gIHZlYzQgaTIgPSBjbGFtcCggaTAtMS4wLCAwLjAsIDEuMCApO1xuICB2ZWM0IGkxID0gY2xhbXAoIGkwLTIuMCwgMC4wLCAxLjAgKTtcblxuICAvLyAgeDAgPSB4MCAtIDAuMCArIDAuMCAqIEMueHh4eFxuICAvLyAgeDEgPSB4MCAtIGkxICArIDEuMCAqIEMueHh4eFxuICAvLyAgeDIgPSB4MCAtIGkyICArIDIuMCAqIEMueHh4eFxuICAvLyAgeDMgPSB4MCAtIGkzICArIDMuMCAqIEMueHh4eFxuICAvLyAgeDQgPSB4MCAtIDEuMCArIDQuMCAqIEMueHh4eFxuICB2ZWM0IHgxID0geDAgLSBpMSArIEMueHh4eDtcbiAgdmVjNCB4MiA9IHgwIC0gaTIgKyBDLnl5eXk7XG4gIHZlYzQgeDMgPSB4MCAtIGkzICsgQy56enp6O1xuICB2ZWM0IHg0ID0geDAgKyBDLnd3d3c7XG5cbi8vIFBlcm11dGF0aW9uc1xuICBpID0gbW9kMjg5KGkpOyBcbiAgZmxvYXQgajAgPSBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlKGkudykgKyBpLnopICsgaS55KSArIGkueCk7XG4gIHZlYzQgajEgPSBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlIChcbiAgICAgICAgICAgICBpLncgKyB2ZWM0KGkxLncsIGkyLncsIGkzLncsIDEuMCApKVxuICAgICAgICAgICArIGkueiArIHZlYzQoaTEueiwgaTIueiwgaTMueiwgMS4wICkpXG4gICAgICAgICAgICsgaS55ICsgdmVjNChpMS55LCBpMi55LCBpMy55LCAxLjAgKSlcbiAgICAgICAgICAgKyBpLnggKyB2ZWM0KGkxLngsIGkyLngsIGkzLngsIDEuMCApKTtcblxuLy8gR3JhZGllbnRzOiA3eDd4NiBwb2ludHMgb3ZlciBhIGN1YmUsIG1hcHBlZCBvbnRvIGEgNC1jcm9zcyBwb2x5dG9wZVxuLy8gNyo3KjYgPSAyOTQsIHdoaWNoIGlzIGNsb3NlIHRvIHRoZSByaW5nIHNpemUgMTcqMTcgPSAyODkuXG4gIHZlYzQgaXAgPSB2ZWM0KDEuMC8yOTQuMCwgMS4wLzQ5LjAsIDEuMC83LjAsIDAuMCkgO1xuXG4gIHZlYzQgcDAgPSBncmFkNChqMCwgICBpcCk7XG4gIHZlYzQgcDEgPSBncmFkNChqMS54LCBpcCk7XG4gIHZlYzQgcDIgPSBncmFkNChqMS55LCBpcCk7XG4gIHZlYzQgcDMgPSBncmFkNChqMS56LCBpcCk7XG4gIHZlYzQgcDQgPSBncmFkNChqMS53LCBpcCk7XG5cbi8vIE5vcm1hbGlzZSBncmFkaWVudHNcbiAgdmVjNCBub3JtID0gdGF5bG9ySW52U3FydCh2ZWM0KGRvdChwMCxwMCksIGRvdChwMSxwMSksIGRvdChwMiwgcDIpLCBkb3QocDMscDMpKSk7XG4gIHAwICo9IG5vcm0ueDtcbiAgcDEgKj0gbm9ybS55O1xuICBwMiAqPSBub3JtLno7XG4gIHAzICo9IG5vcm0udztcbiAgcDQgKj0gdGF5bG9ySW52U3FydChkb3QocDQscDQpKTtcblxuLy8gTWl4IGNvbnRyaWJ1dGlvbnMgZnJvbSB0aGUgZml2ZSBjb3JuZXJzXG4gIHZlYzMgbTAgPSBtYXgoMC42IC0gdmVjMyhkb3QoeDAseDApLCBkb3QoeDEseDEpLCBkb3QoeDIseDIpKSwgMC4wKTtcbiAgdmVjMiBtMSA9IG1heCgwLjYgLSB2ZWMyKGRvdCh4Myx4MyksIGRvdCh4NCx4NCkgICAgICAgICAgICApLCAwLjApO1xuICBtMCA9IG0wICogbTA7XG4gIG0xID0gbTEgKiBtMTtcbiAgcmV0dXJuIDQ5LjAgKiAoIGRvdChtMCptMCwgdmVjMyggZG90KCBwMCwgeDAgKSwgZG90KCBwMSwgeDEgKSwgZG90KCBwMiwgeDIgKSkpXG4gICAgICAgICAgICAgICArIGRvdChtMSptMSwgdmVjMiggZG90KCBwMywgeDMgKSwgZG90KCBwNCwgeDQgKSApICkgKSA7XG5cbn1cblxuYFxufTtcblxuRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnMgPSB7XG4gICAgbG9yZW50ejoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0xvcmVudHogQm9vc3QnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6XG5gZmxvYXQgYmV0YSA9IHNpbih0aW1lICogMi4wICogUEkpICogMC45O1xuZmxvYXQgZ2FtbWEgPSAxLjAgLyBzcXJ0KDEuMCAtIGJldGEgKiBiZXRhKTtcbnJlcyA9IGdhbW1hICogdmVjMihcbiAgICBjUG9zLnggKiAxLjAgKyBjUG9zLnkgKiBiZXRhLFxuICAgIGNQb3MueSAqIDEuMCArIGNQb3MueCAqIGJldGFcbik7XG5cbmBcbiAgICB9LFxuLy8gICAgcm90YXRpb246IHtcbi8vICAgICAgICBkaXNwbGF5TmFtZTogJ1JvdGF0aW9uJyxcbi8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuLy8gICAgICAgIG51bUZyYW1lczogODAwLFxuLy8gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuLy8gICAgICAgIGRyYXdGdW5jOlxuLy9gcmVzID0gcm90YXRlV2l0aFRpbWUoY1Bvcyk7XG4vL2Bcbi8vICAgIH0sXG4gICAgbWVyY2F0b3J3YXJwOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTWVyY2F0b3IgV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogODAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6XG5gdmVjMiBzY2FsZWRQb3MgPSBjUG9zICogMC42O1xudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSkgKiA4LjA7XG5yZXMgPSByb3RhdGVXaXRoVGltZShpbnZNZXJjYXRvcik7XG5gXG4gICAgfSxcbiAgICBtZXJjYXRvck1vbGx3ZWlkZToge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ01lcmNhdG9yIHRvIE1vbGx3ZWlkZScsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMTAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzpcbmB2ZWMyIHNjYWxlZFBvcyA9IGNQb3MgKiAwLjM7XG5mbG9hdCB0aGV0YSA9IGFzaW4oc2NhbGVkUG9zLnkgKiAyLjAgLyBQSSk7XG52ZWMyIGludk1vbGx3ZWlkZSA9IHZlYzIoXG4gICAgc2NhbGVkUG9zLnggLyBjb3ModGhldGEpLFxuICAgIGFzaW4oKDIuMCAqIHRoZXRhICsgc2luKDIuMCAqIHRoZXRhKSkgLyBQSSlcbik7XG52ZWMyIGludk1lcmNhdG9yID0gdmVjMihzY2FsZWRQb3MueCwgMi4wICogYXRhbihleHAoc2NhbGVkUG9zLnkpKSAtIDAuNSAqIFBJKTtcbmZsb2F0IG1peFBhcmFtID0gLSBjb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcbnJlcyA9IChpbnZNb2xsd2VpZGUgKiBtaXhQYXJhbSArIGludk1lcmNhdG9yICogKDEuMCAtIG1peFBhcmFtKSkgKiA4LjA7XG5gXG4gICAgfSxcbiAgICBkaXBvbGU6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdEaXBvbGUgRm9ybWF0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAzMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOlxuYGZsb2F0IGRpc3QgPSBzaW4odGltZSAqIDIuMCAqIFBJICsgUEkgLyAyLjApICogMi4wICsgMi41O1xucmVzID0gNTAuMCAvICgyLjAgKiBkaXN0KSAqIChcbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKGRpc3QsIDAuMCkpIC1cbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKC1kaXN0LCAwLjApKVxuKTtcbmBcbiAgICB9LFxuICAgIGF0dHJhY3RSZXBlbDoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0F0dHJhY3Rpb24gdG8gUmVwdWxzaW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogXG5gcmVzID0gMTAuMCAqIChcbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKDEuMCwgMC4wKSkgK1xuICAgIHNpbih0aW1lICogMi4wICogUEkgLSBQSSAvIDIuMCkgKiBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKC0xLjAsIDAuMCkpXG4pO1xuYFxuICAgIH0sXG4gICAgbmV1cmFsbmV0d29yazoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ05ldXJhbCBOZXR3b3JrJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOiBcbmBmbG9hdCBtaXhQYXJhbSA9IC1jb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcbnZlYzIgdW5zaWdtb2lkID0gLWxvZygxLjAgLyAoKGNQb3MgKyB2ZWMyKDMuMywgMy4wKSkgLyA2LjMpIC0gMS4wKTtcbnJlcyA9ICh2ZWMyKFxuICAgIHVuc2lnbW9pZC54ICogMi4wICsgdW5zaWdtb2lkLnkgKiAxLjAsXG4gICAgdW5zaWdtb2lkLnggKiAyLjAgKyB1bnNpZ21vaWQueSAqIDMuMFxuKSAtIHZlYzIoMS4wLCAtMi4wKSkgKiBtaXhQYXJhbSArIGNQb3MgKiAoMS4wIC0gbWl4UGFyYW0pO1xuYFxuICAgIH0sXG4gICAgZ2FsYXh5OiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnR2FsYXh5IFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6IFxuYGZsb2F0IG1peFBhcmFtID0gLWNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xudmVjMiBwb2xQb3MgPSB2ZWMyKGxlbmd0aChjUG9zKSwgYXRhbihjUG9zLnksIGNQb3MueCkpO1xucG9sUG9zID0gdmVjMihwb2xQb3MueCwgcG9sUG9zLnkgLSBtaXhQYXJhbSAvIDUwLjAgKiBzcXJ0KDEuMCAvIHBvdyhwb2xQb3MueCAvIDQwLjAsIDMuMCkpKTtcbnJlcyA9IHZlYzIocG9sUG9zLnggKiBjb3MocG9sUG9zLnkpLCBwb2xQb3MueCAqIHNpbihwb2xQb3MueSkpO1xuYFxuICAgIH0sXG4gICAgc2ltcGxleDoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ1NpbXBsZXggV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMTAwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuc25vaXNlLFxuICAgICAgICBkcmF3RnVuYzogXG5gdmVjMiBjaXJjbGVWYXJ5ID0gMi4wICogdmVjMihcbiAgICBjb3ModGltZSAqIDIuMCAqIFBJKSxcbiAgICBzaW4odGltZSAqIDIuMCAqIFBJKVxuKTtcbnJlcyA9IDIuMCAqIChjUG9zICtcbjAuNSAqIHZlYzIoXG4gICAgc25vaXNlKHZlYzQoY1BvcyAqIDAuMjUsIGNpcmNsZVZhcnkgKyB2ZWMyKDEwMC4wLCAxMDAuMCkpKSxcbiAgICBzbm9pc2UodmVjNChjUG9zICogMC4yNSwgY2lyY2xlVmFyeSArIHZlYzIoMjAwLjAsIDIwMC4wKSkpXG4pKTtcbmBcbiAgICB9LFxuICAgIGV4cG9uZW50aWF0aW9uOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnQ29tcGxleCBFeHBvbmVudGlhdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogXG5gdmVjMiBjYXJ0UmVzID0gMTAuMCAqIGNvbXBsZXhQb3coY1BvcywgdmVjMigxLjAgLyAoMi41IC0gMS41ICogY29zKHRpbWUgKiAyLjAgKiBQSSkpLCAwLjApKTtcbnJlcyA9IHZlYzIobGVuZ3RoKGNhcnRSZXMpLCAxMC4wICogYXRhbihjYXJ0UmVzLnksIGNhcnRSZXMueCkpO1xuYFxuICAgIH0sXG4gICAgbW9iaXVzOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTW9iaXVzIFRyYW5zZm9ybWF0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6XG5gcmVzID0gcm90YXRlV2l0aFRpbWUoMTAuMCAqIGNvbXBsZXhEaXYoXG4gICAgY29tcGxleE11bHQodmVjMigwLjUsIDMuMCksIGNQb3MpICsgdmVjMigwLjUsIDEuNSksXG4gICAgY29tcGxleE11bHQodmVjMig0LjAsIDEuNSksIGNQb3MpICsgdmVjMigyLjAsIDMuNSlcbikpO1xuYFxuICAgIH0sXG4vLyAgICBsb2c6IHtcbi8vICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggTG9nYXJpdGhtJyxcbi8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuLy8gICAgICAgIG51bUZyYW1lczogMTAwMCxcbi8vICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbi8vICAgICAgICBkcmF3RnVuYzogXG4vL2ByZXMgPSByb3RhdGVXaXRoVGltZSgxMC4wICogY29tcGxleExvZyhjUG9zKSk7XG4vL2Bcbi8vICAgIH0sXG4vLyAgICBzaW46IHtcbi8vICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggU2luZScsXG4vLyAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbi8vICAgICAgICBudW1GcmFtZXM6IDMwMCxcbi8vICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuLy8gICAgICAgIGRyYXdGdW5jOiBcbi8vYHZlYzIgZXhwb25lbnQgPSB2ZWMyKC1jUG9zLnksIGNQb3MueCk7XG4vL3JlcyA9IHJvdGF0ZVdpdGhUaW1lKGNvbXBsZXhEaXYoXG4vLyAgICBjb21wbGV4RXhwKGV4cG9uZW50KSAtIGNvbXBsZXhFeHAoLWV4cG9uZW50KSxcbi8vICAgIHZlYzIoMC4wLCAyLjApXG4vLykpO1xuLy9gXG4vLyAgICB9LFxuICAgIGFyY3Npbjoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggSW52ZXJzZSBTaW5lJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiBcbmB2ZWMyIGludlNpbiA9IC0gMTAuMCAqIGNvbXBsZXhNdWx0KGNvbXBsZXhMb2coY29tcGxleFBvdyh2ZWMyKDEuMCwgMC4wKSAtIGNvbXBsZXhQb3coY1BvcywgdmVjMigyLjAsIDAuMCkpLCB2ZWMyKDAuNSwgMC4wKSkgKyBjb21wbGV4TXVsdChjUG9zLCB2ZWMyKDAuMCwgMS4wKSkpLCB2ZWMyKDAuMCwgMS4wKSk7XG5mbG9hdCBtaXhQYXJhbSA9IC0gY29zKHRpbWUgKiAyLjAgKiBQSSkgLyAyLjAgKyAwLjU7XG5yZXMgPSBpbnZTaW4gKiBtaXhQYXJhbSArIGNQb3MgKiAoMS4wIC0gbWl4UGFyYW0pO1xuYFxuICAgIH0sXG4gICAgZ2FtbWE6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdHYW1tYSBGdW5jdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogNDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5nYW1tYSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgICAgIGRyYXdGdW5jOlxuYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBnYW1tYSgoY1BvcyArIHZlYzIoMi4wLCAwLjApKSAvIDIuMCkpO1xuYFxuICAgIH0sXG4gICAgbWFkbmVzczoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggPz8/JyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiA4MDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiBcbmB2ZWMyIG1hZG5lc3MgPSAtIDEwLjAgKiBjb21wbGV4TXVsdChjb21wbGV4TG9nKGNvbXBsZXhQb3codmVjMigyLjAsIDMuMCkgLSBjb21wbGV4UG93KGNQb3MgKiAyLjAsIHZlYzIoMi4wLCAxLjApKSwgdmVjMigwLjUsIDEuMCkpICsgY29tcGxleE11bHQoY1BvcyAqIDIuMCwgdmVjMigyLjAsIDEuMCkpKSwgdmVjMigyLjAsIDEuMCkpO1xuZmxvYXQgbWl4UGFyYW0gPSAtIGNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xucmVzID0gbWFkbmVzcyAqIG1peFBhcmFtICsgY1BvcyAqICgxLjAgLSBtaXhQYXJhbSk7XG5gXG4gICAgfSxcbn07XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
