"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isPointInRect(e,t){return e.x>=t.left&&e.x<t.right&&e.y>=t.top&&e.y<t.bottom}function compute1DArray(e,t){return new Array(e).fill(void 0).map(function(e,n){return t(n)})}function compute2DArray(e,t){return compute1DArray(e.height,function(n){return compute1DArray(e.width,function(e){return t(new Vector(e,n))})})}function flatten(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getCanvasMousePos(e,t){var n=e.getBoundingClientRect();return new Vector((t.clientX-n.left)*(e.width/n.width),(t.clientY-n.top)*(e.height/n.height))}function getScrollDir(e){return 0==e.deltaY?0:e.deltaY/Math.abs(e.deltaY)}function setCanvasSmoothing(e,t){e.imageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.webkitImageSmoothingEnabled=t,e.mnImageSmoothingEnabled=t}function createCanvas(e,t){var n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.style.position="absolute",n.style.left=t.left.toString()+"px",n.style.top=t.top.toString()+"px",e.appendChild(n),n.getContext("2d")}function getCanvasDims(e){return new Dimensions(e.canvas.width,e.canvas.height)}function compileShader(e,t,n){var a=e.createShader(n);if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw console.log(t),"Shader compile error: "+e.getShaderInfoLog(a);return a}function createProgram(e,t,n){var a=e.createProgram();return e.attachShader(a,compileShader(e,t,e.VERTEX_SHADER)),e.attachShader(a,compileShader(e,n,e.FRAGMENT_SHADER)),e.linkProgram(a),a}function createComputeTexture(e,t){var n=arguments.length<=2||void 0===arguments[2]?e.FLOAT:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3],r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,n,a),r}function createFBO(e,t,n){var a=e.createFramebuffer();if(e.bindFramebuffer(e.FRAMEBUFFER,a),n.length>1?(t.drawBuffersWEBGL(compute1DArray(n.length,function(e){return t["COLOR_ATTACHMENT"+e.toString()+"_WEBGL"]})),n.forEach(function(n,a){e.framebufferTexture2D(e.FRAMEBUFFER,t["COLOR_ATTACHMENT"+a.toString()+"_WEBGL"],e.TEXTURE_2D,n,0)})):e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n[0],0),e.checkFramebufferStatus(e.FRAMEBUFFER)!=e.FRAMEBUFFER_COMPLETE)throw"GL_FRAMEBUFFER_COMPLETE failed.";return a}function createArrayBuffer(e,t,n){var a=e.createBuffer();return e.bindBuffer(t,a),e.bufferData(t,n,e.STATIC_DRAW),a}function registerVertexAttrib(e,t,n,a,r){var i=e.getAttribLocation(t,n);e.enableVertexAttribArray(i),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(i,a,e.FLOAT,!1,0,0)}function registerTextures(e,t,n){n.forEach(function(n,a){var r=e.getUniformLocation(t,n);e.uniform1i(r,a)})}function registerUniforms(e,t,n,a){n.forEach(function(n){var r=e.getUniformLocation(t,n.name);"int"==n.type?e.uniform1i(r,a[n.name]):"float"==n.type?e.uniform1f(r,a[n.name]):/^ivec[2-4]$/g.test(n.type)?e["uniform"+n.type[4].toString()+"iv"](r,new Int32Array(a[n.name])):/^vec[2-4]$/g.test(n.type)&&e["uniform"+n.type[3].toString()+"fv"](r,new Float32Array(a[n.name]))})}function bindTextures(e,t){t.forEach(function(t,n){e.activeTexture(e["TEXTURE"+n.toString()]),e.bindTexture(e.TEXTURE_2D,t)})}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function init(){var e=new ContourerManager;initRender(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function initRender(e){var t=document.getElementById("indexContainer");ReactDOM.render(React.createElement(ContourerApp,{manager:e}),t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Vector=function(){function e(t,n){_classCallCheck(this,e),this.x=t,this.y=n}return _createClass(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"multiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"divide",value:function(t){return new e(this.x/t,this.y/t)}},{key:"equals",value:function(e){return this.x==e.x&&this.y==e.y}},{key:"floor",value:function(){return new e(Math.floor(this.x),Math.floor(this.y))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"getLength",value:function(){return Math.sqrt(this.dot(this))}},{key:"getAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"toArray",value:function(){return[this.x,this.y]}}],[{key:"fromPolar",value:function(t,n){return new e(t*Math.cos(n),t*Math.sin(n))}}]),e}(),Dimensions=function(){function e(t,n){_classCallCheck(this,e),this.width=t,this.height=n}return _createClass(e,[{key:"contains",value:function(e){return isPointInRect(e,new Rect(new Vector(0,0),this))}},{key:"getArea",value:function(){return this.width*this.height}},{key:"toArray",value:function(){return[this.width,this.height]}}]),e}(),Color=function(){function e(t,n,a){_classCallCheck(this,e),this.r=t,this.g=n,this.b=a}return _createClass(e,[{key:"toArray",value:function(){return[this.r,this.g,this.b]}}]),e}(),Rect=function(){function e(t,n){_classCallCheck(this,e),this.pos=t,this.dims=n}return _createClass(e,[{key:"x",get:function(){return this.pos.x}},{key:"y",get:function(){return this.pos.y}},{key:"width",get:function(){return this.dims.width}},{key:"height",get:function(){return this.dims.height}},{key:"left",get:function(){return this.pos.x}},{key:"right",get:function(){return this.pos.x+this.dims.width}},{key:"top",get:function(){return this.pos.y}},{key:"bottom",get:function(){return this.pos.y+this.dims.height}}]),e}(),MOUSE_LEFT=0,MOUSE_RIGHT=2,MOUSE_MIDDLE=1,DIRS4=[new Vector(1,0),new Vector(0,1),new Vector((-1),0),new Vector(0,(-1))],ScalableViewportManager=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?new Vector(0,0):arguments[0],n=arguments.length<=1||void 0===arguments[1]?1:arguments[1];_classCallCheck(this,e),this.pos=t,this.scale=n}return _createClass(e,[{key:"viewportToWorld",value:function(e){return e.multiply(this.scale).add(this.pos)}},{key:"worldToViewport",value:function(e){return e.subtract(this.pos).divide(this.scale)}},{key:"translate",value:function(e){this.pos=this.pos.subtract(e.multiply(this.scale))}},{key:"scaleAtPoint",value:function(e,t){var n=this.scale*Math.exp(e),a=this.pos.add(t.multiply(this.scale-n));this.scale=n,this.pos=a}}]),e}(),MouseDownTracker=function e(t,n,a){var r=this,i=arguments.length<=3||void 0===arguments[3]?function(e){return!0}:arguments[3];_classCallCheck(this,e),this.initTrackCallback=n,this.trackCallback=a,this.isTrackingEnabled=i,this.canvas=t,this.onMouseDown=function(e){r.isTrackingEnabled(e)&&(r.initTrackCallback(e),window.addEventListener("mousemove",r.onMouseMove),window.addEventListener("mouseup",r.onMouseUp),r.canvas.removeEventListener("mousedown",r.onMouseDown),e.preventDefault())},this.onMouseUp=function(e){window.removeEventListener("mousemove",r.onMouseMove),window.removeEventListener("mouseup",r.onMouseUp),r.canvas.addEventListener("mousedown",r.onMouseDown)},this.onMouseMove=function(e){r.trackCallback(e)},this.canvas.addEventListener("mousedown",this.onMouseDown)},DragManager=function(e){function t(e,n){var a=arguments.length<=2||void 0===arguments[2]?function(e){return!0}:arguments[2];_classCallCheck(this,t);var r=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,function(e){r.prevMousePos=getCanvasMousePos(r.canvas,e)},function(e){var t=getCanvasMousePos(r.canvas,e);n(t.subtract(r.prevMousePos)),r.prevMousePos=t},a));return r.prevMousePos=new Vector(0,0),r}return _inherits(t,e),t}(MouseDownTracker),FULLSCREEN_QUAD_POS_ARRAY=new Float32Array([-1,-1,1,-1,1,1,-1,1]),FULLSCREEN_QUAD_INDEX_ARRAY=new Uint16Array([0,1,2,0,2,3]),FULLSCREEN_QUAD_NUM_VERTICES=6,_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),GPGPUKernelResult=function(){function e(t,n,a){_classCallCheck(this,e),this.ctx=t,this.fbo=n,this.textures=a}return _createClass(e,[{key:"dispose",value:function(){var e=this;null!=this.fbo&&this.ctx.deleteFramebuffer(this.fbo),this.textures.forEach(function(t){e.ctx.deleteTexture(t)})}}]),e}(),GPGPUKernel=function(){function e(t,n){var a=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],r=arguments.length<=3||void 0===arguments[3]?1:arguments[3],i=!(arguments.length<=4||void 0===arguments[4])&&arguments[4];_classCallCheck(this,e),this.manager=t,this.program=n,this.params=a,this.numOutputs=r,this.isGraphical=i}return _createClass(e,[{key:"run",value:function(e,t){var n=this,a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]||arguments[3];this.ctx.useProgram(this.program),registerUniforms(this.ctx,this.program,this.params,a),registerUniforms(this.ctx,this.program,[{name:"uDims",type:"ivec2"}],{uDims:t.toArray()});var i=compute1DArray(this.numOutputs,function(e){return createComputeTexture(n.ctx,t,r?n.ctx.FLOAT:n.ctx.UNSIGNED_BYTE)}),o=this.isGraphical?null:createFBO(this.ctx,this.extDB,i);return this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,o),bindTextures(this.ctx,e),this.ctx.viewport(0,0,t.width,t.height),this.manager.drawFullscreenQuad(this.program),new GPGPUKernelResult(this.ctx,o,i)}},{key:"ctx",get:function(){return this.manager.ctx}},{key:"extDB",get:function(){return this.manager.extDB}}]),e}(),GPGPUManager=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]||arguments[1];_classCallCheck(this,e),this.ctx=t,this.extDB=this.ctx.getExtension("WEBGL_draw_buffers"),n&&this.ctx.getExtension("OES_texture_float"),this.quadPosBuffer=createArrayBuffer(this.ctx,this.ctx.ARRAY_BUFFER,FULLSCREEN_QUAD_POS_ARRAY),this.quadIndexBuffer=createArrayBuffer(this.ctx,this.ctx.ELEMENT_ARRAY_BUFFER,FULLSCREEN_QUAD_INDEX_ARRAY)}return _createClass(e,[{key:"drawFullscreenQuad",value:function(e){this.ctx.useProgram(e),this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER,this.quadIndexBuffer),this.ctx.drawElements(this.ctx.TRIANGLE_STRIP,FULLSCREEN_QUAD_NUM_VERTICES,this.ctx.UNSIGNED_SHORT,0)}},{key:"readPackedFloatData",value:function(e){var t=new Uint8Array(4*e.getArea());return this.ctx.readPixels(0,0,e.width,e.height,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,t),new Float32Array(t.buffer)}},{key:"arrayToTexture",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2],a=new Float32Array(flatten(flatten(t))),r=n?a:new Uint8Array(r.buffer);return createComputeTexture(this.ctx,e,n?this.ctx.FLOAT:this.ctx.UNSIGNED_BYTE,r)}},{key:"textureToArray",value:function(t,n){var a=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r="vec2 cVal = texture2D(uInput, vCoord).xy;\ngl_FragData[0] = packFloat(cVal."+"xyzw"[a]+");\n",i=["uInput"],o=this.createKernel(r,i,t,[],0,e.PACK_FLOAT_INCLUDE),s=o.run([n],t,{},this.ctx.UNSIGNED_BYTE),c=this.readPackedFloatData(t);return s.dispose(),compute2DArray(t,function(e){return c[e.y*t.width+e.x]})}},{key:"createKernel",value:function(t,n,a){var r=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],i=arguments.length<=4||void 0===arguments[4]?1:arguments[4],o=arguments.length<=5||void 0===arguments[5]?"":arguments[5],s=!(arguments.length<=6||void 0===arguments[6])&&arguments[6],c=[].concat(r,n.map(function(e){return{type:"sampler2D",name:e}}),[{type:"ivec2",name:"uDims"}]),l=e.createVertShaderSrc(s),u=e.createFragShaderSrc(t.trim().split("\n").map(function(e){return"    "+e}).join("\n")+"\n",c,o,i>1),m=createProgram(this.ctx,l,u);return this.ctx.useProgram(m),registerVertexAttrib(this.ctx,m,"aPos",2,this.quadPosBuffer),registerTextures(this.ctx,m,n),new GPGPUKernel(this,m,r,i,s)}},{key:"createGraphicalKernel",value:function(e,t,n){var a=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],r=arguments.length<=4||void 0===arguments[4]?"":arguments[4];return this.createKernel(e,t,n,a,0,r,!0)}}]),e}();GPGPUManager.endianness=function(){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e);if(t[0]=3735928559,239==n[0])return"LE";if(222==n[0])return"BE";throw new Error("unknown endianness")}(),GPGPUManager.getCanvasContext=function(e){var t={depth:!1,antialias:!1};return e.getContext("webgl",t)||e.getContext("webgl-experimental",t)},GPGPUManager.createVertShaderSrc=function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];return"precision highp float;\n\nattribute vec2 aPos;\n\nvarying vec2 vCoord;\n\nvoid main(){\n    gl_Position = vec4("+(e?"aPos.x, -aPos.y":"aPos")+", 0.0, 1.0);\n    vCoord = (aPos + 1.0) / 2.0;\n}"},GPGPUManager.PACK_FLOAT_INCLUDE="vec4 round(vec4 x) {\n    return floor(x + 0.5);\n}\n\nhighp float round(highp float x) {\n    return floor(x + 0.5);\n}\n\nvec2 integerMod(vec2 x, float y) {\n    vec2 res = floor(mod(x, y));\n    return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n    vec3 res = floor(mod(x, y));\n    return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n    vec4 res = floor(mod(x, y));\n    return res * step(1.0 - floor(y), -res);\n}\n\nhighp float integerMod(highp float x, highp float y) {\n    highp float res = floor(mod(x, y));\n    return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nhighp int integerMod(highp int x, highp int y) {\n    return int(integerMod(float(x), float(y)));\n}\n\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nhighp float unpackFloat(highp vec4 rgba) {\n"+("LE"==GPGPUManager.endianness?"":"    rgba.rgba = rgba.abgr;\n")+"    rgba *= 255.0;\n    vec2 gte128;\n    gte128.x = rgba.b >= 128.0 ? 1.0 : 0.0;\n    gte128.y = rgba.a >= 128.0 ? 1.0 : 0.0;\n    float exponent = 2.0 * rgba.a - 127.0 + dot(gte128, MAGIC_VEC);\n    float res = exp2(round(exponent));\n    rgba.b = rgba.b - 128.0 * gte128.x;\n    res = dot(rgba, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n    res *= gte128.y * -2.0 + 1.0;\n    return res;\n}\n\nhighp vec4 packFloat(highp float f) {\n    highp float F = abs(f);\n    highp float sign = f < 0.0 ? 1.0 : 0.0;\n    highp float exponent = floor(log2(F));\n    highp float mantissa = (exp2(-exponent) * F);\n    // exponent += floor(log2(mantissa));\n    vec4 rgba = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n    rgba.rg = integerMod(rgba.rg, 256.0);\n    rgba.b = integerMod(rgba.b, 128.0);\n    rgba.a = exponent*0.5 + 63.5;\n    rgba.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n    rgba *= 0.003921569; // 1/255\n"+("LE"==GPGPUManager.endianness?"":"    rgba.rgba = rgba.abgr;\n")+"    return rgba;\n}\n\n",GPGPUManager.createFragShaderSrc=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],a=arguments.length<=3||void 0===arguments[3]||arguments[3];return[a?"#extension GL_EXT_draw_buffers: require\n":"","precision highp float;\nprecision highp sampler2D;\n\n#define EPS 0.0000001\n\n"].concat(_toConsumableArray(t.map(function(e){return"uniform "+e.type+" "+e.name+";\n"})),["\nvarying vec2 vCoord;\n\nvec4 arrGet(sampler2D arr, ivec2 id){\n    return texture2D(arr, (vec2(id) + vec2(0.5)) / vec2(uDims));\n}\n\n",n,"void computeFunc(){\n    ivec2 threadId = ivec2(vCoord * vec2(uDims));\n",e,"}\n\nvoid main(){\n    computeFunc();\n}"]).join("")};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),RED=new Color(255,0,0),GREEN=new Color(0,255,0),BLUE=new Color(0,0,255),WHITE=new Color(255,255,255),ContourerManager=function(){function e(t){_classCallCheck(this,e),this.viewport=new ScalableViewportManager(new Vector(0,0),.01),this.zoomSensitivity=.3,this.contourSpacing=1}return _createClass(e,[{key:"changeDrawFunc",value:function(e,t){var n=this,a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=function(r){var i="vec2 cPos = (vec2(threadId) * uScale) + uPos;\nvec2 res;\n"+e.trim()+"\ngl_FragData[0] = packFloat(res."+r+");\n";return n.gpgpuManager.createKernel(i,[],n.dims,[{type:"float",name:"uScale"},{type:"vec2",name:"uPos"}].concat(a?[{type:"float",name:"time"}]:[]),1,GPGPUManager.PACK_FLOAT_INCLUDE+t.trim()+"\n\n")};this.fieldKernelX=r("x"),this.fieldKernelY=r("y"),this.viewport.scale=10/this.dims.width,this.viewport.pos=new Vector((-this.dims.width),(-this.dims.height)).divide(2).multiply(this.viewport.scale),this.contourSpacing=1,this.isAnimated=a}},{key:"useCanvas",value:function(t){this.ctx=GPGPUManager.getCanvasContext(t),this.gpgpuManager=new GPGPUManager(this.ctx,(!1)),this.dims=getCanvasDims(this.ctx),this.plotKernel=this.gpgpuManager.createGraphicalKernel(e.plotFunc,["uFieldX","uFieldY"],this.dims,[{type:"float",name:"uContourSpacing"}],GPGPUManager.PACK_FLOAT_INCLUDE+e.FIELD_CHECK_INCLUDE)}},{key:"destroyContext",value:function(){this.ctx.canvas.width=1,this.ctx.canvas.height=1}},{key:"changeZoom",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?new Vector(this.dims.width/2,this.dims.height/2):arguments[1];this.viewport.scaleAtPoint(-e*this.zoomSensitivity,t)}},{key:"changeContourSpacing",value:function(e){this.contourSpacing*=Math.exp(e*this.zoomSensitivity)}},{key:"translate",value:function(e){this.viewport.translate(e)}},{key:"drawContours",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t={uScale:this.viewport.scale,uPos:this.viewport.pos.toArray()};this.isAnimated&&(t.time=e);var n=this.fieldKernelX.run([],this.dims,t,!1),a=this.fieldKernelY.run([],this.dims,t,!1);this.plotKernel.run([n.textures[0],a.textures[0]],this.dims,{uContourSpacing:this.contourSpacing}),n.dispose(),a.dispose()}}]),e}();ContourerManager.plotFunc="ivec2 lineIndex = ivec2(floor(vec2(\n    unpackFloat(texture2D(uFieldX, vCoord)),\n    unpackFloat(texture2D(uFieldY, vCoord))\n) / uContourSpacing));\nvec2 cmpField = vec2(lineIndex) * uContourSpacing;\nivec2 drawData = ivec2(greaterThanEqual(\n    fieldCheck(threadId, ivec2(0, 1), cmpField) +\n    fieldCheck(threadId, ivec2(1, 0), cmpField) +\n    fieldCheck(threadId, ivec2(0, -1), cmpField) +\n    fieldCheck(threadId, ivec2(-1, 0), cmpField),\n    ivec2(1)));\nif(all(equal(drawData, ivec2(0)))){\n    gl_FragData[0] = vec4(1.0, 1.0, 1.0, 1.0);\n}\nelse{\n    vec2 isAxis = vec2(equal(lineIndex, ivec2(0)));\n    vec2 lineColor = vec2(drawData) * (1.0 - 0.5 * isAxis);\n    gl_FragData[0] = vec4(lineColor.x, 0.5 * dot(vec2(drawData), isAxis), lineColor.y, 1.0);\n}\n",ContourerManager.FIELD_CHECK_INCLUDE="vec2 getField(ivec2 pos){\n    return vec2(\n        unpackFloat(arrGet(uFieldX, pos)),\n        unpackFloat(arrGet(uFieldY, pos))\n    );\n}\n\nivec2 fieldCheck(ivec2 cPos, ivec2 dir, vec2 cmpField){\n    ivec2 oPos = cPos + dir;\n    if(all(greaterThanEqual(oPos, ivec2(0))) && all(lessThan(oPos, uDims))){\n        return ivec2(lessThan(getField(oPos), cmpField));\n    }\n    else return ivec2(0);\n}\n\n";var ContourerAnimationManager=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?1e3:arguments[1];_classCallCheck(this,e),this.manager=t,this.isAnimating=!1,this.numFrames=n,this.currentFrame=0,this.onStopCallback=null,this.animationLoop=this.animationLoop.bind(this)}return _createClass(e,[{key:"start",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.currentFrame=e,this.isAnimating=!0,this.onDraw=t,window.requestAnimationFrame(this.animationLoop)}},{key:"animationLoop",value:function(e){this.isAnimating?(this.manager.drawContours(this.currentFrame/this.numFrames),null!=this.onDraw&&this.onDraw(this.currentFrame),this.currentFrame=(this.currentFrame+1)%this.numFrames,window.requestAnimationFrame(this.animationLoop)):null!=this.onStopCallback&&this.onStopCallback()}},{key:"stop",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];this.isAnimating?(this.isAnimating=!1,this.onStopCallback=e):null!=e&&e()}}]),e}(),DemoFunctions=function t(){_classCallCheck(this,t)};DemoFunctions.INCLUDES={pi:"const float PI = 3.1415926535897932384626433832795;\n\n",complexLib:"vec2 complexMult(vec2 a, vec2 b){\n    return vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\n}\n\nvec2 complexDiv(vec2 a, vec2 b){\n    float divisor = dot(b, b);\n    return vec2(dot(a, b), a.y * b.x - a.x * b.y) / divisor;\n}\n\nvec2 complexPow(vec2 a, vec2 b){\n    float r = length(a), phi = atan(a.y, a.x);\n    float newR = pow(r, b.x) * exp(-b.y * phi);\n    float newPhi = b.y * log(r) + b.x * phi;\n    return newR * vec2(cos(newPhi), sin(newPhi));\n}\n\nvec2 complexExp(vec2 b){\n    return exp(b.x) * vec2(cos(b.y), sin(b.y));\n}\n\nvec2 complexLog(vec2 x){\n    return vec2(log(length(x)), atan(x.y, x.x));\n}\n\n",gamma:'/**\n * Translated to OpenGL ES from math.js\n * https://github.com/josdejong/mathjs\n *\n * Math.js is an extensive math library for JavaScript and Node.js,\n * It features real and complex numbers, units, matrices, a large set of\n * mathematical functions, and a flexible expression parser.\n *\n * @version 3.2.1\n * @date    2016-04-26\n *\n * @license\n * Copyright (C) 2013-2016 Jos de Jong <wjosdejong@gmail.com>\n *\n * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n * use this file except in compliance with the License. You may obtain a copy\n * of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n\nvec2 gammaStep(vec2 x, int i, vec2 n, float p){\n    float real = n.x + float(i);\n    float den = real * real + n.y * n.y;\n    if(den != 0.0){\n        return x + vec2(p * real / den, -(p * n.y) / den);\n    }\n    else return vec2(0.0);\n}\n\nvec2 gamma(vec2 n){\n    n.x -= 1.0;\n    vec2 x = vec2(0.99999999999999709182, 0.0);\n\tx = gammaStep(x, 1, n, 57.156235665862923517);\n\tx = gammaStep(x, 2, n, -59.597960355475491248);\n\tx = gammaStep(x, 3, n, 14.136097974741747174);\n\tx = gammaStep(x, 4, n, -0.49191381609762019978);\n\tx = gammaStep(x, 5, n, 0.33994649984811888699e-4);\n\tx = gammaStep(x, 6, n, 0.46523628927048575665e-4);\n\tx = gammaStep(x, 7, n, -0.98374475304879564677e-4);\n\tx = gammaStep(x, 8, n, 0.15808870322491248884e-3);\n\tx = gammaStep(x, 9, n, -0.21026444172410488319e-3);\n\tx = gammaStep(x, 10, n, 0.21743961811521264320e-3);\n\tx = gammaStep(x, 11, n, -0.16431810653676389022e-3);\n\tx = gammaStep(x, 12, n, 0.84418223983852743293e-4);\n\tx = gammaStep(x, 13, n, -0.26190838401581408670e-4);\n\tx = gammaStep(x, 14, n, 0.36899182659531622704e-5);\n    vec2 t = vec2(n.x + 4.7421875 + 0.5, n.y);\n    float twoPiSqrt = sqrt(2.0 * PI);\n\n    n.x += 0.5;\n    vec2 result = complexPow(t, n);\n    result *= twoPiSqrt;\n    float r = exp(-t.x);\n    t = r * vec2(cos(-t.y), sin(-t.y));\n\n    return complexMult(complexMult(result, t), x);\n}\n\n',rotateWithTime:"vec2 rotateWithTime(vec2 v){\n    float cosT = cos(time * 2.0 * PI), sinT = sin(time * 2.0 * PI);\n    return vec2(\n        v.x * cosT - v.y * sinT,\n        v.x * sinT + v.y * cosT\n    );\n}\n\n",snoise:"//\n// Description : Array and textureless GLSL 2D/3D/4D simplex \n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n  }\n\t\t\t\t\t\t\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\n"},DemoFunctions.functions={lorentz:{displayName:"Lorentz Boost",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float beta = sin(time * 2.0 * PI) * 0.9;\nfloat gamma = 1.0 / sqrt(1.0 - beta * beta);\nres = gamma * vec2(\n    cPos.x * 1.0 + cPos.y * beta,\n    cPos.y * 1.0 + cPos.x * beta\n);\n\n"},mercatorwarp:{displayName:"Mercator Warp",isAnimated:!0,numFrames:800,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"vec2 scaledPos = cPos * 0.6;\nvec2 invMercator = vec2(scaledPos.x, 2.0 * atan(exp(scaledPos.y)) - 0.5 * PI) * 8.0;\nres = rotateWithTime(invMercator);\n"},mercatorMollweide:{displayName:"Mercator to Mollweide",isAnimated:!0,numFrames:100,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"vec2 scaledPos = cPos * 0.3;\nfloat theta = asin(scaledPos.y * 2.0 / PI);\nvec2 invMollweide = vec2(\n    scaledPos.x / cos(theta),\n    asin((2.0 * theta + sin(2.0 * theta)) / PI)\n);\nvec2 invMercator = vec2(scaledPos.x, 2.0 * atan(exp(scaledPos.y)) - 0.5 * PI);\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = (invMollweide * mixParam + invMercator * (1.0 - mixParam)) * 8.0;\n"},dipole:{displayName:"Dipole Formation",isAnimated:!0,numFrames:300,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"float dist = sin(time * 2.0 * PI + PI / 2.0) * 2.0 + 2.5;\nres = 50.0 / (2.0 * dist) * (\n    complexLog(cPos - vec2(dist, 0.0)) -\n    complexLog(cPos - vec2(-dist, 0.0))\n);\n"},attractRepel:{displayName:"Attraction to Repulsion",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"res = 10.0 * (\n    complexLog(cPos - vec2(1.0, 0.0)) +\n    sin(time * 2.0 * PI - PI / 2.0) * complexLog(cPos - vec2(-1.0, 0.0))\n);\n"},neuralnetwork:{displayName:"Neural Network",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float mixParam = -cos(time * 2.0 * PI) / 2.0 + 0.5;\nvec2 unsigmoid = -log(1.0 / ((cPos + vec2(3.3, 3.0)) / 6.3) - 1.0);\nres = (vec2(\n    unsigmoid.x * 2.0 + unsigmoid.y * 1.0,\n    unsigmoid.x * 2.0 + unsigmoid.y * 3.0\n) - vec2(1.0, -2.0)) * mixParam + cPos * (1.0 - mixParam);\n"
},galaxy:{displayName:"Galaxy Warp",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float mixParam = -cos(time * 2.0 * PI) / 2.0 + 0.5;\nvec2 polPos = vec2(length(cPos), atan(cPos.y, cPos.x));\npolPos = vec2(polPos.x, polPos.y - mixParam / 50.0 * sqrt(1.0 / pow(polPos.x / 40.0, 3.0)));\nres = vec2(polPos.x * cos(polPos.y), polPos.x * sin(polPos.y));\n"},simplex:{displayName:"Simplex Warp",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.snoise,drawFunc:"vec2 circleVary = 2.0 * vec2(\n    cos(time * 2.0 * PI),\n    sin(time * 2.0 * PI)\n);\nres = 2.0 * (cPos +\n0.5 * vec2(\n    snoise(vec4(cPos * 0.25, circleVary + vec2(100.0, 100.0))),\n    snoise(vec4(cPos * 0.25, circleVary + vec2(200.0, 200.0)))\n));\n"},exponentiation:{displayName:"Complex Exponentiation",isAnimated:!0,numFrames:300,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 cartRes = 10.0 * complexPow(cPos, vec2(1.0 / (2.5 - 1.5 * cos(time * 2.0 * PI)), 0.0));\nres = vec2(length(cartRes), 10.0 * atan(cartRes.y, cartRes.x));\n"},mobius:{displayName:"Mobius Transformation",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"res = rotateWithTime(10.0 * complexDiv(\n    complexMult(vec2(0.5, 3.0), cPos) + vec2(0.5, 1.5),\n    complexMult(vec2(4.0, 1.5), cPos) + vec2(2.0, 3.5)\n));\n"},arcsin:{displayName:"Complex Inverse Sine",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 invSin = - 10.0 * complexMult(complexLog(complexPow(vec2(1.0, 0.0) - complexPow(cPos, vec2(2.0, 0.0)), vec2(0.5, 0.0)) + complexMult(cPos, vec2(0.0, 1.0))), vec2(0.0, 1.0));\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = invSin * mixParam + cPos * (1.0 - mixParam);\n"},gamma:{displayName:"Gamma Function",isAnimated:!0,numFrames:400,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.gamma+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"res = rotateWithTime(10.0 * gamma((cPos + vec2(2.0, 0.0)) / 2.0));\n"},madness:{displayName:"Complex ???",isAnimated:!0,numFrames:800,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 madness = - 10.0 * complexMult(complexLog(complexPow(vec2(2.0, 3.0) - complexPow(cPos * 2.0, vec2(2.0, 1.0)), vec2(0.5, 1.0)) + complexMult(cPos * 2.0, vec2(2.0, 1.0))), vec2(2.0, 1.0));\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = madness * mixParam + cPos * (1.0 - mixParam);\n"}};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),CanvasDisplayPane=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){if("onMountCallback"in this.props){var e=ReactDOM.findDOMNode(this);this.props.onMountCallback(e)}}},{key:"componentWillUnmount",value:function(){"onDismountCallback"in this.props&&this.props.onDismountCallback()}},{key:"render",value:function(){return React.createElement("canvas",{width:this.props.dims.width,height:this.props.dims.height,style:{width:"100%"}})}}]),t}(React.Component);CanvasDisplayPane.propTypes={dims:React.PropTypes.instanceOf(Dimensions).isRequired,onMountCallback:React.PropTypes.func};var DrawFunctionSelectorButton=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("button",{type:"button",className:"list-group-item"+(this.props.selected?" active":""),onClick:function(){e.props.onClick(e.props.funcName)}},this.props.displayName)}}]),t}(React.Component),DrawFunctionSelector=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.state={selectedFunc:t.DEFAULT_FUNC},n.handleClick=n.handleClick.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"list-group"},Object.keys(DemoFunctions.functions).map(function(t){return React.createElement(DrawFunctionSelectorButton,{displayName:DemoFunctions.functions[t].displayName,key:t,funcName:t,selected:t==e.state.selectedFunc,onClick:e.handleClick})}))}},{key:"handleClick",value:function(e){this.setState({selectedFunc:e}),this.props.onSelect(e)}}]),t}(React.Component);DrawFunctionSelector.DEFAULT_FUNC="attractRepel";var AceEditor=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=ReactDOM.findDOMNode(this);this.editor=ace.edit(e),this.editor.setTheme("ace/theme/monokai"),this.editor.getSession().setUseWorker(!1),this.editor.getSession().setMode("ace/mode/glsl"),this.editor.$blockScrolling=1/0,this.editor.setFontSize(18),this.editor.setOptions({maxLines:1/0}),this.editor.getSession().setUseWrapMode(!0)}},{key:"componentWillUnmount",value:function(){this.editor.destroy()}},{key:"setValue",value:function(e){this.editor.setValue(e),this.editor.clearSelection()}},{key:"getValue",value:function(){return this.editor.getSession().getValue()}},{key:"render",value:function(){return React.createElement("div",{style:{height:this.props.height.toString()+"px"}})}}]),t}(React.Component),ContourerApp=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.animationManager=new ContourerAnimationManager(n.props.manager),n.state={isAnimated:!1,isAnimating:!1,currentFrame:0,numFrames:0,isAnimatedSelectState:!1,numFramesInputVal:"0",shaderCompileError:""},n.useCanvas=n.useCanvas.bind(n),n.setDrawFunc=n.setDrawFunc.bind(n),n.onDrawFuncSelect=n.onDrawFuncSelect.bind(n),n.redraw=n.redraw.bind(n),n.changeZoomAndRedraw=n.changeZoomAndRedraw.bind(n),n.changeContourSpacingAndRedraw=n.changeContourSpacingAndRedraw.bind(n),n.translateAndRedraw=n.translateAndRedraw.bind(n),n.handlePlotClick=n.handlePlotClick.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){this.onDrawFuncSelect(DrawFunctionSelector.DEFAULT_FUNC)}},{key:"render",value:function(){var e=this,t=new Dimensions(640,480);return React.createElement("div",_defineProperty({className:"container"},"className","col-lg-12"),React.createElement("div",{className:"page-header"},React.createElement("h1",null,"Fun with Contours")),React.createElement("div",{className:"well"},React.createElement("p",null,React.createElement("b",null,"Drag")," to move the graph, ",React.createElement("b",null,"scroll")," to zoom, and ",React.createElement("b",null,"Ctrl + scroll")," to change the contour density."),React.createElement("p",null,"Modify ",React.createElement("b",null,React.createElement("a",{href:"#",onClick:function(t){e.numFramesInput.focus(),t.preventDefault()}},"Frames"))," (number of frames), then click ",React.createElement("b",null,"Plot")," to change the animation speed."),React.createElement("p",null,"Use the ",React.createElement("b",null,"slider")," to explore the animation in more detail."),React.createElement("p",null,"Plot your own functions with the ",React.createElement("b",null,"text editors")," below."),React.createElement("p",null,"Just enjoy the pretty animations, or ",React.createElement("b",null,React.createElement("a",{href:"https://github.com/krawthekrow/contourer"},"click here"))," to learn more."),React.createElement("p",null,React.createElement("b",null,"Note: This app uses WebGL, so it needs a sufficiently modern browser and GPU to work."))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3"},React.createElement(DrawFunctionSelector,{onSelect:this.onDrawFuncSelect})),React.createElement("div",{className:"col-sm-9"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-8"},React.createElement("div",{role:"toolbar"},React.createElement("div",{className:"btn-group",role:"group"},React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeZoomAndRedraw(1)}},React.createElement("span",{className:"glyphicon glyphicon-zoom-in"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeZoomAndRedraw(-1)}},React.createElement("span",{className:"glyphicon glyphicon-zoom-out"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeContourSpacingAndRedraw(-1)}},React.createElement("span",{className:"glyphicon glyphicon-plus"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeContourSpacingAndRedraw(1)}},React.createElement("span",{className:"glyphicon glyphicon-minus"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(1,0))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-left"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(0,1))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-up"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(0,(-1)))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-down"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector((-1),0))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-right"})),this.state.isAnimated&&this.state.isAnimating?React.createElement("button",{type:"button",className:classNames("btn","btn-default",{disabled:!this.state.isAnimated}),onClick:function(t){e.state.isAnimated&&e.state.isAnimating&&e.animationManager.stop(function(){e.setState({isAnimating:!1})})}},React.createElement("span",{className:"glyphicon glyphicon-pause"})):React.createElement("button",{type:"button",className:classNames("btn","btn-default",{disabled:!this.state.isAnimated}),onClick:function(t){e.state.isAnimated&&!e.state.isAnimating&&(e.animationManager.start(e.state.currentFrame,function(t){e.setState({currentFrame:t})}),e.setState({isAnimating:!0}))}},React.createElement("span",{className:"glyphicon glyphicon-play"}))))),React.createElement("div",{className:"col-xs-4"},this.state.isAnimated?React.createElement("input",{type:"range",min:"0",max:(this.state.numFrames-1).toString(),value:this.state.currentFrame,style:{marginTop:"5px"},onChange:function(t){e.setState({currentFrame:parseInt(t.target.value)}),e.state.isAnimating?e.animationManager.stop(function(){e.setState({isAnimating:!1}),e.props.manager.drawContours(e.state.currentFrame/e.state.numFrames)}):e.props.manager.drawContours(e.state.currentFrame/e.state.numFrames)}}):null)),React.createElement("div",{style:{marginTop:"10px"}},React.createElement(CanvasDisplayPane,{dims:t,onMountCallback:function(t){e.useCanvas(t)},onDismountCallback:function(){e.props.manager.destroyContext()}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("h1",null,"Plot Function"),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-9"},React.createElement("div",{className:"form-inline"},React.createElement("div",{className:"btn-group",style:{marginRight:"10px"},role:"group"},React.createElement("button",{type:"button",className:classNames("btn",this.state.isAnimatedSelectState?"btn-default":"btn-primary",{active:!this.state.isAnimatedSelectState}),onClick:function(t){e.setState({isAnimatedSelectState:!1})}},"Graph"),React.createElement("button",{type:"button",className:classNames("btn",this.state.isAnimatedSelectState?"btn-primary":"btn-default",{active:this.state.isAnimatedSelectState}),onClick:function(t){e.setState({isAnimatedSelectState:!0})}},"Animation")),React.createElement("div",{className:classNames("form-group",{"has-error":this.isNumFramesInputInvalid()}),style:{display:"inline-block",marginBottom:0,verticalAlign:"middle"}},React.createElement("div",{className:"input-group"},React.createElement("span",{className:"input-group-addon"},"Frames"),React.createElement("input",{type:"text",className:"form-control",value:this.state.numFramesInputVal,disabled:!this.state.isAnimatedSelectState,ref:function(t){e.numFramesInput=t},onChange:function(t){e.setState({numFramesInputVal:t.target.value})},style:{width:"60px"}})),React.createElement("div",{className:"help-block",style:{display:this.isNumFramesInputInvalid()?"inline-block":"none",marginLeft:"10px"}},"Must be an integer")))),React.createElement("div",{className:"col-xs-3"},React.createElement("button",{type:"button",className:"btn btn-success btn-block pull-right",style:{width:"80px"},disabled:this.isNumFramesInputInvalid(),ref:function(t){e.plotButton=t},onClick:this.handlePlotClick},"Plot"))),""==this.state.shaderCompileError?null:React.createElement("div",{className:"has-error"},React.createElement("div",{className:"help-block"},React.createElement("p",null,"Your code failed to compile with the following error:"),React.createElement("p",null,this.state.shaderCompileError.trim().split("\n").map(function(e,t){return React.createElement("span",{key:t},e,React.createElement("br",null))})),this.state.shaderCompileError.indexOf("wrong operand types")!=-1?React.createElement("p",null,React.createElement("b",null,'Note that GLSL ES does not implicitly cast ints to floats. Write numbers like "23" as "23.0".')):null,this.state.shaderCompileError.indexOf("gl_FragData")!=-1?React.createElement("p",null,React.createElement("b",null,"Did you forget a semicolon on the last line?")):null,React.createElement("p",null,"View the console to see the full generated WebGL shader code."))),React.createElement("div",{style:{marginTop:"10px"}},React.createElement(AceEditor,{height:"200",key:"drawFuncEditor",ref:function(t){e.drawFuncEditor=t}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("h1",null,"Library Functions"),React.createElement("div",{style:{marginBottom:"10px"}},React.createElement(AceEditor,{height:"200",key:"includeSrcEditor",ref:function(t){e.includeSrcEditor=t}})))))}},{key:"useCanvas",value:function(e){var t=this;new DragManager(e,function(e){t.props.manager.viewport.translate(e),t.redraw()},function(e){return!0});e.addEventListener("wheel",function(n){n.ctrlKey?t.changeContourSpacingAndRedraw(getScrollDir(n)):(t.props.manager.changeZoom(-getScrollDir(n),getCanvasMousePos(e,n)),t.redraw()),n.preventDefault()}),this.props.manager.useCanvas(e)}},{key:"isNumFramesInputInvalid",value:function(){return this.state.isAnimatedSelectState&&this.state.numFramesInputVal.split("").some(function(e){return e.charCodeAt()<"0".charCodeAt()||e.charCodeAt()>"9".charCodeAt()})}},{key:"handlePlotClick",value:function(e){this.setDrawFunc(this.drawFuncEditor.getValue(),this.includeSrcEditor.getValue(),this.state.isAnimatedSelectState,this.state.isAnimatedSelectState?parseInt(this.state.numFramesInputVal):0)}},{key:"redraw",value:function(){this.state.isAnimated?this.props.manager.drawContours(this.state.currentFrame/this.state.numFrames):this.props.manager.drawContours()}},{key:"changeZoomAndRedraw",value:function(e){this.props.manager.changeZoom(e),this.redraw()}},{key:"changeContourSpacingAndRedraw",value:function(e){this.props.manager.changeContourSpacing(e),this.redraw()}},{key:"translateAndRedraw",value:function(e){this.props.manager.translate(e.multiply(50)),this.redraw()}},{key:"setDrawFunc",value:function(e,t){var n=this,a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];try{this.props.manager.changeDrawFunc(e,t,a)}catch(i){return void this.setState({shaderCompileError:i})}a&&0==r&&(r=1),this.setState({isAnimated:a,isAnimating:a,currentFrame:0,numFrames:r,isAnimatedSelectState:a,numFramesInputVal:r.toString(),shaderCompileError:""}),this.animationManager.numFrames=r,a?this.animationManager.stop(function(){n.animationManager.start(0,function(e){n.setState({currentFrame:e})})}):this.animationManager.stop(function(){n.props.manager.drawContours()})}},{key:"onDrawFuncSelect",value:function(e){var t=DemoFunctions.functions[e];this.drawFuncEditor.setValue(t.drawFunc.trim()),this.includeSrcEditor.setValue(t.includeSrc.trim()),t.isAnimated?this.setDrawFunc(t.drawFunc,t.includeSrc,t.isAnimated,t.numFrames):this.setDrawFunc(t.drawFunc,t.includeSrc)}}]),t}(React.Component);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwiYnVuZGxlLm1pbi5qcyIsImNhbnZhc1V0aWxzLmpzIiwid2ViZ2xVdGlscy5qcyIsImNvbnRvdXJlci5qcyIsInJlYWN0Q29tcG9uZW50cy5qc3giLCJncGdwdVV0aWxzLmpzIiwiZGVtb0Z1bmN0aW9ucy5qcyJdLCJuYW1lcyI6WyJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwiYXJyMiIsImxlbmd0aCIsImZyb20iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiaXNQb2ludEluUmVjdCIsInAiLCJyZWN0IiwieCIsImxlZnQiLCJyaWdodCIsInkiLCJ0b3AiLCJib3R0b20iLCJjb21wdXRlMURBcnJheSIsImZ1bmMiLCJmaWxsIiwidW5kZWZpbmVkIiwibWFwIiwidW51c2VkIiwiY29tcHV0ZTJEQXJyYXkiLCJkaW1zIiwiaGVpZ2h0Iiwid2lkdGgiLCJpMiIsIlZlY3RvciIsImZsYXR0ZW4iLCJfcmVmIiwiY29uY2F0IiwiYXBwbHkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJjYWxsIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJnZXRDYW52YXNNb3VzZVBvcyIsImNhbnZhcyIsImV2IiwiYm91bmRpbmdSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50WCIsImNsaWVudFkiLCJnZXRTY3JvbGxEaXIiLCJkZWx0YVkiLCJNYXRoIiwiYWJzIiwic2V0Q2FudmFzU21vb3RoaW5nIiwiY3R4IiwiZW5hYmxlIiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwid2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibW5JbWFnZVNtb290aGluZ0VuYWJsZWQiLCJjcmVhdGVDYW52YXMiLCJjb250YWluZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBvc2l0aW9uIiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsImdldENvbnRleHQiLCJnZXRDYW52YXNEaW1zIiwiRGltZW5zaW9ucyIsImNvbXBpbGVTaGFkZXIiLCJzcmMiLCJ0eXBlIiwic2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwic2hhZGVyU291cmNlIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJjb25zb2xlIiwibG9nIiwiZ2V0U2hhZGVySW5mb0xvZyIsImNyZWF0ZVByb2dyYW0iLCJ2ZXJ0U3JjIiwiZnJhZ1NyYyIsInByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwiRlJBR01FTlRfU0hBREVSIiwibGlua1Byb2dyYW0iLCJjcmVhdGVDb21wdXRlVGV4dHVyZSIsInRleFR5cGUiLCJhcmd1bWVudHMiLCJGTE9BVCIsImNvbnRlbnRzIiwidGV4IiwiY3JlYXRlVGV4dHVyZSIsImJpbmRUZXh0dXJlIiwiVEVYVFVSRV8yRCIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX01JTl9GSUxURVIiLCJORUFSRVNUIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiVEVYVFVSRV9XUkFQX1MiLCJDTEFNUF9UT19FREdFIiwiVEVYVFVSRV9XUkFQX1QiLCJ0ZXhJbWFnZTJEIiwiUkdCQSIsImNyZWF0ZUZCTyIsImV4dERCIiwidGV4dHVyZXMiLCJmYm8iLCJjcmVhdGVGcmFtZWJ1ZmZlciIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiZHJhd0J1ZmZlcnNXRUJHTCIsImZvckVhY2giLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyIsIkZSQU1FQlVGRkVSX0NPTVBMRVRFIiwiY3JlYXRlQXJyYXlCdWZmZXIiLCJidWZUeXBlIiwiYnVmIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsInJlZ2lzdGVyVmVydGV4QXR0cmliIiwiYXR0cmliTmFtZSIsIml0ZW1TaXplIiwiYXR0cmliIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsIkFSUkFZX0JVRkZFUiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJyZWdpc3RlclRleHR1cmVzIiwidGV4TmFtZXMiLCJ0ZXhOYW1lIiwidGV4TG9jIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidW5pZm9ybTFpIiwicmVnaXN0ZXJVbmlmb3JtcyIsInVuaWZvcm1zIiwidmFscyIsInVuaWZvcm0iLCJ1bmlmb3JtTG9jIiwibmFtZSIsInVuaWZvcm0xZiIsInRlc3QiLCJJbnQzMkFycmF5IiwiRmxvYXQzMkFycmF5IiwiYmluZFRleHR1cmVzIiwidGV4dHVyZSIsImFjdGl2ZVRleHR1cmUiLCJpbml0IiwibWFuYWdlciIsIkNvbnRvdXJlck1hbmFnZXIiLCJpbml0UmVuZGVyIiwiX2RlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRFbGVtZW50QnlJZCIsIlJlYWN0RE9NIiwicmVuZGVyIiwiUmVhY3QiLCJDb250b3VyZXJBcHAiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwidGhpcyIsIm9WZWMiLCJzY2FsZSIsImZsb29yIiwic3FydCIsImRvdCIsImF0YW4yIiwiciIsInBoaSIsImNvcyIsInNpbiIsInBvcyIsIlJlY3QiLCJDb2xvciIsImciLCJiIiwiZ2V0IiwiTU9VU0VfTEVGVCIsIk1PVVNFX1JJR0hUIiwiTU9VU0VfTUlERExFIiwiRElSUzQiLCJTY2FsYWJsZVZpZXdwb3J0TWFuYWdlciIsInZlYyIsIm11bHRpcGx5IiwiYWRkIiwic3VidHJhY3QiLCJkaXZpZGUiLCJzY2FsZUFtb3VudCIsInNjYWxlUG9pbnQiLCJuZXdTY2FsZSIsImV4cCIsIm5ld1BvcyIsIk1vdXNlRG93blRyYWNrZXIiLCJpbml0VHJhY2tDYWxsYmFjayIsInRyYWNrQ2FsbGJhY2siLCJfdGhpcyIsImlzVHJhY2tpbmdFbmFibGVkIiwib25Nb3VzZURvd24iLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib25Nb3VzZU1vdmUiLCJvbk1vdXNlVXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJEcmFnTWFuYWdlciIsIl9Nb3VzZURvd25UcmFja2VyIiwiZHJhZ0NhbGxiYWNrIiwiaXNEcmFnRW5hYmxlZCIsIl90aGlzMiIsImdldFByb3RvdHlwZU9mIiwicHJldk1vdXNlUG9zIiwibW91c2VQb3MiLCJGVUxMU0NSRUVOX1FVQURfUE9TX0FSUkFZIiwiRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZIiwiVWludDE2QXJyYXkiLCJGVUxMU0NSRUVOX1FVQURfTlVNX1ZFUlRJQ0VTIiwiR1BHUFVLZXJuZWxSZXN1bHQiLCJkZWxldGVGcmFtZWJ1ZmZlciIsImRlbGV0ZVRleHR1cmUiLCJHUEdQVUtlcm5lbCIsInBhcmFtcyIsIm51bU91dHB1dHMiLCJpc0dyYXBoaWNhbCIsImlucHV0VGV4dHVyZXMiLCJvdXRwdXREaW1zIiwicGFyYW1WYWxzIiwidXNlRmxvYXQiLCJ1c2VQcm9ncmFtIiwidURpbXMiLCJ0b0FycmF5Iiwib3V0cHV0VGV4dHVyZXMiLCJVTlNJR05FRF9CWVRFIiwidmlld3BvcnQiLCJkcmF3RnVsbHNjcmVlblF1YWQiLCJHUEdQVU1hbmFnZXIiLCJnZXRFeHRlbnNpb24iLCJxdWFkUG9zQnVmZmVyIiwicXVhZEluZGV4QnVmZmVyIiwiRUxFTUVOVF9BUlJBWV9CVUZGRVIiLCJkcmF3RWxlbWVudHMiLCJUUklBTkdMRV9TVFJJUCIsIlVOU0lHTkVEX1NIT1JUIiwiVWludDhBcnJheSIsImdldEFyZWEiLCJyZWFkUGl4ZWxzIiwiYnVmZmVyIiwiZmxvYXRGbGF0dGVuZWRBcnIiLCJmbGF0dGVuZWRBcnIiLCJjb21wb25lbnQiLCJjb21wdXRlRnVuYyIsImlucHV0TmFtZXMiLCJrZXJuZWwiLCJjcmVhdGVLZXJuZWwiLCJQQUNLX0ZMT0FUX0lOQ0xVREUiLCJyZXN1bHRzIiwicnVuIiwib3V0cHV0IiwicmVhZFBhY2tlZEZsb2F0RGF0YSIsImRpc3Bvc2UiLCJpbmNsdWRlU3JjIiwiaW5wdXROYW1lIiwidmVydFNoYWRlclNyYyIsImNyZWF0ZVZlcnRTaGFkZXJTcmMiLCJmcmFnU2hhZGVyU3JjIiwiY3JlYXRlRnJhZ1NoYWRlclNyYyIsInRyaW0iLCJzcGxpdCIsImxpbmUiLCJqb2luIiwiZW5kaWFubmVzcyIsIkFycmF5QnVmZmVyIiwiYSIsIlVpbnQzMkFycmF5IiwiYyIsIkVycm9yIiwiZ2V0Q2FudmFzQ29udGV4dCIsIm9wdGlvbnMiLCJkZXB0aCIsImFudGlhbGlhcyIsImZsaXBZIiwidXNlRHJhd0J1ZmZlcnMiLCJSRUQiLCJHUkVFTiIsIkJMVUUiLCJXSElURSIsImRyYXdGdW5jIiwiem9vbVNlbnNpdGl2aXR5IiwiY29udG91clNwYWNpbmciLCJpc0FuaW1hdGVkIiwiY3JlYXRlRmllbGRLZXJuZWwiLCJjb29yZCIsImZpZWxkRnVuYyIsImdwZ3B1TWFuYWdlciIsImZpZWxkS2VybmVsWCIsImZpZWxkS2VybmVsWSIsInBsb3RLZXJuZWwiLCJjcmVhdGVHcmFwaGljYWxLZXJuZWwiLCJwbG90RnVuYyIsIkZJRUxEX0NIRUNLX0lOQ0xVREUiLCJjaGFuZ2VBbW91bnQiLCJ6b29tUG9pbnQiLCJzY2FsZUF0UG9pbnQiLCJ0cmFuc2xhdGVBbW91bnQiLCJ0cmFuc2xhdGUiLCJ0aW1lIiwidW5pZm9ybUFzc2lnbm1lbnRzIiwidVNjYWxlIiwidVBvcyIsImZpZWxkUmVzdWx0WCIsImZpZWxkUmVzdWx0WSIsInVDb250b3VyU3BhY2luZyIsIkNvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIiLCJudW1GcmFtZXMiLCJpc0FuaW1hdGluZyIsImN1cnJlbnRGcmFtZSIsIm9uU3RvcENhbGxiYWNrIiwiYW5pbWF0aW9uTG9vcCIsImJpbmQiLCJzdGFydEZyYW1lIiwib25EcmF3IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidGltZXN0YW1wIiwiZHJhd0NvbnRvdXJzIiwiRGVtb0Z1bmN0aW9ucyIsIklOQ0xVREVTIiwicGkiLCJjb21wbGV4TGliIiwiZ2FtbWEiLCJyb3RhdGVXaXRoVGltZSIsInNub2lzZSIsImZ1bmN0aW9ucyIsImxvcmVudHoiLCJkaXNwbGF5TmFtZSIsIm1lcmNhdG9yd2FycCIsIm1lcmNhdG9yTW9sbHdlaWRlIiwiZGlwb2xlIiwiYXR0cmFjdFJlcGVsIiwibmV1cmFsbmV0d29yayIsImdhbGF4eSIsInNpbXBsZXgiLCJleHBvbmVudGlhdGlvbiIsIm1vYml1cyIsImFyY3NpbiIsIm1hZG5lc3MiLCJDYW52YXNEaXNwbGF5UGFuZSIsIl9SZWFjdCRDb21wb25lbnQiLCJmaW5kRE9NTm9kZSIsIm9uTW91bnRDYWxsYmFjayIsIm9uRGlzbW91bnRDYWxsYmFjayIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImluc3RhbmNlT2YiLCJpc1JlcXVpcmVkIiwiRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24iLCJfUmVhY3QkQ29tcG9uZW50MiIsIl90aGlzMyIsImNsYXNzTmFtZSIsInNlbGVjdGVkIiwib25DbGljayIsImZ1bmNOYW1lIiwiRHJhd0Z1bmN0aW9uU2VsZWN0b3IiLCJfUmVhY3QkQ29tcG9uZW50MyIsIl90aGlzNCIsInN0YXRlIiwic2VsZWN0ZWRGdW5jIiwiREVGQVVMVF9GVU5DIiwiaGFuZGxlQ2xpY2siLCJfdGhpczUiLCJrZXlzIiwic2V0U3RhdGUiLCJvblNlbGVjdCIsIkFjZUVkaXRvciIsIl9SZWFjdCRDb21wb25lbnQ0IiwiZWRpdG9yRGl2IiwiZWRpdG9yIiwiYWNlIiwiZWRpdCIsInNldFRoZW1lIiwiZ2V0U2Vzc2lvbiIsInNldFVzZVdvcmtlciIsInNldE1vZGUiLCIkYmxvY2tTY3JvbGxpbmciLCJJbmZpbml0eSIsInNldEZvbnRTaXplIiwic2V0T3B0aW9ucyIsIm1heExpbmVzIiwic2V0VXNlV3JhcE1vZGUiLCJkZXN0cm95IiwibmV3Q29udGVudHMiLCJzZXRWYWx1ZSIsImNsZWFyU2VsZWN0aW9uIiwiZ2V0VmFsdWUiLCJfUmVhY3QkQ29tcG9uZW50NSIsIl90aGlzNyIsImFuaW1hdGlvbk1hbmFnZXIiLCJpc0FuaW1hdGVkU2VsZWN0U3RhdGUiLCJudW1GcmFtZXNJbnB1dFZhbCIsInNoYWRlckNvbXBpbGVFcnJvciIsInVzZUNhbnZhcyIsInNldERyYXdGdW5jIiwib25EcmF3RnVuY1NlbGVjdCIsInJlZHJhdyIsImNoYW5nZVpvb21BbmRSZWRyYXciLCJjaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdyIsInRyYW5zbGF0ZUFuZFJlZHJhdyIsImhhbmRsZVBsb3RDbGljayIsIl90aGlzOCIsIkNBTlZBU19ESU1TIiwiaHJlZiIsIm51bUZyYW1lc0lucHV0IiwiZm9jdXMiLCJyb2xlIiwiZSIsImNsYXNzTmFtZXMiLCJkaXNhYmxlZCIsInN0b3AiLCJzdGFydCIsIm1pbiIsIm1heCIsIm1hcmdpblRvcCIsIm9uQ2hhbmdlIiwicGFyc2VJbnQiLCJkZXN0cm95Q29udGV4dCIsIm1hcmdpblJpZ2h0IiwiYWN0aXZlIiwiaGFzLWVycm9yIiwiaXNOdW1GcmFtZXNJbnB1dEludmFsaWQiLCJkaXNwbGF5IiwibWFyZ2luQm90dG9tIiwidmVydGljYWxBbGlnbiIsInJlZiIsImlucHV0IiwibWFyZ2luTGVmdCIsImJ1dHRvbiIsInBsb3RCdXR0b24iLCJpbmRleCIsImluZGV4T2YiLCJkcmF3RnVuY0VkaXRvciIsImluY2x1ZGVTcmNFZGl0b3IiLCJfdGhpczkiLCJkcmFnVmVjIiwiY3RybEtleSIsImNoYW5nZVpvb20iLCJzb21lIiwiY2hhckNvZGVBdCIsImNoYW5nZUNvbnRvdXJTcGFjaW5nIiwiX3RoaXMxMCIsImNoYW5nZURyYXdGdW5jIiwiZXJyIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ0lBLFNBQVNBLG9CQUFtQkMsR0FBTyxHQUFJQyxNQUFNQyxRQUFRRixHQUFNLENBQUUsSUFBSyxHQUFJRyxHQUFJLEVBQUdDLEVBQU9ILE1BQU1ELEVBQUlLLFFBQVNGLEVBQUlILEVBQUlLLE9BQVFGLElBQU9DLEVBQUtELEdBQUtILEVBQUlHLEVBQU0sT0FBT0MsR0FBZSxNQUFPSCxPQUFNSyxLQUFLTixHQUUxTCxRQUFTTyxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0R3SGhILFFBQVNDLGVBQWNDLEVBQUdDLEdBQ3RCLE1BQU9ELEdBQUVFLEdBQUtELEVBQUtFLE1BQVFILEVBQUVFLEVBQUlELEVBQUtHLE9BQy9CSixFQUFFSyxHQUFLSixFQUFLSyxLQUFPTixFQUFFSyxFQUFJSixFQUFLTSxPQU96QyxRQUFTQyxnQkFBZWYsRUFBUWdCLEdBQzVCLE1BQU8sSUFBSXBCLE9BQU1JLEdBQVFpQixLQUFLQyxRQUFXQyxJQUNyQyxTQUFDQyxFQUFRdEIsR0FBVCxNQUFla0IsR0FBS2xCLEtBSTVCLFFBQVN1QixnQkFBZUMsRUFBTU4sR0FDMUIsTUFBT0QsZ0JBQWVPLEVBQUtDLE9BQ3ZCLFNBQUF6QixHQUFBLE1BQUtpQixnQkFBZU8sRUFBS0UsTUFDckIsU0FBQUMsR0FBQSxNQUFNVCxHQUFLLEdBQUlVLFFBQU9ELEVBQUkzQixRQVl0QyxRQUFTNkIsU0FBUWhDLEdBQUksR0FBQWlDLEVBQ2pCLFFBQU9BLE1BQUdDLE9BQUhDLE1BQUFGLEVBQUFsQyxtQkFBYUMsSUNtR3hCLFFBQVNvQyw0QkFBMkJDLEVBQU1DLEdBQVEsSUFBS0QsRUFBUSxLQUFNLElBQUlFLGdCQUFlLDREQUFnRSxRQUFPRCxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCRCxFQUFQQyxFQUVsTyxR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dGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNsYXNzIFZlY3RvcntcbiAgICBjb25zdHJ1Y3Rvcih4LCB5KXtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21Qb2xhcihyLCBwaGkpe1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIHIgKiBNYXRoLmNvcyhwaGkpLFxuICAgICAgICAgICAgciAqIE1hdGguc2luKHBoaSlcbiAgICAgICAgKTtcbiAgICB9XG4gICAgYWRkKG9WZWMpe1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIHRoaXMueCArIG9WZWMueCxcbiAgICAgICAgICAgIHRoaXMueSArIG9WZWMueVxuICAgICAgICApO1xuICAgIH1cbiAgICBzdWJ0cmFjdChvVmVjKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB0aGlzLnggLSBvVmVjLngsXG4gICAgICAgICAgICB0aGlzLnkgLSBvVmVjLnlcbiAgICAgICAgKTtcbiAgICB9XG4gICAgbXVsdGlwbHkoc2NhbGUpe1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgICAgIHRoaXMueCAqIHNjYWxlLFxuICAgICAgICAgICAgdGhpcy55ICogc2NhbGVcbiAgICAgICAgKTtcbiAgICB9XG4gICAgZGl2aWRlKHNjYWxlKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB0aGlzLnggLyBzY2FsZSxcbiAgICAgICAgICAgIHRoaXMueSAvIHNjYWxlXG4gICAgICAgICk7XG4gICAgfVxuICAgIGVxdWFscyhvVmVjKXtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMueCA9PSBvVmVjLnggJiZcbiAgICAgICAgICAgIHRoaXMueSA9PSBvVmVjLnlcbiAgICAgICAgKTtcbiAgICB9XG4gICAgZmxvb3IoKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICBNYXRoLmZsb29yKHRoaXMueCksXG4gICAgICAgICAgICBNYXRoLmZsb29yKHRoaXMueSlcbiAgICAgICAgKTtcbiAgICB9XG4gICAgZG90KG9WZWMpe1xuICAgICAgICByZXR1cm4gdGhpcy54ICogb1ZlYy54ICsgdGhpcy55ICogb1ZlYy55O1xuICAgIH1cbiAgICBnZXRMZW5ndGgoKXtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLmRvdCh0aGlzKSk7XG4gICAgfVxuICAgIGdldEFuZ2xlKCl7XG4gICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueSwgdGhpcy54KTtcbiAgICB9XG4gICAgdG9BcnJheSgpe1xuICAgICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55XTtcbiAgICB9XG59O1xuXG5jbGFzcyBEaW1lbnNpb25ze1xuICAgIGNvbnN0cnVjdG9yKHdpZHRoLCBoZWlnaHQpe1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH1cbiAgICBjb250YWlucyhwb3Mpe1xuICAgICAgICByZXR1cm4gaXNQb2ludEluUmVjdChwb3MsXG4gICAgICAgICAgICBuZXcgUmVjdChcbiAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKDAsIDApLFxuICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG4gICAgZ2V0QXJlYSgpe1xuICAgICAgICByZXR1cm4gdGhpcy53aWR0aCAqIHRoaXMuaGVpZ2h0O1xuICAgIH1cbiAgICB0b0FycmF5KCl7XG4gICAgICAgIHJldHVybiBbdGhpcy53aWR0aCwgdGhpcy5oZWlnaHRdO1xuICAgIH1cbn07XG5cbmNsYXNzIENvbG9ye1xuICAgIGNvbnN0cnVjdG9yKHIsIGcsIGIpe1xuICAgICAgICB0aGlzLnIgPSByO1xuICAgICAgICB0aGlzLmcgPSBnO1xuICAgICAgICB0aGlzLmIgPSBiO1xuICAgIH1cbiAgICB0b0FycmF5KCl7XG4gICAgICAgIHJldHVybiBbdGhpcy5yLCB0aGlzLmcsIHRoaXMuYl07XG4gICAgfVxufTtcblxuY2xhc3MgUmVjdHtcbiAgICBjb25zdHJ1Y3Rvcihwb3MsIGRpbXMpe1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5kaW1zID0gZGltcztcbiAgICB9XG4gICAgZ2V0IHgoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLng7XG4gICAgfVxuICAgIGdldCB5KCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcy55O1xuICAgIH1cbiAgICBnZXQgd2lkdGgoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGltcy53aWR0aDtcbiAgICB9XG4gICAgZ2V0IGhlaWdodCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5kaW1zLmhlaWdodDtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLng7XG4gICAgfVxuICAgIGdldCByaWdodCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MueCArIHRoaXMuZGltcy53aWR0aDtcbiAgICB9XG4gICAgZ2V0IHRvcCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MueTtcbiAgICB9XG4gICAgZ2V0IGJvdHRvbSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MueSArIHRoaXMuZGltcy5oZWlnaHQ7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gaXNQb2ludEluUmVjdChwLCByZWN0KXtcbiAgICByZXR1cm4gcC54ID49IHJlY3QubGVmdCAmJiBwLnggPCByZWN0LnJpZ2h0ICYmXG4gICAgICAgICAgIHAueSA+PSByZWN0LnRvcCAmJiBwLnkgPCByZWN0LmJvdHRvbTtcbn1cblxuY29uc3QgTU9VU0VfTEVGVCA9IDA7XG5jb25zdCBNT1VTRV9SSUdIVCA9IDI7XG5jb25zdCBNT1VTRV9NSURETEUgPSAxO1xuXG5mdW5jdGlvbiBjb21wdXRlMURBcnJheShsZW5ndGgsIGZ1bmMpe1xuICAgIHJldHVybiBuZXcgQXJyYXkobGVuZ3RoKS5maWxsKHVuZGVmaW5lZCkubWFwKFxuICAgICAgICAodW51c2VkLCBpKSA9PiBmdW5jKGkpXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZTJEQXJyYXkoZGltcywgZnVuYyl7XG4gICAgcmV0dXJuIGNvbXB1dGUxREFycmF5KGRpbXMuaGVpZ2h0LFxuICAgICAgICBpID0+IGNvbXB1dGUxREFycmF5KGRpbXMud2lkdGgsXG4gICAgICAgICAgICBpMiA9PiBmdW5jKG5ldyBWZWN0b3IoaTIsIGkpKVxuICAgICAgICApXG4gICAgKTtcbn1cblxuY29uc3QgRElSUzQgPSBbXG4gICAgbmV3IFZlY3RvcigxLCAwKSxcbiAgICBuZXcgVmVjdG9yKDAsIDEpLFxuICAgIG5ldyBWZWN0b3IoLTEsIDApLFxuICAgIG5ldyBWZWN0b3IoMCwgLTEpXG5dO1xuXG5mdW5jdGlvbiBmbGF0dGVuKGFycil7XG4gICAgcmV0dXJuIFtdLmNvbmNhdCguLi5hcnIpO1xufVxuXG5jbGFzcyBTY2FsYWJsZVZpZXdwb3J0TWFuYWdlcntcbiAgICBjb25zdHJ1Y3Rvcihwb3MgPSBuZXcgVmVjdG9yKDAsIDApLCBzY2FsZSA9IDEuMCl7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLnNjYWxlID0gc2NhbGU7XG4gICAgfVxuICAgIHZpZXdwb3J0VG9Xb3JsZCh2ZWMpe1xuICAgICAgICByZXR1cm4gdmVjLm11bHRpcGx5KHRoaXMuc2NhbGUpLmFkZCh0aGlzLnBvcyk7XG4gICAgfVxuICAgIHdvcmxkVG9WaWV3cG9ydCh2ZWMpe1xuICAgICAgICByZXR1cm4gdmVjLnN1YnRyYWN0KHRoaXMucG9zKS5kaXZpZGUodGhpcy5zY2FsZSk7XG4gICAgfVxuICAgIHRyYW5zbGF0ZSh2ZWMpe1xuICAgICAgICB0aGlzLnBvcyA9IHRoaXMucG9zLnN1YnRyYWN0KHZlYy5tdWx0aXBseSh0aGlzLnNjYWxlKSk7XG4gICAgfVxuICAgIHNjYWxlQXRQb2ludChzY2FsZUFtb3VudCwgc2NhbGVQb2ludCl7XG4gICAgICAgIGNvbnN0IG5ld1NjYWxlID0gdGhpcy5zY2FsZSAqIE1hdGguZXhwKHNjYWxlQW1vdW50KTtcbiAgICAgICAgY29uc3QgbmV3UG9zID0gdGhpcy5wb3MuYWRkKHNjYWxlUG9pbnQubXVsdGlwbHkodGhpcy5zY2FsZSAtIG5ld1NjYWxlKSk7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBuZXdTY2FsZTtcbiAgICAgICAgdGhpcy5wb3MgPSBuZXdQb3M7XG4gICAgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBWZWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmVjdG9yKHgsIHkpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZlY3Rvcik7XG5cbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVmVjdG9yLCBbe1xuICAgICAgICBrZXk6ICdhZGQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkKG9WZWMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCArIG9WZWMueCwgdGhpcy55ICsgb1ZlYy55KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc3VidHJhY3QnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3VidHJhY3Qob1ZlYykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54IC0gb1ZlYy54LCB0aGlzLnkgLSBvVmVjLnkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdtdWx0aXBseScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtdWx0aXBseShzY2FsZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54ICogc2NhbGUsIHRoaXMueSAqIHNjYWxlKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGl2aWRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpdmlkZShzY2FsZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54IC8gc2NhbGUsIHRoaXMueSAvIHNjYWxlKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZXF1YWxzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVxdWFscyhvVmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ID09IG9WZWMueCAmJiB0aGlzLnkgPT0gb1ZlYy55O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmbG9vcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmbG9vcigpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKE1hdGguZmxvb3IodGhpcy54KSwgTWF0aC5mbG9vcih0aGlzLnkpKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZG90JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRvdChvVmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ICogb1ZlYy54ICsgdGhpcy55ICogb1ZlYy55O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRMZW5ndGgnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGVuZ3RoKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLmRvdCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldEFuZ2xlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFuZ2xlKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy55LCB0aGlzLngpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0b0FycmF5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvQXJyYXkoKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55XTtcbiAgICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAgICBrZXk6ICdmcm9tUG9sYXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZnJvbVBvbGFyKHIsIHBoaSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IociAqIE1hdGguY29zKHBoaSksIHIgKiBNYXRoLnNpbihwaGkpKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBWZWN0b3I7XG59KCk7XG5cbjtcblxudmFyIERpbWVuc2lvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGltZW5zaW9ucyh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEaW1lbnNpb25zKTtcblxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhEaW1lbnNpb25zLCBbe1xuICAgICAgICBrZXk6ICdjb250YWlucycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb250YWlucyhwb3MpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1BvaW50SW5SZWN0KHBvcywgbmV3IFJlY3QobmV3IFZlY3RvcigwLCAwKSwgdGhpcykpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRBcmVhJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFyZWEoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53aWR0aCAqIHRoaXMuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0b0FycmF5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvQXJyYXkoKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEaW1lbnNpb25zO1xufSgpO1xuXG47XG5cbnZhciBDb2xvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb2xvcihyLCBnLCBiKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xvcik7XG5cbiAgICAgICAgdGhpcy5yID0gcjtcbiAgICAgICAgdGhpcy5nID0gZztcbiAgICAgICAgdGhpcy5iID0gYjtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29sb3IsIFt7XG4gICAgICAgIGtleTogJ3RvQXJyYXknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9BcnJheSgpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5yLCB0aGlzLmcsIHRoaXMuYl07XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29sb3I7XG59KCk7XG5cbjtcblxudmFyIFJlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVjdChwb3MsIGRpbXMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY3QpO1xuXG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmRpbXMgPSBkaW1zO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhSZWN0LCBbe1xuICAgICAgICBrZXk6ICd4JyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3MueDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAneScsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zLnk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3dpZHRoJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaW1zLndpZHRoO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoZWlnaHQnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpbXMuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdsZWZ0JyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3MueDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmlnaHQnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcy54ICsgdGhpcy5kaW1zLndpZHRoO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0b3AnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcy55O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdib3R0b20nLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcy55ICsgdGhpcy5kaW1zLmhlaWdodDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBSZWN0O1xufSgpO1xuXG47XG5cbmZ1bmN0aW9uIGlzUG9pbnRJblJlY3QocCwgcmVjdCkge1xuICAgIHJldHVybiBwLnggPj0gcmVjdC5sZWZ0ICYmIHAueCA8IHJlY3QucmlnaHQgJiYgcC55ID49IHJlY3QudG9wICYmIHAueSA8IHJlY3QuYm90dG9tO1xufVxuXG52YXIgTU9VU0VfTEVGVCA9IDA7XG52YXIgTU9VU0VfUklHSFQgPSAyO1xudmFyIE1PVVNFX01JRERMRSA9IDE7XG5cbmZ1bmN0aW9uIGNvbXB1dGUxREFycmF5KGxlbmd0aCwgZnVuYykge1xuICAgIHJldHVybiBuZXcgQXJyYXkobGVuZ3RoKS5maWxsKHVuZGVmaW5lZCkubWFwKGZ1bmN0aW9uICh1bnVzZWQsIGkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMoaSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGUyREFycmF5KGRpbXMsIGZ1bmMpIHtcbiAgICByZXR1cm4gY29tcHV0ZTFEQXJyYXkoZGltcy5oZWlnaHQsIGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHJldHVybiBjb21wdXRlMURBcnJheShkaW1zLndpZHRoLCBmdW5jdGlvbiAoaTIpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jKG5ldyBWZWN0b3IoaTIsIGkpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbnZhciBESVJTNCA9IFtuZXcgVmVjdG9yKDEsIDApLCBuZXcgVmVjdG9yKDAsIDEpLCBuZXcgVmVjdG9yKC0xLCAwKSwgbmV3IFZlY3RvcigwLCAtMSldO1xuXG5mdW5jdGlvbiBmbGF0dGVuKGFycikge1xuICAgIHZhciBfcmVmO1xuXG4gICAgcmV0dXJuIChfcmVmID0gW10pLmNvbmNhdC5hcHBseShfcmVmLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSk7XG59XG5cbnZhciBTY2FsYWJsZVZpZXdwb3J0TWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTY2FsYWJsZVZpZXdwb3J0TWFuYWdlcigpIHtcbiAgICAgICAgdmFyIHBvcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IG5ldyBWZWN0b3IoMCwgMCkgOiBhcmd1bWVudHNbMF07XG4gICAgICAgIHZhciBzY2FsZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IDEuMCA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2NhbGFibGVWaWV3cG9ydE1hbmFnZXIpO1xuXG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLnNjYWxlID0gc2NhbGU7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFNjYWxhYmxlVmlld3BvcnRNYW5hZ2VyLCBbe1xuICAgICAgICBrZXk6ICd2aWV3cG9ydFRvV29ybGQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmlld3BvcnRUb1dvcmxkKHZlYykge1xuICAgICAgICAgICAgcmV0dXJuIHZlYy5tdWx0aXBseSh0aGlzLnNjYWxlKS5hZGQodGhpcy5wb3MpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd3b3JsZFRvVmlld3BvcnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gd29ybGRUb1ZpZXdwb3J0KHZlYykge1xuICAgICAgICAgICAgcmV0dXJuIHZlYy5zdWJ0cmFjdCh0aGlzLnBvcykuZGl2aWRlKHRoaXMuc2NhbGUpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0cmFuc2xhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNsYXRlKHZlYykge1xuICAgICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLnBvcy5zdWJ0cmFjdCh2ZWMubXVsdGlwbHkodGhpcy5zY2FsZSkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzY2FsZUF0UG9pbnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2NhbGVBdFBvaW50KHNjYWxlQW1vdW50LCBzY2FsZVBvaW50KSB7XG4gICAgICAgICAgICB2YXIgbmV3U2NhbGUgPSB0aGlzLnNjYWxlICogTWF0aC5leHAoc2NhbGVBbW91bnQpO1xuICAgICAgICAgICAgdmFyIG5ld1BvcyA9IHRoaXMucG9zLmFkZChzY2FsZVBvaW50Lm11bHRpcGx5KHRoaXMuc2NhbGUgLSBuZXdTY2FsZSkpO1xuICAgICAgICAgICAgdGhpcy5zY2FsZSA9IG5ld1NjYWxlO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSBuZXdQb3M7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2NhbGFibGVWaWV3cG9ydE1hbmFnZXI7XG59KCk7XG5cbjtcbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBnZXRDYW52YXNNb3VzZVBvcyhjYW52YXMsIGV2KSB7XG4gICAgdmFyIGJvdW5kaW5nUmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcigoZXYuY2xpZW50WCAtIGJvdW5kaW5nUmVjdC5sZWZ0KSAqIChjYW52YXMud2lkdGggLyBib3VuZGluZ1JlY3Qud2lkdGgpLCAoZXYuY2xpZW50WSAtIGJvdW5kaW5nUmVjdC50b3ApICogKGNhbnZhcy5oZWlnaHQgLyBib3VuZGluZ1JlY3QuaGVpZ2h0KSk7XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbERpcihldikge1xuICAgIGlmIChldi5kZWx0YVkgPT0gMCkgcmV0dXJuIDA7ZWxzZSByZXR1cm4gZXYuZGVsdGFZIC8gTWF0aC5hYnMoZXYuZGVsdGFZKTtcbn1cblxudmFyIE1vdXNlRG93blRyYWNrZXIgPSBmdW5jdGlvbiBNb3VzZURvd25UcmFja2VyKGNhbnZhcywgaW5pdFRyYWNrQ2FsbGJhY2ssIHRyYWNrQ2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGlzVHJhY2tpbmdFbmFibGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gOiBhcmd1bWVudHNbM107XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW91c2VEb3duVHJhY2tlcik7XG5cbiAgICB0aGlzLmluaXRUcmFja0NhbGxiYWNrID0gaW5pdFRyYWNrQ2FsbGJhY2s7XG4gICAgdGhpcy50cmFja0NhbGxiYWNrID0gdHJhY2tDYWxsYmFjaztcbiAgICB0aGlzLmlzVHJhY2tpbmdFbmFibGVkID0gaXNUcmFja2luZ0VuYWJsZWQ7XG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG5cbiAgICB0aGlzLm9uTW91c2VEb3duID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIGlmIChfdGhpcy5pc1RyYWNraW5nRW5hYmxlZChldikpIHtcbiAgICAgICAgICAgIF90aGlzLmluaXRUcmFja0NhbGxiYWNrKGV2KTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBfdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIF90aGlzLm9uTW91c2VVcCk7XG4gICAgICAgICAgICBfdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgX3RoaXMub25Nb3VzZURvd24pO1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5vbk1vdXNlVXAgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgLy90aGlzLnRyYWNrQ2FsbGJhY2soZXYpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgX3RoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIF90aGlzLm9uTW91c2VVcCk7XG4gICAgICAgIF90aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBfdGhpcy5vbk1vdXNlRG93bik7XG4gICAgfTtcbiAgICB0aGlzLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIF90aGlzLnRyYWNrQ2FsbGJhY2soZXYpO1xuICAgIH07XG5cbiAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbn07XG5cbjtcblxudmFyIERyYWdNYW5hZ2VyID0gZnVuY3Rpb24gKF9Nb3VzZURvd25UcmFja2VyKSB7XG4gICAgX2luaGVyaXRzKERyYWdNYW5hZ2VyLCBfTW91c2VEb3duVHJhY2tlcik7XG5cbiAgICBmdW5jdGlvbiBEcmFnTWFuYWdlcihjYW52YXMsIGRyYWdDYWxsYmFjaykge1xuICAgICAgICB2YXIgaXNEcmFnRW5hYmxlZCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gOiBhcmd1bWVudHNbMl07XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYWdNYW5hZ2VyKTtcblxuICAgICAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKERyYWdNYW5hZ2VyKS5jYWxsKHRoaXMsIGNhbnZhcywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBfdGhpczIucHJldk1vdXNlUG9zID0gZ2V0Q2FudmFzTW91c2VQb3MoX3RoaXMyLmNhbnZhcywgZXYpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBtb3VzZVBvcyA9IGdldENhbnZhc01vdXNlUG9zKF90aGlzMi5jYW52YXMsIGV2KTtcbiAgICAgICAgICAgIGRyYWdDYWxsYmFjayhtb3VzZVBvcy5zdWJ0cmFjdChfdGhpczIucHJldk1vdXNlUG9zKSk7XG4gICAgICAgICAgICBfdGhpczIucHJldk1vdXNlUG9zID0gbW91c2VQb3M7XG4gICAgICAgIH0sIGlzRHJhZ0VuYWJsZWQpKTtcblxuICAgICAgICBfdGhpczIucHJldk1vdXNlUG9zID0gbmV3IFZlY3RvcigwLCAwKTtcbiAgICAgICAgcmV0dXJuIF90aGlzMjtcbiAgICB9XG5cbiAgICByZXR1cm4gRHJhZ01hbmFnZXI7XG59KE1vdXNlRG93blRyYWNrZXIpO1xuXG47XG5cbmZ1bmN0aW9uIHNldENhbnZhc1Ntb290aGluZyhjdHgsIGVuYWJsZSkge1xuICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBlbmFibGU7XG4gICAgY3R4Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbiAgICBjdHgud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xuICAgIGN0eC5tbkltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGNvbnRhaW5lciwgYm91bmRpbmdSZWN0KSB7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IGJvdW5kaW5nUmVjdC53aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gYm91bmRpbmdSZWN0LmhlaWdodDtcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGNhbnZhcy5zdHlsZS5sZWZ0ID0gYm91bmRpbmdSZWN0LmxlZnQudG9TdHJpbmcoKSArICdweCc7XG4gICAgY2FudmFzLnN0eWxlLnRvcCA9IGJvdW5kaW5nUmVjdC50b3AudG9TdHJpbmcoKSArICdweCc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgcmV0dXJuIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xufVxuXG5mdW5jdGlvbiBnZXRDYW52YXNEaW1zKGN0eCkge1xuICAgIHJldHVybiBuZXcgRGltZW5zaW9ucyhjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG59XG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIoY3R4LCBzcmMsIHR5cGUpIHtcbiAgICB2YXIgc2hhZGVyID0gY3R4LmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICBjdHguc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcbiAgICBjdHguY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgIGlmICghY3R4LmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGN0eC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgICAgY29uc29sZS5sb2coc3JjKTtcbiAgICAgICAgdGhyb3cgJ1NoYWRlciBjb21waWxlIGVycm9yOiAnICsgY3R4LmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShjdHgsIHZlcnRTcmMsIGZyYWdTcmMpIHtcbiAgICB2YXIgcHJvZ3JhbSA9IGN0eC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgY3R4LmF0dGFjaFNoYWRlcihwcm9ncmFtLCBjb21waWxlU2hhZGVyKGN0eCwgdmVydFNyYywgY3R4LlZFUlRFWF9TSEFERVIpKTtcbiAgICBjdHguYXR0YWNoU2hhZGVyKHByb2dyYW0sIGNvbXBpbGVTaGFkZXIoY3R4LCBmcmFnU3JjLCBjdHguRlJBR01FTlRfU0hBREVSKSk7XG4gICAgY3R4LmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuICAgIHJldHVybiBwcm9ncmFtO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wdXRlVGV4dHVyZShjdHgsIGRpbXMpIHtcbiAgICB2YXIgdGV4VHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGN0eC5GTE9BVCA6IGFyZ3VtZW50c1syXTtcbiAgICB2YXIgY29udGVudHMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzNdO1xuXG4gICAgdmFyIHRleCA9IGN0eC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXgpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTkVBUkVTVCk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9TLCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfVCwgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgIGN0eC50ZXhJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBjdHguUkdCQSwgZGltcy53aWR0aCwgZGltcy5oZWlnaHQsIDAsIGN0eC5SR0JBLCB0ZXhUeXBlLCBjb250ZW50cyk7XG4gICAgcmV0dXJuIHRleDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRkJPKGN0eCwgZXh0REIsIHRleHR1cmVzKSB7XG4gICAgdmFyIGZibyA9IGN0eC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmYm8pO1xuICAgIGlmICh0ZXh0dXJlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGV4dERCLmRyYXdCdWZmZXJzV0VCR0woY29tcHV0ZTFEQXJyYXkodGV4dHVyZXMubGVuZ3RoLCBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4dERCWydDT0xPUl9BVFRBQ0hNRU5UJyArIGkudG9TdHJpbmcoKSArICdfV0VCR0wnXTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0ZXh0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXgsIGkpIHtcbiAgICAgICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChjdHguRlJBTUVCVUZGRVIsIGV4dERCWydDT0xPUl9BVFRBQ0hNRU5UJyArIGkudG9TdHJpbmcoKSArICdfV0VCR0wnXSwgY3R4LlRFWFRVUkVfMkQsIHRleCwgMCk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChjdHguRlJBTUVCVUZGRVIsIGN0eC5DT0xPUl9BVFRBQ0hNRU5UMCwgY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVzWzBdLCAwKTtcbiAgICB9XG4gICAgaWYgKGN0eC5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKGN0eC5GUkFNRUJVRkZFUikgIT0gY3R4LkZSQU1FQlVGRkVSX0NPTVBMRVRFKSB7XG4gICAgICAgIHRocm93ICdHTF9GUkFNRUJVRkZFUl9DT01QTEVURSBmYWlsZWQuJztcbiAgICB9XG4gICAgcmV0dXJuIGZibztcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXJyYXlCdWZmZXIoY3R4LCBidWZUeXBlLCBjb250ZW50cykge1xuICAgIHZhciBidWYgPSBjdHguY3JlYXRlQnVmZmVyKCk7XG4gICAgY3R4LmJpbmRCdWZmZXIoYnVmVHlwZSwgYnVmKTtcbiAgICBjdHguYnVmZmVyRGF0YShidWZUeXBlLCBjb250ZW50cywgY3R4LlNUQVRJQ19EUkFXKTtcbiAgICByZXR1cm4gYnVmO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclZlcnRleEF0dHJpYihjdHgsIHByb2dyYW0sIGF0dHJpYk5hbWUsIGl0ZW1TaXplLCBidWYpIHtcbiAgICB2YXIgYXR0cmliID0gY3R4LmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIGF0dHJpYk5hbWUpO1xuICAgIGN0eC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRyaWIpO1xuICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIGJ1Zik7XG4gICAgY3R4LnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0cmliLCBpdGVtU2l6ZSwgY3R4LkZMT0FULCBmYWxzZSwgMCwgMCk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVGV4dHVyZXMoY3R4LCBwcm9ncmFtLCB0ZXhOYW1lcykge1xuICAgIHRleE5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHRleE5hbWUsIGkpIHtcbiAgICAgICAgdmFyIHRleExvYyA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGV4TmFtZSk7XG4gICAgICAgIGN0eC51bmlmb3JtMWkodGV4TG9jLCBpKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJVbmlmb3JtcyhjdHgsIHByb2dyYW0sIHVuaWZvcm1zLCB2YWxzKSB7XG4gICAgdW5pZm9ybXMuZm9yRWFjaChmdW5jdGlvbiAodW5pZm9ybSkge1xuICAgICAgICB2YXIgdW5pZm9ybUxvYyA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybS5uYW1lKTtcbiAgICAgICAgaWYgKHVuaWZvcm0udHlwZSA9PSAnaW50Jykge1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xaSh1bmlmb3JtTG9jLCB2YWxzW3VuaWZvcm0ubmFtZV0pO1xuICAgICAgICB9IGVsc2UgaWYgKHVuaWZvcm0udHlwZSA9PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFmKHVuaWZvcm1Mb2MsIHZhbHNbdW5pZm9ybS5uYW1lXSk7XG4gICAgICAgIH0gZWxzZSBpZiAoL15pdmVjWzItNF0kL2cudGVzdCh1bmlmb3JtLnR5cGUpKSB7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgdW5pZm9ybS50eXBlWzRdLnRvU3RyaW5nKCkgKyAnaXYnXSh1bmlmb3JtTG9jLCBuZXcgSW50MzJBcnJheSh2YWxzW3VuaWZvcm0ubmFtZV0pKTtcbiAgICAgICAgfSBlbHNlIGlmICgvXnZlY1syLTRdJC9nLnRlc3QodW5pZm9ybS50eXBlKSkge1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHVuaWZvcm0udHlwZVszXS50b1N0cmluZygpICsgJ2Z2J10odW5pZm9ybUxvYywgbmV3IEZsb2F0MzJBcnJheSh2YWxzW3VuaWZvcm0ubmFtZV0pKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBiaW5kVGV4dHVyZXMoY3R4LCB0ZXh0dXJlcykge1xuICAgIHRleHR1cmVzLmZvckVhY2goZnVuY3Rpb24gKHRleHR1cmUsIGkpIHtcbiAgICAgICAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4WydURVhUVVJFJyArIGkudG9TdHJpbmcoKV0pO1xuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmUpO1xuICAgIH0pO1xufVxuXG52YXIgRlVMTFNDUkVFTl9RVUFEX1BPU19BUlJBWSA9IG5ldyBGbG9hdDMyQXJyYXkoWy0xLjAsIC0xLjAsIDEuMCwgLTEuMCwgMS4wLCAxLjAsIC0xLjAsIDEuMF0pO1xuXG52YXIgRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZID0gbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAwLCAyLCAzXSk7XG5cbnZhciBGVUxMU0NSRUVOX1FVQURfTlVNX1ZFUlRJQ0VTID0gNjtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBHUEdQVUtlcm5lbFJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHUEdQVUtlcm5lbFJlc3VsdChjdHgsIGZibywgdGV4dHVyZXMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdQR1BVS2VybmVsUmVzdWx0KTtcblxuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5mYm8gPSBmYm87XG4gICAgICAgIHRoaXMudGV4dHVyZXMgPSB0ZXh0dXJlcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoR1BHUFVLZXJuZWxSZXN1bHQsIFt7XG4gICAgICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmZibyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZGVsZXRlRnJhbWVidWZmZXIodGhpcy5mYm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY3R4LmRlbGV0ZVRleHR1cmUodGV4dHVyZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBHUEdQVUtlcm5lbFJlc3VsdDtcbn0oKTtcblxuO1xuXG52YXIgR1BHUFVLZXJuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR1BHUFVLZXJuZWwobWFuYWdlciwgcHJvZ3JhbSkge1xuICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gW10gOiBhcmd1bWVudHNbMl07XG4gICAgICAgIHZhciBudW1PdXRwdXRzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1szXTtcbiAgICAgICAgdmFyIGlzR3JhcGhpY2FsID0gYXJndW1lbnRzLmxlbmd0aCA8PSA0IHx8IGFyZ3VtZW50c1s0XSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbNF07XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdQR1BVS2VybmVsKTtcblxuICAgICAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgdGhpcy5udW1PdXRwdXRzID0gbnVtT3V0cHV0cztcbiAgICAgICAgdGhpcy5pc0dyYXBoaWNhbCA9IGlzR3JhcGhpY2FsO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhHUEdQVUtlcm5lbCwgW3tcbiAgICAgICAga2V5OiAncnVuJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJ1bihpbnB1dFRleHR1cmVzLCBvdXRwdXREaW1zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHBhcmFtVmFscyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgdmFyIHVzZUZsb2F0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgICAgICAgdGhpcy5jdHgudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xuICAgICAgICAgICAgcmVnaXN0ZXJVbmlmb3Jtcyh0aGlzLmN0eCwgdGhpcy5wcm9ncmFtLCB0aGlzLnBhcmFtcywgcGFyYW1WYWxzKTtcbiAgICAgICAgICAgIHJlZ2lzdGVyVW5pZm9ybXModGhpcy5jdHgsIHRoaXMucHJvZ3JhbSwgW3tcbiAgICAgICAgICAgICAgICBuYW1lOiAndURpbXMnLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdpdmVjMidcbiAgICAgICAgICAgIH1dLCB7XG4gICAgICAgICAgICAgICAgdURpbXM6IG91dHB1dERpbXMudG9BcnJheSgpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG91dHB1dFRleHR1cmVzID0gY29tcHV0ZTFEQXJyYXkodGhpcy5udW1PdXRwdXRzLCBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb21wdXRlVGV4dHVyZShfdGhpczIuY3R4LCBvdXRwdXREaW1zLCB1c2VGbG9hdCA/IF90aGlzMi5jdHguRkxPQVQgOiBfdGhpczIuY3R4LlVOU0lHTkVEX0JZVEUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBmYm8gPSB0aGlzLmlzR3JhcGhpY2FsID8gbnVsbCA6IGNyZWF0ZUZCTyh0aGlzLmN0eCwgdGhpcy5leHREQiwgb3V0cHV0VGV4dHVyZXMpO1xuICAgICAgICAgICAgdGhpcy5jdHguYmluZEZyYW1lYnVmZmVyKHRoaXMuY3R4LkZSQU1FQlVGRkVSLCBmYm8pO1xuXG4gICAgICAgICAgICBiaW5kVGV4dHVyZXModGhpcy5jdHgsIGlucHV0VGV4dHVyZXMpO1xuXG4gICAgICAgICAgICB0aGlzLmN0eC52aWV3cG9ydCgwLCAwLCBvdXRwdXREaW1zLndpZHRoLCBvdXRwdXREaW1zLmhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZHJhd0Z1bGxzY3JlZW5RdWFkKHRoaXMucHJvZ3JhbSk7XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgR1BHUFVLZXJuZWxSZXN1bHQodGhpcy5jdHgsIGZibywgb3V0cHV0VGV4dHVyZXMpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjdHgnLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hbmFnZXIuY3R4O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdleHREQicsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFuYWdlci5leHREQjtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBHUEdQVUtlcm5lbDtcbn0oKTtcblxuO1xuXG52YXIgR1BHUFVNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdQR1BVTWFuYWdlcihjdHgpIHtcbiAgICAgICAgdmFyIHVzZUZsb2F0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR1BHUFVNYW5hZ2VyKTtcblxuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5leHREQiA9IHRoaXMuY3R4LmdldEV4dGVuc2lvbignV0VCR0xfZHJhd19idWZmZXJzJyk7XG4gICAgICAgIGlmICh1c2VGbG9hdCkge1xuICAgICAgICAgICAgdGhpcy5jdHguZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5xdWFkUG9zQnVmZmVyID0gY3JlYXRlQXJyYXlCdWZmZXIodGhpcy5jdHgsIHRoaXMuY3R4LkFSUkFZX0JVRkZFUiwgRlVMTFNDUkVFTl9RVUFEX1BPU19BUlJBWSk7XG4gICAgICAgIHRoaXMucXVhZEluZGV4QnVmZmVyID0gY3JlYXRlQXJyYXlCdWZmZXIodGhpcy5jdHgsIHRoaXMuY3R4LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBGVUxMU0NSRUVOX1FVQURfSU5ERVhfQVJSQVkpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhHUEdQVU1hbmFnZXIsIFt7XG4gICAgICAgIGtleTogJ2RyYXdGdWxsc2NyZWVuUXVhZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3RnVsbHNjcmVlblF1YWQocHJvZ3JhbSkge1xuICAgICAgICAgICAgdGhpcy5jdHgudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmJpbmRCdWZmZXIodGhpcy5jdHguRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHRoaXMucXVhZEluZGV4QnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmRyYXdFbGVtZW50cyh0aGlzLmN0eC5UUklBTkdMRV9TVFJJUCwgRlVMTFNDUkVFTl9RVUFEX05VTV9WRVJUSUNFUywgdGhpcy5jdHguVU5TSUdORURfU0hPUlQsIDApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZWFkUGFja2VkRmxvYXREYXRhJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWRQYWNrZWRGbG9hdERhdGEoZGltcykge1xuICAgICAgICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGRpbXMuZ2V0QXJlYSgpICogNCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5yZWFkUGl4ZWxzKDAsIDAsIGRpbXMud2lkdGgsIGRpbXMuaGVpZ2h0LCB0aGlzLmN0eC5SR0JBLCB0aGlzLmN0eC5VTlNJR05FRF9CWVRFLCBidWYpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoYnVmLmJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FycmF5VG9UZXh0dXJlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFycmF5VG9UZXh0dXJlKGRpbXMsIGFycikge1xuICAgICAgICAgICAgdmFyIHVzZUZsb2F0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGFyZ3VtZW50c1syXTtcblxuICAgICAgICAgICAgdmFyIGZsb2F0RmxhdHRlbmVkQXJyID0gbmV3IEZsb2F0MzJBcnJheShmbGF0dGVuKGZsYXR0ZW4oYXJyKSkpO1xuICAgICAgICAgICAgdmFyIGZsYXR0ZW5lZEFyciA9IHVzZUZsb2F0ID8gZmxvYXRGbGF0dGVuZWRBcnIgOiBuZXcgVWludDhBcnJheShmbGF0dGVuZWRBcnIuYnVmZmVyKTtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb21wdXRlVGV4dHVyZSh0aGlzLmN0eCwgZGltcywgdXNlRmxvYXQgPyB0aGlzLmN0eC5GTE9BVCA6IHRoaXMuY3R4LlVOU0lHTkVEX0JZVEUsIGZsYXR0ZW5lZEFycik7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RleHR1cmVUb0FycmF5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRleHR1cmVUb0FycmF5KGRpbXMsIHRleCkge1xuICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbMl07XG5cbiAgICAgICAgICAgIHZhciBjb21wdXRlRnVuYyA9ICd2ZWMyIGNWYWwgPSB0ZXh0dXJlMkQodUlucHV0LCB2Q29vcmQpLnh5O1xcbmdsX0ZyYWdEYXRhWzBdID0gcGFja0Zsb2F0KGNWYWwuJyArICd4eXp3J1tjb21wb25lbnRdICsgJyk7XFxuJztcbiAgICAgICAgICAgIHZhciBpbnB1dE5hbWVzID0gWyd1SW5wdXQnXTtcbiAgICAgICAgICAgIHZhciBrZXJuZWwgPSB0aGlzLmNyZWF0ZUtlcm5lbChjb21wdXRlRnVuYywgaW5wdXROYW1lcywgZGltcywgW10sIDAsIEdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREUpO1xuXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IGtlcm5lbC5ydW4oW3RleF0sIGRpbXMsIHt9LCB0aGlzLmN0eC5VTlNJR05FRF9CWVRFKTtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSB0aGlzLnJlYWRQYWNrZWRGbG9hdERhdGEoZGltcyk7XG4gICAgICAgICAgICByZXN1bHRzLmRpc3Bvc2UoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGUyREFycmF5KGRpbXMsIGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0W3Bvcy55ICogZGltcy53aWR0aCArIHBvcy54XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVLZXJuZWwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gW10gOiBhcmd1bWVudHNbM107XG4gICAgICAgICAgICB2YXIgbnVtT3V0cHV0cyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gNCB8fCBhcmd1bWVudHNbNF0gPT09IHVuZGVmaW5lZCA/IDEgOiBhcmd1bWVudHNbNF07XG4gICAgICAgICAgICB2YXIgaW5jbHVkZVNyYyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gNSB8fCBhcmd1bWVudHNbNV0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzVdO1xuICAgICAgICAgICAgdmFyIGlzR3JhcGhpY2FsID0gYXJndW1lbnRzLmxlbmd0aCA8PSA2IHx8IGFyZ3VtZW50c1s2XSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbNl07XG5cbiAgICAgICAgICAgIHZhciB1bmlmb3JtcyA9IFtdLmNvbmNhdChwYXJhbXMsIGlucHV0TmFtZXMubWFwKGZ1bmN0aW9uIChpbnB1dE5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2FtcGxlcjJEJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaW5wdXROYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLCBbe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpdmVjMicsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3VEaW1zJ1xuICAgICAgICAgICAgfV0pO1xuICAgICAgICAgICAgdmFyIHZlcnRTaGFkZXJTcmMgPSBHUEdQVU1hbmFnZXIuY3JlYXRlVmVydFNoYWRlclNyYyhpc0dyYXBoaWNhbCk7XG4gICAgICAgICAgICB2YXIgZnJhZ1NoYWRlclNyYyA9IEdQR1BVTWFuYWdlci5jcmVhdGVGcmFnU2hhZGVyU3JjKGNvbXB1dGVGdW5jLnRyaW0oKS5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcgICAgJyArIGxpbmU7XG4gICAgICAgICAgICB9KS5qb2luKCdcXG4nKSArICdcXG4nLCB1bmlmb3JtcywgaW5jbHVkZVNyYywgbnVtT3V0cHV0cyA+IDEpO1xuICAgICAgICAgICAgdmFyIHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKHRoaXMuY3R4LCB2ZXJ0U2hhZGVyU3JjLCBmcmFnU2hhZGVyU3JjKTtcblxuICAgICAgICAgICAgdGhpcy5jdHgudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgICAgIHJlZ2lzdGVyVmVydGV4QXR0cmliKHRoaXMuY3R4LCBwcm9ncmFtLCAnYVBvcycsIDIsIHRoaXMucXVhZFBvc0J1ZmZlcik7XG4gICAgICAgICAgICByZWdpc3RlclRleHR1cmVzKHRoaXMuY3R4LCBwcm9ncmFtLCBpbnB1dE5hbWVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgR1BHUFVLZXJuZWwodGhpcywgcHJvZ3JhbSwgcGFyYW1zLCBudW1PdXRwdXRzLCBpc0dyYXBoaWNhbCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZUdyYXBoaWNhbEtlcm5lbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVHcmFwaGljYWxLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIG91dHB1dERpbXMpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBbXSA6IGFyZ3VtZW50c1szXTtcbiAgICAgICAgICAgIHZhciBpbmNsdWRlU3JjID0gYXJndW1lbnRzLmxlbmd0aCA8PSA0IHx8IGFyZ3VtZW50c1s0XSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbNF07XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUtlcm5lbChjb21wdXRlRnVuYywgaW5wdXROYW1lcywgb3V0cHV0RGltcywgcGFyYW1zLCAwLCBpbmNsdWRlU3JjLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBHUEdQVU1hbmFnZXI7XG59KCk7XG5cbjtcblxuLy8gQ3JlZGl0OiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9Ub29UYWxsTmF0ZS80NzUwOTUzXG5HUEdQVU1hbmFnZXIuZW5kaWFubmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYiA9IG5ldyBBcnJheUJ1ZmZlcig0KTtcbiAgICB2YXIgYSA9IG5ldyBVaW50MzJBcnJheShiKTtcbiAgICB2YXIgYyA9IG5ldyBVaW50OEFycmF5KGIpO1xuICAgIGFbMF0gPSAweGRlYWRiZWVmO1xuICAgIGlmIChjWzBdID09IDB4ZWYpIHJldHVybiAnTEUnO1xuICAgIGlmIChjWzBdID09IDB4ZGUpIHJldHVybiAnQkUnO1xuICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBlbmRpYW5uZXNzJyk7XG59KCk7XG5cbkdQR1BVTWFuYWdlci5nZXRDYW52YXNDb250ZXh0ID0gZnVuY3Rpb24gKGNhbnZhcykge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBkZXB0aDogZmFsc2UsXG4gICAgICAgIGFudGlhbGlhczogZmFsc2VcbiAgICB9O1xuICAgIHJldHVybiBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCBvcHRpb25zKSB8fCBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wtZXhwZXJpbWVudGFsJywgb3B0aW9ucyk7XG59O1xuXG5HUEdQVU1hbmFnZXIuY3JlYXRlVmVydFNoYWRlclNyYyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmxpcFkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1swXTtcbiAgICByZXR1cm4gJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG5cXG5hdHRyaWJ1dGUgdmVjMiBhUG9zO1xcblxcbnZhcnlpbmcgdmVjMiB2Q29vcmQ7XFxuXFxudm9pZCBtYWluKCl7XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgnICsgKGZsaXBZID8gJ2FQb3MueCwgLWFQb3MueScgOiAnYVBvcycpICsgJywgMC4wLCAxLjApO1xcbiAgICB2Q29vcmQgPSAoYVBvcyArIDEuMCkgLyAyLjA7XFxufSc7XG59O1xuXG5HUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFID0gJ3ZlYzQgcm91bmQodmVjNCB4KSB7XFxuICAgIHJldHVybiBmbG9vcih4ICsgMC41KTtcXG59XFxuXFxuaGlnaHAgZmxvYXQgcm91bmQoaGlnaHAgZmxvYXQgeCkge1xcbiAgICByZXR1cm4gZmxvb3IoeCArIDAuNSk7XFxufVxcblxcbnZlYzIgaW50ZWdlck1vZCh2ZWMyIHgsIGZsb2F0IHkpIHtcXG4gICAgdmVjMiByZXMgPSBmbG9vcihtb2QoeCwgeSkpO1xcbiAgICByZXR1cm4gcmVzICogc3RlcCgxLjAgLSBmbG9vcih5KSwgLXJlcyk7XFxufVxcblxcbnZlYzMgaW50ZWdlck1vZCh2ZWMzIHgsIGZsb2F0IHkpIHtcXG4gICAgdmVjMyByZXMgPSBmbG9vcihtb2QoeCwgeSkpO1xcbiAgICByZXR1cm4gcmVzICogc3RlcCgxLjAgLSBmbG9vcih5KSwgLXJlcyk7XFxufVxcblxcbnZlYzQgaW50ZWdlck1vZCh2ZWM0IHgsIHZlYzQgeSkge1xcbiAgICB2ZWM0IHJlcyA9IGZsb29yKG1vZCh4LCB5KSk7XFxuICAgIHJldHVybiByZXMgKiBzdGVwKDEuMCAtIGZsb29yKHkpLCAtcmVzKTtcXG59XFxuXFxuaGlnaHAgZmxvYXQgaW50ZWdlck1vZChoaWdocCBmbG9hdCB4LCBoaWdocCBmbG9hdCB5KSB7XFxuICAgIGhpZ2hwIGZsb2F0IHJlcyA9IGZsb29yKG1vZCh4LCB5KSk7XFxuICAgIHJldHVybiByZXMgKiAocmVzID4gZmxvb3IoeSkgLSAxLjAgPyAwLjAgOiAxLjApO1xcbn1cXG5cXG5oaWdocCBpbnQgaW50ZWdlck1vZChoaWdocCBpbnQgeCwgaGlnaHAgaW50IHkpIHtcXG4gICAgcmV0dXJuIGludChpbnRlZ2VyTW9kKGZsb2F0KHgpLCBmbG9hdCh5KSkpO1xcbn1cXG5cXG5jb25zdCB2ZWMyIE1BR0lDX1ZFQyA9IHZlYzIoMS4wLCAtMjU2LjApO1xcbmNvbnN0IHZlYzQgU0NBTEVfRkFDVE9SID0gdmVjNCgxLjAsIDI1Ni4wLCA2NTUzNi4wLCAwLjApO1xcbmNvbnN0IHZlYzQgU0NBTEVfRkFDVE9SX0lOViA9IHZlYzQoMS4wLCAwLjAwMzkwNjI1LCAwLjAwMDAxNTI1ODc4OTA2MjUsIDAuMCk7IC8vIDEsIDEvMjU2LCAxLzY1NTM2XFxuaGlnaHAgZmxvYXQgdW5wYWNrRmxvYXQoaGlnaHAgdmVjNCByZ2JhKSB7XFxuJyArIChHUEdQVU1hbmFnZXIuZW5kaWFubmVzcyA9PSAnTEUnID8gJycgOiAnICAgIHJnYmEucmdiYSA9IHJnYmEuYWJncjtcXG4nKSArICcgICAgcmdiYSAqPSAyNTUuMDtcXG4gICAgdmVjMiBndGUxMjg7XFxuICAgIGd0ZTEyOC54ID0gcmdiYS5iID49IDEyOC4wID8gMS4wIDogMC4wO1xcbiAgICBndGUxMjgueSA9IHJnYmEuYSA+PSAxMjguMCA/IDEuMCA6IDAuMDtcXG4gICAgZmxvYXQgZXhwb25lbnQgPSAyLjAgKiByZ2JhLmEgLSAxMjcuMCArIGRvdChndGUxMjgsIE1BR0lDX1ZFQyk7XFxuICAgIGZsb2F0IHJlcyA9IGV4cDIocm91bmQoZXhwb25lbnQpKTtcXG4gICAgcmdiYS5iID0gcmdiYS5iIC0gMTI4LjAgKiBndGUxMjgueDtcXG4gICAgcmVzID0gZG90KHJnYmEsIFNDQUxFX0ZBQ1RPUikgKiBleHAyKHJvdW5kKGV4cG9uZW50LTIzLjApKSArIHJlcztcXG4gICAgcmVzICo9IGd0ZTEyOC55ICogLTIuMCArIDEuMDtcXG4gICAgcmV0dXJuIHJlcztcXG59XFxuXFxuaGlnaHAgdmVjNCBwYWNrRmxvYXQoaGlnaHAgZmxvYXQgZikge1xcbiAgICBoaWdocCBmbG9hdCBGID0gYWJzKGYpO1xcbiAgICBoaWdocCBmbG9hdCBzaWduID0gZiA8IDAuMCA/IDEuMCA6IDAuMDtcXG4gICAgaGlnaHAgZmxvYXQgZXhwb25lbnQgPSBmbG9vcihsb2cyKEYpKTtcXG4gICAgaGlnaHAgZmxvYXQgbWFudGlzc2EgPSAoZXhwMigtZXhwb25lbnQpICogRik7XFxuICAgIC8vIGV4cG9uZW50ICs9IGZsb29yKGxvZzIobWFudGlzc2EpKTtcXG4gICAgdmVjNCByZ2JhID0gdmVjNChGICogZXhwMigyMy4wLWV4cG9uZW50KSkgKiBTQ0FMRV9GQUNUT1JfSU5WO1xcbiAgICByZ2JhLnJnID0gaW50ZWdlck1vZChyZ2JhLnJnLCAyNTYuMCk7XFxuICAgIHJnYmEuYiA9IGludGVnZXJNb2QocmdiYS5iLCAxMjguMCk7XFxuICAgIHJnYmEuYSA9IGV4cG9uZW50KjAuNSArIDYzLjU7XFxuICAgIHJnYmEuYmEgKz0gdmVjMihpbnRlZ2VyTW9kKGV4cG9uZW50KzEyNy4wLCAyLjApLCBzaWduKSAqIDEyOC4wO1xcbiAgICByZ2JhICo9IDAuMDAzOTIxNTY5OyAvLyAxLzI1NVxcbicgKyAoR1BHUFVNYW5hZ2VyLmVuZGlhbm5lc3MgPT0gJ0xFJyA/ICcnIDogJyAgICByZ2JhLnJnYmEgPSByZ2JhLmFiZ3I7XFxuJykgKyAnICAgIHJldHVybiByZ2JhO1xcbn1cXG5cXG4nO1xuXG5HUEdQVU1hbmFnZXIuY3JlYXRlRnJhZ1NoYWRlclNyYyA9IGZ1bmN0aW9uIChjb21wdXRlRnVuYywgdW5pZm9ybXMpIHtcbiAgICB2YXIgaW5jbHVkZVNyYyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzJdO1xuICAgIHZhciB1c2VEcmF3QnVmZmVycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbM107XG4gICAgcmV0dXJuIFt1c2VEcmF3QnVmZmVycyA/ICcjZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnM6IHJlcXVpcmVcXG4nIDogJycsICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxucHJlY2lzaW9uIGhpZ2hwIHNhbXBsZXIyRDtcXG5cXG4jZGVmaW5lIEVQUyAwLjAwMDAwMDFcXG5cXG4nXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHVuaWZvcm1zLm1hcChmdW5jdGlvbiAodW5pZm9ybSkge1xuICAgICAgICByZXR1cm4gJ3VuaWZvcm0gJyArIHVuaWZvcm0udHlwZSArICcgJyArIHVuaWZvcm0ubmFtZSArICc7XFxuJztcbiAgICB9KSksIFsnXFxudmFyeWluZyB2ZWMyIHZDb29yZDtcXG5cXG52ZWM0IGFyckdldChzYW1wbGVyMkQgYXJyLCBpdmVjMiBpZCl7XFxuICAgIHJldHVybiB0ZXh0dXJlMkQoYXJyLCAodmVjMihpZCkgKyB2ZWMyKDAuNSkpIC8gdmVjMih1RGltcykpO1xcbn1cXG5cXG4nLCBpbmNsdWRlU3JjLCAndm9pZCBjb21wdXRlRnVuYygpe1xcbiAgICBpdmVjMiB0aHJlYWRJZCA9IGl2ZWMyKHZDb29yZCAqIHZlYzIodURpbXMpKTtcXG4nLCBjb21wdXRlRnVuYywgJ31cXG5cXG52b2lkIG1haW4oKXtcXG4gICAgY29tcHV0ZUZ1bmMoKTtcXG59J10pLmpvaW4oJycpO1xufTtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFJFRCA9IG5ldyBDb2xvcigyNTUsIDAsIDApO1xudmFyIEdSRUVOID0gbmV3IENvbG9yKDAsIDI1NSwgMCk7XG52YXIgQkxVRSA9IG5ldyBDb2xvcigwLCAwLCAyNTUpO1xudmFyIFdISVRFID0gbmV3IENvbG9yKDI1NSwgMjU1LCAyNTUpO1xuXG52YXIgQ29udG91cmVyTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb250b3VyZXJNYW5hZ2VyKGRyYXdGdW5jKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250b3VyZXJNYW5hZ2VyKTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gbmV3IFNjYWxhYmxlVmlld3BvcnRNYW5hZ2VyKG5ldyBWZWN0b3IoMCwgMCksIDAuMDEpO1xuICAgICAgICB0aGlzLnpvb21TZW5zaXRpdml0eSA9IDAuMztcbiAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyA9IDEuMDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29udG91cmVyTWFuYWdlciwgW3tcbiAgICAgICAga2V5OiAnY2hhbmdlRHJhd0Z1bmMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlRHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBpc0FuaW1hdGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbMl07XG5cbiAgICAgICAgICAgIHZhciBjcmVhdGVGaWVsZEtlcm5lbCA9IGZ1bmN0aW9uIGNyZWF0ZUZpZWxkS2VybmVsKGNvb3JkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkRnVuYyA9ICd2ZWMyIGNQb3MgPSAodmVjMih0aHJlYWRJZCkgKiB1U2NhbGUpICsgdVBvcztcXG52ZWMyIHJlcztcXG4nICsgZHJhd0Z1bmMudHJpbSgpICsgJ1xcbicgK1xuICAgICAgICAgICAgICAgIC8vYGdsX0ZyYWdEYXRhWzBdID0gdmVjNChcbiAgICAgICAgICAgICAgICAvLyAgICByZXMsXG4gICAgICAgICAgICAgICAgLy8gICAgMC4wLCAwLjBcbiAgICAgICAgICAgICAgICAvLyk7XG4gICAgICAgICAgICAgICAgJ2dsX0ZyYWdEYXRhWzBdID0gcGFja0Zsb2F0KHJlcy4nICsgY29vcmQgKyAnKTtcXG4nO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5ncGdwdU1hbmFnZXIuY3JlYXRlS2VybmVsKGZpZWxkRnVuYywgW10sIF90aGlzLmRpbXMsIFt7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1U2NhbGUnXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmVjMicsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1UG9zJ1xuICAgICAgICAgICAgICAgIH1dLmNvbmNhdChpc0FuaW1hdGVkID8gW3tcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RpbWUnXG4gICAgICAgICAgICAgICAgfV0gOiBbXSksIDEsIEdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREUgKyBpbmNsdWRlU3JjLnRyaW0oKSArICdcXG5cXG4nKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmZpZWxkS2VybmVsWCA9IGNyZWF0ZUZpZWxkS2VybmVsKCd4Jyk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkS2VybmVsWSA9IGNyZWF0ZUZpZWxkS2VybmVsKCd5Jyk7XG5cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2NhbGUgPSAxMC4wIC8gdGhpcy5kaW1zLndpZHRoO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5wb3MgPSBuZXcgVmVjdG9yKC10aGlzLmRpbXMud2lkdGgsIC10aGlzLmRpbXMuaGVpZ2h0KS5kaXZpZGUoMi4wKS5tdWx0aXBseSh0aGlzLnZpZXdwb3J0LnNjYWxlKTtcbiAgICAgICAgICAgIHRoaXMuY29udG91clNwYWNpbmcgPSAxLjA7XG5cbiAgICAgICAgICAgIHRoaXMuaXNBbmltYXRlZCA9IGlzQW5pbWF0ZWQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VzZUNhbnZhcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1c2VDYW52YXMoY2FudmFzKSB7XG4gICAgICAgICAgICB0aGlzLmN0eCA9IEdQR1BVTWFuYWdlci5nZXRDYW52YXNDb250ZXh0KGNhbnZhcyk7XG4gICAgICAgICAgICB0aGlzLmdwZ3B1TWFuYWdlciA9IG5ldyBHUEdQVU1hbmFnZXIodGhpcy5jdHgsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuZGltcyA9IGdldENhbnZhc0RpbXModGhpcy5jdHgpO1xuXG4gICAgICAgICAgICB0aGlzLnBsb3RLZXJuZWwgPSB0aGlzLmdwZ3B1TWFuYWdlci5jcmVhdGVHcmFwaGljYWxLZXJuZWwoQ29udG91cmVyTWFuYWdlci5wbG90RnVuYywgWyd1RmllbGRYJywgJ3VGaWVsZFknXSwgdGhpcy5kaW1zLCBbe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3VDb250b3VyU3BhY2luZydcbiAgICAgICAgICAgIH1dLCBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFICsgQ29udG91cmVyTWFuYWdlci5GSUVMRF9DSEVDS19JTkNMVURFKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVzdHJveUNvbnRleHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveUNvbnRleHQoKSB7XG4gICAgICAgICAgICB0aGlzLmN0eC5jYW52YXMud2lkdGggPSAxO1xuICAgICAgICAgICAgdGhpcy5jdHguY2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NoYW5nZVpvb20nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlWm9vbShjaGFuZ2VBbW91bnQpIHtcbiAgICAgICAgICAgIHZhciB6b29tUG9pbnQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBuZXcgVmVjdG9yKHRoaXMuZGltcy53aWR0aCAvIDIsIHRoaXMuZGltcy5oZWlnaHQgLyAyKSA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zY2FsZUF0UG9pbnQoLWNoYW5nZUFtb3VudCAqIHRoaXMuem9vbVNlbnNpdGl2aXR5LCB6b29tUG9pbnQpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjaGFuZ2VDb250b3VyU3BhY2luZycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VDb250b3VyU3BhY2luZyhjaGFuZ2VBbW91bnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udG91clNwYWNpbmcgKj0gTWF0aC5leHAoY2hhbmdlQW1vdW50ICogdGhpcy56b29tU2Vuc2l0aXZpdHkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0cmFuc2xhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudCkge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC50cmFuc2xhdGUodHJhbnNsYXRlQW1vdW50KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZHJhd0NvbnRvdXJzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdDb250b3VycygpIHtcbiAgICAgICAgICAgIHZhciB0aW1lID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1swXTtcblxuICAgICAgICAgICAgdmFyIHVuaWZvcm1Bc3NpZ25tZW50cyA9IHtcbiAgICAgICAgICAgICAgICB1U2NhbGU6IHRoaXMudmlld3BvcnQuc2NhbGUsXG4gICAgICAgICAgICAgICAgdVBvczogdGhpcy52aWV3cG9ydC5wb3MudG9BcnJheSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmltYXRlZCkge1xuICAgICAgICAgICAgICAgIHVuaWZvcm1Bc3NpZ25tZW50c1sndGltZSddID0gdGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaWVsZFJlc3VsdFggPSB0aGlzLmZpZWxkS2VybmVsWC5ydW4oW10sIHRoaXMuZGltcywgdW5pZm9ybUFzc2lnbm1lbnRzLCBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgZmllbGRSZXN1bHRZID0gdGhpcy5maWVsZEtlcm5lbFkucnVuKFtdLCB0aGlzLmRpbXMsIHVuaWZvcm1Bc3NpZ25tZW50cywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5wbG90S2VybmVsLnJ1bihbZmllbGRSZXN1bHRYLnRleHR1cmVzWzBdLCBmaWVsZFJlc3VsdFkudGV4dHVyZXNbMF1dLCB0aGlzLmRpbXMsIHtcbiAgICAgICAgICAgICAgICB1Q29udG91clNwYWNpbmc6IHRoaXMuY29udG91clNwYWNpbmdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZmllbGRSZXN1bHRYLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGZpZWxkUmVzdWx0WS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udG91cmVyTWFuYWdlcjtcbn0oKTtcblxuO1xuXG5Db250b3VyZXJNYW5hZ2VyLnBsb3RGdW5jID0gJ2l2ZWMyIGxpbmVJbmRleCA9IGl2ZWMyKGZsb29yKHZlYzIoXFxuICAgIHVucGFja0Zsb2F0KHRleHR1cmUyRCh1RmllbGRYLCB2Q29vcmQpKSxcXG4gICAgdW5wYWNrRmxvYXQodGV4dHVyZTJEKHVGaWVsZFksIHZDb29yZCkpXFxuKSAvIHVDb250b3VyU3BhY2luZykpO1xcbnZlYzIgY21wRmllbGQgPSB2ZWMyKGxpbmVJbmRleCkgKiB1Q29udG91clNwYWNpbmc7XFxuaXZlYzIgZHJhd0RhdGEgPSBpdmVjMihncmVhdGVyVGhhbkVxdWFsKFxcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigwLCAxKSwgY21wRmllbGQpICtcXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoMSwgMCksIGNtcEZpZWxkKSArXFxuICAgIGZpZWxkQ2hlY2sodGhyZWFkSWQsIGl2ZWMyKDAsIC0xKSwgY21wRmllbGQpICtcXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoLTEsIDApLCBjbXBGaWVsZCksXFxuICAgIGl2ZWMyKDEpKSk7XFxuaWYoYWxsKGVxdWFsKGRyYXdEYXRhLCBpdmVjMigwKSkpKXtcXG4gICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIDEuMCk7XFxufVxcbmVsc2V7XFxuICAgIHZlYzIgaXNBeGlzID0gdmVjMihlcXVhbChsaW5lSW5kZXgsIGl2ZWMyKDApKSk7XFxuICAgIHZlYzIgbGluZUNvbG9yID0gdmVjMihkcmF3RGF0YSkgKiAoMS4wIC0gMC41ICogaXNBeGlzKTtcXG4gICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KGxpbmVDb2xvci54LCAwLjUgKiBkb3QodmVjMihkcmF3RGF0YSksIGlzQXhpcyksIGxpbmVDb2xvci55LCAxLjApO1xcbn1cXG4nO1xuXG5Db250b3VyZXJNYW5hZ2VyLkZJRUxEX0NIRUNLX0lOQ0xVREUgPSAndmVjMiBnZXRGaWVsZChpdmVjMiBwb3Mpe1xcbiAgICByZXR1cm4gdmVjMihcXG4gICAgICAgIHVucGFja0Zsb2F0KGFyckdldCh1RmllbGRYLCBwb3MpKSxcXG4gICAgICAgIHVucGFja0Zsb2F0KGFyckdldCh1RmllbGRZLCBwb3MpKVxcbiAgICApO1xcbn1cXG5cXG5pdmVjMiBmaWVsZENoZWNrKGl2ZWMyIGNQb3MsIGl2ZWMyIGRpciwgdmVjMiBjbXBGaWVsZCl7XFxuICAgIGl2ZWMyIG9Qb3MgPSBjUG9zICsgZGlyO1xcbiAgICBpZihhbGwoZ3JlYXRlclRoYW5FcXVhbChvUG9zLCBpdmVjMigwKSkpICYmIGFsbChsZXNzVGhhbihvUG9zLCB1RGltcykpKXtcXG4gICAgICAgIHJldHVybiBpdmVjMihsZXNzVGhhbihnZXRGaWVsZChvUG9zKSwgY21wRmllbGQpKTtcXG4gICAgfVxcbiAgICBlbHNlIHJldHVybiBpdmVjMigwKTtcXG59XFxuXFxuJztcblxudmFyIENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlcihtYW5hZ2VyKSB7XG4gICAgICAgIHZhciBudW1GcmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAxMDAwIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250b3VyZXJBbmltYXRpb25NYW5hZ2VyKTtcblxuICAgICAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMubnVtRnJhbWVzID0gbnVtRnJhbWVzO1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XG4gICAgICAgIHRoaXMub25TdG9wQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkxvb3AgPSB0aGlzLmFuaW1hdGlvbkxvb3AuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlciwgW3tcbiAgICAgICAga2V5OiAnc3RhcnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRGcmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IDAgOiBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICB2YXIgb25EcmF3ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSBzdGFydEZyYW1lO1xuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9uRHJhdyA9IG9uRHJhdztcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25Mb29wKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYW5pbWF0aW9uTG9vcCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmltYXRpb25Mb29wKHRpbWVzdGFtcCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKHRoaXMuY3VycmVudEZyYW1lIC8gdGhpcy5udW1GcmFtZXMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9uRHJhdyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EcmF3KHRoaXMuY3VycmVudEZyYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAodGhpcy5jdXJyZW50RnJhbWUgKyAxKSAlIHRoaXMubnVtRnJhbWVzO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25Mb29wKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25TdG9wQ2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzdG9wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgICAgICB2YXIgb25TdG9wQ2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzBdO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrID0gb25TdG9wQ2FsbGJhY2s7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvblN0b3BDYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uU3RvcENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXI7XG59KCk7XG5cbjtcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgbWFuYWdlciA9IG5ldyBDb250b3VyZXJNYW5hZ2VyKCk7XG4gICAgaW5pdFJlbmRlcihtYW5hZ2VyKTtcbn1cbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIERlbW9GdW5jdGlvbnMgPSBmdW5jdGlvbiBEZW1vRnVuY3Rpb25zKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZW1vRnVuY3Rpb25zKTtcbn07XG5cbjtcblxuRGVtb0Z1bmN0aW9ucy5JTkNMVURFUyA9IHtcbiAgICBwaTogJ2NvbnN0IGZsb2F0IFBJID0gMy4xNDE1OTI2NTM1ODk3OTMyMzg0NjI2NDMzODMyNzk1O1xcblxcbicsXG4gICAgY29tcGxleExpYjogJ3ZlYzIgY29tcGxleE11bHQodmVjMiBhLCB2ZWMyIGIpe1xcbiAgICByZXR1cm4gdmVjMihhLnggKiBiLnggLSBhLnkgKiBiLnksIGEueSAqIGIueCArIGEueCAqIGIueSk7XFxufVxcblxcbnZlYzIgY29tcGxleERpdih2ZWMyIGEsIHZlYzIgYil7XFxuICAgIGZsb2F0IGRpdmlzb3IgPSBkb3QoYiwgYik7XFxuICAgIHJldHVybiB2ZWMyKGRvdChhLCBiKSwgYS55ICogYi54IC0gYS54ICogYi55KSAvIGRpdmlzb3I7XFxufVxcblxcbnZlYzIgY29tcGxleFBvdyh2ZWMyIGEsIHZlYzIgYil7XFxuICAgIGZsb2F0IHIgPSBsZW5ndGgoYSksIHBoaSA9IGF0YW4oYS55LCBhLngpO1xcbiAgICBmbG9hdCBuZXdSID0gcG93KHIsIGIueCkgKiBleHAoLWIueSAqIHBoaSk7XFxuICAgIGZsb2F0IG5ld1BoaSA9IGIueSAqIGxvZyhyKSArIGIueCAqIHBoaTtcXG4gICAgcmV0dXJuIG5ld1IgKiB2ZWMyKGNvcyhuZXdQaGkpLCBzaW4obmV3UGhpKSk7XFxufVxcblxcbnZlYzIgY29tcGxleEV4cCh2ZWMyIGIpe1xcbiAgICByZXR1cm4gZXhwKGIueCkgKiB2ZWMyKGNvcyhiLnkpLCBzaW4oYi55KSk7XFxufVxcblxcbnZlYzIgY29tcGxleExvZyh2ZWMyIHgpe1xcbiAgICByZXR1cm4gdmVjMihsb2cobGVuZ3RoKHgpKSwgYXRhbih4LnksIHgueCkpO1xcbn1cXG5cXG4nLFxuICAgIGdhbW1hOiAnLyoqXFxuICogVHJhbnNsYXRlZCB0byBPcGVuR0wgRVMgZnJvbSBtYXRoLmpzXFxuICogaHR0cHM6Ly9naXRodWIuY29tL2pvc2Rlam9uZy9tYXRoanNcXG4gKlxcbiAqIE1hdGguanMgaXMgYW4gZXh0ZW5zaXZlIG1hdGggbGlicmFyeSBmb3IgSmF2YVNjcmlwdCBhbmQgTm9kZS5qcyxcXG4gKiBJdCBmZWF0dXJlcyByZWFsIGFuZCBjb21wbGV4IG51bWJlcnMsIHVuaXRzLCBtYXRyaWNlcywgYSBsYXJnZSBzZXQgb2ZcXG4gKiBtYXRoZW1hdGljYWwgZnVuY3Rpb25zLCBhbmQgYSBmbGV4aWJsZSBleHByZXNzaW9uIHBhcnNlci5cXG4gKlxcbiAqIEB2ZXJzaW9uIDMuMi4xXFxuICogQGRhdGUgICAgMjAxNi0wNC0yNlxcbiAqXFxuICogQGxpY2Vuc2VcXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTMtMjAxNiBKb3MgZGUgSm9uZyA8d2pvc2Rlam9uZ0BnbWFpbC5jb20+XFxuICpcXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdFxcbiAqIHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XFxuICogb2YgdGhlIExpY2Vuc2UgYXRcXG4gKlxcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxcbiAqXFxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVFxcbiAqIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZVxcbiAqIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyXFxuICogdGhlIExpY2Vuc2UuXFxuICovXFxuXFxudmVjMiBnYW1tYVN0ZXAodmVjMiB4LCBpbnQgaSwgdmVjMiBuLCBmbG9hdCBwKXtcXG4gICAgZmxvYXQgcmVhbCA9IG4ueCArIGZsb2F0KGkpO1xcbiAgICBmbG9hdCBkZW4gPSByZWFsICogcmVhbCArIG4ueSAqIG4ueTtcXG4gICAgaWYoZGVuICE9IDAuMCl7XFxuICAgICAgICByZXR1cm4geCArIHZlYzIocCAqIHJlYWwgLyBkZW4sIC0ocCAqIG4ueSkgLyBkZW4pO1xcbiAgICB9XFxuICAgIGVsc2UgcmV0dXJuIHZlYzIoMC4wKTtcXG59XFxuXFxudmVjMiBnYW1tYSh2ZWMyIG4pe1xcbiAgICBuLnggLT0gMS4wO1xcbiAgICB2ZWMyIHggPSB2ZWMyKDAuOTk5OTk5OTk5OTk5OTk3MDkxODIsIDAuMCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAxLCBuLCA1Ny4xNTYyMzU2NjU4NjI5MjM1MTcpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgMiwgbiwgLTU5LjU5Nzk2MDM1NTQ3NTQ5MTI0OCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAzLCBuLCAxNC4xMzYwOTc5NzQ3NDE3NDcxNzQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgNCwgbiwgLTAuNDkxOTEzODE2MDk3NjIwMTk5NzgpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgNSwgbiwgMC4zMzk5NDY0OTk4NDgxMTg4ODY5OWUtNCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA2LCBuLCAwLjQ2NTIzNjI4OTI3MDQ4NTc1NjY1ZS00KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDcsIG4sIC0wLjk4Mzc0NDc1MzA0ODc5NTY0Njc3ZS00KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDgsIG4sIDAuMTU4MDg4NzAzMjI0OTEyNDg4ODRlLTMpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgOSwgbiwgLTAuMjEwMjY0NDQxNzI0MTA0ODgzMTllLTMpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgMTAsIG4sIDAuMjE3NDM5NjE4MTE1MjEyNjQzMjBlLTMpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgMTEsIG4sIC0wLjE2NDMxODEwNjUzNjc2Mzg5MDIyZS0zKTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDEyLCBuLCAwLjg0NDE4MjIzOTgzODUyNzQzMjkzZS00KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDEzLCBuLCAtMC4yNjE5MDgzODQwMTU4MTQwODY3MGUtNCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAxNCwgbiwgMC4zNjg5OTE4MjY1OTUzMTYyMjcwNGUtNSk7XFxuICAgIHZlYzIgdCA9IHZlYzIobi54ICsgNC43NDIxODc1ICsgMC41LCBuLnkpO1xcbiAgICBmbG9hdCB0d29QaVNxcnQgPSBzcXJ0KDIuMCAqIFBJKTtcXG5cXG4gICAgbi54ICs9IDAuNTtcXG4gICAgdmVjMiByZXN1bHQgPSBjb21wbGV4UG93KHQsIG4pO1xcbiAgICByZXN1bHQgKj0gdHdvUGlTcXJ0O1xcbiAgICBmbG9hdCByID0gZXhwKC10LngpO1xcbiAgICB0ID0gciAqIHZlYzIoY29zKC10LnkpLCBzaW4oLXQueSkpO1xcblxcbiAgICByZXR1cm4gY29tcGxleE11bHQoY29tcGxleE11bHQocmVzdWx0LCB0KSwgeCk7XFxufVxcblxcbicsXG4gICAgcm90YXRlV2l0aFRpbWU6ICd2ZWMyIHJvdGF0ZVdpdGhUaW1lKHZlYzIgdil7XFxuICAgIGZsb2F0IGNvc1QgPSBjb3ModGltZSAqIDIuMCAqIFBJKSwgc2luVCA9IHNpbih0aW1lICogMi4wICogUEkpO1xcbiAgICByZXR1cm4gdmVjMihcXG4gICAgICAgIHYueCAqIGNvc1QgLSB2LnkgKiBzaW5ULFxcbiAgICAgICAgdi54ICogc2luVCArIHYueSAqIGNvc1RcXG4gICAgKTtcXG59XFxuXFxuJyxcbiAgICBzbm9pc2U6ICcvL1xcbi8vIERlc2NyaXB0aW9uIDogQXJyYXkgYW5kIHRleHR1cmVsZXNzIEdMU0wgMkQvM0QvNEQgc2ltcGxleCBcXG4vLyAgICAgICAgICAgICAgIG5vaXNlIGZ1bmN0aW9ucy5cXG4vLyAgICAgIEF1dGhvciA6IElhbiBNY0V3YW4sIEFzaGltYSBBcnRzLlxcbi8vICBNYWludGFpbmVyIDogc3RlZ3VcXG4vLyAgICAgTGFzdG1vZCA6IDIwMTEwODIyIChpam0pXFxuLy8gICAgIExpY2Vuc2UgOiBDb3B5cmlnaHQgKEMpIDIwMTEgQXNoaW1hIEFydHMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXFxuLy8gICAgICAgICAgICAgICBEaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMSUNFTlNFIGZpbGUuXFxuLy8gICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vYXNoaW1hL3dlYmdsLW5vaXNlXFxuLy8gICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vc3RlZ3Uvd2ViZ2wtbm9pc2VcXG4vLyBcXG5cXG52ZWM0IG1vZDI4OSh2ZWM0IHgpIHtcXG4gIHJldHVybiB4IC0gZmxvb3IoeCAqICgxLjAgLyAyODkuMCkpICogMjg5LjA7IH1cXG5cXG5mbG9hdCBtb2QyODkoZmxvYXQgeCkge1xcbiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsgfVxcblxcbnZlYzQgcGVybXV0ZSh2ZWM0IHgpIHtcXG4gICAgIHJldHVybiBtb2QyODkoKCh4KjM0LjApKzEuMCkqeCk7XFxufVxcblxcbmZsb2F0IHBlcm11dGUoZmxvYXQgeCkge1xcbiAgICAgcmV0dXJuIG1vZDI4OSgoKHgqMzQuMCkrMS4wKSp4KTtcXG59XFxuXFxudmVjNCB0YXlsb3JJbnZTcXJ0KHZlYzQgcilcXG57XFxuICByZXR1cm4gMS43OTI4NDI5MTQwMDE1OSAtIDAuODUzNzM0NzIwOTUzMTQgKiByO1xcbn1cXG5cXG5mbG9hdCB0YXlsb3JJbnZTcXJ0KGZsb2F0IHIpXFxue1xcbiAgcmV0dXJuIDEuNzkyODQyOTE0MDAxNTkgLSAwLjg1MzczNDcyMDk1MzE0ICogcjtcXG59XFxuXFxudmVjNCBncmFkNChmbG9hdCBqLCB2ZWM0IGlwKVxcbiAge1xcbiAgY29uc3QgdmVjNCBvbmVzID0gdmVjNCgxLjAsIDEuMCwgMS4wLCAtMS4wKTtcXG4gIHZlYzQgcCxzO1xcblxcbiAgcC54eXogPSBmbG9vciggZnJhY3QgKHZlYzMoaikgKiBpcC54eXopICogNy4wKSAqIGlwLnogLSAxLjA7XFxuICBwLncgPSAxLjUgLSBkb3QoYWJzKHAueHl6KSwgb25lcy54eXopO1xcbiAgcyA9IHZlYzQobGVzc1RoYW4ocCwgdmVjNCgwLjApKSk7XFxuICBwLnh5eiA9IHAueHl6ICsgKHMueHl6KjIuMCAtIDEuMCkgKiBzLnd3dzsgXFxuXFxuICByZXR1cm4gcDtcXG4gIH1cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXG4vLyAoc3FydCg1KSAtIDEpLzQgPSBGNCwgdXNlZCBvbmNlIGJlbG93XFxuI2RlZmluZSBGNCAwLjMwOTAxNjk5NDM3NDk0NzQ1MVxcblxcbmZsb2F0IHNub2lzZSh2ZWM0IHYpXFxuICB7XFxuICBjb25zdCB2ZWM0ICBDID0gdmVjNCggMC4xMzgxOTY2MDExMjUwMTEsICAvLyAoNSAtIHNxcnQoNSkpLzIwICBHNFxcbiAgICAgICAgICAgICAgICAgICAgICAgIDAuMjc2MzkzMjAyMjUwMDIxLCAgLy8gMiAqIEc0XFxuICAgICAgICAgICAgICAgICAgICAgICAgMC40MTQ1ODk4MDMzNzUwMzIsICAvLyAzICogRzRcXG4gICAgICAgICAgICAgICAgICAgICAgIC0wLjQ0NzIxMzU5NTQ5OTk1OCk7IC8vIC0xICsgNCAqIEc0XFxuXFxuLy8gRmlyc3QgY29ybmVyXFxuICB2ZWM0IGkgID0gZmxvb3IodiArIGRvdCh2LCB2ZWM0KEY0KSkgKTtcXG4gIHZlYzQgeDAgPSB2IC0gICBpICsgZG90KGksIEMueHh4eCk7XFxuXFxuLy8gT3RoZXIgY29ybmVyc1xcblxcbi8vIFJhbmsgc29ydGluZyBvcmlnaW5hbGx5IGNvbnRyaWJ1dGVkIGJ5IEJpbGwgTGljZWEtS2FuZSwgQU1EIChmb3JtZXJseSBBVEkpXFxuICB2ZWM0IGkwO1xcbiAgdmVjMyBpc1ggPSBzdGVwKCB4MC55encsIHgwLnh4eCApO1xcbiAgdmVjMyBpc1laID0gc3RlcCggeDAuend3LCB4MC55eXogKTtcXG4vLyAgaTAueCA9IGRvdCggaXNYLCB2ZWMzKCAxLjAgKSApO1xcbiAgaTAueCA9IGlzWC54ICsgaXNYLnkgKyBpc1guejtcXG4gIGkwLnl6dyA9IDEuMCAtIGlzWDtcXG4vLyAgaTAueSArPSBkb3QoIGlzWVoueHksIHZlYzIoIDEuMCApICk7XFxuICBpMC55ICs9IGlzWVoueCArIGlzWVoueTtcXG4gIGkwLnp3ICs9IDEuMCAtIGlzWVoueHk7XFxuICBpMC56ICs9IGlzWVouejtcXG4gIGkwLncgKz0gMS4wIC0gaXNZWi56O1xcblxcbiAgLy8gaTAgbm93IGNvbnRhaW5zIHRoZSB1bmlxdWUgdmFsdWVzIDAsMSwyLDMgaW4gZWFjaCBjaGFubmVsXFxuICB2ZWM0IGkzID0gY2xhbXAoIGkwLCAwLjAsIDEuMCApO1xcbiAgdmVjNCBpMiA9IGNsYW1wKCBpMC0xLjAsIDAuMCwgMS4wICk7XFxuICB2ZWM0IGkxID0gY2xhbXAoIGkwLTIuMCwgMC4wLCAxLjAgKTtcXG5cXG4gIC8vICB4MCA9IHgwIC0gMC4wICsgMC4wICogQy54eHh4XFxuICAvLyAgeDEgPSB4MCAtIGkxICArIDEuMCAqIEMueHh4eFxcbiAgLy8gIHgyID0geDAgLSBpMiAgKyAyLjAgKiBDLnh4eHhcXG4gIC8vICB4MyA9IHgwIC0gaTMgICsgMy4wICogQy54eHh4XFxuICAvLyAgeDQgPSB4MCAtIDEuMCArIDQuMCAqIEMueHh4eFxcbiAgdmVjNCB4MSA9IHgwIC0gaTEgKyBDLnh4eHg7XFxuICB2ZWM0IHgyID0geDAgLSBpMiArIEMueXl5eTtcXG4gIHZlYzQgeDMgPSB4MCAtIGkzICsgQy56enp6O1xcbiAgdmVjNCB4NCA9IHgwICsgQy53d3d3O1xcblxcbi8vIFBlcm11dGF0aW9uc1xcbiAgaSA9IG1vZDI4OShpKTsgXFxuICBmbG9hdCBqMCA9IHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUoaS53KSArIGkueikgKyBpLnkpICsgaS54KTtcXG4gIHZlYzQgajEgPSBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlIChcXG4gICAgICAgICAgICAgaS53ICsgdmVjNChpMS53LCBpMi53LCBpMy53LCAxLjAgKSlcXG4gICAgICAgICAgICsgaS56ICsgdmVjNChpMS56LCBpMi56LCBpMy56LCAxLjAgKSlcXG4gICAgICAgICAgICsgaS55ICsgdmVjNChpMS55LCBpMi55LCBpMy55LCAxLjAgKSlcXG4gICAgICAgICAgICsgaS54ICsgdmVjNChpMS54LCBpMi54LCBpMy54LCAxLjAgKSk7XFxuXFxuLy8gR3JhZGllbnRzOiA3eDd4NiBwb2ludHMgb3ZlciBhIGN1YmUsIG1hcHBlZCBvbnRvIGEgNC1jcm9zcyBwb2x5dG9wZVxcbi8vIDcqNyo2ID0gMjk0LCB3aGljaCBpcyBjbG9zZSB0byB0aGUgcmluZyBzaXplIDE3KjE3ID0gMjg5LlxcbiAgdmVjNCBpcCA9IHZlYzQoMS4wLzI5NC4wLCAxLjAvNDkuMCwgMS4wLzcuMCwgMC4wKSA7XFxuXFxuICB2ZWM0IHAwID0gZ3JhZDQoajAsICAgaXApO1xcbiAgdmVjNCBwMSA9IGdyYWQ0KGoxLngsIGlwKTtcXG4gIHZlYzQgcDIgPSBncmFkNChqMS55LCBpcCk7XFxuICB2ZWM0IHAzID0gZ3JhZDQoajEueiwgaXApO1xcbiAgdmVjNCBwNCA9IGdyYWQ0KGoxLncsIGlwKTtcXG5cXG4vLyBOb3JtYWxpc2UgZ3JhZGllbnRzXFxuICB2ZWM0IG5vcm0gPSB0YXlsb3JJbnZTcXJ0KHZlYzQoZG90KHAwLHAwKSwgZG90KHAxLHAxKSwgZG90KHAyLCBwMiksIGRvdChwMyxwMykpKTtcXG4gIHAwICo9IG5vcm0ueDtcXG4gIHAxICo9IG5vcm0ueTtcXG4gIHAyICo9IG5vcm0uejtcXG4gIHAzICo9IG5vcm0udztcXG4gIHA0ICo9IHRheWxvckludlNxcnQoZG90KHA0LHA0KSk7XFxuXFxuLy8gTWl4IGNvbnRyaWJ1dGlvbnMgZnJvbSB0aGUgZml2ZSBjb3JuZXJzXFxuICB2ZWMzIG0wID0gbWF4KDAuNiAtIHZlYzMoZG90KHgwLHgwKSwgZG90KHgxLHgxKSwgZG90KHgyLHgyKSksIDAuMCk7XFxuICB2ZWMyIG0xID0gbWF4KDAuNiAtIHZlYzIoZG90KHgzLHgzKSwgZG90KHg0LHg0KSAgICAgICAgICAgICksIDAuMCk7XFxuICBtMCA9IG0wICogbTA7XFxuICBtMSA9IG0xICogbTE7XFxuICByZXR1cm4gNDkuMCAqICggZG90KG0wKm0wLCB2ZWMzKCBkb3QoIHAwLCB4MCApLCBkb3QoIHAxLCB4MSApLCBkb3QoIHAyLCB4MiApKSlcXG4gICAgICAgICAgICAgICArIGRvdChtMSptMSwgdmVjMiggZG90KCBwMywgeDMgKSwgZG90KCBwNCwgeDQgKSApICkgKSA7XFxuXFxufVxcblxcbidcbn07XG5cbkRlbW9GdW5jdGlvbnMuZnVuY3Rpb25zID0ge1xuICAgIGxvcmVudHo6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdMb3JlbnR6IEJvb3N0JyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOiAnZmxvYXQgYmV0YSA9IHNpbih0aW1lICogMi4wICogUEkpICogMC45O1xcbmZsb2F0IGdhbW1hID0gMS4wIC8gc3FydCgxLjAgLSBiZXRhICogYmV0YSk7XFxucmVzID0gZ2FtbWEgKiB2ZWMyKFxcbiAgICBjUG9zLnggKiAxLjAgKyBjUG9zLnkgKiBiZXRhLFxcbiAgICBjUG9zLnkgKiAxLjAgKyBjUG9zLnggKiBiZXRhXFxuKTtcXG5cXG4nXG4gICAgfSxcbiAgICAvLyAgICByb3RhdGlvbjoge1xuICAgIC8vICAgICAgICBkaXNwbGF5TmFtZTogJ1JvdGF0aW9uJyxcbiAgICAvLyAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAvLyAgICAgICAgbnVtRnJhbWVzOiA4MDAsXG4gICAgLy8gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgIC8vICAgICAgICBkcmF3RnVuYzpcbiAgICAvL2ByZXMgPSByb3RhdGVXaXRoVGltZShjUG9zKTtcbiAgICAvL2BcbiAgICAvLyAgICB9LFxuICAgIG1lcmNhdG9yd2FycDoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ01lcmNhdG9yIFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDgwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBzY2FsZWRQb3MgPSBjUG9zICogMC42O1xcbnZlYzIgaW52TWVyY2F0b3IgPSB2ZWMyKHNjYWxlZFBvcy54LCAyLjAgKiBhdGFuKGV4cChzY2FsZWRQb3MueSkpIC0gMC41ICogUEkpICogOC4wO1xcbnJlcyA9IHJvdGF0ZVdpdGhUaW1lKGludk1lcmNhdG9yKTtcXG4nXG4gICAgfSxcbiAgICBtZXJjYXRvck1vbGx3ZWlkZToge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ01lcmNhdG9yIHRvIE1vbGx3ZWlkZScsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMTAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzogJ3ZlYzIgc2NhbGVkUG9zID0gY1BvcyAqIDAuMztcXG5mbG9hdCB0aGV0YSA9IGFzaW4oc2NhbGVkUG9zLnkgKiAyLjAgLyBQSSk7XFxudmVjMiBpbnZNb2xsd2VpZGUgPSB2ZWMyKFxcbiAgICBzY2FsZWRQb3MueCAvIGNvcyh0aGV0YSksXFxuICAgIGFzaW4oKDIuMCAqIHRoZXRhICsgc2luKDIuMCAqIHRoZXRhKSkgLyBQSSlcXG4pO1xcbnZlYzIgaW52TWVyY2F0b3IgPSB2ZWMyKHNjYWxlZFBvcy54LCAyLjAgKiBhdGFuKGV4cChzY2FsZWRQb3MueSkpIC0gMC41ICogUEkpO1xcbmZsb2F0IG1peFBhcmFtID0gLSBjb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcXG5yZXMgPSAoaW52TW9sbHdlaWRlICogbWl4UGFyYW0gKyBpbnZNZXJjYXRvciAqICgxLjAgLSBtaXhQYXJhbSkpICogOC4wO1xcbidcbiAgICB9LFxuICAgIGRpcG9sZToge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0RpcG9sZSBGb3JtYXRpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDMwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYixcbiAgICAgICAgZHJhd0Z1bmM6ICdmbG9hdCBkaXN0ID0gc2luKHRpbWUgKiAyLjAgKiBQSSArIFBJIC8gMi4wKSAqIDIuMCArIDIuNTtcXG5yZXMgPSA1MC4wIC8gKDIuMCAqIGRpc3QpICogKFxcbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKGRpc3QsIDAuMCkpIC1cXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMigtZGlzdCwgMC4wKSlcXG4pO1xcbidcbiAgICB9LFxuICAgIGF0dHJhY3RSZXBlbDoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0F0dHJhY3Rpb24gdG8gUmVwdWxzaW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogJ3JlcyA9IDEwLjAgKiAoXFxuICAgIGNvbXBsZXhMb2coY1BvcyAtIHZlYzIoMS4wLCAwLjApKSArXFxuICAgIHNpbih0aW1lICogMi4wICogUEkgLSBQSSAvIDIuMCkgKiBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKC0xLjAsIDAuMCkpXFxuKTtcXG4nXG4gICAgfSxcbiAgICBuZXVyYWxuZXR3b3JrOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTmV1cmFsIE5ldHdvcmsnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6ICdmbG9hdCBtaXhQYXJhbSA9IC1jb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcXG52ZWMyIHVuc2lnbW9pZCA9IC1sb2coMS4wIC8gKChjUG9zICsgdmVjMigzLjMsIDMuMCkpIC8gNi4zKSAtIDEuMCk7XFxucmVzID0gKHZlYzIoXFxuICAgIHVuc2lnbW9pZC54ICogMi4wICsgdW5zaWdtb2lkLnkgKiAxLjAsXFxuICAgIHVuc2lnbW9pZC54ICogMi4wICsgdW5zaWdtb2lkLnkgKiAzLjBcXG4pIC0gdmVjMigxLjAsIC0yLjApKSAqIG1peFBhcmFtICsgY1BvcyAqICgxLjAgLSBtaXhQYXJhbSk7XFxuJ1xuICAgIH0sXG4gICAgZ2FsYXh5OiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnR2FsYXh5IFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6ICdmbG9hdCBtaXhQYXJhbSA9IC1jb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcXG52ZWMyIHBvbFBvcyA9IHZlYzIobGVuZ3RoKGNQb3MpLCBhdGFuKGNQb3MueSwgY1Bvcy54KSk7XFxucG9sUG9zID0gdmVjMihwb2xQb3MueCwgcG9sUG9zLnkgLSBtaXhQYXJhbSAvIDUwLjAgKiBzcXJ0KDEuMCAvIHBvdyhwb2xQb3MueCAvIDQwLjAsIDMuMCkpKTtcXG5yZXMgPSB2ZWMyKHBvbFBvcy54ICogY29zKHBvbFBvcy55KSwgcG9sUG9zLnggKiBzaW4ocG9sUG9zLnkpKTtcXG4nXG4gICAgfSxcbiAgICBzaW1wbGV4OiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnU2ltcGxleCBXYXJwJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5zbm9pc2UsXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBjaXJjbGVWYXJ5ID0gMi4wICogdmVjMihcXG4gICAgY29zKHRpbWUgKiAyLjAgKiBQSSksXFxuICAgIHNpbih0aW1lICogMi4wICogUEkpXFxuKTtcXG5yZXMgPSAyLjAgKiAoY1BvcyArXFxuMC41ICogdmVjMihcXG4gICAgc25vaXNlKHZlYzQoY1BvcyAqIDAuMjUsIGNpcmNsZVZhcnkgKyB2ZWMyKDEwMC4wLCAxMDAuMCkpKSxcXG4gICAgc25vaXNlKHZlYzQoY1BvcyAqIDAuMjUsIGNpcmNsZVZhcnkgKyB2ZWMyKDIwMC4wLCAyMDAuMCkpKVxcbikpO1xcbidcbiAgICB9LFxuICAgIGV4cG9uZW50aWF0aW9uOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnQ29tcGxleCBFeHBvbmVudGlhdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogJ3ZlYzIgY2FydFJlcyA9IDEwLjAgKiBjb21wbGV4UG93KGNQb3MsIHZlYzIoMS4wIC8gKDIuNSAtIDEuNSAqIGNvcyh0aW1lICogMi4wICogUEkpKSwgMC4wKSk7XFxucmVzID0gdmVjMihsZW5ndGgoY2FydFJlcyksIDEwLjAgKiBhdGFuKGNhcnRSZXMueSwgY2FydFJlcy54KSk7XFxuJ1xuICAgIH0sXG4gICAgbW9iaXVzOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTW9iaXVzIFRyYW5zZm9ybWF0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6ICdyZXMgPSByb3RhdGVXaXRoVGltZSgxMC4wICogY29tcGxleERpdihcXG4gICAgY29tcGxleE11bHQodmVjMigwLjUsIDMuMCksIGNQb3MpICsgdmVjMigwLjUsIDEuNSksXFxuICAgIGNvbXBsZXhNdWx0KHZlYzIoNC4wLCAxLjUpLCBjUG9zKSArIHZlYzIoMi4wLCAzLjUpXFxuKSk7XFxuJ1xuICAgIH0sXG4gICAgLy8gICAgbG9nOiB7XG4gICAgLy8gICAgICAgIGRpc3BsYXlOYW1lOiAnQ29tcGxleCBMb2dhcml0aG0nLFxuICAgIC8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgIC8vICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgLy8gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgIC8vICAgICAgICBkcmF3RnVuYzpcbiAgICAvL2ByZXMgPSByb3RhdGVXaXRoVGltZSgxMC4wICogY29tcGxleExvZyhjUG9zKSk7XG4gICAgLy9gXG4gICAgLy8gICAgfSxcbiAgICAvLyAgICBzaW46IHtcbiAgICAvLyAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IFNpbmUnLFxuICAgIC8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgIC8vICAgICAgICBudW1GcmFtZXM6IDMwMCxcbiAgICAvLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAvLyAgICAgICAgZHJhd0Z1bmM6XG4gICAgLy9gdmVjMiBleHBvbmVudCA9IHZlYzIoLWNQb3MueSwgY1Bvcy54KTtcbiAgICAvL3JlcyA9IHJvdGF0ZVdpdGhUaW1lKGNvbXBsZXhEaXYoXG4gICAgLy8gICAgY29tcGxleEV4cChleHBvbmVudCkgLSBjb21wbGV4RXhwKC1leHBvbmVudCksXG4gICAgLy8gICAgdmVjMigwLjAsIDIuMClcbiAgICAvLykpO1xuICAgIC8vYFxuICAgIC8vICAgIH0sXG4gICAgYXJjc2luOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnQ29tcGxleCBJbnZlcnNlIFNpbmUnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYixcbiAgICAgICAgZHJhd0Z1bmM6ICd2ZWMyIGludlNpbiA9IC0gMTAuMCAqIGNvbXBsZXhNdWx0KGNvbXBsZXhMb2coY29tcGxleFBvdyh2ZWMyKDEuMCwgMC4wKSAtIGNvbXBsZXhQb3coY1BvcywgdmVjMigyLjAsIDAuMCkpLCB2ZWMyKDAuNSwgMC4wKSkgKyBjb21wbGV4TXVsdChjUG9zLCB2ZWMyKDAuMCwgMS4wKSkpLCB2ZWMyKDAuMCwgMS4wKSk7XFxuZmxvYXQgbWl4UGFyYW0gPSAtIGNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnJlcyA9IGludlNpbiAqIG1peFBhcmFtICsgY1BvcyAqICgxLjAgLSBtaXhQYXJhbSk7XFxuJ1xuICAgIH0sXG4gICAgZ2FtbWE6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdHYW1tYSBGdW5jdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogNDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5nYW1tYSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgICAgIGRyYXdGdW5jOiAncmVzID0gcm90YXRlV2l0aFRpbWUoMTAuMCAqIGdhbW1hKChjUG9zICsgdmVjMigyLjAsIDAuMCkpIC8gMi4wKSk7XFxuJ1xuICAgIH0sXG4gICAgbWFkbmVzczoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggPz8/JyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiA4MDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBtYWRuZXNzID0gLSAxMC4wICogY29tcGxleE11bHQoY29tcGxleExvZyhjb21wbGV4UG93KHZlYzIoMi4wLCAzLjApIC0gY29tcGxleFBvdyhjUG9zICogMi4wLCB2ZWMyKDIuMCwgMS4wKSksIHZlYzIoMC41LCAxLjApKSArIGNvbXBsZXhNdWx0KGNQb3MgKiAyLjAsIHZlYzIoMi4wLCAxLjApKSksIHZlYzIoMi4wLCAxLjApKTtcXG5mbG9hdCBtaXhQYXJhbSA9IC0gY29zKHRpbWUgKiAyLjAgKiBQSSkgLyAyLjAgKyAwLjU7XFxucmVzID0gbWFkbmVzcyAqIG1peFBhcmFtICsgY1BvcyAqICgxLjAgLSBtaXhQYXJhbSk7XFxuJ1xuICAgIH1cbn07XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIENhbnZhc0Rpc3BsYXlQYW5lID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQ2FudmFzRGlzcGxheVBhbmUsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gQ2FudmFzRGlzcGxheVBhbmUoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYW52YXNEaXNwbGF5UGFuZSk7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihDYW52YXNEaXNwbGF5UGFuZSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENhbnZhc0Rpc3BsYXlQYW5lLCBbe1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIGlmICgnb25Nb3VudENhbGxiYWNrJyBpbiB0aGlzLnByb3BzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25Nb3VudENhbGxiYWNrKGNhbnZhcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAgICAgaWYgKCdvbkRpc21vdW50Q2FsbGJhY2snIGluIHRoaXMucHJvcHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uRGlzbW91bnRDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycsIHsgd2lkdGg6IHRoaXMucHJvcHMuZGltcy53aWR0aCwgaGVpZ2h0OiB0aGlzLnByb3BzLmRpbXMuaGVpZ2h0LCBzdHlsZTogeyB3aWR0aDogJzEwMCUnIH0gfSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ2FudmFzRGlzcGxheVBhbmU7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbjtcbkNhbnZhc0Rpc3BsYXlQYW5lLnByb3BUeXBlcyA9IHtcbiAgICBkaW1zOiBSZWFjdC5Qcm9wVHlwZXMuaW5zdGFuY2VPZihEaW1lbnNpb25zKS5pc1JlcXVpcmVkLFxuICAgIG9uTW91bnRDYWxsYmFjazogUmVhY3QuUHJvcFR5cGVzLmZ1bmNcbn07XG5cbnZhciBEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbiA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50Mikge1xuICAgIF9pbmhlcml0cyhEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbiwgX1JlYWN0JENvbXBvbmVudDIpO1xuXG4gICAgZnVuY3Rpb24gRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24oKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbik7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbikuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2xpc3QtZ3JvdXAtaXRlbScgKyAodGhpcy5wcm9wcy5zZWxlY3RlZCA/ICcgYWN0aXZlJyA6ICcnKSwgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5wcm9wcy5vbkNsaWNrKF90aGlzMy5wcm9wcy5mdW5jTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmRpc3BsYXlOYW1lXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG47XG5cbnZhciBEcmF3RnVuY3Rpb25TZWxlY3RvciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50Mykge1xuICAgIF9pbmhlcml0cyhEcmF3RnVuY3Rpb25TZWxlY3RvciwgX1JlYWN0JENvbXBvbmVudDMpO1xuXG4gICAgZnVuY3Rpb24gRHJhd0Z1bmN0aW9uU2VsZWN0b3IocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYXdGdW5jdGlvblNlbGVjdG9yKTtcblxuICAgICAgICB2YXIgX3RoaXM0ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKERyYXdGdW5jdGlvblNlbGVjdG9yKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICAgICAgX3RoaXM0LnN0YXRlID0ge1xuICAgICAgICAgICAgc2VsZWN0ZWRGdW5jOiBEcmF3RnVuY3Rpb25TZWxlY3Rvci5ERUZBVUxUX0ZVTkNcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXM0LmhhbmRsZUNsaWNrID0gX3RoaXM0LmhhbmRsZUNsaWNrLmJpbmQoX3RoaXM0KTtcbiAgICAgICAgcmV0dXJuIF90aGlzNDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRHJhd0Z1bmN0aW9uU2VsZWN0b3IsIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdsaXN0LWdyb3VwJyB9LFxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKERlbW9GdW5jdGlvbnMuZnVuY3Rpb25zKS5tYXAoZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24sIHsgZGlzcGxheU5hbWU6IERlbW9GdW5jdGlvbnMuZnVuY3Rpb25zW2Z1bmNdLmRpc3BsYXlOYW1lLCBrZXk6IGZ1bmMsIGZ1bmNOYW1lOiBmdW5jLCBzZWxlY3RlZDogZnVuYyA9PSBfdGhpczUuc3RhdGUuc2VsZWN0ZWRGdW5jLCBvbkNsaWNrOiBfdGhpczUuaGFuZGxlQ2xpY2sgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZUNsaWNrJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGZ1bmNOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZ1bmM6IGZ1bmNOYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25TZWxlY3QoZnVuY05hbWUpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIERyYXdGdW5jdGlvblNlbGVjdG9yO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG47XG5EcmF3RnVuY3Rpb25TZWxlY3Rvci5ERUZBVUxUX0ZVTkMgPSAnYXR0cmFjdFJlcGVsJztcblxudmFyIEFjZUVkaXRvciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50NCkge1xuICAgIF9pbmhlcml0cyhBY2VFZGl0b3IsIF9SZWFjdCRDb21wb25lbnQ0KTtcblxuICAgIGZ1bmN0aW9uIEFjZUVkaXRvcigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFjZUVkaXRvcik7XG5cbiAgICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihBY2VFZGl0b3IpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhBY2VFZGl0b3IsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgICAgdmFyIGVkaXRvckRpdiA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3IgPSBhY2UuZWRpdChlZGl0b3JEaXYpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VGhlbWUoJ2FjZS90aGVtZS9tb25va2FpJyk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VXNlV29ya2VyKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCdhY2UvbW9kZS9nbHNsJyk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci4kYmxvY2tTY3JvbGxpbmcgPSBJbmZpbml0eTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLnNldEZvbnRTaXplKDE4KTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLnNldE9wdGlvbnMoe1xuICAgICAgICAgICAgICAgIG1heExpbmVzOiBJbmZpbml0eVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VXNlV3JhcE1vZGUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0b3IuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRWYWx1ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZShuZXdDb250ZW50cykge1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VmFsdWUobmV3Q29udGVudHMpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3IuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0VmFsdWUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnZGl2JywgeyBzdHlsZTogeyBoZWlnaHQ6IHRoaXMucHJvcHMuaGVpZ2h0LnRvU3RyaW5nKCkgKyAncHgnIH0gfSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQWNlRWRpdG9yO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG47XG5cbnZhciBDb250b3VyZXJBcHAgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudDUpIHtcbiAgICBfaW5oZXJpdHMoQ29udG91cmVyQXBwLCBfUmVhY3QkQ29tcG9uZW50NSk7XG5cbiAgICBmdW5jdGlvbiBDb250b3VyZXJBcHAocHJvcHMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRvdXJlckFwcCk7XG5cbiAgICAgICAgdmFyIF90aGlzNyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihDb250b3VyZXJBcHApLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpczcuYW5pbWF0aW9uTWFuYWdlciA9IG5ldyBDb250b3VyZXJBbmltYXRpb25NYW5hZ2VyKF90aGlzNy5wcm9wcy5tYW5hZ2VyKTtcbiAgICAgICAgX3RoaXM3LnN0YXRlID0ge1xuICAgICAgICAgICAgaXNBbmltYXRlZDogZmFsc2UsXG4gICAgICAgICAgICBpc0FuaW1hdGluZzogZmFsc2UsXG4gICAgICAgICAgICBjdXJyZW50RnJhbWU6IDAsXG4gICAgICAgICAgICBudW1GcmFtZXM6IDAsXG4gICAgICAgICAgICBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IGZhbHNlLFxuICAgICAgICAgICAgbnVtRnJhbWVzSW5wdXRWYWw6ICcwJyxcbiAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogJydcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXM3LnVzZUNhbnZhcyA9IF90aGlzNy51c2VDYW52YXMuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcuc2V0RHJhd0Z1bmMgPSBfdGhpczcuc2V0RHJhd0Z1bmMuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcub25EcmF3RnVuY1NlbGVjdCA9IF90aGlzNy5vbkRyYXdGdW5jU2VsZWN0LmJpbmQoX3RoaXM3KTtcbiAgICAgICAgX3RoaXM3LnJlZHJhdyA9IF90aGlzNy5yZWRyYXcuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcuY2hhbmdlWm9vbUFuZFJlZHJhdyA9IF90aGlzNy5jaGFuZ2Vab29tQW5kUmVkcmF3LmJpbmQoX3RoaXM3KTtcbiAgICAgICAgX3RoaXM3LmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3ID0gX3RoaXM3LmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3LmJpbmQoX3RoaXM3KTtcbiAgICAgICAgX3RoaXM3LnRyYW5zbGF0ZUFuZFJlZHJhdyA9IF90aGlzNy50cmFuc2xhdGVBbmRSZWRyYXcuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcuaGFuZGxlUGxvdENsaWNrID0gX3RoaXM3LmhhbmRsZVBsb3RDbGljay5iaW5kKF90aGlzNyk7XG4gICAgICAgIHJldHVybiBfdGhpczc7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbnRvdXJlckFwcCwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICB0aGlzLm9uRHJhd0Z1bmNTZWxlY3QoRHJhd0Z1bmN0aW9uU2VsZWN0b3IuREVGQVVMVF9GVU5DKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgQ0FOVkFTX0RJTVMgPSBuZXcgRGltZW5zaW9ucyg2NDAsIDQ4MCk7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBfZGVmaW5lUHJvcGVydHkoeyBjbGFzc05hbWU6ICdjb250YWluZXInIH0sICdjbGFzc05hbWUnLCAnY29sLWxnLTEyJyksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFnZS1oZWFkZXInIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdGdW4gd2l0aCBDb250b3VycydcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnd2VsbCcgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEcmFnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgdG8gbW92ZSB0aGUgZ3JhcGgsICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzY3JvbGwnXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyB0byB6b29tLCBhbmQgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0N0cmwgKyBzY3JvbGwnXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyB0byBjaGFuZ2UgdGhlIGNvbnRvdXIgZGVuc2l0eS4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ01vZGlmeSAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogJyMnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4Lm51bUZyYW1lc0lucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZyYW1lcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyAobnVtYmVyIG9mIGZyYW1lcyksIHRoZW4gY2xpY2sgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1Bsb3QnXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyB0byBjaGFuZ2UgdGhlIGFuaW1hdGlvbiBzcGVlZC4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1VzZSB0aGUgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NsaWRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIGV4cGxvcmUgdGhlIGFuaW1hdGlvbiBpbiBtb3JlIGRldGFpbC4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1Bsb3QgeW91ciBvd24gZnVuY3Rpb25zIHdpdGggdGhlICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0ZXh0IGVkaXRvcnMnXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyBiZWxvdy4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0p1c3QgZW5qb3kgdGhlIHByZXR0eSBhbmltYXRpb25zLCBvciAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogJ2h0dHBzOi8vZ2l0aHViLmNvbS9rcmF3dGhla3Jvdy9jb250b3VyZXInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayBoZXJlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIGxlYXJuIG1vcmUuJ1xuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vdGU6IFRoaXMgYXBwIHVzZXMgV2ViR0wsIHNvIGl0IG5lZWRzIGEgc3VmZmljaWVudGx5IG1vZGVybiBicm93c2VyIGFuZCBHUFUgdG8gd29yay4nXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJhd0Z1bmN0aW9uU2VsZWN0b3IsIHsgb25TZWxlY3Q6IHRoaXMub25EcmF3RnVuY1NlbGVjdCB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS05JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtOCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAndG9vbGJhcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdidG4tZ3JvdXAnLCByb2xlOiAnZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jaGFuZ2Vab29tQW5kUmVkcmF3KDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXpvb20taW4nIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmNoYW5nZVpvb21BbmRSZWRyYXcoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXpvb20tb3V0JyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdygtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcGx1cycgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tbWludXMnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDEsIDApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1sZWZ0JyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC50cmFuc2xhdGVBbmRSZWRyYXcobmV3IFZlY3RvcigwLCAxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctdXAnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDAsIC0xKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctZG93bicgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoLTEsIDApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1yaWdodCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWQgfHwgIXRoaXMuc3RhdGUuaXNBbmltYXRpbmcgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdidG4nLCAnYnRuLWRlZmF1bHQnLCB7IGRpc2FibGVkOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkIH0pLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LnN0YXRlLmlzQW5pbWF0ZWQgJiYgIV90aGlzOC5zdGF0ZS5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguYW5pbWF0aW9uTWFuYWdlci5zdGFydChfdGhpczguc3RhdGUuY3VycmVudEZyYW1lLCBmdW5jdGlvbiAoY3VycmVudEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogY3VycmVudEZyYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcGxheScgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogY2xhc3NOYW1lcygnYnRuJywgJ2J0bi1kZWZhdWx0JywgeyBkaXNhYmxlZDogIXRoaXMuc3RhdGUuaXNBbmltYXRlZCB9KSwgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzOC5zdGF0ZS5pc0FuaW1hdGVkICYmIF90aGlzOC5zdGF0ZS5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguYW5pbWF0aW9uTWFuYWdlci5zdG9wKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXBhdXNlJyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXhzLTQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNBbmltYXRlZCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyB0eXBlOiAncmFuZ2UnLCBtaW46ICcwJywgbWF4OiAodGhpcy5zdGF0ZS5udW1GcmFtZXMgLSAxKS50b1N0cmluZygpLCB2YWx1ZTogdGhpcy5zdGF0ZS5jdXJyZW50RnJhbWUsIHN0eWxlOiB7IG1hcmdpblRvcDogJzVweCcgfSwgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWU6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczguc3RhdGUuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmFuaW1hdGlvbk1hbmFnZXIuc3RvcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnMoX3RoaXM4LnN0YXRlLmN1cnJlbnRGcmFtZSAvIF90aGlzOC5zdGF0ZS5udW1GcmFtZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnMoX3RoaXM4LnN0YXRlLmN1cnJlbnRGcmFtZSAvIF90aGlzOC5zdGF0ZS5udW1GcmFtZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSkgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogeyBtYXJnaW5Ub3A6ICcxMHB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXNEaXNwbGF5UGFuZSwgeyBkaW1zOiBDQU5WQVNfRElNUywgb25Nb3VudENhbGxiYWNrOiBmdW5jdGlvbiBvbk1vdW50Q2FsbGJhY2soY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgudXNlQ2FudmFzKGNhbnZhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9uRGlzbW91bnRDYWxsYmFjazogZnVuY3Rpb24gb25EaXNtb3VudENhbGxiYWNrKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnByb3BzLm1hbmFnZXIuZGVzdHJveUNvbnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTEyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1Bsb3QgRnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtOScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdmb3JtLWlubGluZScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdidG4tZ3JvdXAnLCBzdHlsZTogeyBtYXJnaW5SaWdodDogJzEwcHgnIH0sIHJvbGU6ICdncm91cCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdidG4nLCB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSA/ICdidG4tZGVmYXVsdCcgOiAnYnRuLXByaW1hcnknLCB7ICdhY3RpdmUnOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgfSksIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7IGlzQW5pbWF0ZWRTZWxlY3RTdGF0ZTogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdHcmFwaCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2J0bicsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gJ2J0bi1wcmltYXJ5JyA6ICdidG4tZGVmYXVsdCcsIHsgJ2FjdGl2ZSc6IHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlIH0pLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoeyBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBbmltYXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2Zvcm0tZ3JvdXAnLCB7ICdoYXMtZXJyb3InOiB0aGlzLmlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCkgfSksIHN0eWxlOiB7IGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCBtYXJnaW5Cb3R0b206IDAsIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdpbnB1dC1ncm91cCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaW5wdXQtZ3JvdXAtYWRkb24nIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRnJhbWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCBjbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLCB2YWx1ZTogdGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbCwgZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSwgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgubnVtRnJhbWVzSW5wdXQgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHsgbnVtRnJhbWVzSW5wdXRWYWw6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgc3R5bGU6IHsgd2lkdGg6ICc2MHB4JyB9IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoZWxwLWJsb2NrJywgc3R5bGU6IHsgZGlzcGxheTogdGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpID8gJ2lubGluZS1ibG9jaycgOiAnbm9uZScsIG1hcmdpbkxlZnQ6ICcxMHB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNdXN0IGJlIGFuIGludGVnZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtMycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1zdWNjZXNzIGJ0bi1ibG9jayBwdWxsLXJpZ2h0Jywgc3R5bGU6IHsgd2lkdGg6ICc4MHB4JyB9LCBkaXNhYmxlZDogdGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpLCByZWY6IGZ1bmN0aW9uIHJlZihidXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnBsb3RCdXR0b24gPSBidXR0b247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgb25DbGljazogdGhpcy5oYW5kbGVQbG90Q2xpY2sgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdQbG90J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yID09ICcnID8gbnVsbCA6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoYXMtZXJyb3InIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaGVscC1ibG9jaycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnWW91ciBjb2RlIGZhaWxlZCB0byBjb21waWxlIHdpdGggdGhlIGZvbGxvd2luZyBlcnJvcjonXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IudHJpbSgpLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24gKGxpbmUsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGluZGV4IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IuaW5kZXhPZignd3Jvbmcgb3BlcmFuZCB0eXBlcycpICE9IC0xID8gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdOb3RlIHRoYXQgR0xTTCBFUyBkb2VzIG5vdCBpbXBsaWNpdGx5IGNhc3QgaW50cyB0byBmbG9hdHMuIFdyaXRlIG51bWJlcnMgbGlrZSBcIjIzXCIgYXMgXCIyMy4wXCIuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IuaW5kZXhPZignZ2xfRnJhZ0RhdGEnKSAhPSAtMSA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRGlkIHlvdSBmb3JnZXQgYSBzZW1pY29sb24gb24gdGhlIGxhc3QgbGluZT8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdWaWV3IHRoZSBjb25zb2xlIHRvIHNlZSB0aGUgZnVsbCBnZW5lcmF0ZWQgV2ViR0wgc2hhZGVyIGNvZGUuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogeyBtYXJnaW5Ub3A6ICcxMHB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBY2VFZGl0b3IsIHsgaGVpZ2h0OiAnMjAwJywga2V5OiAnZHJhd0Z1bmNFZGl0b3InLCByZWY6IGZ1bmN0aW9uIHJlZihlZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5kcmF3RnVuY0VkaXRvciA9IGVkaXRvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTEyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xpYnJhcnkgRnVuY3Rpb25zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogeyBtYXJnaW5Cb3R0b206ICcxMHB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBY2VFZGl0b3IsIHsgaGVpZ2h0OiAnMjAwJywga2V5OiAnaW5jbHVkZVNyY0VkaXRvcicsIHJlZjogZnVuY3Rpb24gcmVmKGVkaXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmluY2x1ZGVTcmNFZGl0b3IgPSBlZGl0b3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VzZUNhbnZhcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1c2VDYW52YXMoY2FudmFzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGRyYWdNYW5hZ2VyID0gbmV3IERyYWdNYW5hZ2VyKGNhbnZhcywgZnVuY3Rpb24gKGRyYWdWZWMpIHtcbiAgICAgICAgICAgICAgICBfdGhpczkucHJvcHMubWFuYWdlci52aWV3cG9ydC50cmFuc2xhdGUoZHJhZ1ZlYyk7XG4gICAgICAgICAgICAgICAgX3RoaXM5LnJlZHJhdygpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2LmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KGdldFNjcm9sbERpcihldikpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzOS5wcm9wcy5tYW5hZ2VyLmNoYW5nZVpvb20oLWdldFNjcm9sbERpcihldiksIGdldENhbnZhc01vdXNlUG9zKGNhbnZhcywgZXYpKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnJlZHJhdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci51c2VDYW52YXMoY2FudmFzKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaXNOdW1GcmFtZXNJbnB1dEludmFsaWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgJiYgdGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbC5zcGxpdCgnJykuc29tZShmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjLmNoYXJDb2RlQXQoKSA8ICcwJy5jaGFyQ29kZUF0KCkgfHwgYy5jaGFyQ29kZUF0KCkgPiAnOScuY2hhckNvZGVBdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVBsb3RDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVQbG90Q2xpY2soZSkge1xuICAgICAgICAgICAgdGhpcy5zZXREcmF3RnVuYyh0aGlzLmRyYXdGdW5jRWRpdG9yLmdldFZhbHVlKCksIHRoaXMuaW5jbHVkZVNyY0VkaXRvci5nZXRWYWx1ZSgpLCB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSwgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgPyBwYXJzZUludCh0aGlzLnN0YXRlLm51bUZyYW1lc0lucHV0VmFsKSA6IDApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZWRyYXcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNBbmltYXRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5zdGF0ZS5jdXJyZW50RnJhbWUgLyB0aGlzLnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2hhbmdlWm9vbUFuZFJlZHJhdycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2Vab29tQW5kUmVkcmF3KGNoYW5nZUFtb3VudCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmNoYW5nZVpvb20oY2hhbmdlQW1vdW50KTtcbiAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KGNoYW5nZUFtb3VudCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmNoYW5nZUNvbnRvdXJTcGFjaW5nKGNoYW5nZUFtb3VudCk7XG4gICAgICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0cmFuc2xhdGVBbmRSZWRyYXcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNsYXRlQW5kUmVkcmF3KHRyYW5zbGF0ZUFtb3VudCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLnRyYW5zbGF0ZSh0cmFuc2xhdGVBbW91bnQubXVsdGlwbHkoNTAuMCkpO1xuICAgICAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0RHJhd0Z1bmMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczEwID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGlzQW5pbWF0ZWQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1syXTtcbiAgICAgICAgICAgIHZhciBudW1GcmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzNdO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5jaGFuZ2VEcmF3RnVuYyhkcmF3RnVuYywgaW5jbHVkZVNyYywgaXNBbmltYXRlZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgc2hhZGVyQ29tcGlsZUVycm9yOiBlcnJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0FuaW1hdGVkICYmIG51bUZyYW1lcyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgbnVtRnJhbWVzID0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgaXNBbmltYXRlZDogaXNBbmltYXRlZCxcbiAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogaXNBbmltYXRlZCxcbiAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWU6IDAsXG4gICAgICAgICAgICAgICAgbnVtRnJhbWVzOiBudW1GcmFtZXMsXG4gICAgICAgICAgICAgICAgaXNBbmltYXRlZFNlbGVjdFN0YXRlOiBpc0FuaW1hdGVkLFxuICAgICAgICAgICAgICAgIG51bUZyYW1lc0lucHV0VmFsOiBudW1GcmFtZXMudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBzaGFkZXJDb21waWxlRXJyb3I6ICcnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5udW1GcmFtZXMgPSBudW1GcmFtZXM7XG4gICAgICAgICAgICBpZiAoaXNBbmltYXRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdG9wKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5hbmltYXRpb25NYW5hZ2VyLnN0YXJ0KDAsIGZ1bmN0aW9uIChjdXJyZW50RnJhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTAuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogY3VycmVudEZyYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdG9wKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3VycygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdvbkRyYXdGdW5jU2VsZWN0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJhd0Z1bmNTZWxlY3QoZnVuYykge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRnVuYyA9IERlbW9GdW5jdGlvbnMuZnVuY3Rpb25zW2Z1bmNdO1xuICAgICAgICAgICAgdGhpcy5kcmF3RnVuY0VkaXRvci5zZXRWYWx1ZShzZWxlY3RlZEZ1bmMuZHJhd0Z1bmMudHJpbSgpKTtcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVNyY0VkaXRvci5zZXRWYWx1ZShzZWxlY3RlZEZ1bmMuaW5jbHVkZVNyYy50cmltKCkpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRnVuYy5pc0FuaW1hdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXREcmF3RnVuYyhzZWxlY3RlZEZ1bmMuZHJhd0Z1bmMsIHNlbGVjdGVkRnVuYy5pbmNsdWRlU3JjLCBzZWxlY3RlZEZ1bmMuaXNBbmltYXRlZCwgc2VsZWN0ZWRGdW5jLm51bUZyYW1lcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RHJhd0Z1bmMoc2VsZWN0ZWRGdW5jLmRyYXdGdW5jLCBzZWxlY3RlZEZ1bmMuaW5jbHVkZVNyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udG91cmVyQXBwO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG47XG5cbmZ1bmN0aW9uIGluaXRSZW5kZXIobWFuYWdlcikge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5kZXhDb250YWluZXInKTtcbiAgICBSZWFjdERPTS5yZW5kZXIoUmVhY3QuY3JlYXRlRWxlbWVudChDb250b3VyZXJBcHAsIHsgbWFuYWdlcjogbWFuYWdlciB9KSwgY29udGFpbmVyKTtcbn0iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGdldENhbnZhc01vdXNlUG9zKGNhbnZhcywgZXYpe1xuICAgIGNvbnN0IGJvdW5kaW5nUmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgKGV2LmNsaWVudFggLSBib3VuZGluZ1JlY3QubGVmdCkgKiAoY2FudmFzLndpZHRoIC8gYm91bmRpbmdSZWN0LndpZHRoKSxcbiAgICAgICAgKGV2LmNsaWVudFkgLSBib3VuZGluZ1JlY3QudG9wKSAqIChjYW52YXMuaGVpZ2h0IC8gYm91bmRpbmdSZWN0LmhlaWdodClcbiAgICApO1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGxEaXIoZXYpe1xuICAgIGlmKGV2LmRlbHRhWSA9PSAwKSByZXR1cm4gMDtcbiAgICBlbHNlIHJldHVybiBldi5kZWx0YVkgLyBNYXRoLmFicyhldi5kZWx0YVkpO1xufVxuXG5jbGFzcyBNb3VzZURvd25UcmFja2Vye1xuICAgIGNvbnN0cnVjdG9yKGNhbnZhcywgaW5pdFRyYWNrQ2FsbGJhY2ssIHRyYWNrQ2FsbGJhY2ssIGlzVHJhY2tpbmdFbmFibGVkID0gZXYgPT4gdHJ1ZSl7XG4gICAgICAgIHRoaXMuaW5pdFRyYWNrQ2FsbGJhY2sgPSBpbml0VHJhY2tDYWxsYmFjaztcbiAgICAgICAgdGhpcy50cmFja0NhbGxiYWNrID0gdHJhY2tDYWxsYmFjaztcbiAgICAgICAgdGhpcy5pc1RyYWNraW5nRW5hYmxlZCA9IGlzVHJhY2tpbmdFbmFibGVkO1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcblxuICAgICAgICB0aGlzLm9uTW91c2VEb3duID0gZXYgPT4ge1xuICAgICAgICAgICAgaWYodGhpcy5pc1RyYWNraW5nRW5hYmxlZChldikpe1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFRyYWNrQ2FsbGJhY2soZXYpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uTW91c2VVcCA9IGV2ID0+IHtcbiAgICAgICAgICAgIC8vdGhpcy50cmFja0NhbGxiYWNrKGV2KTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xuICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Nb3VzZU1vdmUgPSBldiA9PiB7XG4gICAgICAgICAgICB0aGlzLnRyYWNrQ2FsbGJhY2soZXYpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgIH1cbn07XG5cbmNsYXNzIERyYWdNYW5hZ2VyIGV4dGVuZHMgTW91c2VEb3duVHJhY2tlcntcbiAgICBjb25zdHJ1Y3RvcihjYW52YXMsIGRyYWdDYWxsYmFjaywgaXNEcmFnRW5hYmxlZCA9IGV2ID0+IHRydWUpe1xuICAgICAgICBzdXBlcihjYW52YXMsXG4gICAgICAgICAgICBldiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2TW91c2VQb3MgPSBnZXRDYW52YXNNb3VzZVBvcyh0aGlzLmNhbnZhcywgZXYpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGV2ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb3VzZVBvcyA9IGdldENhbnZhc01vdXNlUG9zKHRoaXMuY2FudmFzLCBldik7XG4gICAgICAgICAgICAgICAgZHJhZ0NhbGxiYWNrKG1vdXNlUG9zLnN1YnRyYWN0KHRoaXMucHJldk1vdXNlUG9zKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2TW91c2VQb3MgPSBtb3VzZVBvcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0RyYWdFbmFibGVkKTtcbiAgICAgICAgdGhpcy5wcmV2TW91c2VQb3MgPSBuZXcgVmVjdG9yKDAsIDApO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHNldENhbnZhc1Ntb290aGluZyhjdHgsIGVuYWJsZSl7XG4gICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbiAgICBjdHgubW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xuICAgIGN0eC53ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBlbmFibGU7XG4gICAgY3R4Lm1uSW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYW52YXMoY29udGFpbmVyLCBib3VuZGluZ1JlY3Qpe1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IGJvdW5kaW5nUmVjdC53aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gYm91bmRpbmdSZWN0LmhlaWdodDtcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGNhbnZhcy5zdHlsZS5sZWZ0ID0gYm91bmRpbmdSZWN0LmxlZnQudG9TdHJpbmcoKSArICdweCc7XG4gICAgY2FudmFzLnN0eWxlLnRvcCA9IGJvdW5kaW5nUmVjdC50b3AudG9TdHJpbmcoKSArICdweCc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgcmV0dXJuIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xufVxuXG5mdW5jdGlvbiBnZXRDYW52YXNEaW1zKGN0eCl7XG4gICAgcmV0dXJuIG5ldyBEaW1lbnNpb25zKGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gY29tcGlsZVNoYWRlcihjdHgsIHNyYywgdHlwZSl7XG4gICAgY29uc3Qgc2hhZGVyID0gY3R4LmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICBjdHguc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcbiAgICBjdHguY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgIGlmKCFjdHguZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgY3R4LkNPTVBJTEVfU1RBVFVTKSl7XG4gICAgICAgIGNvbnNvbGUubG9nKHNyYyk7XG4gICAgICAgIHRocm93ICdTaGFkZXIgY29tcGlsZSBlcnJvcjogJyArIGN0eC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XG4gICAgfVxuICAgIHJldHVybiBzaGFkZXI7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0oY3R4LCB2ZXJ0U3JjLCBmcmFnU3JjKXtcbiAgICBjb25zdCBwcm9ncmFtID0gY3R4LmNyZWF0ZVByb2dyYW0oKTtcbiAgICBjdHguYXR0YWNoU2hhZGVyKHByb2dyYW0sIGNvbXBpbGVTaGFkZXIoY3R4LCB2ZXJ0U3JjLCBjdHguVkVSVEVYX1NIQURFUikpO1xuICAgIGN0eC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgY29tcGlsZVNoYWRlcihjdHgsIGZyYWdTcmMsIGN0eC5GUkFHTUVOVF9TSEFERVIpKTtcbiAgICBjdHgubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgcmV0dXJuIHByb2dyYW07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbXB1dGVUZXh0dXJlKGN0eCwgZGltcywgdGV4VHlwZSA9IGN0eC5GTE9BVCwgY29udGVudHMgPSBudWxsKXtcbiAgICBjb25zdCB0ZXggPSBjdHguY3JlYXRlVGV4dHVyZSgpO1xuICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4KTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUlOX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NQUdfRklMVEVSLCBjdHguTkVBUkVTVCk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfUywgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1QsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICBjdHgudGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgY3R4LlJHQkEsIGRpbXMud2lkdGgsIGRpbXMuaGVpZ2h0LCAwLCBjdHguUkdCQSwgdGV4VHlwZSwgY29udGVudHMpO1xuICAgIHJldHVybiB0ZXg7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZCTyhjdHgsIGV4dERCLCB0ZXh0dXJlcyl7XG4gICAgY29uc3QgZmJvID0gY3R4LmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZibyk7XG4gICAgaWYodGV4dHVyZXMubGVuZ3RoID4gMSl7XG4gICAgICAgIGV4dERCLmRyYXdCdWZmZXJzV0VCR0woY29tcHV0ZTFEQXJyYXkodGV4dHVyZXMubGVuZ3RoLFxuICAgICAgICAgICAgaSA9PiBleHREQlsnQ09MT1JfQVRUQUNITUVOVCcgKyBpLnRvU3RyaW5nKCkgKyAnX1dFQkdMJ11cbiAgICAgICAgKSk7XG4gICAgICAgIHRleHR1cmVzLmZvckVhY2goKHRleCwgaSkgPT4ge1xuICAgICAgICAgICAgY3R4LmZyYW1lYnVmZmVyVGV4dHVyZTJEKGN0eC5GUkFNRUJVRkZFUiwgZXh0REJbJ0NPTE9SX0FUVEFDSE1FTlQnICsgaS50b1N0cmluZygpICsgJ19XRUJHTCddLCBjdHguVEVYVFVSRV8yRCwgdGV4LCAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChjdHguRlJBTUVCVUZGRVIsIGN0eC5DT0xPUl9BVFRBQ0hNRU5UMCwgY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVzWzBdLCAwKTtcbiAgICB9XG4gICAgaWYoY3R4LmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoY3R4LkZSQU1FQlVGRkVSKSAhPSBjdHguRlJBTUVCVUZGRVJfQ09NUExFVEUpe1xuICAgICAgICB0aHJvdyAnR0xfRlJBTUVCVUZGRVJfQ09NUExFVEUgZmFpbGVkLic7XG4gICAgfVxuICAgIHJldHVybiBmYm87XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFycmF5QnVmZmVyKGN0eCwgYnVmVHlwZSwgY29udGVudHMpe1xuICAgIGNvbnN0IGJ1ZiA9IGN0eC5jcmVhdGVCdWZmZXIoKTtcbiAgICBjdHguYmluZEJ1ZmZlcihidWZUeXBlLCBidWYpO1xuICAgIGN0eC5idWZmZXJEYXRhKGJ1ZlR5cGUsIGNvbnRlbnRzLCBjdHguU1RBVElDX0RSQVcpO1xuICAgIHJldHVybiBidWY7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVmVydGV4QXR0cmliKGN0eCwgcHJvZ3JhbSwgYXR0cmliTmFtZSwgaXRlbVNpemUsIGJ1Zil7XG4gICAgY29uc3QgYXR0cmliID0gY3R4LmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIGF0dHJpYk5hbWUpO1xuICAgIGN0eC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRyaWIpO1xuICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIGJ1Zik7XG4gICAgY3R4LnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0cmliLCBpdGVtU2l6ZSwgY3R4LkZMT0FULCBmYWxzZSwgMCwgMCk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVGV4dHVyZXMoY3R4LCBwcm9ncmFtLCB0ZXhOYW1lcyl7XG4gICAgdGV4TmFtZXMuZm9yRWFjaCgodGV4TmFtZSwgaSkgPT4ge1xuICAgICAgICBjb25zdCB0ZXhMb2MgPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRleE5hbWUpO1xuICAgICAgICBjdHgudW5pZm9ybTFpKHRleExvYywgaSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVW5pZm9ybXMoY3R4LCBwcm9ncmFtLCB1bmlmb3JtcywgdmFscyl7XG4gICAgdW5pZm9ybXMuZm9yRWFjaCh1bmlmb3JtID0+IHtcbiAgICAgICAgY29uc3QgdW5pZm9ybUxvYyA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybS5uYW1lKTtcbiAgICAgICAgaWYodW5pZm9ybS50eXBlID09ICdpbnQnKXtcbiAgICAgICAgICAgIGN0eC51bmlmb3JtMWkodW5pZm9ybUxvYywgdmFsc1t1bmlmb3JtLm5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHVuaWZvcm0udHlwZSA9PSAnZmxvYXQnKXtcbiAgICAgICAgICAgIGN0eC51bmlmb3JtMWYodW5pZm9ybUxvYywgdmFsc1t1bmlmb3JtLm5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKC9eaXZlY1syLTRdJC9nLnRlc3QodW5pZm9ybS50eXBlKSl7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgdW5pZm9ybS50eXBlWzRdLnRvU3RyaW5nKCkgKyAnaXYnXSh1bmlmb3JtTG9jLCBuZXcgSW50MzJBcnJheSh2YWxzW3VuaWZvcm0ubmFtZV0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKC9edmVjWzItNF0kL2cudGVzdCh1bmlmb3JtLnR5cGUpKXtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyB1bmlmb3JtLnR5cGVbM10udG9TdHJpbmcoKSArICdmdiddKHVuaWZvcm1Mb2MsIG5ldyBGbG9hdDMyQXJyYXkodmFsc1t1bmlmb3JtLm5hbWVdKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYmluZFRleHR1cmVzKGN0eCwgdGV4dHVyZXMpe1xuICAgIHRleHR1cmVzLmZvckVhY2goKHRleHR1cmUsIGkpID0+IHtcbiAgICAgICAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4WydURVhUVVJFJyArIGkudG9TdHJpbmcoKV0pO1xuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmUpO1xuICAgIH0pO1xufVxuXG5jb25zdCBGVUxMU0NSRUVOX1FVQURfUE9TX0FSUkFZID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgLTEuMCwgLTEuMCxcbiAgICAxLjAsIC0xLjAsXG4gICAgMS4wLCAxLjAsXG4gICAgLTEuMCwgMS4wLFxuXSk7XG5cbmNvbnN0IEZVTExTQ1JFRU5fUVVBRF9JTkRFWF9BUlJBWSA9IG5ldyBVaW50MTZBcnJheShbXG4gICAgMCwgMSwgMixcbiAgICAwLCAyLCAzXG5dKTtcblxuY29uc3QgRlVMTFNDUkVFTl9RVUFEX05VTV9WRVJUSUNFUyA9IDY7XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IFJFRCA9IG5ldyBDb2xvcigyNTUsIDAsIDApO1xuY29uc3QgR1JFRU4gPSBuZXcgQ29sb3IoMCwgMjU1LCAwKTtcbmNvbnN0IEJMVUUgPSBuZXcgQ29sb3IoMCwgMCwgMjU1KTtcbmNvbnN0IFdISVRFID0gbmV3IENvbG9yKDI1NSwgMjU1LCAyNTUpO1xuXG5jbGFzcyBDb250b3VyZXJNYW5hZ2Vye1xuICAgIGNvbnN0cnVjdG9yKGRyYXdGdW5jKXtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IG5ldyBTY2FsYWJsZVZpZXdwb3J0TWFuYWdlcihcbiAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgMCksXG4gICAgICAgICAgICAwLjAxXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuem9vbVNlbnNpdGl2aXR5ID0gMC4zO1xuICAgICAgICB0aGlzLmNvbnRvdXJTcGFjaW5nID0gMS4wO1xuICAgIH1cbiAgICBjaGFuZ2VEcmF3RnVuYyhkcmF3RnVuYywgaW5jbHVkZVNyYywgaXNBbmltYXRlZCA9IGZhbHNlKXtcbiAgICAgICAgY29uc3QgY3JlYXRlRmllbGRLZXJuZWwgPSBjb29yZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZEZ1bmMgPVxuYHZlYzIgY1BvcyA9ICh2ZWMyKHRocmVhZElkKSAqIHVTY2FsZSkgKyB1UG9zO1xudmVjMiByZXM7XG5gICtcbiAgICAgICAgICAgIGRyYXdGdW5jLnRyaW0oKSArICdcXG4nICtcbi8vYGdsX0ZyYWdEYXRhWzBdID0gdmVjNChcbi8vICAgIHJlcyxcbi8vICAgIDAuMCwgMC4wXG4vLyk7XG5gZ2xfRnJhZ0RhdGFbMF0gPSBwYWNrRmxvYXQocmVzLmAgKyBjb29yZCArIGApO1xuYDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdwZ3B1TWFuYWdlci5jcmVhdGVLZXJuZWwoXG4gICAgICAgICAgICAgICAgZmllbGRGdW5jLCBbXSwgdGhpcy5kaW1zLCBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndVNjYWxlJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmVjMicsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndVBvcydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0uY29uY2F0KGlzQW5pbWF0ZWQgPyBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndGltZSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0gOiBbXSksIDEsIEdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREUgKyBpbmNsdWRlU3JjLnRyaW0oKSArICdcXG5cXG4nXG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZpZWxkS2VybmVsWCA9IGNyZWF0ZUZpZWxkS2VybmVsKCd4Jyk7XG4gICAgICAgIHRoaXMuZmllbGRLZXJuZWxZID0gY3JlYXRlRmllbGRLZXJuZWwoJ3knKTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0LnNjYWxlID0gMTAuMCAvIHRoaXMuZGltcy53aWR0aDtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5wb3MgPSBuZXcgVmVjdG9yKC10aGlzLmRpbXMud2lkdGgsIC10aGlzLmRpbXMuaGVpZ2h0KS5kaXZpZGUoMi4wKS5tdWx0aXBseSh0aGlzLnZpZXdwb3J0LnNjYWxlKTtcbiAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyA9IDEuMDtcblxuICAgICAgICB0aGlzLmlzQW5pbWF0ZWQgPSBpc0FuaW1hdGVkO1xuICAgIH1cbiAgICB1c2VDYW52YXMoY2FudmFzKXtcbiAgICAgICAgdGhpcy5jdHggPSBHUEdQVU1hbmFnZXIuZ2V0Q2FudmFzQ29udGV4dChjYW52YXMpO1xuICAgICAgICB0aGlzLmdwZ3B1TWFuYWdlciA9IG5ldyBHUEdQVU1hbmFnZXIodGhpcy5jdHgsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5kaW1zID0gZ2V0Q2FudmFzRGltcyh0aGlzLmN0eCk7XG5cbiAgICAgICAgdGhpcy5wbG90S2VybmVsID0gdGhpcy5ncGdwdU1hbmFnZXIuY3JlYXRlR3JhcGhpY2FsS2VybmVsKFxuICAgICAgICAgICAgQ29udG91cmVyTWFuYWdlci5wbG90RnVuYywgWyd1RmllbGRYJywgJ3VGaWVsZFknXSwgdGhpcy5kaW1zLCBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndUNvbnRvdXJTcGFjaW5nJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sIEdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREUgKyBDb250b3VyZXJNYW5hZ2VyLkZJRUxEX0NIRUNLX0lOQ0xVREVcbiAgICAgICAgKTtcbiAgICB9XG4gICAgZGVzdHJveUNvbnRleHQoKXtcbiAgICAgICAgdGhpcy5jdHguY2FudmFzLndpZHRoID0gMTtcbiAgICAgICAgdGhpcy5jdHguY2FudmFzLmhlaWdodCA9IDE7XG4gICAgfVxuICAgIGNoYW5nZVpvb20oY2hhbmdlQW1vdW50LCB6b29tUG9pbnQgPSBuZXcgVmVjdG9yKHRoaXMuZGltcy53aWR0aCAvIDIsIHRoaXMuZGltcy5oZWlnaHQgLyAyKSl7XG4gICAgICAgIHRoaXMudmlld3BvcnQuc2NhbGVBdFBvaW50KFxuICAgICAgICAgICAgLWNoYW5nZUFtb3VudCAqIHRoaXMuem9vbVNlbnNpdGl2aXR5LFxuICAgICAgICAgICAgem9vbVBvaW50XG4gICAgICAgICk7XG4gICAgfVxuICAgIGNoYW5nZUNvbnRvdXJTcGFjaW5nKGNoYW5nZUFtb3VudCl7XG4gICAgICAgIHRoaXMuY29udG91clNwYWNpbmcgKj0gTWF0aC5leHAoY2hhbmdlQW1vdW50ICogdGhpcy56b29tU2Vuc2l0aXZpdHkpO1xuICAgIH1cbiAgICB0cmFuc2xhdGUodHJhbnNsYXRlQW1vdW50KXtcbiAgICAgICAgdGhpcy52aWV3cG9ydC50cmFuc2xhdGUodHJhbnNsYXRlQW1vdW50KTtcbiAgICB9XG4gICAgZHJhd0NvbnRvdXJzKHRpbWUgPSAwKXtcbiAgICAgICAgY29uc3QgdW5pZm9ybUFzc2lnbm1lbnRzID0ge1xuICAgICAgICAgICAgdVNjYWxlOiB0aGlzLnZpZXdwb3J0LnNjYWxlLFxuICAgICAgICAgICAgdVBvczogdGhpcy52aWV3cG9ydC5wb3MudG9BcnJheSgpXG4gICAgICAgIH07XG4gICAgICAgIGlmKHRoaXMuaXNBbmltYXRlZCl7XG4gICAgICAgICAgICB1bmlmb3JtQXNzaWdubWVudHNbJ3RpbWUnXSA9IHRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmllbGRSZXN1bHRYID0gdGhpcy5maWVsZEtlcm5lbFgucnVuKFtdLCB0aGlzLmRpbXMsIHVuaWZvcm1Bc3NpZ25tZW50cywgZmFsc2UpO1xuICAgICAgICBjb25zdCBmaWVsZFJlc3VsdFkgPSB0aGlzLmZpZWxkS2VybmVsWS5ydW4oW10sIHRoaXMuZGltcywgdW5pZm9ybUFzc2lnbm1lbnRzLCBmYWxzZSk7XG4gICAgICAgIHRoaXMucGxvdEtlcm5lbC5ydW4oW2ZpZWxkUmVzdWx0WC50ZXh0dXJlc1swXSwgZmllbGRSZXN1bHRZLnRleHR1cmVzWzBdXSwgdGhpcy5kaW1zLCB7XG4gICAgICAgICAgICB1Q29udG91clNwYWNpbmc6IHRoaXMuY29udG91clNwYWNpbmdcbiAgICAgICAgfSk7XG4gICAgICAgIGZpZWxkUmVzdWx0WC5kaXNwb3NlKCk7XG4gICAgICAgIGZpZWxkUmVzdWx0WS5kaXNwb3NlKCk7XG4gICAgfVxufTtcblxuQ29udG91cmVyTWFuYWdlci5wbG90RnVuYyA9XG5gaXZlYzIgbGluZUluZGV4ID0gaXZlYzIoZmxvb3IodmVjMihcbiAgICB1bnBhY2tGbG9hdCh0ZXh0dXJlMkQodUZpZWxkWCwgdkNvb3JkKSksXG4gICAgdW5wYWNrRmxvYXQodGV4dHVyZTJEKHVGaWVsZFksIHZDb29yZCkpXG4pIC8gdUNvbnRvdXJTcGFjaW5nKSk7XG52ZWMyIGNtcEZpZWxkID0gdmVjMihsaW5lSW5kZXgpICogdUNvbnRvdXJTcGFjaW5nO1xuaXZlYzIgZHJhd0RhdGEgPSBpdmVjMihncmVhdGVyVGhhbkVxdWFsKFxuICAgIGZpZWxkQ2hlY2sodGhyZWFkSWQsIGl2ZWMyKDAsIDEpLCBjbXBGaWVsZCkgK1xuICAgIGZpZWxkQ2hlY2sodGhyZWFkSWQsIGl2ZWMyKDEsIDApLCBjbXBGaWVsZCkgK1xuICAgIGZpZWxkQ2hlY2sodGhyZWFkSWQsIGl2ZWMyKDAsIC0xKSwgY21wRmllbGQpICtcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigtMSwgMCksIGNtcEZpZWxkKSxcbiAgICBpdmVjMigxKSkpO1xuaWYoYWxsKGVxdWFsKGRyYXdEYXRhLCBpdmVjMigwKSkpKXtcbiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgMS4wKTtcbn1cbmVsc2V7XG4gICAgdmVjMiBpc0F4aXMgPSB2ZWMyKGVxdWFsKGxpbmVJbmRleCwgaXZlYzIoMCkpKTtcbiAgICB2ZWMyIGxpbmVDb2xvciA9IHZlYzIoZHJhd0RhdGEpICogKDEuMCAtIDAuNSAqIGlzQXhpcyk7XG4gICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KGxpbmVDb2xvci54LCAwLjUgKiBkb3QodmVjMihkcmF3RGF0YSksIGlzQXhpcyksIGxpbmVDb2xvci55LCAxLjApO1xufVxuYDtcblxuQ29udG91cmVyTWFuYWdlci5GSUVMRF9DSEVDS19JTkNMVURFID1cbmB2ZWMyIGdldEZpZWxkKGl2ZWMyIHBvcyl7XG4gICAgcmV0dXJuIHZlYzIoXG4gICAgICAgIHVucGFja0Zsb2F0KGFyckdldCh1RmllbGRYLCBwb3MpKSxcbiAgICAgICAgdW5wYWNrRmxvYXQoYXJyR2V0KHVGaWVsZFksIHBvcykpXG4gICAgKTtcbn1cblxuaXZlYzIgZmllbGRDaGVjayhpdmVjMiBjUG9zLCBpdmVjMiBkaXIsIHZlYzIgY21wRmllbGQpe1xuICAgIGl2ZWMyIG9Qb3MgPSBjUG9zICsgZGlyO1xuICAgIGlmKGFsbChncmVhdGVyVGhhbkVxdWFsKG9Qb3MsIGl2ZWMyKDApKSkgJiYgYWxsKGxlc3NUaGFuKG9Qb3MsIHVEaW1zKSkpe1xuICAgICAgICByZXR1cm4gaXZlYzIobGVzc1RoYW4oZ2V0RmllbGQob1BvcyksIGNtcEZpZWxkKSk7XG4gICAgfVxuICAgIGVsc2UgcmV0dXJuIGl2ZWMyKDApO1xufVxuXG5gO1xuXG5jbGFzcyBDb250b3VyZXJBbmltYXRpb25NYW5hZ2Vye1xuICAgIGNvbnN0cnVjdG9yKG1hbmFnZXIsIG51bUZyYW1lcyA9IDEwMDApe1xuICAgICAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMubnVtRnJhbWVzID0gbnVtRnJhbWVzO1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XG4gICAgICAgIHRoaXMub25TdG9wQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkxvb3AgPSB0aGlzLmFuaW1hdGlvbkxvb3AuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgc3RhcnQoc3RhcnRGcmFtZSA9IDAsIG9uRHJhdyA9IG51bGwpe1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IHN0YXJ0RnJhbWU7XG4gICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLm9uRHJhdyA9IG9uRHJhdztcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkxvb3ApO1xuICAgIH1cbiAgICBhbmltYXRpb25Mb29wKHRpbWVzdGFtcCl7XG4gICAgICAgIGlmKHRoaXMuaXNBbmltYXRpbmcpe1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmRyYXdDb250b3Vycyh0aGlzLmN1cnJlbnRGcmFtZSAvIHRoaXMubnVtRnJhbWVzKTtcbiAgICAgICAgICAgIGlmKHRoaXMub25EcmF3ICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIHRoaXMub25EcmF3KHRoaXMuY3VycmVudEZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gKHRoaXMuY3VycmVudEZyYW1lICsgMSkgJSB0aGlzLm51bUZyYW1lcztcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25Mb29wKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgaWYodGhpcy5vblN0b3BDYWxsYmFjayAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcChvblN0b3BDYWxsYmFjayA9IG51bGwpe1xuICAgICAgICBpZih0aGlzLmlzQW5pbWF0aW5nKXtcbiAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMub25TdG9wQ2FsbGJhY2sgPSBvblN0b3BDYWxsYmFjaztcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgaWYob25TdG9wQ2FsbGJhY2sgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgb25TdG9wQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGluaXQoKXtcbiAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENvbnRvdXJlck1hbmFnZXIoKTtcbiAgICBpbml0UmVuZGVyKG1hbmFnZXIpO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBDYW52YXNEaXNwbGF5UGFuZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgICBjb21wb25lbnREaWRNb3VudCgpe1xuICAgICAgICBpZignb25Nb3VudENhbGxiYWNrJyBpbiB0aGlzLnByb3BzKXtcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbk1vdW50Q2FsbGJhY2soY2FudmFzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpe1xuICAgICAgICBpZignb25EaXNtb3VudENhbGxiYWNrJyBpbiB0aGlzLnByb3BzKXtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25EaXNtb3VudENhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCl7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8Y2FudmFzIHdpZHRoPXt0aGlzLnByb3BzLmRpbXMud2lkdGh9IGhlaWdodD17dGhpcy5wcm9wcy5kaW1zLmhlaWdodH0gc3R5bGU9e3t3aWR0aDogJzEwMCUnfX0+PC9jYW52YXM+XG4gICAgICAgICk7XG4gICAgfVxufTtcbkNhbnZhc0Rpc3BsYXlQYW5lLnByb3BUeXBlcyA9IHtcbiAgICBkaW1zOiBSZWFjdC5Qcm9wVHlwZXMuaW5zdGFuY2VPZihEaW1lbnNpb25zKS5pc1JlcXVpcmVkLFxuICAgIG9uTW91bnRDYWxsYmFjazogUmVhY3QuUHJvcFR5cGVzLmZ1bmNcbn07XG5cbmNsYXNzIERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xuICAgIHJlbmRlcigpe1xuICAgICAgICByZXR1cm4gPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPXsnbGlzdC1ncm91cC1pdGVtJyArICh0aGlzLnByb3BzLnNlbGVjdGVkID8gJyBhY3RpdmUnIDogJycpfSBvbkNsaWNrPXsoKSA9PiB7dGhpcy5wcm9wcy5vbkNsaWNrKHRoaXMucHJvcHMuZnVuY05hbWUpO319Pnt0aGlzLnByb3BzLmRpc3BsYXlOYW1lfTwvYnV0dG9uPjtcbiAgICB9XG59O1xuXG5jbGFzcyBEcmF3RnVuY3Rpb25TZWxlY3RvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcyl7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNlbGVjdGVkRnVuYzogRHJhd0Z1bmN0aW9uU2VsZWN0b3IuREVGQVVMVF9GVU5DXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2sgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIHJlbmRlcigpe1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAge09iamVjdC5rZXlzKERlbW9GdW5jdGlvbnMuZnVuY3Rpb25zKS5tYXAoZnVuYyA9PlxuICAgICAgICAgICAgICAgICAgICA8RHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24gZGlzcGxheU5hbWU9e0RlbW9GdW5jdGlvbnMuZnVuY3Rpb25zW2Z1bmNdLmRpc3BsYXlOYW1lfSBrZXk9e2Z1bmN9IGZ1bmNOYW1lPXtmdW5jfSBzZWxlY3RlZD17ZnVuYyA9PSB0aGlzLnN0YXRlLnNlbGVjdGVkRnVuY30gb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30gLz5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuICAgIGhhbmRsZUNsaWNrKGZ1bmNOYW1lKXtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzZWxlY3RlZEZ1bmM6IGZ1bmNOYW1lXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb3BzLm9uU2VsZWN0KGZ1bmNOYW1lKTtcbiAgICB9XG59O1xuRHJhd0Z1bmN0aW9uU2VsZWN0b3IuREVGQVVMVF9GVU5DID0gJ2F0dHJhY3RSZXBlbCc7XG5cbmNsYXNzIEFjZUVkaXRvciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgICBjb21wb25lbnREaWRNb3VudCgpe1xuICAgICAgICBjb25zdCBlZGl0b3JEaXYgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBhY2UuZWRpdChlZGl0b3JEaXYpO1xuICAgICAgICB0aGlzLmVkaXRvci5zZXRUaGVtZSgnYWNlL3RoZW1lL21vbm9rYWknKTtcbiAgICAgICAgdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFVzZVdvcmtlcihmYWxzZSk7XG4gICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCdhY2UvbW9kZS9nbHNsJyk7XG4gICAgICAgIHRoaXMuZWRpdG9yLiRibG9ja1Njcm9sbGluZyA9IEluZmluaXR5O1xuICAgICAgICB0aGlzLmVkaXRvci5zZXRGb250U2l6ZSgxOCk7XG4gICAgICAgIHRoaXMuZWRpdG9yLnNldE9wdGlvbnMoe1xuICAgICAgICAgICAgbWF4TGluZXM6IEluZmluaXR5XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VXNlV3JhcE1vZGUodHJ1ZSk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCl7XG4gICAgICAgIHRoaXMuZWRpdG9yLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgc2V0VmFsdWUobmV3Q29udGVudHMpe1xuICAgICAgICB0aGlzLmVkaXRvci5zZXRWYWx1ZShuZXdDb250ZW50cyk7XG4gICAgICAgIHRoaXMuZWRpdG9yLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfVxuICAgIGdldFZhbHVlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuZ2V0VmFsdWUoKTtcbiAgICB9XG4gICAgcmVuZGVyKCl7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7aGVpZ2h0OiB0aGlzLnByb3BzLmhlaWdodC50b1N0cmluZygpICsgJ3B4J319PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufTtcblxuY2xhc3MgQ29udG91cmVyQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50e1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKXtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIgPSBuZXcgQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlcih0aGlzLnByb3BzLm1hbmFnZXIpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaXNBbmltYXRlZDogZmFsc2UsXG4gICAgICAgICAgICBpc0FuaW1hdGluZzogZmFsc2UsXG4gICAgICAgICAgICBjdXJyZW50RnJhbWU6IDAsXG4gICAgICAgICAgICBudW1GcmFtZXM6IDAsXG4gICAgICAgICAgICBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IGZhbHNlLFxuICAgICAgICAgICAgbnVtRnJhbWVzSW5wdXRWYWw6ICcwJyxcbiAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogJydcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VDYW52YXMgPSB0aGlzLnVzZUNhbnZhcy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNldERyYXdGdW5jID0gdGhpcy5zZXREcmF3RnVuYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uRHJhd0Z1bmNTZWxlY3QgPSB0aGlzLm9uRHJhd0Z1bmNTZWxlY3QuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWRyYXcgPSB0aGlzLnJlZHJhdy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNoYW5nZVpvb21BbmRSZWRyYXcgPSB0aGlzLmNoYW5nZVpvb21BbmRSZWRyYXcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdyA9IHRoaXMuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2xhdGVBbmRSZWRyYXcgPSB0aGlzLnRyYW5zbGF0ZUFuZFJlZHJhdy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZVBsb3RDbGljayA9IHRoaXMuaGFuZGxlUGxvdENsaWNrLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCl7XG4gICAgICAgIHRoaXMub25EcmF3RnVuY1NlbGVjdChEcmF3RnVuY3Rpb25TZWxlY3Rvci5ERUZBVUxUX0ZVTkMpO1xuICAgIH1cbiAgICByZW5kZXIoKXtcbiAgICAgICAgY29uc3QgQ0FOVkFTX0RJTVMgPSBuZXcgRGltZW5zaW9ucyg2NDAsIDQ4MCk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiIGNsYXNzTmFtZT1cImNvbC1sZy0xMlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZS1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgxPkZ1biB3aXRoIENvbnRvdXJzPC9oMT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndlbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Yj5EcmFnPC9iPiB0byBtb3ZlIHRoZSBncmFwaCwgPGI+c2Nyb2xsPC9iPiB0byB6b29tLCBhbmQgPGI+Q3RybCArIHNjcm9sbDwvYj4gdG8gY2hhbmdlIHRoZSBjb250b3VyIGRlbnNpdHkuXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RpZnkgPGI+PGEgaHJlZj1cIiNcIiBvbkNsaWNrPXsoZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm51bUZyYW1lc0lucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19PkZyYW1lczwvYT48L2I+IChudW1iZXIgb2YgZnJhbWVzKSwgdGhlbiBjbGljayA8Yj5QbG90PC9iPiB0byBjaGFuZ2UgdGhlIGFuaW1hdGlvbiBzcGVlZC5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIFVzZSB0aGUgPGI+c2xpZGVyPC9iPiB0byBleHBsb3JlIHRoZSBhbmltYXRpb24gaW4gbW9yZSBkZXRhaWwuXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICBQbG90IHlvdXIgb3duIGZ1bmN0aW9ucyB3aXRoIHRoZSA8Yj50ZXh0IGVkaXRvcnM8L2I+IGJlbG93LlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgSnVzdCBlbmpveSB0aGUgcHJldHR5IGFuaW1hdGlvbnMsIG9yIDxiPjxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20va3Jhd3RoZWtyb3cvY29udG91cmVyXCI+Y2xpY2sgaGVyZTwvYT48L2I+IHRvIGxlYXJuIG1vcmUuXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Yj5Ob3RlOiBUaGlzIGFwcCB1c2VzIFdlYkdMLCBzbyBpdCBuZWVkcyBhIHN1ZmZpY2llbnRseSBtb2Rlcm4gYnJvd3NlciBhbmQgR1BVIHRvIHdvcmsuPC9iPlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPERyYXdGdW5jdGlvblNlbGVjdG9yIG9uU2VsZWN0PXt0aGlzLm9uRHJhd0Z1bmNTZWxlY3R9Lz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wteHMtOFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHJvbGU9XCJ0b29sYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiIHJvbGU9XCJncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMuY2hhbmdlWm9vbUFuZFJlZHJhdygxKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXpvb20taW5cIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy5jaGFuZ2Vab29tQW5kUmVkcmF3KC0xKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXpvb20tb3V0XCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcoLTEpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KDEpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tbWludXNcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy50cmFuc2xhdGVBbmRSZWRyYXcobmV3IFZlY3RvcigxLCAwKSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1sZWZ0XCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoMCwgMSkpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctdXBcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy50cmFuc2xhdGVBbmRSZWRyYXcobmV3IFZlY3RvcigwLCAtMSkpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctZG93blwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKC0xLCAwKSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1yaWdodFwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICghdGhpcy5zdGF0ZS5pc0FuaW1hdGVkIHx8ICF0aGlzLnN0YXRlLmlzQW5pbWF0aW5nKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdidG4nLCAnYnRuLWRlZmF1bHQnLCB7ZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWR9KX0gb25DbGljaz17ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUuaXNBbmltYXRlZCAmJiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGluZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc3RhcnQodGhpcy5zdGF0ZS5jdXJyZW50RnJhbWUsIGN1cnJlbnRGcmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogY3VycmVudEZyYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcGxheVwiPjwvc3Bhbj48L2J1dHRvbj4gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYnRuJywgJ2J0bi1kZWZhdWx0Jywge2Rpc2FibGVkOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkfSl9IG9uQ2xpY2s9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN0YXRlLmlzQW5pbWF0ZWQgJiYgdGhpcy5zdGF0ZS5pc0FuaW1hdGluZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc3RvcCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXBhdXNlXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhzLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBtaW49XCIwXCIgbWF4PXsodGhpcy5zdGF0ZS5udW1GcmFtZXMgLSAxKS50b1N0cmluZygpfSB2YWx1ZT17dGhpcy5zdGF0ZS5jdXJyZW50RnJhbWV9IHN0eWxlPXt7bWFyZ2luVG9wOiAnNXB4J319IG9uQ2hhbmdlPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZyYW1lOiBwYXJzZUludChlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN0YXRlLmlzQW5pbWF0aW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0b3AoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKHRoaXMuc3RhdGUuY3VycmVudEZyYW1lIC8gdGhpcy5zdGF0ZS5udW1GcmFtZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3Vycyh0aGlzLnN0YXRlLmN1cnJlbnRGcmFtZSAvIHRoaXMuc3RhdGUubnVtRnJhbWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSAvPiA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luVG9wOiAnMTBweCd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FudmFzRGlzcGxheVBhbmUgZGltcz17Q0FOVkFTX0RJTVN9IG9uTW91bnRDYWxsYmFjaz17Y2FudmFzID0+IHt0aGlzLnVzZUNhbnZhcyhjYW52YXMpO319IG9uRGlzbW91bnRDYWxsYmFjaz17KCkgPT4ge3RoaXMucHJvcHMubWFuYWdlci5kZXN0cm95Q29udGV4dCgpO319IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5QbG90IEZ1bmN0aW9uPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wteHMtOVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0taW5saW5lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiIHN0eWxlPXt7bWFyZ2luUmlnaHQ6ICcxMHB4J319IHJvbGU9XCJncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYnRuJywgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgPyAnYnRuLWRlZmF1bHQnIDogJ2J0bi1wcmltYXJ5JywgeydhY3RpdmUnOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGV9KX0gb25DbGljaz17IGUgPT4geyB0aGlzLnNldFN0YXRlKHtpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IGZhbHNlfSk7fSB9PkdyYXBoPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdidG4nLCB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSA/ICdidG4tcHJpbWFyeScgOiAnYnRuLWRlZmF1bHQnLCB7J2FjdGl2ZSc6IHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlfSl9IG9uQ2xpY2s9eyBlID0+IHsgdGhpcy5zZXRTdGF0ZSh7aXNBbmltYXRlZFNlbGVjdFN0YXRlOiB0cnVlfSk7fSB9PkFuaW1hdGlvbjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZm9ybS1ncm91cCcsIHsnaGFzLWVycm9yJzogdGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpfSl9IHN0eWxlPXt7ZGlzcGxheTogJ2lubGluZS1ibG9jaycsIG1hcmdpbkJvdHRvbTogMCwgdmVydGljYWxBbGlnbjogJ21pZGRsZSd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlucHV0LWdyb3VwLWFkZG9uXCI+RnJhbWVzPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIiB2YWx1ZT17dGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbH0gZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZX0gcmVmPXtpbnB1dCA9PiB7dGhpcy5udW1GcmFtZXNJbnB1dCA9IGlucHV0O319IG9uQ2hhbmdlPXtlID0+IHt0aGlzLnNldFN0YXRlKHtudW1GcmFtZXNJbnB1dFZhbDogZS50YXJnZXQudmFsdWV9KTt9fSBzdHlsZT17e3dpZHRoOiAnNjBweCd9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiIHN0eWxlPXt7ZGlzcGxheTogdGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpID8gJ2lubGluZS1ibG9jaycgOiAnbm9uZScsIG1hcmdpbkxlZnQ6ICcxMHB4J319Pk11c3QgYmUgYW4gaW50ZWdlcjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhzLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1ibG9jayBwdWxsLXJpZ2h0XCIgc3R5bGU9e3t3aWR0aDogJzgwcHgnfX0gZGlzYWJsZWQ9e3RoaXMuaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKX0gcmVmPXtidXR0b24gPT4ge3RoaXMucGxvdEJ1dHRvbiA9IGJ1dHRvbjt9fSBvbkNsaWNrPXt0aGlzLmhhbmRsZVBsb3RDbGlja30+UGxvdDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yID09ICcnID8gbnVsbCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZb3VyIGNvZGUgZmFpbGVkIHRvIGNvbXBpbGUgd2l0aCB0aGUgZm9sbG93aW5nIGVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0aGlzLnN0YXRlLnNoYWRlckNvbXBpbGVFcnJvci50cmltKCkuc3BsaXQoJ1xcbicpLm1hcCgobGluZSwgaW5kZXgpID0+IDxzcGFuIGtleT17aW5kZXh9PntsaW5lfTxiciAvPjwvc3Bhbj4pIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgKHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yLmluZGV4T2YoJ3dyb25nIG9wZXJhbmQgdHlwZXMnKSAhPSAtMSkgPyA8cD48Yj5Ob3RlIHRoYXQgR0xTTCBFUyBkb2VzIG5vdCBpbXBsaWNpdGx5IGNhc3QgaW50cyB0byBmbG9hdHMuIFdyaXRlIG51bWJlcnMgbGlrZSBcIjIzXCIgYXMgXCIyMy4wXCIuPC9iPjwvcD4gOiBudWxsIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgKHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yLmluZGV4T2YoJ2dsX0ZyYWdEYXRhJykgIT0gLTEpID8gPHA+PGI+RGlkIHlvdSBmb3JnZXQgYSBzZW1pY29sb24gb24gdGhlIGxhc3QgbGluZT88L2I+PC9wPiA6IG51bGwgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpZXcgdGhlIGNvbnNvbGUgdG8gc2VlIHRoZSBmdWxsIGdlbmVyYXRlZCBXZWJHTCBzaGFkZXIgY29kZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5Ub3A6ICcxMHB4J319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2VFZGl0b3IgaGVpZ2h0PVwiMjAwXCIga2V5PVwiZHJhd0Z1bmNFZGl0b3JcIiByZWY9eyBlZGl0b3IgPT4ge3RoaXMuZHJhd0Z1bmNFZGl0b3IgPSBlZGl0b3I7fSB9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5MaWJyYXJ5IEZ1bmN0aW9uczwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luQm90dG9tOiAnMTBweCd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNlRWRpdG9yIGhlaWdodD1cIjIwMFwiIGtleT1cImluY2x1ZGVTcmNFZGl0b3JcIiByZWY9eyBlZGl0b3IgPT4ge3RoaXMuaW5jbHVkZVNyY0VkaXRvciA9IGVkaXRvcjt9IH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbiAgICB1c2VDYW52YXMoY2FudmFzKXtcbiAgICAgICAgY29uc3QgZHJhZ01hbmFnZXIgPSBuZXcgRHJhZ01hbmFnZXIoY2FudmFzLFxuICAgICAgICAgICAgZHJhZ1ZlYyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLnZpZXdwb3J0LnRyYW5zbGF0ZShkcmFnVmVjKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGV2ID0+IHRydWVcbiAgICAgICAgKTtcblxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBldiA9PiB7XG4gICAgICAgICAgICBpZihldi5jdHJsS2V5KXtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KGdldFNjcm9sbERpcihldikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlWm9vbSgtZ2V0U2Nyb2xsRGlyKGV2KSwgZ2V0Q2FudmFzTW91c2VQb3MoY2FudmFzLCBldikpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIudXNlQ2FudmFzKGNhbnZhcyk7XG4gICAgfVxuICAgIGlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSAmJiB0aGlzLnN0YXRlLm51bUZyYW1lc0lucHV0VmFsLnNwbGl0KCcnKS5zb21lKGMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGMuY2hhckNvZGVBdCgpIDwgJzAnLmNoYXJDb2RlQXQoKSB8fCBjLmNoYXJDb2RlQXQoKSA+ICc5Jy5jaGFyQ29kZUF0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVQbG90Q2xpY2soZSl7XG4gICAgICAgIHRoaXMuc2V0RHJhd0Z1bmModGhpcy5kcmF3RnVuY0VkaXRvci5nZXRWYWx1ZSgpLCB0aGlzLmluY2x1ZGVTcmNFZGl0b3IuZ2V0VmFsdWUoKSwgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gcGFyc2VJbnQodGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbCkgOiAwKTtcbiAgICB9XG4gICAgcmVkcmF3KCl7XG4gICAgICAgIGlmKHRoaXMuc3RhdGUuaXNBbmltYXRlZCl7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKHRoaXMuc3RhdGUuY3VycmVudEZyYW1lIC8gdGhpcy5zdGF0ZS5udW1GcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hhbmdlWm9vbUFuZFJlZHJhdyhjaGFuZ2VBbW91bnQpe1xuICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlWm9vbShjaGFuZ2VBbW91bnQpO1xuICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH1cbiAgICBjaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdyhjaGFuZ2VBbW91bnQpe1xuICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlQ29udG91clNwYWNpbmcoY2hhbmdlQW1vdW50KTtcbiAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICB9XG4gICAgdHJhbnNsYXRlQW5kUmVkcmF3KHRyYW5zbGF0ZUFtb3VudCl7XG4gICAgICAgIHRoaXMucHJvcHMubWFuYWdlci50cmFuc2xhdGUodHJhbnNsYXRlQW1vdW50Lm11bHRpcGx5KDUwLjApKTtcbiAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICB9XG4gICAgc2V0RHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMsIGlzQW5pbWF0ZWQgPSBmYWxzZSwgbnVtRnJhbWVzID0gMCl7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5jaGFuZ2VEcmF3RnVuYyhkcmF3RnVuYywgaW5jbHVkZVNyYywgaXNBbmltYXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2goZXJyKXtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogZXJyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGlzQW5pbWF0ZWQgJiYgbnVtRnJhbWVzID09IDApe1xuICAgICAgICAgICAgbnVtRnJhbWVzID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNBbmltYXRlZDogaXNBbmltYXRlZCxcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBpc0FuaW1hdGVkLFxuICAgICAgICAgICAgY3VycmVudEZyYW1lOiAwLFxuICAgICAgICAgICAgbnVtRnJhbWVzOiBudW1GcmFtZXMsXG4gICAgICAgICAgICBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IGlzQW5pbWF0ZWQsXG4gICAgICAgICAgICBudW1GcmFtZXNJbnB1dFZhbDogbnVtRnJhbWVzLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBzaGFkZXJDb21waWxlRXJyb3I6ICcnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIubnVtRnJhbWVzID0gbnVtRnJhbWVzO1xuICAgICAgICBpZihpc0FuaW1hdGVkKXtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdG9wKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc3RhcnQoMCwgY3VycmVudEZyYW1lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWU6IGN1cnJlbnRGcmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc3RvcCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3VycygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EcmF3RnVuY1NlbGVjdChmdW5jKXtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRGdW5jID0gRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnNbZnVuY107XG4gICAgICAgIHRoaXMuZHJhd0Z1bmNFZGl0b3Iuc2V0VmFsdWUoc2VsZWN0ZWRGdW5jLmRyYXdGdW5jLnRyaW0oKSk7XG4gICAgICAgIHRoaXMuaW5jbHVkZVNyY0VkaXRvci5zZXRWYWx1ZShzZWxlY3RlZEZ1bmMuaW5jbHVkZVNyYy50cmltKCkpO1xuICAgICAgICBpZihzZWxlY3RlZEZ1bmMuaXNBbmltYXRlZCl7XG4gICAgICAgICAgICB0aGlzLnNldERyYXdGdW5jKHNlbGVjdGVkRnVuYy5kcmF3RnVuYywgc2VsZWN0ZWRGdW5jLmluY2x1ZGVTcmMsIHNlbGVjdGVkRnVuYy5pc0FuaW1hdGVkLCBzZWxlY3RlZEZ1bmMubnVtRnJhbWVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5zZXREcmF3RnVuYyhzZWxlY3RlZEZ1bmMuZHJhd0Z1bmMsIHNlbGVjdGVkRnVuYy5pbmNsdWRlU3JjKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGluaXRSZW5kZXIobWFuYWdlcil7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZGV4Q29udGFpbmVyJyk7XG4gICAgUmVhY3RET00ucmVuZGVyKFxuICAgICAgICA8Q29udG91cmVyQXBwIG1hbmFnZXI9e21hbmFnZXJ9IC8+LFxuICAgICAgICBjb250YWluZXJcbiAgICApO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBHUEdQVUtlcm5lbFJlc3VsdHtcbiAgICBjb25zdHJ1Y3RvcihjdHgsIGZibywgdGV4dHVyZXMpe1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5mYm8gPSBmYm87XG4gICAgICAgIHRoaXMudGV4dHVyZXMgPSB0ZXh0dXJlcztcbiAgICB9XG4gICAgZGlzcG9zZSgpe1xuICAgICAgICBpZih0aGlzLmZibyAhPSBudWxsKXtcbiAgICAgICAgICAgIHRoaXMuY3R4LmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuZmJvKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHR1cmVzLmZvckVhY2godGV4dHVyZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN0eC5kZWxldGVUZXh0dXJlKHRleHR1cmUpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5jbGFzcyBHUEdQVUtlcm5lbHtcbiAgICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBwcm9ncmFtLCBwYXJhbXMgPSBbXSwgbnVtT3V0cHV0cyA9IDEsIGlzR3JhcGhpY2FsID0gZmFsc2Upe1xuICAgICAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgdGhpcy5udW1PdXRwdXRzID0gbnVtT3V0cHV0cztcbiAgICAgICAgdGhpcy5pc0dyYXBoaWNhbCA9IGlzR3JhcGhpY2FsO1xuICAgIH1cbiAgICBnZXQgY3R4KCl7XG4gICAgICAgIHJldHVybiB0aGlzLm1hbmFnZXIuY3R4O1xuICAgIH1cbiAgICBnZXQgZXh0REIoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFuYWdlci5leHREQjtcbiAgICB9XG4gICAgcnVuKGlucHV0VGV4dHVyZXMsIG91dHB1dERpbXMsIHBhcmFtVmFscyA9IHt9LCB1c2VGbG9hdCA9IHRydWUpe1xuICAgICAgICB0aGlzLmN0eC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XG4gICAgICAgIHJlZ2lzdGVyVW5pZm9ybXModGhpcy5jdHgsIHRoaXMucHJvZ3JhbSwgdGhpcy5wYXJhbXMsIHBhcmFtVmFscyk7XG4gICAgICAgIHJlZ2lzdGVyVW5pZm9ybXModGhpcy5jdHgsIHRoaXMucHJvZ3JhbSwgW3tcbiAgICAgICAgICAgIG5hbWU6ICd1RGltcycsXG4gICAgICAgICAgICB0eXBlOiAnaXZlYzInXG4gICAgICAgIH1dLCB7XG4gICAgICAgICAgICB1RGltczogb3V0cHV0RGltcy50b0FycmF5KClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0VGV4dHVyZXMgPSBjb21wdXRlMURBcnJheSh0aGlzLm51bU91dHB1dHMsIGkgPT5cbiAgICAgICAgICAgIGNyZWF0ZUNvbXB1dGVUZXh0dXJlKHRoaXMuY3R4LCBvdXRwdXREaW1zLCB1c2VGbG9hdCA/IHRoaXMuY3R4LkZMT0FUIDogdGhpcy5jdHguVU5TSUdORURfQllURSlcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBmYm8gPSB0aGlzLmlzR3JhcGhpY2FsID8gbnVsbCA6IGNyZWF0ZUZCTyh0aGlzLmN0eCwgdGhpcy5leHREQiwgb3V0cHV0VGV4dHVyZXMpO1xuICAgICAgICB0aGlzLmN0eC5iaW5kRnJhbWVidWZmZXIodGhpcy5jdHguRlJBTUVCVUZGRVIsIGZibyk7XG5cbiAgICAgICAgYmluZFRleHR1cmVzKHRoaXMuY3R4LCBpbnB1dFRleHR1cmVzKTtcblxuICAgICAgICB0aGlzLmN0eC52aWV3cG9ydCgwLCAwLCBvdXRwdXREaW1zLndpZHRoLCBvdXRwdXREaW1zLmhlaWdodCk7XG4gICAgICAgIHRoaXMubWFuYWdlci5kcmF3RnVsbHNjcmVlblF1YWQodGhpcy5wcm9ncmFtKTtcblxuICAgICAgICByZXR1cm4gbmV3IEdQR1BVS2VybmVsUmVzdWx0KHRoaXMuY3R4LCBmYm8sIG91dHB1dFRleHR1cmVzKTtcbiAgICB9XG59O1xuXG5jbGFzcyBHUEdQVU1hbmFnZXJ7XG4gICAgY29uc3RydWN0b3IoY3R4LCB1c2VGbG9hdCA9IHRydWUpe1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5leHREQiA9IHRoaXMuY3R4LmdldEV4dGVuc2lvbignV0VCR0xfZHJhd19idWZmZXJzJyk7XG4gICAgICAgIGlmKHVzZUZsb2F0KXtcbiAgICAgICAgICAgIHRoaXMuY3R4LmdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfZmxvYXQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucXVhZFBvc0J1ZmZlciA9IGNyZWF0ZUFycmF5QnVmZmVyKHRoaXMuY3R4LCB0aGlzLmN0eC5BUlJBWV9CVUZGRVIsIEZVTExTQ1JFRU5fUVVBRF9QT1NfQVJSQVkpO1xuICAgICAgICB0aGlzLnF1YWRJbmRleEJ1ZmZlciA9IGNyZWF0ZUFycmF5QnVmZmVyKHRoaXMuY3R4LCB0aGlzLmN0eC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZKTtcbiAgICB9XG4gICAgZHJhd0Z1bGxzY3JlZW5RdWFkKHByb2dyYW0pe1xuICAgICAgICB0aGlzLmN0eC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICB0aGlzLmN0eC5iaW5kQnVmZmVyKHRoaXMuY3R4LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLnF1YWRJbmRleEJ1ZmZlcik7XG4gICAgICAgIHRoaXMuY3R4LmRyYXdFbGVtZW50cyh0aGlzLmN0eC5UUklBTkdMRV9TVFJJUCwgRlVMTFNDUkVFTl9RVUFEX05VTV9WRVJUSUNFUywgdGhpcy5jdHguVU5TSUdORURfU0hPUlQsIDApO1xuICAgIH1cbiAgICByZWFkUGFja2VkRmxvYXREYXRhKGRpbXMpe1xuICAgICAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheShkaW1zLmdldEFyZWEoKSAqIDQpO1xuICAgICAgICB0aGlzLmN0eC5yZWFkUGl4ZWxzKDAsIDAsIGRpbXMud2lkdGgsIGRpbXMuaGVpZ2h0LCB0aGlzLmN0eC5SR0JBLCB0aGlzLmN0eC5VTlNJR05FRF9CWVRFLCBidWYpO1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShidWYuYnVmZmVyKTtcbiAgICB9XG4gICAgYXJyYXlUb1RleHR1cmUoZGltcywgYXJyLCB1c2VGbG9hdCA9IHRydWUpe1xuICAgICAgICBjb25zdCBmbG9hdEZsYXR0ZW5lZEFyciA9IG5ldyBGbG9hdDMyQXJyYXkoZmxhdHRlbihmbGF0dGVuKGFycikpKVxuICAgICAgICBjb25zdCBmbGF0dGVuZWRBcnIgPSB1c2VGbG9hdCA/IGZsb2F0RmxhdHRlbmVkQXJyIDogKG5ldyBVaW50OEFycmF5KGZsYXR0ZW5lZEFyci5idWZmZXIpKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbXB1dGVUZXh0dXJlKHRoaXMuY3R4LCBkaW1zLCB1c2VGbG9hdCA/IHRoaXMuY3R4LkZMT0FUIDogdGhpcy5jdHguVU5TSUdORURfQllURSwgZmxhdHRlbmVkQXJyKTtcbiAgICB9XG4gICAgdGV4dHVyZVRvQXJyYXkoZGltcywgdGV4LCBjb21wb25lbnQgPSAwKXtcbiAgICAgICAgY29uc3QgY29tcHV0ZUZ1bmMgPSBcbmB2ZWMyIGNWYWwgPSB0ZXh0dXJlMkQodUlucHV0LCB2Q29vcmQpLnh5O1xuZ2xfRnJhZ0RhdGFbMF0gPSBwYWNrRmxvYXQoY1ZhbC5gICsgJ3h5encnW2NvbXBvbmVudF0gKyBgKTtcbmA7XG4gICAgICAgIGNvbnN0IGlucHV0TmFtZXMgPSBbJ3VJbnB1dCddO1xuICAgICAgICBjb25zdCBrZXJuZWwgPSB0aGlzLmNyZWF0ZUtlcm5lbChcbiAgICAgICAgICAgIGNvbXB1dGVGdW5jLFxuICAgICAgICAgICAgaW5wdXROYW1lcyxcbiAgICAgICAgICAgIGRpbXMsXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGtlcm5lbC5ydW4oW3RleF0sIGRpbXMsIHt9LCB0aGlzLmN0eC5VTlNJR05FRF9CWVRFKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gdGhpcy5yZWFkUGFja2VkRmxvYXREYXRhKGRpbXMpO1xuICAgICAgICByZXN1bHRzLmRpc3Bvc2UoKTtcblxuICAgICAgICByZXR1cm4gY29tcHV0ZTJEQXJyYXkoZGltcywgcG9zID0+XG4gICAgICAgICAgICBvdXRwdXRbcG9zLnkgKiBkaW1zLndpZHRoICsgcG9zLnhdXG4gICAgICAgICk7XG4gICAgfVxuICAgIGNyZWF0ZUtlcm5lbChjb21wdXRlRnVuYywgaW5wdXROYW1lcywgb3V0cHV0RGltcywgcGFyYW1zID0gW10sIG51bU91dHB1dHMgPSAxLCBpbmNsdWRlU3JjID0gJycsIGlzR3JhcGhpY2FsID0gZmFsc2Upe1xuICAgICAgICBjb25zdCB1bmlmb3JtcyA9IFtdLmNvbmNhdChwYXJhbXMsIGlucHV0TmFtZXMubWFwKFxuICAgICAgICAgICAgaW5wdXROYW1lID0+ICh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3NhbXBsZXIyRCcsXG4gICAgICAgICAgICAgICAgbmFtZTogaW5wdXROYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICApLFt7XG4gICAgICAgICAgICB0eXBlOiAnaXZlYzInLFxuICAgICAgICAgICAgbmFtZTogJ3VEaW1zJ1xuICAgICAgICB9XSk7XG4gICAgICAgIGNvbnN0IHZlcnRTaGFkZXJTcmMgPSBHUEdQVU1hbmFnZXIuY3JlYXRlVmVydFNoYWRlclNyYyhpc0dyYXBoaWNhbCk7XG4gICAgICAgIGNvbnN0IGZyYWdTaGFkZXJTcmMgPSBHUEdQVU1hbmFnZXIuY3JlYXRlRnJhZ1NoYWRlclNyYyhjb21wdXRlRnVuYy50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+ICcgICAgJyArIGxpbmUpLmpvaW4oJ1xcbicpICsgJ1xcbicsIHVuaWZvcm1zLCBpbmNsdWRlU3JjLCBudW1PdXRwdXRzID4gMSk7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKHRoaXMuY3R4LCB2ZXJ0U2hhZGVyU3JjLCBmcmFnU2hhZGVyU3JjKTtcblxuICAgICAgICB0aGlzLmN0eC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICByZWdpc3RlclZlcnRleEF0dHJpYih0aGlzLmN0eCwgcHJvZ3JhbSwgJ2FQb3MnLCAyLCB0aGlzLnF1YWRQb3NCdWZmZXIpO1xuICAgICAgICByZWdpc3RlclRleHR1cmVzKHRoaXMuY3R4LCBwcm9ncmFtLCBpbnB1dE5hbWVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBHUEdQVUtlcm5lbCh0aGlzLCBwcm9ncmFtLCBwYXJhbXMsIG51bU91dHB1dHMsIGlzR3JhcGhpY2FsKTtcbiAgICB9XG4gICAgY3JlYXRlR3JhcGhpY2FsS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zLCBwYXJhbXMgPSBbXSwgaW5jbHVkZVNyYyA9ICcnKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zLCBwYXJhbXMsIDAsIGluY2x1ZGVTcmMsIHRydWUpO1xuICAgIH1cbn07XG5cbi8vIENyZWRpdDogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vVG9vVGFsbE5hdGUvNDc1MDk1M1xuR1BHUFVNYW5hZ2VyLmVuZGlhbm5lc3MgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGIgPSBuZXcgQXJyYXlCdWZmZXIoNCk7XG4gICAgY29uc3QgYSA9IG5ldyBVaW50MzJBcnJheShiKTtcbiAgICBjb25zdCBjID0gbmV3IFVpbnQ4QXJyYXkoYik7XG4gICAgYVswXSA9IDB4ZGVhZGJlZWY7XG4gICAgaWYgKGNbMF0gPT0gMHhlZikgcmV0dXJuICdMRSc7XG4gICAgaWYgKGNbMF0gPT0gMHhkZSkgcmV0dXJuICdCRSc7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGVuZGlhbm5lc3MnKTtcbn0pKCk7XG5cbkdQR1BVTWFuYWdlci5nZXRDYW52YXNDb250ZXh0ID0gY2FudmFzID0+IHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBkZXB0aDogZmFsc2UsXG4gICAgICAgIGFudGlhbGlhczogZmFsc2VcbiAgICB9O1xuICAgIHJldHVybiBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCBvcHRpb25zKSB8fCBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wtZXhwZXJpbWVudGFsJywgb3B0aW9ucyk7XG59O1xuXG5HUEdQVU1hbmFnZXIuY3JlYXRlVmVydFNoYWRlclNyYyA9IChmbGlwWSA9IGZhbHNlKSA9PlxuYHByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxuYXR0cmlidXRlIHZlYzIgYVBvcztcblxudmFyeWluZyB2ZWMyIHZDb29yZDtcblxudm9pZCBtYWluKCl7XG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGAgK1xuICAgIChmbGlwWSA/IGBhUG9zLngsIC1hUG9zLnlgIDogYGFQb3NgKSArXG4gICAgYCwgMC4wLCAxLjApO1xuICAgIHZDb29yZCA9IChhUG9zICsgMS4wKSAvIDIuMDtcbn1gO1xuXG5HUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFID1cbmB2ZWM0IHJvdW5kKHZlYzQgeCkge1xuICAgIHJldHVybiBmbG9vcih4ICsgMC41KTtcbn1cblxuaGlnaHAgZmxvYXQgcm91bmQoaGlnaHAgZmxvYXQgeCkge1xuICAgIHJldHVybiBmbG9vcih4ICsgMC41KTtcbn1cblxudmVjMiBpbnRlZ2VyTW9kKHZlYzIgeCwgZmxvYXQgeSkge1xuICAgIHZlYzIgcmVzID0gZmxvb3IobW9kKHgsIHkpKTtcbiAgICByZXR1cm4gcmVzICogc3RlcCgxLjAgLSBmbG9vcih5KSwgLXJlcyk7XG59XG5cbnZlYzMgaW50ZWdlck1vZCh2ZWMzIHgsIGZsb2F0IHkpIHtcbiAgICB2ZWMzIHJlcyA9IGZsb29yKG1vZCh4LCB5KSk7XG4gICAgcmV0dXJuIHJlcyAqIHN0ZXAoMS4wIC0gZmxvb3IoeSksIC1yZXMpO1xufVxuXG52ZWM0IGludGVnZXJNb2QodmVjNCB4LCB2ZWM0IHkpIHtcbiAgICB2ZWM0IHJlcyA9IGZsb29yKG1vZCh4LCB5KSk7XG4gICAgcmV0dXJuIHJlcyAqIHN0ZXAoMS4wIC0gZmxvb3IoeSksIC1yZXMpO1xufVxuXG5oaWdocCBmbG9hdCBpbnRlZ2VyTW9kKGhpZ2hwIGZsb2F0IHgsIGhpZ2hwIGZsb2F0IHkpIHtcbiAgICBoaWdocCBmbG9hdCByZXMgPSBmbG9vcihtb2QoeCwgeSkpO1xuICAgIHJldHVybiByZXMgKiAocmVzID4gZmxvb3IoeSkgLSAxLjAgPyAwLjAgOiAxLjApO1xufVxuXG5oaWdocCBpbnQgaW50ZWdlck1vZChoaWdocCBpbnQgeCwgaGlnaHAgaW50IHkpIHtcbiAgICByZXR1cm4gaW50KGludGVnZXJNb2QoZmxvYXQoeCksIGZsb2F0KHkpKSk7XG59XG5cbmNvbnN0IHZlYzIgTUFHSUNfVkVDID0gdmVjMigxLjAsIC0yNTYuMCk7XG5jb25zdCB2ZWM0IFNDQUxFX0ZBQ1RPUiA9IHZlYzQoMS4wLCAyNTYuMCwgNjU1MzYuMCwgMC4wKTtcbmNvbnN0IHZlYzQgU0NBTEVfRkFDVE9SX0lOViA9IHZlYzQoMS4wLCAwLjAwMzkwNjI1LCAwLjAwMDAxNTI1ODc4OTA2MjUsIDAuMCk7IC8vIDEsIDEvMjU2LCAxLzY1NTM2XG5oaWdocCBmbG9hdCB1bnBhY2tGbG9hdChoaWdocCB2ZWM0IHJnYmEpIHtcbmAgKyAoKEdQR1BVTWFuYWdlci5lbmRpYW5uZXNzID09ICdMRScpID8gJycgOlxuYCAgICByZ2JhLnJnYmEgPSByZ2JhLmFiZ3I7XG5gKSArXG5gICAgIHJnYmEgKj0gMjU1LjA7XG4gICAgdmVjMiBndGUxMjg7XG4gICAgZ3RlMTI4LnggPSByZ2JhLmIgPj0gMTI4LjAgPyAxLjAgOiAwLjA7XG4gICAgZ3RlMTI4LnkgPSByZ2JhLmEgPj0gMTI4LjAgPyAxLjAgOiAwLjA7XG4gICAgZmxvYXQgZXhwb25lbnQgPSAyLjAgKiByZ2JhLmEgLSAxMjcuMCArIGRvdChndGUxMjgsIE1BR0lDX1ZFQyk7XG4gICAgZmxvYXQgcmVzID0gZXhwMihyb3VuZChleHBvbmVudCkpO1xuICAgIHJnYmEuYiA9IHJnYmEuYiAtIDEyOC4wICogZ3RlMTI4Lng7XG4gICAgcmVzID0gZG90KHJnYmEsIFNDQUxFX0ZBQ1RPUikgKiBleHAyKHJvdW5kKGV4cG9uZW50LTIzLjApKSArIHJlcztcbiAgICByZXMgKj0gZ3RlMTI4LnkgKiAtMi4wICsgMS4wO1xuICAgIHJldHVybiByZXM7XG59XG5cbmhpZ2hwIHZlYzQgcGFja0Zsb2F0KGhpZ2hwIGZsb2F0IGYpIHtcbiAgICBoaWdocCBmbG9hdCBGID0gYWJzKGYpO1xuICAgIGhpZ2hwIGZsb2F0IHNpZ24gPSBmIDwgMC4wID8gMS4wIDogMC4wO1xuICAgIGhpZ2hwIGZsb2F0IGV4cG9uZW50ID0gZmxvb3IobG9nMihGKSk7XG4gICAgaGlnaHAgZmxvYXQgbWFudGlzc2EgPSAoZXhwMigtZXhwb25lbnQpICogRik7XG4gICAgLy8gZXhwb25lbnQgKz0gZmxvb3IobG9nMihtYW50aXNzYSkpO1xuICAgIHZlYzQgcmdiYSA9IHZlYzQoRiAqIGV4cDIoMjMuMC1leHBvbmVudCkpICogU0NBTEVfRkFDVE9SX0lOVjtcbiAgICByZ2JhLnJnID0gaW50ZWdlck1vZChyZ2JhLnJnLCAyNTYuMCk7XG4gICAgcmdiYS5iID0gaW50ZWdlck1vZChyZ2JhLmIsIDEyOC4wKTtcbiAgICByZ2JhLmEgPSBleHBvbmVudCowLjUgKyA2My41O1xuICAgIHJnYmEuYmEgKz0gdmVjMihpbnRlZ2VyTW9kKGV4cG9uZW50KzEyNy4wLCAyLjApLCBzaWduKSAqIDEyOC4wO1xuICAgIHJnYmEgKj0gMC4wMDM5MjE1Njk7IC8vIDEvMjU1XG5gICsgKChHUEdQVU1hbmFnZXIuZW5kaWFubmVzcyA9PSAnTEUnKSA/ICcnIDpcbmAgICAgcmdiYS5yZ2JhID0gcmdiYS5hYmdyO1xuYCkgK1xuYCAgICByZXR1cm4gcmdiYTtcbn1cblxuYDtcblxuR1BHUFVNYW5hZ2VyLmNyZWF0ZUZyYWdTaGFkZXJTcmMgPSAoY29tcHV0ZUZ1bmMsIHVuaWZvcm1zLCBpbmNsdWRlU3JjID0gJycsIHVzZURyYXdCdWZmZXJzID0gdHJ1ZSkgPT4gW1xuICAgIHVzZURyYXdCdWZmZXJzID9cbmAjZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnM6IHJlcXVpcmVcbmAgOiAnJyxcbmBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5wcmVjaXNpb24gaGlnaHAgc2FtcGxlcjJEO1xuXG4jZGVmaW5lIEVQUyAwLjAwMDAwMDFcblxuYCxcbiAgICAuLi51bmlmb3Jtcy5tYXAodW5pZm9ybSA9PlxuYHVuaWZvcm0gYCArIHVuaWZvcm0udHlwZSArIGAgYCArIHVuaWZvcm0ubmFtZSArIGA7XG5gXG4gICAgKSxcbmBcbnZhcnlpbmcgdmVjMiB2Q29vcmQ7XG5cbnZlYzQgYXJyR2V0KHNhbXBsZXIyRCBhcnIsIGl2ZWMyIGlkKXtcbiAgICByZXR1cm4gdGV4dHVyZTJEKGFyciwgKHZlYzIoaWQpICsgdmVjMigwLjUpKSAvIHZlYzIodURpbXMpKTtcbn1cblxuYCxcbiAgICBpbmNsdWRlU3JjLFxuYHZvaWQgY29tcHV0ZUZ1bmMoKXtcbiAgICBpdmVjMiB0aHJlYWRJZCA9IGl2ZWMyKHZDb29yZCAqIHZlYzIodURpbXMpKTtcbmAsXG4gICAgY29tcHV0ZUZ1bmMsXG5gfVxuXG52b2lkIG1haW4oKXtcbiAgICBjb21wdXRlRnVuYygpO1xufWBdLmpvaW4oJycpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBEZW1vRnVuY3Rpb25ze1xufTtcblxuRGVtb0Z1bmN0aW9ucy5JTkNMVURFUyA9IHtcbiAgICBwaTpcbmBjb25zdCBmbG9hdCBQSSA9IDMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NTtcblxuYCxcbiAgICBjb21wbGV4TGliOlxuYHZlYzIgY29tcGxleE11bHQodmVjMiBhLCB2ZWMyIGIpe1xuICAgIHJldHVybiB2ZWMyKGEueCAqIGIueCAtIGEueSAqIGIueSwgYS55ICogYi54ICsgYS54ICogYi55KTtcbn1cblxudmVjMiBjb21wbGV4RGl2KHZlYzIgYSwgdmVjMiBiKXtcbiAgICBmbG9hdCBkaXZpc29yID0gZG90KGIsIGIpO1xuICAgIHJldHVybiB2ZWMyKGRvdChhLCBiKSwgYS55ICogYi54IC0gYS54ICogYi55KSAvIGRpdmlzb3I7XG59XG5cbnZlYzIgY29tcGxleFBvdyh2ZWMyIGEsIHZlYzIgYil7XG4gICAgZmxvYXQgciA9IGxlbmd0aChhKSwgcGhpID0gYXRhbihhLnksIGEueCk7XG4gICAgZmxvYXQgbmV3UiA9IHBvdyhyLCBiLngpICogZXhwKC1iLnkgKiBwaGkpO1xuICAgIGZsb2F0IG5ld1BoaSA9IGIueSAqIGxvZyhyKSArIGIueCAqIHBoaTtcbiAgICByZXR1cm4gbmV3UiAqIHZlYzIoY29zKG5ld1BoaSksIHNpbihuZXdQaGkpKTtcbn1cblxudmVjMiBjb21wbGV4RXhwKHZlYzIgYil7XG4gICAgcmV0dXJuIGV4cChiLngpICogdmVjMihjb3MoYi55KSwgc2luKGIueSkpO1xufVxuXG52ZWMyIGNvbXBsZXhMb2codmVjMiB4KXtcbiAgICByZXR1cm4gdmVjMihsb2cobGVuZ3RoKHgpKSwgYXRhbih4LnksIHgueCkpO1xufVxuXG5gLFxuICAgIGdhbW1hOlxuYC8qKlxuICogVHJhbnNsYXRlZCB0byBPcGVuR0wgRVMgZnJvbSBtYXRoLmpzXG4gKiBodHRwczovL2dpdGh1Yi5jb20vam9zZGVqb25nL21hdGhqc1xuICpcbiAqIE1hdGguanMgaXMgYW4gZXh0ZW5zaXZlIG1hdGggbGlicmFyeSBmb3IgSmF2YVNjcmlwdCBhbmQgTm9kZS5qcyxcbiAqIEl0IGZlYXR1cmVzIHJlYWwgYW5kIGNvbXBsZXggbnVtYmVycywgdW5pdHMsIG1hdHJpY2VzLCBhIGxhcmdlIHNldCBvZlxuICogbWF0aGVtYXRpY2FsIGZ1bmN0aW9ucywgYW5kIGEgZmxleGlibGUgZXhwcmVzc2lvbiBwYXJzZXIuXG4gKlxuICogQHZlcnNpb24gMy4yLjFcbiAqIEBkYXRlICAgIDIwMTYtMDQtMjZcbiAqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChDKSAyMDEzLTIwMTYgSm9zIGRlIEpvbmcgPHdqb3NkZWpvbmdAZ21haWwuY29tPlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90XG4gKiB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVRcbiAqIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZVxuICogTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXJcbiAqIHRoZSBMaWNlbnNlLlxuICovXG5cbnZlYzIgZ2FtbWFTdGVwKHZlYzIgeCwgaW50IGksIHZlYzIgbiwgZmxvYXQgcCl7XG4gICAgZmxvYXQgcmVhbCA9IG4ueCArIGZsb2F0KGkpO1xuICAgIGZsb2F0IGRlbiA9IHJlYWwgKiByZWFsICsgbi55ICogbi55O1xuICAgIGlmKGRlbiAhPSAwLjApe1xuICAgICAgICByZXR1cm4geCArIHZlYzIocCAqIHJlYWwgLyBkZW4sIC0ocCAqIG4ueSkgLyBkZW4pO1xuICAgIH1cbiAgICBlbHNlIHJldHVybiB2ZWMyKDAuMCk7XG59XG5cbnZlYzIgZ2FtbWEodmVjMiBuKXtcbiAgICBuLnggLT0gMS4wO1xuICAgIHZlYzIgeCA9IHZlYzIoMC45OTk5OTk5OTk5OTk5OTcwOTE4MiwgMC4wKTtcblx0eCA9IGdhbW1hU3RlcCh4LCAxLCBuLCA1Ny4xNTYyMzU2NjU4NjI5MjM1MTcpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDIsIG4sIC01OS41OTc5NjAzNTU0NzU0OTEyNDgpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDMsIG4sIDE0LjEzNjA5Nzk3NDc0MTc0NzE3NCk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgNCwgbiwgLTAuNDkxOTEzODE2MDk3NjIwMTk5NzgpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDUsIG4sIDAuMzM5OTQ2NDk5ODQ4MTE4ODg2OTllLTQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDYsIG4sIDAuNDY1MjM2Mjg5MjcwNDg1NzU2NjVlLTQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDcsIG4sIC0wLjk4Mzc0NDc1MzA0ODc5NTY0Njc3ZS00KTtcblx0eCA9IGdhbW1hU3RlcCh4LCA4LCBuLCAwLjE1ODA4ODcwMzIyNDkxMjQ4ODg0ZS0zKTtcblx0eCA9IGdhbW1hU3RlcCh4LCA5LCBuLCAtMC4yMTAyNjQ0NDE3MjQxMDQ4ODMxOWUtMyk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgMTAsIG4sIDAuMjE3NDM5NjE4MTE1MjEyNjQzMjBlLTMpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDExLCBuLCAtMC4xNjQzMTgxMDY1MzY3NjM4OTAyMmUtMyk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgMTIsIG4sIDAuODQ0MTgyMjM5ODM4NTI3NDMyOTNlLTQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDEzLCBuLCAtMC4yNjE5MDgzODQwMTU4MTQwODY3MGUtNCk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgMTQsIG4sIDAuMzY4OTkxODI2NTk1MzE2MjI3MDRlLTUpO1xuICAgIHZlYzIgdCA9IHZlYzIobi54ICsgNC43NDIxODc1ICsgMC41LCBuLnkpO1xuICAgIGZsb2F0IHR3b1BpU3FydCA9IHNxcnQoMi4wICogUEkpO1xuXG4gICAgbi54ICs9IDAuNTtcbiAgICB2ZWMyIHJlc3VsdCA9IGNvbXBsZXhQb3codCwgbik7XG4gICAgcmVzdWx0ICo9IHR3b1BpU3FydDtcbiAgICBmbG9hdCByID0gZXhwKC10LngpO1xuICAgIHQgPSByICogdmVjMihjb3MoLXQueSksIHNpbigtdC55KSk7XG5cbiAgICByZXR1cm4gY29tcGxleE11bHQoY29tcGxleE11bHQocmVzdWx0LCB0KSwgeCk7XG59XG5cbmAsXG4gICAgcm90YXRlV2l0aFRpbWU6XG5gdmVjMiByb3RhdGVXaXRoVGltZSh2ZWMyIHYpe1xuICAgIGZsb2F0IGNvc1QgPSBjb3ModGltZSAqIDIuMCAqIFBJKSwgc2luVCA9IHNpbih0aW1lICogMi4wICogUEkpO1xuICAgIHJldHVybiB2ZWMyKFxuICAgICAgICB2LnggKiBjb3NUIC0gdi55ICogc2luVCxcbiAgICAgICAgdi54ICogc2luVCArIHYueSAqIGNvc1RcbiAgICApO1xufVxuXG5gLFxuICAgIHNub2lzZTpcbmAvL1xuLy8gRGVzY3JpcHRpb24gOiBBcnJheSBhbmQgdGV4dHVyZWxlc3MgR0xTTCAyRC8zRC80RCBzaW1wbGV4IFxuLy8gICAgICAgICAgICAgICBub2lzZSBmdW5jdGlvbnMuXG4vLyAgICAgIEF1dGhvciA6IElhbiBNY0V3YW4sIEFzaGltYSBBcnRzLlxuLy8gIE1haW50YWluZXIgOiBzdGVndVxuLy8gICAgIExhc3Rtb2QgOiAyMDExMDgyMiAoaWptKVxuLy8gICAgIExpY2Vuc2UgOiBDb3B5cmlnaHQgKEMpIDIwMTEgQXNoaW1hIEFydHMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyAgICAgICAgICAgICAgIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZS5cbi8vICAgICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2FzaGltYS93ZWJnbC1ub2lzZVxuLy8gICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vc3RlZ3Uvd2ViZ2wtbm9pc2Vcbi8vIFxuXG52ZWM0IG1vZDI4OSh2ZWM0IHgpIHtcbiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsgfVxuXG5mbG9hdCBtb2QyODkoZmxvYXQgeCkge1xuICByZXR1cm4geCAtIGZsb29yKHggKiAoMS4wIC8gMjg5LjApKSAqIDI4OS4wOyB9XG5cbnZlYzQgcGVybXV0ZSh2ZWM0IHgpIHtcbiAgICAgcmV0dXJuIG1vZDI4OSgoKHgqMzQuMCkrMS4wKSp4KTtcbn1cblxuZmxvYXQgcGVybXV0ZShmbG9hdCB4KSB7XG4gICAgIHJldHVybiBtb2QyODkoKCh4KjM0LjApKzEuMCkqeCk7XG59XG5cbnZlYzQgdGF5bG9ySW52U3FydCh2ZWM0IHIpXG57XG4gIHJldHVybiAxLjc5Mjg0MjkxNDAwMTU5IC0gMC44NTM3MzQ3MjA5NTMxNCAqIHI7XG59XG5cbmZsb2F0IHRheWxvckludlNxcnQoZmxvYXQgcilcbntcbiAgcmV0dXJuIDEuNzkyODQyOTE0MDAxNTkgLSAwLjg1MzczNDcyMDk1MzE0ICogcjtcbn1cblxudmVjNCBncmFkNChmbG9hdCBqLCB2ZWM0IGlwKVxuICB7XG4gIGNvbnN0IHZlYzQgb25lcyA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgLTEuMCk7XG4gIHZlYzQgcCxzO1xuXG4gIHAueHl6ID0gZmxvb3IoIGZyYWN0ICh2ZWMzKGopICogaXAueHl6KSAqIDcuMCkgKiBpcC56IC0gMS4wO1xuICBwLncgPSAxLjUgLSBkb3QoYWJzKHAueHl6KSwgb25lcy54eXopO1xuICBzID0gdmVjNChsZXNzVGhhbihwLCB2ZWM0KDAuMCkpKTtcbiAgcC54eXogPSBwLnh5eiArIChzLnh5eioyLjAgLSAxLjApICogcy53d3c7IFxuXG4gIHJldHVybiBwO1xuICB9XG5cdFx0XHRcdFx0XHRcbi8vIChzcXJ0KDUpIC0gMSkvNCA9IEY0LCB1c2VkIG9uY2UgYmVsb3dcbiNkZWZpbmUgRjQgMC4zMDkwMTY5OTQzNzQ5NDc0NTFcblxuZmxvYXQgc25vaXNlKHZlYzQgdilcbiAge1xuICBjb25zdCB2ZWM0ICBDID0gdmVjNCggMC4xMzgxOTY2MDExMjUwMTEsICAvLyAoNSAtIHNxcnQoNSkpLzIwICBHNFxuICAgICAgICAgICAgICAgICAgICAgICAgMC4yNzYzOTMyMDIyNTAwMjEsICAvLyAyICogRzRcbiAgICAgICAgICAgICAgICAgICAgICAgIDAuNDE0NTg5ODAzMzc1MDMyLCAgLy8gMyAqIEc0XG4gICAgICAgICAgICAgICAgICAgICAgIC0wLjQ0NzIxMzU5NTQ5OTk1OCk7IC8vIC0xICsgNCAqIEc0XG5cbi8vIEZpcnN0IGNvcm5lclxuICB2ZWM0IGkgID0gZmxvb3IodiArIGRvdCh2LCB2ZWM0KEY0KSkgKTtcbiAgdmVjNCB4MCA9IHYgLSAgIGkgKyBkb3QoaSwgQy54eHh4KTtcblxuLy8gT3RoZXIgY29ybmVyc1xuXG4vLyBSYW5rIHNvcnRpbmcgb3JpZ2luYWxseSBjb250cmlidXRlZCBieSBCaWxsIExpY2VhLUthbmUsIEFNRCAoZm9ybWVybHkgQVRJKVxuICB2ZWM0IGkwO1xuICB2ZWMzIGlzWCA9IHN0ZXAoIHgwLnl6dywgeDAueHh4ICk7XG4gIHZlYzMgaXNZWiA9IHN0ZXAoIHgwLnp3dywgeDAueXl6ICk7XG4vLyAgaTAueCA9IGRvdCggaXNYLCB2ZWMzKCAxLjAgKSApO1xuICBpMC54ID0gaXNYLnggKyBpc1gueSArIGlzWC56O1xuICBpMC55encgPSAxLjAgLSBpc1g7XG4vLyAgaTAueSArPSBkb3QoIGlzWVoueHksIHZlYzIoIDEuMCApICk7XG4gIGkwLnkgKz0gaXNZWi54ICsgaXNZWi55O1xuICBpMC56dyArPSAxLjAgLSBpc1laLnh5O1xuICBpMC56ICs9IGlzWVouejtcbiAgaTAudyArPSAxLjAgLSBpc1laLno7XG5cbiAgLy8gaTAgbm93IGNvbnRhaW5zIHRoZSB1bmlxdWUgdmFsdWVzIDAsMSwyLDMgaW4gZWFjaCBjaGFubmVsXG4gIHZlYzQgaTMgPSBjbGFtcCggaTAsIDAuMCwgMS4wICk7XG4gIHZlYzQgaTIgPSBjbGFtcCggaTAtMS4wLCAwLjAsIDEuMCApO1xuICB2ZWM0IGkxID0gY2xhbXAoIGkwLTIuMCwgMC4wLCAxLjAgKTtcblxuICAvLyAgeDAgPSB4MCAtIDAuMCArIDAuMCAqIEMueHh4eFxuICAvLyAgeDEgPSB4MCAtIGkxICArIDEuMCAqIEMueHh4eFxuICAvLyAgeDIgPSB4MCAtIGkyICArIDIuMCAqIEMueHh4eFxuICAvLyAgeDMgPSB4MCAtIGkzICArIDMuMCAqIEMueHh4eFxuICAvLyAgeDQgPSB4MCAtIDEuMCArIDQuMCAqIEMueHh4eFxuICB2ZWM0IHgxID0geDAgLSBpMSArIEMueHh4eDtcbiAgdmVjNCB4MiA9IHgwIC0gaTIgKyBDLnl5eXk7XG4gIHZlYzQgeDMgPSB4MCAtIGkzICsgQy56enp6O1xuICB2ZWM0IHg0ID0geDAgKyBDLnd3d3c7XG5cbi8vIFBlcm11dGF0aW9uc1xuICBpID0gbW9kMjg5KGkpOyBcbiAgZmxvYXQgajAgPSBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlKGkudykgKyBpLnopICsgaS55KSArIGkueCk7XG4gIHZlYzQgajEgPSBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlKCBwZXJtdXRlIChcbiAgICAgICAgICAgICBpLncgKyB2ZWM0KGkxLncsIGkyLncsIGkzLncsIDEuMCApKVxuICAgICAgICAgICArIGkueiArIHZlYzQoaTEueiwgaTIueiwgaTMueiwgMS4wICkpXG4gICAgICAgICAgICsgaS55ICsgdmVjNChpMS55LCBpMi55LCBpMy55LCAxLjAgKSlcbiAgICAgICAgICAgKyBpLnggKyB2ZWM0KGkxLngsIGkyLngsIGkzLngsIDEuMCApKTtcblxuLy8gR3JhZGllbnRzOiA3eDd4NiBwb2ludHMgb3ZlciBhIGN1YmUsIG1hcHBlZCBvbnRvIGEgNC1jcm9zcyBwb2x5dG9wZVxuLy8gNyo3KjYgPSAyOTQsIHdoaWNoIGlzIGNsb3NlIHRvIHRoZSByaW5nIHNpemUgMTcqMTcgPSAyODkuXG4gIHZlYzQgaXAgPSB2ZWM0KDEuMC8yOTQuMCwgMS4wLzQ5LjAsIDEuMC83LjAsIDAuMCkgO1xuXG4gIHZlYzQgcDAgPSBncmFkNChqMCwgICBpcCk7XG4gIHZlYzQgcDEgPSBncmFkNChqMS54LCBpcCk7XG4gIHZlYzQgcDIgPSBncmFkNChqMS55LCBpcCk7XG4gIHZlYzQgcDMgPSBncmFkNChqMS56LCBpcCk7XG4gIHZlYzQgcDQgPSBncmFkNChqMS53LCBpcCk7XG5cbi8vIE5vcm1hbGlzZSBncmFkaWVudHNcbiAgdmVjNCBub3JtID0gdGF5bG9ySW52U3FydCh2ZWM0KGRvdChwMCxwMCksIGRvdChwMSxwMSksIGRvdChwMiwgcDIpLCBkb3QocDMscDMpKSk7XG4gIHAwICo9IG5vcm0ueDtcbiAgcDEgKj0gbm9ybS55O1xuICBwMiAqPSBub3JtLno7XG4gIHAzICo9IG5vcm0udztcbiAgcDQgKj0gdGF5bG9ySW52U3FydChkb3QocDQscDQpKTtcblxuLy8gTWl4IGNvbnRyaWJ1dGlvbnMgZnJvbSB0aGUgZml2ZSBjb3JuZXJzXG4gIHZlYzMgbTAgPSBtYXgoMC42IC0gdmVjMyhkb3QoeDAseDApLCBkb3QoeDEseDEpLCBkb3QoeDIseDIpKSwgMC4wKTtcbiAgdmVjMiBtMSA9IG1heCgwLjYgLSB2ZWMyKGRvdCh4Myx4MyksIGRvdCh4NCx4NCkgICAgICAgICAgICApLCAwLjApO1xuICBtMCA9IG0wICogbTA7XG4gIG0xID0gbTEgKiBtMTtcbiAgcmV0dXJuIDQ5LjAgKiAoIGRvdChtMCptMCwgdmVjMyggZG90KCBwMCwgeDAgKSwgZG90KCBwMSwgeDEgKSwgZG90KCBwMiwgeDIgKSkpXG4gICAgICAgICAgICAgICArIGRvdChtMSptMSwgdmVjMiggZG90KCBwMywgeDMgKSwgZG90KCBwNCwgeDQgKSApICkgKSA7XG5cbn1cblxuYFxufTtcblxuRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnMgPSB7XG4gICAgbG9yZW50ejoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0xvcmVudHogQm9vc3QnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6XG5gZmxvYXQgYmV0YSA9IHNpbih0aW1lICogMi4wICogUEkpICogMC45O1xuZmxvYXQgZ2FtbWEgPSAxLjAgLyBzcXJ0KDEuMCAtIGJldGEgKiBiZXRhKTtcbnJlcyA9IGdhbW1hICogdmVjMihcbiAgICBjUG9zLnggKiAxLjAgKyBjUG9zLnkgKiBiZXRhLFxuICAgIGNQb3MueSAqIDEuMCArIGNQb3MueCAqIGJldGFcbik7XG5cbmBcbiAgICB9LFxuLy8gICAgcm90YXRpb246IHtcbi8vICAgICAgICBkaXNwbGF5TmFtZTogJ1JvdGF0aW9uJyxcbi8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuLy8gICAgICAgIG51bUZyYW1lczogODAwLFxuLy8gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuLy8gICAgICAgIGRyYXdGdW5jOlxuLy9gcmVzID0gcm90YXRlV2l0aFRpbWUoY1Bvcyk7XG4vL2Bcbi8vICAgIH0sXG4gICAgbWVyY2F0b3J3YXJwOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTWVyY2F0b3IgV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogODAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6XG5gdmVjMiBzY2FsZWRQb3MgPSBjUG9zICogMC42O1xudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSkgKiA4LjA7XG5yZXMgPSByb3RhdGVXaXRoVGltZShpbnZNZXJjYXRvcik7XG5gXG4gICAgfSxcbiAgICBtZXJjYXRvck1vbGx3ZWlkZToge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ01lcmNhdG9yIHRvIE1vbGx3ZWlkZScsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMTAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzpcbmB2ZWMyIHNjYWxlZFBvcyA9IGNQb3MgKiAwLjM7XG5mbG9hdCB0aGV0YSA9IGFzaW4oc2NhbGVkUG9zLnkgKiAyLjAgLyBQSSk7XG52ZWMyIGludk1vbGx3ZWlkZSA9IHZlYzIoXG4gICAgc2NhbGVkUG9zLnggLyBjb3ModGhldGEpLFxuICAgIGFzaW4oKDIuMCAqIHRoZXRhICsgc2luKDIuMCAqIHRoZXRhKSkgLyBQSSlcbik7XG52ZWMyIGludk1lcmNhdG9yID0gdmVjMihzY2FsZWRQb3MueCwgMi4wICogYXRhbihleHAoc2NhbGVkUG9zLnkpKSAtIDAuNSAqIFBJKTtcbmZsb2F0IG1peFBhcmFtID0gLSBjb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcbnJlcyA9IChpbnZNb2xsd2VpZGUgKiBtaXhQYXJhbSArIGludk1lcmNhdG9yICogKDEuMCAtIG1peFBhcmFtKSkgKiA4LjA7XG5gXG4gICAgfSxcbiAgICBkaXBvbGU6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdEaXBvbGUgRm9ybWF0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAzMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOlxuYGZsb2F0IGRpc3QgPSBzaW4odGltZSAqIDIuMCAqIFBJICsgUEkgLyAyLjApICogMi4wICsgMi41O1xucmVzID0gNTAuMCAvICgyLjAgKiBkaXN0KSAqIChcbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKGRpc3QsIDAuMCkpIC1cbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKC1kaXN0LCAwLjApKVxuKTtcbmBcbiAgICB9LFxuICAgIGF0dHJhY3RSZXBlbDoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0F0dHJhY3Rpb24gdG8gUmVwdWxzaW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogXG5gcmVzID0gMTAuMCAqIChcbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKDEuMCwgMC4wKSkgK1xuICAgIHNpbih0aW1lICogMi4wICogUEkgLSBQSSAvIDIuMCkgKiBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKC0xLjAsIDAuMCkpXG4pO1xuYFxuICAgIH0sXG4gICAgbmV1cmFsbmV0d29yazoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ05ldXJhbCBOZXR3b3JrJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOiBcbmBmbG9hdCBtaXhQYXJhbSA9IC1jb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcbnZlYzIgdW5zaWdtb2lkID0gLWxvZygxLjAgLyAoKGNQb3MgKyB2ZWMyKDMuMywgMy4wKSkgLyA2LjMpIC0gMS4wKTtcbnJlcyA9ICh2ZWMyKFxuICAgIHVuc2lnbW9pZC54ICogMi4wICsgdW5zaWdtb2lkLnkgKiAxLjAsXG4gICAgdW5zaWdtb2lkLnggKiAyLjAgKyB1bnNpZ21vaWQueSAqIDMuMFxuKSAtIHZlYzIoMS4wLCAtMi4wKSkgKiBtaXhQYXJhbSArIGNQb3MgKiAoMS4wIC0gbWl4UGFyYW0pO1xuYFxuICAgIH0sXG4gICAgZ2FsYXh5OiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnR2FsYXh5IFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6IFxuYGZsb2F0IG1peFBhcmFtID0gLWNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xudmVjMiBwb2xQb3MgPSB2ZWMyKGxlbmd0aChjUG9zKSwgYXRhbihjUG9zLnksIGNQb3MueCkpO1xucG9sUG9zID0gdmVjMihwb2xQb3MueCwgcG9sUG9zLnkgLSBtaXhQYXJhbSAvIDUwLjAgKiBzcXJ0KDEuMCAvIHBvdyhwb2xQb3MueCAvIDQwLjAsIDMuMCkpKTtcbnJlcyA9IHZlYzIocG9sUG9zLnggKiBjb3MocG9sUG9zLnkpLCBwb2xQb3MueCAqIHNpbihwb2xQb3MueSkpO1xuYFxuICAgIH0sXG4gICAgc2ltcGxleDoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ1NpbXBsZXggV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMTAwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuc25vaXNlLFxuICAgICAgICBkcmF3RnVuYzogXG5gdmVjMiBjaXJjbGVWYXJ5ID0gMi4wICogdmVjMihcbiAgICBjb3ModGltZSAqIDIuMCAqIFBJKSxcbiAgICBzaW4odGltZSAqIDIuMCAqIFBJKVxuKTtcbnJlcyA9IDIuMCAqIChjUG9zICtcbjAuNSAqIHZlYzIoXG4gICAgc25vaXNlKHZlYzQoY1BvcyAqIDAuMjUsIGNpcmNsZVZhcnkgKyB2ZWMyKDEwMC4wLCAxMDAuMCkpKSxcbiAgICBzbm9pc2UodmVjNChjUG9zICogMC4yNSwgY2lyY2xlVmFyeSArIHZlYzIoMjAwLjAsIDIwMC4wKSkpXG4pKTtcbmBcbiAgICB9LFxuICAgIGV4cG9uZW50aWF0aW9uOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnQ29tcGxleCBFeHBvbmVudGlhdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogXG5gdmVjMiBjYXJ0UmVzID0gMTAuMCAqIGNvbXBsZXhQb3coY1BvcywgdmVjMigxLjAgLyAoMi41IC0gMS41ICogY29zKHRpbWUgKiAyLjAgKiBQSSkpLCAwLjApKTtcbnJlcyA9IHZlYzIobGVuZ3RoKGNhcnRSZXMpLCAxMC4wICogYXRhbihjYXJ0UmVzLnksIGNhcnRSZXMueCkpO1xuYFxuICAgIH0sXG4gICAgbW9iaXVzOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTW9iaXVzIFRyYW5zZm9ybWF0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6XG5gcmVzID0gcm90YXRlV2l0aFRpbWUoMTAuMCAqIGNvbXBsZXhEaXYoXG4gICAgY29tcGxleE11bHQodmVjMigwLjUsIDMuMCksIGNQb3MpICsgdmVjMigwLjUsIDEuNSksXG4gICAgY29tcGxleE11bHQodmVjMig0LjAsIDEuNSksIGNQb3MpICsgdmVjMigyLjAsIDMuNSlcbikpO1xuYFxuICAgIH0sXG4vLyAgICBsb2c6IHtcbi8vICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggTG9nYXJpdGhtJyxcbi8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuLy8gICAgICAgIG51bUZyYW1lczogMTAwMCxcbi8vICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbi8vICAgICAgICBkcmF3RnVuYzogXG4vL2ByZXMgPSByb3RhdGVXaXRoVGltZSgxMC4wICogY29tcGxleExvZyhjUG9zKSk7XG4vL2Bcbi8vICAgIH0sXG4vLyAgICBzaW46IHtcbi8vICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggU2luZScsXG4vLyAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbi8vICAgICAgICBudW1GcmFtZXM6IDMwMCxcbi8vICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuLy8gICAgICAgIGRyYXdGdW5jOiBcbi8vYHZlYzIgZXhwb25lbnQgPSB2ZWMyKC1jUG9zLnksIGNQb3MueCk7XG4vL3JlcyA9IHJvdGF0ZVdpdGhUaW1lKGNvbXBsZXhEaXYoXG4vLyAgICBjb21wbGV4RXhwKGV4cG9uZW50KSAtIGNvbXBsZXhFeHAoLWV4cG9uZW50KSxcbi8vICAgIHZlYzIoMC4wLCAyLjApXG4vLykpO1xuLy9gXG4vLyAgICB9LFxuICAgIGFyY3Npbjoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggSW52ZXJzZSBTaW5lJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiBcbmB2ZWMyIGludlNpbiA9IC0gMTAuMCAqIGNvbXBsZXhNdWx0KGNvbXBsZXhMb2coY29tcGxleFBvdyh2ZWMyKDEuMCwgMC4wKSAtIGNvbXBsZXhQb3coY1BvcywgdmVjMigyLjAsIDAuMCkpLCB2ZWMyKDAuNSwgMC4wKSkgKyBjb21wbGV4TXVsdChjUG9zLCB2ZWMyKDAuMCwgMS4wKSkpLCB2ZWMyKDAuMCwgMS4wKSk7XG5mbG9hdCBtaXhQYXJhbSA9IC0gY29zKHRpbWUgKiAyLjAgKiBQSSkgLyAyLjAgKyAwLjU7XG5yZXMgPSBpbnZTaW4gKiBtaXhQYXJhbSArIGNQb3MgKiAoMS4wIC0gbWl4UGFyYW0pO1xuYFxuICAgIH0sXG4gICAgZ2FtbWE6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdHYW1tYSBGdW5jdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogNDAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5nYW1tYSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgICAgIGRyYXdGdW5jOlxuYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBnYW1tYSgoY1BvcyArIHZlYzIoMi4wLCAwLjApKSAvIDIuMCkpO1xuYFxuICAgIH0sXG4gICAgbWFkbmVzczoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggPz8/JyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiA4MDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiBcbmB2ZWMyIG1hZG5lc3MgPSAtIDEwLjAgKiBjb21wbGV4TXVsdChjb21wbGV4TG9nKGNvbXBsZXhQb3codmVjMigyLjAsIDMuMCkgLSBjb21wbGV4UG93KGNQb3MgKiAyLjAsIHZlYzIoMi4wLCAxLjApKSwgdmVjMigwLjUsIDEuMCkpICsgY29tcGxleE11bHQoY1BvcyAqIDIuMCwgdmVjMigyLjAsIDEuMCkpKSwgdmVjMigyLjAsIDEuMCkpO1xuZmxvYXQgbWl4UGFyYW0gPSAtIGNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xucmVzID0gbWFkbmVzcyAqIG1peFBhcmFtICsgY1BvcyAqICgxLjAgLSBtaXhQYXJhbSk7XG5gXG4gICAgfSxcbn07XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
