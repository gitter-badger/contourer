"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isPointInRect(e,t){return e.x>=t.left&&e.x<t.right&&e.y>=t.top&&e.y<t.bottom}function compute1DArray(e,t){return new Array(e).fill(void 0).map(function(e,n){return t(n)})}function compute2DArray(e,t){return compute1DArray(e.height,function(n){return compute1DArray(e.width,function(e){return t(new Vector(e,n))})})}function flatten(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getCanvasMousePos(e,t){var n=e.getBoundingClientRect();return new Vector((t.clientX-n.left)*(e.width/n.width),(t.clientY-n.top)*(e.height/n.height))}function getScrollDir(e){return 0==e.deltaY?0:e.deltaY/Math.abs(e.deltaY)}function setCanvasSmoothing(e,t){e.imageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.webkitImageSmoothingEnabled=t,e.mnImageSmoothingEnabled=t}function createCanvas(e,t){var n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.style.position="absolute",n.style.left=t.left.toString()+"px",n.style.top=t.top.toString()+"px",e.appendChild(n),n.getContext("2d")}function getCanvasDims(e){return new Dimensions(e.canvas.width,e.canvas.height)}function compileShader(e,t,n){var a=e.createShader(n);if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw console.log(t),"Shader compile error: "+e.getShaderInfoLog(a);return a}function createProgram(e,t,n){var a=e.createProgram();return e.attachShader(a,compileShader(e,t,e.VERTEX_SHADER)),e.attachShader(a,compileShader(e,n,e.FRAGMENT_SHADER)),e.linkProgram(a),a}function createComputeTexture(e,t){var n=arguments.length<=2||void 0===arguments[2]?e.FLOAT:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3],i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,n,a),i}function createFBO(e,t,n){var a=e.createFramebuffer();if(e.bindFramebuffer(e.FRAMEBUFFER,a),n.length>1?(t.drawBuffersWEBGL(compute1DArray(n.length,function(e){return t["COLOR_ATTACHMENT"+e.toString()+"_WEBGL"]})),n.forEach(function(n,a){e.framebufferTexture2D(e.FRAMEBUFFER,t["COLOR_ATTACHMENT"+a.toString()+"_WEBGL"],e.TEXTURE_2D,n,0)})):e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n[0],0),e.checkFramebufferStatus(e.FRAMEBUFFER)!=e.FRAMEBUFFER_COMPLETE)throw"GL_FRAMEBUFFER_COMPLETE failed.";return a}function createArrayBuffer(e,t,n){var a=e.createBuffer();return e.bindBuffer(t,a),e.bufferData(t,n,e.STATIC_DRAW),a}function registerVertexAttrib(e,t,n,a,i){var r=e.getAttribLocation(t,n);e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,i),e.vertexAttribPointer(r,a,e.FLOAT,!1,0,0)}function registerTextures(e,t,n){n.forEach(function(n,a){var i=e.getUniformLocation(t,n);e.uniform1i(i,a)})}function registerUniforms(e,t,n,a){n.forEach(function(n){var i=e.getUniformLocation(t,n.name);"int"==n.type?e.uniform1i(i,a[n.name]):"float"==n.type?e.uniform1f(i,a[n.name]):/^ivec[2-4]$/g.test(n.type)?e["uniform"+n.type[4].toString()+"iv"](i,new Int32Array(a[n.name])):/^vec[2-4]$/g.test(n.type)&&e["uniform"+n.type[3].toString()+"fv"](i,new Float32Array(a[n.name]))})}function bindTextures(e,t){t.forEach(function(t,n){e.activeTexture(e["TEXTURE"+n.toString()]),e.bindTexture(e.TEXTURE_2D,t)})}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function init(){var e=new ContourerManager;initRender(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function initRender(e){var t=document.getElementById("indexContainer");ReactDOM.render(React.createElement(ContourerApp,{manager:e}),t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Vector=function(){function e(t,n){_classCallCheck(this,e),this.x=t,this.y=n}return _createClass(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"multiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"divide",value:function(t){return new e(this.x/t,this.y/t)}},{key:"equals",value:function(e){return this.x==e.x&&this.y==e.y}},{key:"floor",value:function(){return new e(Math.floor(this.x),Math.floor(this.y))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"getLength",value:function(){return Math.sqrt(this.dot(this))}},{key:"getAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"toArray",value:function(){return[this.x,this.y]}}],[{key:"fromPolar",value:function(t,n){return new e(t*Math.cos(n),t*Math.sin(n))}}]),e}(),Dimensions=function(){function e(t,n){_classCallCheck(this,e),this.width=t,this.height=n}return _createClass(e,[{key:"contains",value:function(e){return isPointInRect(e,new Rect(new Vector(0,0),this))}},{key:"getArea",value:function(){return this.width*this.height}},{key:"toArray",value:function(){return[this.width,this.height]}}]),e}(),Color=function(){function e(t,n,a){_classCallCheck(this,e),this.r=t,this.g=n,this.b=a}return _createClass(e,[{key:"toArray",value:function(){return[this.r,this.g,this.b]}}]),e}(),Rect=function(){function e(t,n){_classCallCheck(this,e),this.pos=t,this.dims=n}return _createClass(e,[{key:"x",get:function(){return this.pos.x}},{key:"y",get:function(){return this.pos.y}},{key:"width",get:function(){return this.dims.width}},{key:"height",get:function(){return this.dims.height}},{key:"left",get:function(){return this.pos.x}},{key:"right",get:function(){return this.pos.x+this.dims.width}},{key:"top",get:function(){return this.pos.y}},{key:"bottom",get:function(){return this.pos.y+this.dims.height}}]),e}(),MOUSE_LEFT=0,MOUSE_RIGHT=2,MOUSE_MIDDLE=1,DIRS4=[new Vector(1,0),new Vector(0,1),new Vector((-1),0),new Vector(0,(-1))],ScalableViewportManager=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?new Vector(0,0):arguments[0],n=arguments.length<=1||void 0===arguments[1]?1:arguments[1];_classCallCheck(this,e),this.pos=t,this.scale=n}return _createClass(e,[{key:"viewportToWorld",value:function(e){return e.multiply(this.scale).add(this.pos)}},{key:"worldToViewport",value:function(e){return e.subtract(this.pos).divide(this.scale)}},{key:"translate",value:function(e){this.pos=this.pos.subtract(e.multiply(this.scale))}},{key:"scaleAtPoint",value:function(e,t){var n=this.scale*Math.exp(e),a=this.pos.add(t.multiply(this.scale-n));this.scale=n,this.pos=a}}]),e}(),MouseDownTracker=function e(t,n,a){var i=this,r=arguments.length<=3||void 0===arguments[3]?function(e){return!0}:arguments[3];_classCallCheck(this,e),this.initTrackCallback=n,this.trackCallback=a,this.isTrackingEnabled=r,this.canvas=t,this.onMouseDown=function(e){i.isTrackingEnabled(e)&&(i.initTrackCallback(e),window.addEventListener("mousemove",i.onMouseMove),window.addEventListener("mouseup",i.onMouseUp),i.canvas.removeEventListener("mousedown",i.onMouseDown),e.preventDefault())},this.onMouseUp=function(e){i.trackCallback(e),window.removeEventListener("mousemove",i.onMouseMove),window.removeEventListener("mouseup",i.onMouseUp),i.canvas.addEventListener("mousedown",i.onMouseDown)},this.onMouseMove=function(e){i.trackCallback(e)},this.canvas.addEventListener("mousedown",this.onMouseDown)},DragManager=function(e){function t(e,n){var a=arguments.length<=2||void 0===arguments[2]?function(e){return!0}:arguments[2];_classCallCheck(this,t);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,function(e){i.prevMousePos=getCanvasMousePos(i.canvas,e)},function(e){var t=getCanvasMousePos(i.canvas,e);n(t.subtract(i.prevMousePos)),i.prevMousePos=t},a));return i.prevMousePos=new Vector(0,0),i}return _inherits(t,e),t}(MouseDownTracker),FULLSCREEN_QUAD_POS_ARRAY=new Float32Array([-1,-1,1,-1,1,1,-1,1]),FULLSCREEN_QUAD_INDEX_ARRAY=new Uint16Array([0,1,2,0,2,3]),FULLSCREEN_QUAD_NUM_VERTICES=6,_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),GPGPUKernelResult=function(){function e(t,n,a){_classCallCheck(this,e),this.ctx=t,this.fbo=n,this.textures=a}return _createClass(e,[{key:"dispose",value:function(){var e=this;null!=this.fbo&&this.ctx.deleteFramebuffer(this.fbo),this.textures.forEach(function(t){e.ctx.deleteTexture(t)})}}]),e}(),GPGPUKernel=function(){function e(t,n){var a=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],i=arguments.length<=3||void 0===arguments[3]?1:arguments[3],r=!(arguments.length<=4||void 0===arguments[4])&&arguments[4];_classCallCheck(this,e),this.manager=t,this.program=n,this.params=a,this.numOutputs=i,this.isGraphical=r}return _createClass(e,[{key:"run",value:function(e,t){var n=this,a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=arguments.length<=3||void 0===arguments[3]?this.ctx.FLOAT:arguments[3];this.ctx.useProgram(this.program),registerUniforms(this.ctx,this.program,this.params,a),registerUniforms(this.ctx,this.program,[{name:"uDims",type:"ivec2"}],{uDims:t.toArray()});var r=compute1DArray(this.numOutputs,function(e){return createComputeTexture(n.ctx,t,i)}),o=this.isGraphical?null:createFBO(this.ctx,this.extDB,r);return this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,o),bindTextures(this.ctx,e),this.ctx.viewport(0,0,t.width,t.height),this.manager.drawFullscreenQuad(this.program),new GPGPUKernelResult(this.ctx,o,r)}},{key:"ctx",get:function(){return this.manager.ctx}},{key:"extDB",get:function(){return this.manager.extDB}}]),e}(),GPGPUManager=function(){function e(t){_classCallCheck(this,e),this.ctx=t,this.extDB=this.ctx.getExtension("WEBGL_draw_buffers"),this.ctx.getExtension("OES_texture_float"),this.quadPosBuffer=createArrayBuffer(this.ctx,this.ctx.ARRAY_BUFFER,FULLSCREEN_QUAD_POS_ARRAY),this.quadIndexBuffer=createArrayBuffer(this.ctx,this.ctx.ELEMENT_ARRAY_BUFFER,FULLSCREEN_QUAD_INDEX_ARRAY)}return _createClass(e,[{key:"drawFullscreenQuad",value:function(e){this.ctx.useProgram(e),this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER,this.quadIndexBuffer),this.ctx.drawElements(this.ctx.TRIANGLE_STRIP,FULLSCREEN_QUAD_NUM_VERTICES,this.ctx.UNSIGNED_SHORT,0)}},{key:"readPackedFloatData",value:function(e){var t=new Uint8Array(4*e.getArea());return this.ctx.readPixels(0,0,e.width,e.height,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,t),new Float32Array(t.buffer)}},{key:"arrayToTexture",value:function(e,t){var n=new Float32Array(flatten(flatten(t)));return createComputeTexture(this.ctx,e,this.ctx.FLOAT,n)}},{key:"textureToArray",value:function(t,n){var a=arguments.length<=2||void 0===arguments[2]?0:arguments[2],i="vec2 cVal = texture2D(uInput, vCoord).xy;\ngl_FragData[0] = packFloat(cVal."+"xyzw"[a]+");\n",r=["uInput"],o=this.createKernel(i,r,t,[],0,e.PACK_FLOAT_INCLUDE),s=o.run([n],t,{},this.ctx.UNSIGNED_BYTE),c=this.readPackedFloatData(t);return s.dispose(),compute2DArray(t,function(e){return c[e.y*t.width+e.x]})}},{key:"createKernel",value:function(t,n,a){var i=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],r=arguments.length<=4||void 0===arguments[4]?1:arguments[4],o=arguments.length<=5||void 0===arguments[5]?"":arguments[5],s=!(arguments.length<=6||void 0===arguments[6])&&arguments[6],c=[].concat(i,n.map(function(e){return{type:"sampler2D",name:e}}),[{type:"ivec2",name:"uDims"}]),l=e.createVertShaderSrc(s),u=e.createFragShaderSrc(t.trim().split("\n").map(function(e){return"    "+e}).join("\n")+"\n",c,o,r>1),m=createProgram(this.ctx,l,u);return this.ctx.useProgram(m),registerVertexAttrib(this.ctx,m,"aPos",2,this.quadPosBuffer),registerTextures(this.ctx,m,n),new GPGPUKernel(this,m,i,r,s)}},{key:"createGraphicalKernel",value:function(e,t,n){var a=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],i=arguments.length<=4||void 0===arguments[4]?"":arguments[4];return this.createKernel(e,t,n,a,0,i,!0)}}]),e}();GPGPUManager.getCanvasContext=function(e){var t={depth:!1,antialias:!1};return e.getContext("webgl",t)||e.getContext("webgl-experimental",t)},GPGPUManager.createVertShaderSrc=function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];return"precision highp float;\n\nattribute vec2 aPos;\n\nvarying vec2 vCoord;\n\nvoid main(){\n    gl_Position = vec4("+(e?"aPos.x, -aPos.y":"aPos")+", 0.0, 1.0);\n    vCoord = (aPos + 1.0) / 2.0;\n}"},GPGPUManager.PACK_FLOAT_INCLUDE="float integerMod(float x, float y) {\n\tfloat res = floor(mod(x, y));\n\tif (res > floor(y) - 1.0) return 0.0;\n\telse return res;\n}\n\nvec4 packFloat(float f) {\n\tif (f == 0.0) return vec4(0.0);\n\tfloat F = abs(f);\n\tfloat exponent = floor(log2(F));\n\tfloat mantissa = exp2(-exponent) * F;\n\texponent = exponent + floor(log2(mantissa));\n\tfloat mantissa_part1 = integerMod(F * exp2(23.0-exponent), 256.0);\n\tfloat mantissa_part2 = integerMod(F * exp2(15.0-exponent), 256.0);\n\tfloat mantissa_part3 = integerMod(F * exp2(7.0-exponent), 128.0);\n\texponent += 127.0;\n\treturn vec4(\n        mantissa_part1,\n        mantissa_part2,\n        128.0 * integerMod(exponent, 2.0) + mantissa_part3,\n        128.0 * (f < 0.0 ? 1.0 : 0.0) + exponent / 2.0\n    ) * 0.003921569;\n}\n\n",GPGPUManager.createFragShaderSrc=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],a=arguments.length<=3||void 0===arguments[3]||arguments[3];return[a?"#extension GL_EXT_draw_buffers: require\n":"","precision highp float;\nprecision highp sampler2D;\n\n#define EPS 0.0000001\n\n"].concat(_toConsumableArray(t.map(function(e){return"uniform "+e.type+" "+e.name+";\n"})),["\nvarying vec2 vCoord;\n\nvec4 arrGet(sampler2D arr, ivec2 id){\n    return texture2D(arr, (vec2(id) + vec2(0.5)) / vec2(uDims));\n}\n\n",n,"void computeFunc(){\n    ivec2 threadId = ivec2(vCoord * vec2(uDims));\n",e,"}\n\nvoid main(){\n    computeFunc();\n}"]).join("")};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),RED=new Color(255,0,0),GREEN=new Color(0,255,0),BLUE=new Color(0,0,255),WHITE=new Color(255,255,255),ContourerManager=function(){function e(t){_classCallCheck(this,e),this.viewport=new ScalableViewportManager(new Vector(0,0),.01),this.zoomSensitivity=.3,this.contourSpacing=1}return _createClass(e,[{key:"changeDrawFunc",value:function(e,t){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],a="vec2 cPos = (vec2(threadId) * uScale) + uPos;\nvec2 res;\n"+e.trim()+"\ngl_FragData[0] = vec4(\n    res,\n    0.0, 0.0\n);\n";this.fieldKernel=this.gpgpuManager.createKernel(a,[],this.dims,[{type:"float",name:"uScale"},{type:"vec2",name:"uPos"}].concat(n?[{type:"float",name:"time"}]:[]),1,t.trim()+"\n\n"),this.viewport.scale=10/this.dims.width,this.viewport.pos=new Vector((-this.dims.width),(-this.dims.height)).divide(2).multiply(this.viewport.scale),this.contourSpacing=1,this.isAnimated=n}},{key:"useCanvas",value:function(t){this.ctx=GPGPUManager.getCanvasContext(t),this.gpgpuManager=new GPGPUManager(this.ctx),this.dims=getCanvasDims(this.ctx),this.plotKernel=this.gpgpuManager.createGraphicalKernel(e.plotFunc,["uField"],this.dims,[{type:"float",name:"uContourSpacing"}],e.FIELD_CHECK_INCLUDE)}},{key:"destroyContext",value:function(){this.ctx.canvas.width=1,this.ctx.canvas.height=1}},{key:"changeZoom",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?new Vector(this.dims.width/2,this.dims.height/2):arguments[1];this.viewport.scaleAtPoint(-e*this.zoomSensitivity,t)}},{key:"changeContourSpacing",value:function(e){this.contourSpacing*=Math.exp(e*this.zoomSensitivity)}},{key:"translate",value:function(e){this.viewport.translate(e)}},{key:"drawContours",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t={uScale:this.viewport.scale,uPos:this.viewport.pos.toArray()};this.isAnimated&&(t.time=e);var n=this.fieldKernel.run([],this.dims,t);this.plotKernel.run([n.textures[0]],this.dims,{uContourSpacing:this.contourSpacing}),n.dispose()}}]),e}();ContourerManager.plotFunc="ivec2 lineIndex = ivec2(floor(texture2D(uField, vCoord).xy / uContourSpacing));\nvec2 cmpField = vec2(lineIndex) * uContourSpacing;\nivec2 drawData = ivec2(greaterThanEqual(\n    fieldCheck(threadId, ivec2(0, 1), cmpField) +\n    fieldCheck(threadId, ivec2(1, 0), cmpField) +\n    fieldCheck(threadId, ivec2(0, -1), cmpField) +\n    fieldCheck(threadId, ivec2(-1, 0), cmpField),\n    ivec2(1)));\nif(all(equal(drawData, ivec2(0)))){\n    gl_FragData[0] = vec4(1.0, 1.0, 1.0, 1.0);\n}\nelse{\n    vec2 isAxis = vec2(equal(lineIndex, ivec2(0)));\n    vec2 lineColor = vec2(drawData) * (1.0 - 0.5 * isAxis);\n    gl_FragData[0] = vec4(lineColor.x, 0.5 * dot(vec2(drawData), isAxis), lineColor.y, 1.0);\n}\n",ContourerManager.FIELD_CHECK_INCLUDE="ivec2 fieldCheck(ivec2 cPos, ivec2 dir, vec2 cmpField){\n    ivec2 oPos = cPos + dir;\n    if(all(greaterThanEqual(oPos, ivec2(0))) && all(lessThan(oPos, uDims))){\n        return ivec2(lessThan(arrGet(uField, oPos).xy, cmpField));\n    }\n    else return ivec2(0);\n}\n\n";var ContourerAnimationManager=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?1e3:arguments[1];_classCallCheck(this,e),this.manager=t,this.isAnimating=!1,this.numFrames=n,this.currentFrame=0,this.onStopCallback=null,this.animationLoop=this.animationLoop.bind(this)}return _createClass(e,[{key:"start",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.currentFrame=e,this.isAnimating=!0,this.onDraw=t,window.requestAnimationFrame(this.animationLoop)}},{key:"animationLoop",value:function(e){this.isAnimating?(this.manager.drawContours(this.currentFrame/this.numFrames),null!=this.onDraw&&this.onDraw(this.currentFrame),this.currentFrame=(this.currentFrame+1)%this.numFrames,window.requestAnimationFrame(this.animationLoop)):null!=this.onStopCallback&&this.onStopCallback()}},{key:"stop",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];this.isAnimating?(this.isAnimating=!1,this.onStopCallback=e):null!=e&&e()}}]),e}(),DemoFunctions=function t(){_classCallCheck(this,t)};DemoFunctions.INCLUDES={pi:"const float PI = 3.1415926535897932384626433832795;\n\n",complexLib:"vec2 complexMult(vec2 a, vec2 b){\n    return vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\n}\n\nvec2 complexDiv(vec2 a, vec2 b){\n    float divisor = dot(b, b);\n    return vec2(dot(a, b), a.y * b.x - a.x * b.y) / divisor;\n}\n\nvec2 complexPow(vec2 a, vec2 b){\n    float r = length(a), phi = atan(a.y, a.x);\n    float newR = pow(r, b.x) * exp(-b.y * phi);\n    float newPhi = b.y * log(r) + b.x * phi;\n    return newR * vec2(cos(newPhi), sin(newPhi));\n}\n\nvec2 complexExp(vec2 b){\n    return exp(b.x) * vec2(cos(b.y), sin(b.y));\n}\n\nvec2 complexLog(vec2 x){\n    return vec2(log(length(x)), atan(x.y, x.x));\n}\n\n",gamma:'/**\n * Translated to OpenGL ES from math.js\n * https://github.com/josdejong/mathjs\n *\n * Math.js is an extensive math library for JavaScript and Node.js,\n * It features real and complex numbers, units, matrices, a large set of\n * mathematical functions, and a flexible expression parser.\n *\n * @version 3.2.1\n * @date    2016-04-26\n *\n * @license\n * Copyright (C) 2013-2016 Jos de Jong <wjosdejong@gmail.com>\n *\n * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n * use this file except in compliance with the License. You may obtain a copy\n * of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n\nvec2 gammaStep(vec2 x, int i, vec2 n, float p){\n    float real = n.x + float(i);\n    float den = real * real + n.y * n.y;\n    if(den != 0.0){\n        return x + vec2(p * real / den, -(p * n.y) / den);\n    }\n    else return vec2(0.0);\n}\n\nvec2 gamma(vec2 n){\n    n.x -= 1.0;\n    vec2 x = vec2(0.99999999999999709182, 0.0);\n\tx = gammaStep(x, 1, n, 57.156235665862923517);\n\tx = gammaStep(x, 2, n, -59.597960355475491248);\n\tx = gammaStep(x, 3, n, 14.136097974741747174);\n\tx = gammaStep(x, 4, n, -0.49191381609762019978);\n\tx = gammaStep(x, 5, n, 0.33994649984811888699e-4);\n\tx = gammaStep(x, 6, n, 0.46523628927048575665e-4);\n\tx = gammaStep(x, 7, n, -0.98374475304879564677e-4);\n\tx = gammaStep(x, 8, n, 0.15808870322491248884e-3);\n\tx = gammaStep(x, 9, n, -0.21026444172410488319e-3);\n\tx = gammaStep(x, 10, n, 0.21743961811521264320e-3);\n\tx = gammaStep(x, 11, n, -0.16431810653676389022e-3);\n\tx = gammaStep(x, 12, n, 0.84418223983852743293e-4);\n\tx = gammaStep(x, 13, n, -0.26190838401581408670e-4);\n\tx = gammaStep(x, 14, n, 0.36899182659531622704e-5);\n    vec2 t = vec2(n.x + 4.7421875 + 0.5, n.y);\n    float twoPiSqrt = sqrt(2.0 * PI);\n\n    n.x += 0.5;\n    vec2 result = complexPow(t, n);\n    result *= twoPiSqrt;\n    float r = exp(-t.x);\n    t = r * vec2(cos(-t.y), sin(-t.y));\n\n    return complexMult(complexMult(result, t), x);\n}\n\n',rotateWithTime:"vec2 rotateWithTime(vec2 v){\n    float cosT = cos(time * 2.0 * PI), sinT = sin(time * 2.0 * PI);\n    return vec2(\n        v.x * cosT - v.y * sinT,\n        v.x * sinT + v.y * cosT\n    );\n}\n\n",snoise:"//\n// Description : Array and textureless GLSL 2D/3D/4D simplex \n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n  }\n\t\t\t\t\t\t\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\n"},DemoFunctions.functions={lorentz:{displayName:"Lorentz Boost",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float beta = sin(time * 2.0 * PI) * 0.9;\nfloat gamma = 1.0 / sqrt(1.0 - beta * beta);\nres = gamma * vec2(\n    cPos.x * 1.0 + cPos.y * beta,\n    cPos.y * 1.0 + cPos.x * beta\n);\n\n"},mercatorwarp:{displayName:"Mercator Warp",isAnimated:!0,numFrames:800,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"vec2 scaledPos = cPos * 0.6;\nvec2 invMercator = vec2(scaledPos.x, 2.0 * atan(exp(scaledPos.y)) - 0.5 * PI) * 8.0;\nres = rotateWithTime(invMercator);\n"},mercatorMollweide:{displayName:"Mercator to Mollweide",isAnimated:!0,numFrames:100,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"vec2 scaledPos = cPos * 0.3;\nfloat theta = asin(scaledPos.y * 2.0 / PI);\nvec2 invMollweide = vec2(\n    scaledPos.x / cos(theta),\n    asin((2.0 * theta + sin(2.0 * theta)) / PI)\n);\nvec2 invMercator = vec2(scaledPos.x, 2.0 * atan(exp(scaledPos.y)) - 0.5 * PI);\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = (invMollweide * mixParam + invMercator * (1.0 - mixParam)) * 8.0;\n"},dipole:{displayName:"Dipole Formation",isAnimated:!0,numFrames:300,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"float dist = sin(time * 2.0 * PI + PI / 2.0) * 2.0 + 2.5;\nres = 50.0 / (2.0 * dist) * (\n    complexLog(cPos - vec2(dist, 0.0)) -\n    complexLog(cPos - vec2(-dist, 0.0))\n);\n"},attractRepel:{displayName:"Attraction to Repulsion",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"res = 10.0 * (\n    complexLog(cPos - vec2(1.0, 0.0)) +\n    sin(time * 2.0 * PI - PI / 2.0) * complexLog(cPos - vec2(-1.0, 0.0))\n);\n"},neuralnetwork:{displayName:"Neural Network",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float mixParam = -cos(time * 2.0 * PI) / 2.0 + 0.5;\nvec2 unsigmoid = -log(1.0 / ((cPos + vec2(3.3, 3.0)) / 6.3) - 1.0);\nres = (vec2(\n    unsigmoid.x * 2.0 + unsigmoid.y * 1.0,\n    unsigmoid.x * 2.0 + unsigmoid.y * 3.0\n) - vec2(1.0, -2.0)) * mixParam + cPos * (1.0 - mixParam);\n"},galaxy:{displayName:"Galaxy Warp",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float mixParam = -cos(time * 2.0 * PI) / 2.0 + 0.5;\nvec2 polPos = vec2(length(cPos), atan(cPos.y, cPos.x));\npolPos = vec2(polPos.x, polPos.y - mixParam / 50.0 * sqrt(1.0 / pow(polPos.x / 40.0, 3.0)));\nres = vec2(polPos.x * cos(polPos.y), polPos.x * sin(polPos.y));\n"},simplex:{displayName:"Simplex Warp",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.snoise,drawFunc:"vec2 circleVary = 2.0 * vec2(\n    cos(time * 2.0 * PI),\n    sin(time * 2.0 * PI)\n);\nres = 2.0 * (cPos +\n0.5 * vec2(\n    snoise(vec4(cPos * 0.25, circleVary + vec2(100.0, 100.0))),\n    snoise(vec4(cPos * 0.25, circleVary + vec2(200.0, 200.0)))\n));\n"},exponentiation:{displayName:"Complex Exponentiation",isAnimated:!0,numFrames:300,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 cartRes = 10.0 * complexPow(cPos, vec2(1.0 / (2.5 - 1.5 * cos(time * 2.0 * PI)), 0.0));\nres = vec2(length(cartRes), 10.0 * atan(cartRes.y, cartRes.x));\n"},mobius:{displayName:"Mobius Transformation",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"res = rotateWithTime(10.0 * complexDiv(\n    complexMult(vec2(0.5, 3.0), cPos) + vec2(0.5, 1.5),\n    complexMult(vec2(4.0, 1.5), cPos) + vec2(2.0, 3.5)\n));\n"},arcsin:{displayName:"Complex Inverse Sine",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 invSin = - 10.0 * complexMult(complexLog(complexPow(vec2(1.0, 0.0) - complexPow(cPos, vec2(2.0, 0.0)), vec2(0.5, 0.0)) + complexMult(cPos, vec2(0.0, 1.0))), vec2(0.0, 1.0));\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = invSin * mixParam + cPos * (1.0 - mixParam);\n"},gamma:{displayName:"Gamma Function",isAnimated:!0,
numFrames:400,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.gamma+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"res = rotateWithTime(10.0 * gamma((cPos + vec2(2.0, 0.0)) / 2.0));\n"},madness:{displayName:"Complex ???",isAnimated:!0,numFrames:800,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 madness = - 10.0 * complexMult(complexLog(complexPow(vec2(2.0, 3.0) - complexPow(cPos * 2.0, vec2(2.0, 1.0)), vec2(0.5, 1.0)) + complexMult(cPos * 2.0, vec2(2.0, 1.0))), vec2(2.0, 1.0));\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = madness * mixParam + cPos * (1.0 - mixParam);\n"}};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),CanvasDisplayPane=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){if("onMountCallback"in this.props){var e=ReactDOM.findDOMNode(this);this.props.onMountCallback(e)}}},{key:"componentWillUnmount",value:function(){"onDismountCallback"in this.props&&this.props.onDismountCallback()}},{key:"render",value:function(){return React.createElement("canvas",{width:this.props.dims.width,height:this.props.dims.height,style:{width:"100%"}})}}]),t}(React.Component);CanvasDisplayPane.propTypes={dims:React.PropTypes.instanceOf(Dimensions).isRequired,onMountCallback:React.PropTypes.func};var DrawFunctionSelectorButton=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("button",{type:"button",className:"list-group-item"+(this.props.selected?" active":""),onClick:function(){e.props.onClick(e.props.funcName)}},this.props.displayName)}}]),t}(React.Component),DrawFunctionSelector=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.state={selectedFunc:t.DEFAULT_FUNC},n.handleClick=n.handleClick.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"list-group"},Object.keys(DemoFunctions.functions).map(function(t){return React.createElement(DrawFunctionSelectorButton,{displayName:DemoFunctions.functions[t].displayName,key:t,funcName:t,selected:t==e.state.selectedFunc,onClick:e.handleClick})}))}},{key:"handleClick",value:function(e){this.setState({selectedFunc:e}),this.props.onSelect(e)}}]),t}(React.Component);DrawFunctionSelector.DEFAULT_FUNC="attractRepel";var AceEditor=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=ReactDOM.findDOMNode(this);this.editor=ace.edit(e),this.editor.setTheme("ace/theme/monokai"),this.editor.getSession().setUseWorker(!1),this.editor.getSession().setMode("ace/mode/glsl"),this.editor.$blockScrolling=1/0,this.editor.setFontSize(18),this.editor.setOptions({maxLines:1/0}),this.editor.getSession().setUseWrapMode(!0)}},{key:"componentWillUnmount",value:function(){this.editor.destroy()}},{key:"setValue",value:function(e){this.editor.setValue(e),this.editor.clearSelection()}},{key:"getValue",value:function(){return this.editor.getSession().getValue()}},{key:"render",value:function(){return React.createElement("div",{style:{height:this.props.height.toString()+"px"}})}}]),t}(React.Component),ContourerApp=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.animationManager=new ContourerAnimationManager(n.props.manager),n.state={isAnimated:!1,isAnimating:!1,currentFrame:0,numFrames:0,isAnimatedSelectState:!1,numFramesInputVal:"0",shaderCompileError:""},n.useCanvas=n.useCanvas.bind(n),n.setDrawFunc=n.setDrawFunc.bind(n),n.onDrawFuncSelect=n.onDrawFuncSelect.bind(n),n.redraw=n.redraw.bind(n),n.changeZoomAndRedraw=n.changeZoomAndRedraw.bind(n),n.changeContourSpacingAndRedraw=n.changeContourSpacingAndRedraw.bind(n),n.translateAndRedraw=n.translateAndRedraw.bind(n),n.handlePlotClick=n.handlePlotClick.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){this.onDrawFuncSelect(DrawFunctionSelector.DEFAULT_FUNC)}},{key:"render",value:function(){var e=this,t=new Dimensions(640,480);return React.createElement("div",_defineProperty({className:"container"},"className","col-lg-12"),React.createElement("div",{className:"page-header"},React.createElement("h1",null,"Fun with Contours")),React.createElement("div",{className:"well"},React.createElement("p",null,React.createElement("b",null,"Drag")," to move the graph, ",React.createElement("b",null,"scroll")," to zoom, and ",React.createElement("b",null,"Ctrl + scroll")," to change the contour density."),React.createElement("p",null,"Modify ",React.createElement("b",null,React.createElement("a",{href:"#",onClick:function(t){e.numFramesInput.focus(),t.preventDefault()}},"Frames"))," (number of frames), then click ",React.createElement("b",null,"Plot")," to change the animation speed."),React.createElement("p",null,"Use the ",React.createElement("b",null,"slider")," to explore the animation in more detail."),React.createElement("p",null,"Plot your own functions with the ",React.createElement("b",null,"text editors")," below."),React.createElement("p",null,"Just enjoy the pretty animations, or ",React.createElement("b",null,React.createElement("a",{href:"https://github.com/krawthekrow/contourer"},"click here"))," to learn more."),React.createElement("p",null,React.createElement("b",null,"Note: This app uses WebGL, so it needs a sufficiently modern browser and GPU to work."))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3"},React.createElement(DrawFunctionSelector,{onSelect:this.onDrawFuncSelect})),React.createElement("div",{className:"col-sm-9"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-8"},React.createElement("div",{role:"toolbar"},React.createElement("div",{className:"btn-group",role:"group"},React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeZoomAndRedraw(1)}},React.createElement("span",{className:"glyphicon glyphicon-zoom-in"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeZoomAndRedraw(-1)}},React.createElement("span",{className:"glyphicon glyphicon-zoom-out"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeContourSpacingAndRedraw(-1)}},React.createElement("span",{className:"glyphicon glyphicon-plus"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeContourSpacingAndRedraw(1)}},React.createElement("span",{className:"glyphicon glyphicon-minus"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(1,0))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-left"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(0,1))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-up"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(0,(-1)))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-down"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector((-1),0))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-right"})),this.state.isAnimated&&this.state.isAnimating?React.createElement("button",{type:"button",className:classNames("btn","btn-default",{disabled:!this.state.isAnimated}),onClick:function(t){e.state.isAnimated&&e.state.isAnimating&&e.animationManager.stop(function(){e.setState({isAnimating:!1})})}},React.createElement("span",{className:"glyphicon glyphicon-pause"})):React.createElement("button",{type:"button",className:classNames("btn","btn-default",{disabled:!this.state.isAnimated}),onClick:function(t){e.state.isAnimated&&!e.state.isAnimating&&(e.animationManager.start(e.state.currentFrame,function(t){e.setState({currentFrame:t})}),e.setState({isAnimating:!0}))}},React.createElement("span",{className:"glyphicon glyphicon-play"}))))),React.createElement("div",{className:"col-xs-4"},this.state.isAnimated?React.createElement("input",{type:"range",min:"0",max:(this.state.numFrames-1).toString(),value:this.state.currentFrame,style:{marginTop:"5px"},onChange:function(t){e.setState({currentFrame:parseInt(t.target.value)}),e.state.isAnimating?e.animationManager.stop(function(){e.setState({isAnimating:!1}),e.props.manager.drawContours(e.state.currentFrame/e.state.numFrames)}):e.props.manager.drawContours(e.state.currentFrame/e.state.numFrames)}}):null)),React.createElement("div",{style:{marginTop:"10px"}},React.createElement(CanvasDisplayPane,{dims:t,onMountCallback:function(t){e.useCanvas(t)},onDismountCallback:function(){e.props.manager.destroyContext()}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("h1",null,"Plot Function"),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-9"},React.createElement("div",{className:"form-inline"},React.createElement("div",{className:"btn-group",style:{marginRight:"10px"},role:"group"},React.createElement("button",{type:"button",className:classNames("btn",this.state.isAnimatedSelectState?"btn-default":"btn-primary",{active:!this.state.isAnimatedSelectState}),onClick:function(t){e.setState({isAnimatedSelectState:!1})}},"Static"),React.createElement("button",{type:"button",className:classNames("btn",this.state.isAnimatedSelectState?"btn-primary":"btn-default",{active:this.state.isAnimatedSelectState}),onClick:function(t){e.setState({isAnimatedSelectState:!0})}},"Dynamic")),React.createElement("div",{className:classNames("form-group",{"has-error":this.isNumFramesInputInvalid()}),style:{display:"inline-block",marginBottom:0,verticalAlign:"middle"}},React.createElement("div",{className:"input-group"},React.createElement("span",{className:"input-group-addon"},"Frames"),React.createElement("input",{type:"text",className:"form-control",value:this.state.numFramesInputVal,disabled:!this.state.isAnimatedSelectState,ref:function(t){e.numFramesInput=t},onChange:function(t){e.setState({numFramesInputVal:t.target.value})},style:{width:"60px"}})),React.createElement("div",{className:"help-block",style:{display:this.isNumFramesInputInvalid()?"inline-block":"none",marginLeft:"10px"}},"Must be an integer")))),React.createElement("div",{className:"col-xs-3"},React.createElement("button",{type:"button",className:"btn btn-success btn-block pull-right",style:{width:"80px"},disabled:this.isNumFramesInputInvalid(),ref:function(t){e.plotButton=t},onClick:this.handlePlotClick},"Plot"))),""==this.state.shaderCompileError?null:React.createElement("div",{className:"has-error"},React.createElement("div",{className:"help-block"},React.createElement("p",null,"Your code failed to compile with the following error:"),React.createElement("p",null,this.state.shaderCompileError.trim().split("\n").map(function(e,t){return React.createElement("span",{key:t},e,React.createElement("br",null))})),this.state.shaderCompileError.indexOf("wrong operand types")!=-1?React.createElement("p",null,React.createElement("b",null,'Note that GLSL ES does not implicitly cast ints to floats. Write numbers like "23" as "23.0".')):null,this.state.shaderCompileError.indexOf("gl_FragData")!=-1?React.createElement("p",null,React.createElement("b",null,"Did you forget a semicolon on the last line?")):null,React.createElement("p",null,"View the console to see the full generated WebGL shader code."))),React.createElement("div",{style:{marginTop:"10px"}},React.createElement(AceEditor,{height:"200",key:"drawFuncEditor",ref:function(t){e.drawFuncEditor=t}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("h1",null,"Library Functions"),React.createElement("div",{style:{marginBottom:"10px"}},React.createElement(AceEditor,{height:"200",key:"includeSrcEditor",ref:function(t){e.includeSrcEditor=t}})))))}},{key:"useCanvas",value:function(e){var t=this;new DragManager(e,function(e){t.props.manager.viewport.translate(e),t.redraw()},function(e){return!0});e.addEventListener("wheel",function(n){n.ctrlKey?t.changeContourSpacingAndRedraw(getScrollDir(n)):(t.props.manager.changeZoom(-getScrollDir(n),getCanvasMousePos(e,n)),t.redraw()),n.preventDefault()}),this.props.manager.useCanvas(e)}},{key:"isNumFramesInputInvalid",value:function(){return this.state.isAnimatedSelectState&&this.state.numFramesInputVal.split("").some(function(e){return e.charCodeAt()<"0".charCodeAt()||e.charCodeAt()>"9".charCodeAt()})}},{key:"handlePlotClick",value:function(e){this.setDrawFunc(this.drawFuncEditor.getValue(),this.includeSrcEditor.getValue(),this.state.isAnimatedSelectState,this.state.isAnimatedSelectState?parseInt(this.state.numFramesInputVal):0)}},{key:"redraw",value:function(){this.state.isAnimated?this.props.manager.drawContours(this.state.currentFrame/this.state.numFrames):this.props.manager.drawContours()}},{key:"changeZoomAndRedraw",value:function(e){this.props.manager.changeZoom(e),this.redraw()}},{key:"changeContourSpacingAndRedraw",value:function(e){this.props.manager.changeContourSpacing(e),this.redraw()}},{key:"translateAndRedraw",value:function(e){this.props.manager.translate(e.multiply(50)),this.redraw()}},{key:"setDrawFunc",value:function(e,t){var n=this,a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];try{this.props.manager.changeDrawFunc(e,t,a)}catch(r){return void this.setState({shaderCompileError:r})}this.setState({isAnimated:a,isAnimating:a,currentFrame:0,numFrames:i,isAnimatedSelectState:a,numFramesInputVal:i.toString(),shaderCompileError:""}),this.animationManager.numFrames=i,a?this.animationManager.stop(function(){n.animationManager.start(0,function(e){n.setState({currentFrame:e})})}):this.props.manager.drawContours()}},{key:"onDrawFuncSelect",value:function(e){var t=DemoFunctions.functions[e];this.drawFuncEditor.setValue(t.drawFunc.trim()),this.includeSrcEditor.setValue(t.includeSrc.trim()),t.isAnimated?this.setDrawFunc(t.drawFunc,t.includeSrc,t.isAnimated,t.numFrames):this.setDrawFunc(t.drawFunc,t.includeSrc)}}]),t}(React.Component);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwiYnVuZGxlLm1pbi5qcyIsImNhbnZhc1V0aWxzLmpzIiwid2ViZ2xVdGlscy5qcyIsImNvbnRvdXJlci5qcyIsInJlYWN0Q29tcG9uZW50cy5qc3giLCJncGdwdVV0aWxzLmpzIiwiZGVtb0Z1bmN0aW9ucy5qcyJdLCJuYW1lcyI6WyJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwiYXJyMiIsImxlbmd0aCIsImZyb20iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiaXNQb2ludEluUmVjdCIsInAiLCJyZWN0IiwieCIsImxlZnQiLCJyaWdodCIsInkiLCJ0b3AiLCJib3R0b20iLCJjb21wdXRlMURBcnJheSIsImZ1bmMiLCJmaWxsIiwidW5kZWZpbmVkIiwibWFwIiwidW51c2VkIiwiY29tcHV0ZTJEQXJyYXkiLCJkaW1zIiwiaGVpZ2h0Iiwid2lkdGgiLCJpMiIsIlZlY3RvciIsImZsYXR0ZW4iLCJfcmVmIiwiY29uY2F0IiwiYXBwbHkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJjYWxsIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJnZXRDYW52YXNNb3VzZVBvcyIsImNhbnZhcyIsImV2IiwiYm91bmRpbmdSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50WCIsImNsaWVudFkiLCJnZXRTY3JvbGxEaXIiLCJkZWx0YVkiLCJNYXRoIiwiYWJzIiwic2V0Q2FudmFzU21vb3RoaW5nIiwiY3R4IiwiZW5hYmxlIiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwid2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibW5JbWFnZVNtb290aGluZ0VuYWJsZWQiLCJjcmVhdGVDYW52YXMiLCJjb250YWluZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBvc2l0aW9uIiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsImdldENvbnRleHQiLCJnZXRDYW52YXNEaW1zIiwiRGltZW5zaW9ucyIsImNvbXBpbGVTaGFkZXIiLCJzcmMiLCJ0eXBlIiwic2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwic2hhZGVyU291cmNlIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJjb25zb2xlIiwibG9nIiwiZ2V0U2hhZGVySW5mb0xvZyIsImNyZWF0ZVByb2dyYW0iLCJ2ZXJ0U3JjIiwiZnJhZ1NyYyIsInByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwiRlJBR01FTlRfU0hBREVSIiwibGlua1Byb2dyYW0iLCJjcmVhdGVDb21wdXRlVGV4dHVyZSIsInRleFR5cGUiLCJhcmd1bWVudHMiLCJGTE9BVCIsImNvbnRlbnRzIiwidGV4IiwiY3JlYXRlVGV4dHVyZSIsImJpbmRUZXh0dXJlIiwiVEVYVFVSRV8yRCIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX01JTl9GSUxURVIiLCJORUFSRVNUIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiVEVYVFVSRV9XUkFQX1MiLCJDTEFNUF9UT19FREdFIiwiVEVYVFVSRV9XUkFQX1QiLCJ0ZXhJbWFnZTJEIiwiUkdCQSIsImNyZWF0ZUZCTyIsImV4dERCIiwidGV4dHVyZXMiLCJmYm8iLCJjcmVhdGVGcmFtZWJ1ZmZlciIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiZHJhd0J1ZmZlcnNXRUJHTCIsImZvckVhY2giLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyIsIkZSQU1FQlVGRkVSX0NPTVBMRVRFIiwiY3JlYXRlQXJyYXlCdWZmZXIiLCJidWZUeXBlIiwiYnVmIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsInJlZ2lzdGVyVmVydGV4QXR0cmliIiwiYXR0cmliTmFtZSIsIml0ZW1TaXplIiwiYXR0cmliIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsIkFSUkFZX0JVRkZFUiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJyZWdpc3RlclRleHR1cmVzIiwidGV4TmFtZXMiLCJ0ZXhOYW1lIiwidGV4TG9jIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidW5pZm9ybTFpIiwicmVnaXN0ZXJVbmlmb3JtcyIsInVuaWZvcm1zIiwidmFscyIsInVuaWZvcm0iLCJ1bmlmb3JtTG9jIiwibmFtZSIsInVuaWZvcm0xZiIsInRlc3QiLCJJbnQzMkFycmF5IiwiRmxvYXQzMkFycmF5IiwiYmluZFRleHR1cmVzIiwidGV4dHVyZSIsImFjdGl2ZVRleHR1cmUiLCJpbml0IiwibWFuYWdlciIsIkNvbnRvdXJlck1hbmFnZXIiLCJpbml0UmVuZGVyIiwiX2RlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRFbGVtZW50QnlJZCIsIlJlYWN0RE9NIiwicmVuZGVyIiwiUmVhY3QiLCJDb250b3VyZXJBcHAiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwidGhpcyIsIm9WZWMiLCJzY2FsZSIsImZsb29yIiwic3FydCIsImRvdCIsImF0YW4yIiwiciIsInBoaSIsImNvcyIsInNpbiIsInBvcyIsIlJlY3QiLCJDb2xvciIsImciLCJiIiwiZ2V0IiwiTU9VU0VfTEVGVCIsIk1PVVNFX1JJR0hUIiwiTU9VU0VfTUlERExFIiwiRElSUzQiLCJTY2FsYWJsZVZpZXdwb3J0TWFuYWdlciIsInZlYyIsIm11bHRpcGx5IiwiYWRkIiwic3VidHJhY3QiLCJkaXZpZGUiLCJzY2FsZUFtb3VudCIsInNjYWxlUG9pbnQiLCJuZXdTY2FsZSIsImV4cCIsIm5ld1BvcyIsIk1vdXNlRG93blRyYWNrZXIiLCJpbml0VHJhY2tDYWxsYmFjayIsInRyYWNrQ2FsbGJhY2siLCJfdGhpcyIsImlzVHJhY2tpbmdFbmFibGVkIiwib25Nb3VzZURvd24iLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib25Nb3VzZU1vdmUiLCJvbk1vdXNlVXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJEcmFnTWFuYWdlciIsIl9Nb3VzZURvd25UcmFja2VyIiwiZHJhZ0NhbGxiYWNrIiwiaXNEcmFnRW5hYmxlZCIsIl90aGlzMiIsImdldFByb3RvdHlwZU9mIiwicHJldk1vdXNlUG9zIiwibW91c2VQb3MiLCJGVUxMU0NSRUVOX1FVQURfUE9TX0FSUkFZIiwiRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZIiwiVWludDE2QXJyYXkiLCJGVUxMU0NSRUVOX1FVQURfTlVNX1ZFUlRJQ0VTIiwiR1BHUFVLZXJuZWxSZXN1bHQiLCJkZWxldGVGcmFtZWJ1ZmZlciIsImRlbGV0ZVRleHR1cmUiLCJHUEdQVUtlcm5lbCIsInBhcmFtcyIsIm51bU91dHB1dHMiLCJpc0dyYXBoaWNhbCIsImlucHV0VGV4dHVyZXMiLCJvdXRwdXREaW1zIiwicGFyYW1WYWxzIiwib3V0cHV0VHlwZSIsInVzZVByb2dyYW0iLCJ1RGltcyIsInRvQXJyYXkiLCJvdXRwdXRUZXh0dXJlcyIsInZpZXdwb3J0IiwiZHJhd0Z1bGxzY3JlZW5RdWFkIiwiR1BHUFVNYW5hZ2VyIiwiZ2V0RXh0ZW5zaW9uIiwicXVhZFBvc0J1ZmZlciIsInF1YWRJbmRleEJ1ZmZlciIsIkVMRU1FTlRfQVJSQVlfQlVGRkVSIiwiZHJhd0VsZW1lbnRzIiwiVFJJQU5HTEVfU1RSSVAiLCJVTlNJR05FRF9TSE9SVCIsIlVpbnQ4QXJyYXkiLCJnZXRBcmVhIiwicmVhZFBpeGVscyIsIlVOU0lHTkVEX0JZVEUiLCJidWZmZXIiLCJmbGF0dGVuZWRBcnIiLCJjb21wb25lbnQiLCJjb21wdXRlRnVuYyIsImlucHV0TmFtZXMiLCJrZXJuZWwiLCJjcmVhdGVLZXJuZWwiLCJQQUNLX0ZMT0FUX0lOQ0xVREUiLCJyZXN1bHRzIiwicnVuIiwib3V0cHV0IiwicmVhZFBhY2tlZEZsb2F0RGF0YSIsImRpc3Bvc2UiLCJpbmNsdWRlU3JjIiwiaW5wdXROYW1lIiwidmVydFNoYWRlclNyYyIsImNyZWF0ZVZlcnRTaGFkZXJTcmMiLCJmcmFnU2hhZGVyU3JjIiwiY3JlYXRlRnJhZ1NoYWRlclNyYyIsInRyaW0iLCJzcGxpdCIsImxpbmUiLCJqb2luIiwiZ2V0Q2FudmFzQ29udGV4dCIsIm9wdGlvbnMiLCJkZXB0aCIsImFudGlhbGlhcyIsImZsaXBZIiwidXNlRHJhd0J1ZmZlcnMiLCJSRUQiLCJHUkVFTiIsIkJMVUUiLCJXSElURSIsImRyYXdGdW5jIiwiem9vbVNlbnNpdGl2aXR5IiwiY29udG91clNwYWNpbmciLCJpc0FuaW1hdGVkIiwiZmllbGRGdW5jIiwiZmllbGRLZXJuZWwiLCJncGdwdU1hbmFnZXIiLCJwbG90S2VybmVsIiwiY3JlYXRlR3JhcGhpY2FsS2VybmVsIiwicGxvdEZ1bmMiLCJGSUVMRF9DSEVDS19JTkNMVURFIiwiY2hhbmdlQW1vdW50Iiwiem9vbVBvaW50Iiwic2NhbGVBdFBvaW50IiwidHJhbnNsYXRlQW1vdW50IiwidHJhbnNsYXRlIiwidGltZSIsInVuaWZvcm1Bc3NpZ25tZW50cyIsInVTY2FsZSIsInVQb3MiLCJmaWVsZFJlc3VsdCIsInVDb250b3VyU3BhY2luZyIsIkNvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIiLCJudW1GcmFtZXMiLCJpc0FuaW1hdGluZyIsImN1cnJlbnRGcmFtZSIsIm9uU3RvcENhbGxiYWNrIiwiYW5pbWF0aW9uTG9vcCIsImJpbmQiLCJzdGFydEZyYW1lIiwib25EcmF3IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidGltZXN0YW1wIiwiZHJhd0NvbnRvdXJzIiwiRGVtb0Z1bmN0aW9ucyIsIklOQ0xVREVTIiwicGkiLCJjb21wbGV4TGliIiwiZ2FtbWEiLCJyb3RhdGVXaXRoVGltZSIsInNub2lzZSIsImZ1bmN0aW9ucyIsImxvcmVudHoiLCJkaXNwbGF5TmFtZSIsIm1lcmNhdG9yd2FycCIsIm1lcmNhdG9yTW9sbHdlaWRlIiwiZGlwb2xlIiwiYXR0cmFjdFJlcGVsIiwibmV1cmFsbmV0d29yayIsImdhbGF4eSIsInNpbXBsZXgiLCJleHBvbmVudGlhdGlvbiIsIm1vYml1cyIsImFyY3NpbiIsIm1hZG5lc3MiLCJDYW52YXNEaXNwbGF5UGFuZSIsIl9SZWFjdCRDb21wb25lbnQiLCJmaW5kRE9NTm9kZSIsIm9uTW91bnRDYWxsYmFjayIsIm9uRGlzbW91bnRDYWxsYmFjayIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImluc3RhbmNlT2YiLCJpc1JlcXVpcmVkIiwiRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24iLCJfUmVhY3QkQ29tcG9uZW50MiIsIl90aGlzMyIsImNsYXNzTmFtZSIsInNlbGVjdGVkIiwib25DbGljayIsImZ1bmNOYW1lIiwiRHJhd0Z1bmN0aW9uU2VsZWN0b3IiLCJfUmVhY3QkQ29tcG9uZW50MyIsIl90aGlzNCIsInN0YXRlIiwic2VsZWN0ZWRGdW5jIiwiREVGQVVMVF9GVU5DIiwiaGFuZGxlQ2xpY2siLCJfdGhpczUiLCJrZXlzIiwic2V0U3RhdGUiLCJvblNlbGVjdCIsIkFjZUVkaXRvciIsIl9SZWFjdCRDb21wb25lbnQ0IiwiZWRpdG9yRGl2IiwiZWRpdG9yIiwiYWNlIiwiZWRpdCIsInNldFRoZW1lIiwiZ2V0U2Vzc2lvbiIsInNldFVzZVdvcmtlciIsInNldE1vZGUiLCIkYmxvY2tTY3JvbGxpbmciLCJJbmZpbml0eSIsInNldEZvbnRTaXplIiwic2V0T3B0aW9ucyIsIm1heExpbmVzIiwic2V0VXNlV3JhcE1vZGUiLCJkZXN0cm95IiwibmV3Q29udGVudHMiLCJzZXRWYWx1ZSIsImNsZWFyU2VsZWN0aW9uIiwiZ2V0VmFsdWUiLCJfUmVhY3QkQ29tcG9uZW50NSIsIl90aGlzNyIsImFuaW1hdGlvbk1hbmFnZXIiLCJpc0FuaW1hdGVkU2VsZWN0U3RhdGUiLCJudW1GcmFtZXNJbnB1dFZhbCIsInNoYWRlckNvbXBpbGVFcnJvciIsInVzZUNhbnZhcyIsInNldERyYXdGdW5jIiwib25EcmF3RnVuY1NlbGVjdCIsInJlZHJhdyIsImNoYW5nZVpvb21BbmRSZWRyYXciLCJjaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdyIsInRyYW5zbGF0ZUFuZFJlZHJhdyIsImhhbmRsZVBsb3RDbGljayIsIl90aGlzOCIsIkNBTlZBU19ESU1TIiwiaHJlZiIsIm51bUZyYW1lc0lucHV0IiwiZm9jdXMiLCJyb2xlIiwiZSIsImNsYXNzTmFtZXMiLCJkaXNhYmxlZCIsInN0b3AiLCJzdGFydCIsIm1pbiIsIm1heCIsIm1hcmdpblRvcCIsIm9uQ2hhbmdlIiwicGFyc2VJbnQiLCJkZXN0cm95Q29udGV4dCIsIm1hcmdpblJpZ2h0IiwiYWN0aXZlIiwiaGFzLWVycm9yIiwiaXNOdW1GcmFtZXNJbnB1dEludmFsaWQiLCJkaXNwbGF5IiwibWFyZ2luQm90dG9tIiwidmVydGljYWxBbGlnbiIsInJlZiIsImlucHV0IiwibWFyZ2luTGVmdCIsImJ1dHRvbiIsInBsb3RCdXR0b24iLCJpbmRleCIsImluZGV4T2YiLCJkcmF3RnVuY0VkaXRvciIsImluY2x1ZGVTcmNFZGl0b3IiLCJfdGhpczkiLCJkcmFnVmVjIiwiY3RybEtleSIsImNoYW5nZVpvb20iLCJzb21lIiwiYyIsImNoYXJDb2RlQXQiLCJjaGFuZ2VDb250b3VyU3BhY2luZyIsIl90aGlzMTAiLCJjaGFuZ2VEcmF3RnVuYyIsImVyciJdLCJtYXBwaW5ncyI6IkFBQUEsWUNJQSxTQUFTQSxvQkFBbUJDLEdBQU8sR0FBSUMsTUFBTUMsUUFB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ZWN0b3J7XG4gICAgY29uc3RydWN0b3IoeCwgeSl7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUG9sYXIociwgcGhpKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICByICogTWF0aC5jb3MocGhpKSxcbiAgICAgICAgICAgIHIgKiBNYXRoLnNpbihwaGkpXG4gICAgICAgICk7XG4gICAgfVxuICAgIGFkZChvVmVjKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB0aGlzLnggKyBvVmVjLngsXG4gICAgICAgICAgICB0aGlzLnkgKyBvVmVjLnlcbiAgICAgICAgKTtcbiAgICB9XG4gICAgc3VidHJhY3Qob1ZlYyl7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdGhpcy54IC0gb1ZlYy54LFxuICAgICAgICAgICAgdGhpcy55IC0gb1ZlYy55XG4gICAgICAgICk7XG4gICAgfVxuICAgIG11bHRpcGx5KHNjYWxlKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB0aGlzLnggKiBzY2FsZSxcbiAgICAgICAgICAgIHRoaXMueSAqIHNjYWxlXG4gICAgICAgICk7XG4gICAgfVxuICAgIGRpdmlkZShzY2FsZSl7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdGhpcy54IC8gc2NhbGUsXG4gICAgICAgICAgICB0aGlzLnkgLyBzY2FsZVxuICAgICAgICApO1xuICAgIH1cbiAgICBlcXVhbHMob1ZlYyl7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLnggPT0gb1ZlYy54ICYmXG4gICAgICAgICAgICB0aGlzLnkgPT0gb1ZlYy55XG4gICAgICAgICk7XG4gICAgfVxuICAgIGZsb29yKCl7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgTWF0aC5mbG9vcih0aGlzLngpLFxuICAgICAgICAgICAgTWF0aC5mbG9vcih0aGlzLnkpXG4gICAgICAgICk7XG4gICAgfVxuICAgIGRvdChvVmVjKXtcbiAgICAgICAgcmV0dXJuIHRoaXMueCAqIG9WZWMueCArIHRoaXMueSAqIG9WZWMueTtcbiAgICB9XG4gICAgZ2V0TGVuZ3RoKCl7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5kb3QodGhpcykpO1xuICAgIH1cbiAgICBnZXRBbmdsZSgpe1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnksIHRoaXMueCk7XG4gICAgfVxuICAgIHRvQXJyYXkoKXtcbiAgICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07XG4gICAgfVxufTtcblxuY2xhc3MgRGltZW5zaW9uc3tcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aCwgaGVpZ2h0KXtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB9XG4gICAgY29udGFpbnMocG9zKXtcbiAgICAgICAgcmV0dXJuIGlzUG9pbnRJblJlY3QocG9zLFxuICAgICAgICAgICAgbmV3IFJlY3QoXG4gICAgICAgICAgICAgICAgbmV3IFZlY3RvcigwLCAwKSxcbiAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuICAgIGdldEFyZWEoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGggKiB0aGlzLmhlaWdodDtcbiAgICB9XG4gICAgdG9BcnJheSgpe1xuICAgICAgICByZXR1cm4gW3RoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XTtcbiAgICB9XG59O1xuXG5jbGFzcyBDb2xvcntcbiAgICBjb25zdHJ1Y3RvcihyLCBnLCBiKXtcbiAgICAgICAgdGhpcy5yID0gcjtcbiAgICAgICAgdGhpcy5nID0gZztcbiAgICAgICAgdGhpcy5iID0gYjtcbiAgICB9XG4gICAgdG9BcnJheSgpe1xuICAgICAgICByZXR1cm4gW3RoaXMuciwgdGhpcy5nLCB0aGlzLmJdO1xuICAgIH1cbn07XG5cbmNsYXNzIFJlY3R7XG4gICAgY29uc3RydWN0b3IocG9zLCBkaW1zKXtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuZGltcyA9IGRpbXM7XG4gICAgfVxuICAgIGdldCB4KCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcy54O1xuICAgIH1cbiAgICBnZXQgeSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MueTtcbiAgICB9XG4gICAgZ2V0IHdpZHRoKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmRpbXMud2lkdGg7XG4gICAgfVxuICAgIGdldCBoZWlnaHQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGltcy5oZWlnaHQ7XG4gICAgfVxuICAgIGdldCBsZWZ0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcy54O1xuICAgIH1cbiAgICBnZXQgcmlnaHQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLnggKyB0aGlzLmRpbXMud2lkdGg7XG4gICAgfVxuICAgIGdldCB0b3AoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLnk7XG4gICAgfVxuICAgIGdldCBib3R0b20oKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLnkgKyB0aGlzLmRpbXMuaGVpZ2h0O1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGlzUG9pbnRJblJlY3QocCwgcmVjdCl7XG4gICAgcmV0dXJuIHAueCA+PSByZWN0LmxlZnQgJiYgcC54IDwgcmVjdC5yaWdodCAmJlxuICAgICAgICAgICBwLnkgPj0gcmVjdC50b3AgJiYgcC55IDwgcmVjdC5ib3R0b207XG59XG5cbmNvbnN0IE1PVVNFX0xFRlQgPSAwO1xuY29uc3QgTU9VU0VfUklHSFQgPSAyO1xuY29uc3QgTU9VU0VfTUlERExFID0gMTtcblxuZnVuY3Rpb24gY29tcHV0ZTFEQXJyYXkobGVuZ3RoLCBmdW5jKXtcbiAgICByZXR1cm4gbmV3IEFycmF5KGxlbmd0aCkuZmlsbCh1bmRlZmluZWQpLm1hcChcbiAgICAgICAgKHVudXNlZCwgaSkgPT4gZnVuYyhpKVxuICAgICk7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGUyREFycmF5KGRpbXMsIGZ1bmMpe1xuICAgIHJldHVybiBjb21wdXRlMURBcnJheShkaW1zLmhlaWdodCxcbiAgICAgICAgaSA9PiBjb21wdXRlMURBcnJheShkaW1zLndpZHRoLFxuICAgICAgICAgICAgaTIgPT4gZnVuYyhuZXcgVmVjdG9yKGkyLCBpKSlcbiAgICAgICAgKVxuICAgICk7XG59XG5cbmNvbnN0IERJUlM0ID0gW1xuICAgIG5ldyBWZWN0b3IoMSwgMCksXG4gICAgbmV3IFZlY3RvcigwLCAxKSxcbiAgICBuZXcgVmVjdG9yKC0xLCAwKSxcbiAgICBuZXcgVmVjdG9yKDAsIC0xKVxuXTtcblxuZnVuY3Rpb24gZmxhdHRlbihhcnIpe1xuICAgIHJldHVybiBbXS5jb25jYXQoLi4uYXJyKTtcbn1cblxuY2xhc3MgU2NhbGFibGVWaWV3cG9ydE1hbmFnZXJ7XG4gICAgY29uc3RydWN0b3IocG9zID0gbmV3IFZlY3RvcigwLCAwKSwgc2NhbGUgPSAxLjApe1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIH1cbiAgICB2aWV3cG9ydFRvV29ybGQodmVjKXtcbiAgICAgICAgcmV0dXJuIHZlYy5tdWx0aXBseSh0aGlzLnNjYWxlKS5hZGQodGhpcy5wb3MpO1xuICAgIH1cbiAgICB3b3JsZFRvVmlld3BvcnQodmVjKXtcbiAgICAgICAgcmV0dXJuIHZlYy5zdWJ0cmFjdCh0aGlzLnBvcykuZGl2aWRlKHRoaXMuc2NhbGUpO1xuICAgIH1cbiAgICB0cmFuc2xhdGUodmVjKXtcbiAgICAgICAgdGhpcy5wb3MgPSB0aGlzLnBvcy5zdWJ0cmFjdCh2ZWMubXVsdGlwbHkodGhpcy5zY2FsZSkpO1xuICAgIH1cbiAgICBzY2FsZUF0UG9pbnQoc2NhbGVBbW91bnQsIHNjYWxlUG9pbnQpe1xuICAgICAgICBjb25zdCBuZXdTY2FsZSA9IHRoaXMuc2NhbGUgKiBNYXRoLmV4cChzY2FsZUFtb3VudCk7XG4gICAgICAgIGNvbnN0IG5ld1BvcyA9IHRoaXMucG9zLmFkZChzY2FsZVBvaW50Lm11bHRpcGx5KHRoaXMuc2NhbGUgLSBuZXdTY2FsZSkpO1xuICAgICAgICB0aGlzLnNjYWxlID0gbmV3U2NhbGU7XG4gICAgICAgIHRoaXMucG9zID0gbmV3UG9zO1xuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgVmVjdG9yID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZlY3Rvcih4LCB5KSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZWN0b3IpO1xuXG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFZlY3RvciwgW3tcbiAgICAgICAga2V5OiAnYWRkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZChvVmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzLnggKyBvVmVjLngsIHRoaXMueSArIG9WZWMueSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3N1YnRyYWN0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnRyYWN0KG9WZWMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCAtIG9WZWMueCwgdGhpcy55IC0gb1ZlYy55KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbXVsdGlwbHknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbXVsdGlwbHkoc2NhbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCAqIHNjYWxlLCB0aGlzLnkgKiBzY2FsZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RpdmlkZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXZpZGUoc2NhbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCAvIHNjYWxlLCB0aGlzLnkgLyBzY2FsZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2VxdWFscycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlcXVhbHMob1ZlYykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueCA9PSBvVmVjLnggJiYgdGhpcy55ID09IG9WZWMueTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZmxvb3InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmxvb3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihNYXRoLmZsb29yKHRoaXMueCksIE1hdGguZmxvb3IodGhpcy55KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RvdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkb3Qob1ZlYykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueCAqIG9WZWMueCArIHRoaXMueSAqIG9WZWMueTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0TGVuZ3RoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldExlbmd0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5kb3QodGhpcykpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRBbmdsZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBbmdsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueSwgdGhpcy54KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndG9BcnJheScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b0FycmF5KCkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZnJvbVBvbGFyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZyb21Qb2xhcihyLCBwaGkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHIgKiBNYXRoLmNvcyhwaGkpLCByICogTWF0aC5zaW4ocGhpKSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVmVjdG9yO1xufSgpO1xuXG47XG5cbnZhciBEaW1lbnNpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERpbWVuc2lvbnMod2lkdGgsIGhlaWdodCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGltZW5zaW9ucyk7XG5cbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRGltZW5zaW9ucywgW3tcbiAgICAgICAga2V5OiAnY29udGFpbnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29udGFpbnMocG9zKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNQb2ludEluUmVjdChwb3MsIG5ldyBSZWN0KG5ldyBWZWN0b3IoMCwgMCksIHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0QXJlYScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBcmVhKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lkdGggKiB0aGlzLmhlaWdodDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndG9BcnJheScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b0FycmF5KCkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLndpZHRoLCB0aGlzLmhlaWdodF07XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRGltZW5zaW9ucztcbn0oKTtcblxuO1xuXG52YXIgQ29sb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29sb3IociwgZywgYikge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29sb3IpO1xuXG4gICAgICAgIHRoaXMuciA9IHI7XG4gICAgICAgIHRoaXMuZyA9IGc7XG4gICAgICAgIHRoaXMuYiA9IGI7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbG9yLCBbe1xuICAgICAgICBrZXk6ICd0b0FycmF5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvQXJyYXkoKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuciwgdGhpcy5nLCB0aGlzLmJdO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbG9yO1xufSgpO1xuXG47XG5cbnZhciBSZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlY3QocG9zLCBkaW1zKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWN0KTtcblxuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5kaW1zID0gZGltcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoUmVjdCwgW3tcbiAgICAgICAga2V5OiAneCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zLng7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3knLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcy55O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd3aWR0aCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGltcy53aWR0aDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGVpZ2h0JyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaW1zLmhlaWdodDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbGVmdCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zLng7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JpZ2h0JyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3MueCArIHRoaXMuZGltcy53aWR0aDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndG9wJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3MueTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYm90dG9tJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3MueSArIHRoaXMuZGltcy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUmVjdDtcbn0oKTtcblxuO1xuXG5mdW5jdGlvbiBpc1BvaW50SW5SZWN0KHAsIHJlY3QpIHtcbiAgICByZXR1cm4gcC54ID49IHJlY3QubGVmdCAmJiBwLnggPCByZWN0LnJpZ2h0ICYmIHAueSA+PSByZWN0LnRvcCAmJiBwLnkgPCByZWN0LmJvdHRvbTtcbn1cblxudmFyIE1PVVNFX0xFRlQgPSAwO1xudmFyIE1PVVNFX1JJR0hUID0gMjtcbnZhciBNT1VTRV9NSURETEUgPSAxO1xuXG5mdW5jdGlvbiBjb21wdXRlMURBcnJheShsZW5ndGgsIGZ1bmMpIHtcbiAgICByZXR1cm4gbmV3IEFycmF5KGxlbmd0aCkuZmlsbCh1bmRlZmluZWQpLm1hcChmdW5jdGlvbiAodW51c2VkLCBpKSB7XG4gICAgICAgIHJldHVybiBmdW5jKGkpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlMkRBcnJheShkaW1zLCBmdW5jKSB7XG4gICAgcmV0dXJuIGNvbXB1dGUxREFycmF5KGRpbXMuaGVpZ2h0LCBmdW5jdGlvbiAoaSkge1xuICAgICAgICByZXR1cm4gY29tcHV0ZTFEQXJyYXkoZGltcy53aWR0aCwgZnVuY3Rpb24gKGkyKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuYyhuZXcgVmVjdG9yKGkyLCBpKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG52YXIgRElSUzQgPSBbbmV3IFZlY3RvcigxLCAwKSwgbmV3IFZlY3RvcigwLCAxKSwgbmV3IFZlY3RvcigtMSwgMCksIG5ldyBWZWN0b3IoMCwgLTEpXTtcblxuZnVuY3Rpb24gZmxhdHRlbihhcnIpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHJldHVybiAoX3JlZiA9IFtdKS5jb25jYXQuYXBwbHkoX3JlZiwgX3RvQ29uc3VtYWJsZUFycmF5KGFycikpO1xufVxuXG52YXIgU2NhbGFibGVWaWV3cG9ydE1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2NhbGFibGVWaWV3cG9ydE1hbmFnZXIoKSB7XG4gICAgICAgIHZhciBwb3MgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyBuZXcgVmVjdG9yKDAsIDApIDogYXJndW1lbnRzWzBdO1xuICAgICAgICB2YXIgc2NhbGUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyAxLjAgOiBhcmd1bWVudHNbMV07XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNjYWxhYmxlVmlld3BvcnRNYW5hZ2VyKTtcblxuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhTY2FsYWJsZVZpZXdwb3J0TWFuYWdlciwgW3tcbiAgICAgICAga2V5OiAndmlld3BvcnRUb1dvcmxkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZpZXdwb3J0VG9Xb3JsZCh2ZWMpIHtcbiAgICAgICAgICAgIHJldHVybiB2ZWMubXVsdGlwbHkodGhpcy5zY2FsZSkuYWRkKHRoaXMucG9zKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnd29ybGRUb1ZpZXdwb3J0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHdvcmxkVG9WaWV3cG9ydCh2ZWMpIHtcbiAgICAgICAgICAgIHJldHVybiB2ZWMuc3VidHJhY3QodGhpcy5wb3MpLmRpdmlkZSh0aGlzLnNjYWxlKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndHJhbnNsYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyYW5zbGF0ZSh2ZWMpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gdGhpcy5wb3Muc3VidHJhY3QodmVjLm11bHRpcGx5KHRoaXMuc2NhbGUpKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2NhbGVBdFBvaW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjYWxlQXRQb2ludChzY2FsZUFtb3VudCwgc2NhbGVQb2ludCkge1xuICAgICAgICAgICAgdmFyIG5ld1NjYWxlID0gdGhpcy5zY2FsZSAqIE1hdGguZXhwKHNjYWxlQW1vdW50KTtcbiAgICAgICAgICAgIHZhciBuZXdQb3MgPSB0aGlzLnBvcy5hZGQoc2NhbGVQb2ludC5tdWx0aXBseSh0aGlzLnNjYWxlIC0gbmV3U2NhbGUpKTtcbiAgICAgICAgICAgIHRoaXMuc2NhbGUgPSBuZXdTY2FsZTtcbiAgICAgICAgICAgIHRoaXMucG9zID0gbmV3UG9zO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNjYWxhYmxlVmlld3BvcnRNYW5hZ2VyO1xufSgpO1xuXG47XG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gZ2V0Q2FudmFzTW91c2VQb3MoY2FudmFzLCBldikge1xuICAgIHZhciBib3VuZGluZ1JlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IoKGV2LmNsaWVudFggLSBib3VuZGluZ1JlY3QubGVmdCkgKiAoY2FudmFzLndpZHRoIC8gYm91bmRpbmdSZWN0LndpZHRoKSwgKGV2LmNsaWVudFkgLSBib3VuZGluZ1JlY3QudG9wKSAqIChjYW52YXMuaGVpZ2h0IC8gYm91bmRpbmdSZWN0LmhlaWdodCkpO1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGxEaXIoZXYpIHtcbiAgICBpZiAoZXYuZGVsdGFZID09IDApIHJldHVybiAwO2Vsc2UgcmV0dXJuIGV2LmRlbHRhWSAvIE1hdGguYWJzKGV2LmRlbHRhWSk7XG59XG5cbnZhciBNb3VzZURvd25UcmFja2VyID0gZnVuY3Rpb24gTW91c2VEb3duVHJhY2tlcihjYW52YXMsIGluaXRUcmFja0NhbGxiYWNrLCB0cmFja0NhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBpc1RyYWNraW5nRW5hYmxlZCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uIChldikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IDogYXJndW1lbnRzWzNdO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vdXNlRG93blRyYWNrZXIpO1xuXG4gICAgdGhpcy5pbml0VHJhY2tDYWxsYmFjayA9IGluaXRUcmFja0NhbGxiYWNrO1xuICAgIHRoaXMudHJhY2tDYWxsYmFjayA9IHRyYWNrQ2FsbGJhY2s7XG4gICAgdGhpcy5pc1RyYWNraW5nRW5hYmxlZCA9IGlzVHJhY2tpbmdFbmFibGVkO1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuXG4gICAgdGhpcy5vbk1vdXNlRG93biA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICBpZiAoX3RoaXMuaXNUcmFja2luZ0VuYWJsZWQoZXYpKSB7XG4gICAgICAgICAgICBfdGhpcy5pbml0VHJhY2tDYWxsYmFjayhldik7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgX3RoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBfdGhpcy5vbk1vdXNlVXApO1xuICAgICAgICAgICAgX3RoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIF90aGlzLm9uTW91c2VEb3duKTtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMub25Nb3VzZVVwID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIF90aGlzLnRyYWNrQ2FsbGJhY2soZXYpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgX3RoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIF90aGlzLm9uTW91c2VVcCk7XG4gICAgICAgIF90aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBfdGhpcy5vbk1vdXNlRG93bik7XG4gICAgfTtcbiAgICB0aGlzLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIF90aGlzLnRyYWNrQ2FsbGJhY2soZXYpO1xuICAgIH07XG5cbiAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbn07XG5cbjtcblxudmFyIERyYWdNYW5hZ2VyID0gZnVuY3Rpb24gKF9Nb3VzZURvd25UcmFja2VyKSB7XG4gICAgX2luaGVyaXRzKERyYWdNYW5hZ2VyLCBfTW91c2VEb3duVHJhY2tlcik7XG5cbiAgICBmdW5jdGlvbiBEcmFnTWFuYWdlcihjYW52YXMsIGRyYWdDYWxsYmFjaykge1xuICAgICAgICB2YXIgaXNEcmFnRW5hYmxlZCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gOiBhcmd1bWVudHNbMl07XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYWdNYW5hZ2VyKTtcblxuICAgICAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKERyYWdNYW5hZ2VyKS5jYWxsKHRoaXMsIGNhbnZhcywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBfdGhpczIucHJldk1vdXNlUG9zID0gZ2V0Q2FudmFzTW91c2VQb3MoX3RoaXMyLmNhbnZhcywgZXYpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBtb3VzZVBvcyA9IGdldENhbnZhc01vdXNlUG9zKF90aGlzMi5jYW52YXMsIGV2KTtcbiAgICAgICAgICAgIGRyYWdDYWxsYmFjayhtb3VzZVBvcy5zdWJ0cmFjdChfdGhpczIucHJldk1vdXNlUG9zKSk7XG4gICAgICAgICAgICBfdGhpczIucHJldk1vdXNlUG9zID0gbW91c2VQb3M7XG4gICAgICAgIH0sIGlzRHJhZ0VuYWJsZWQpKTtcblxuICAgICAgICBfdGhpczIucHJldk1vdXNlUG9zID0gbmV3IFZlY3RvcigwLCAwKTtcbiAgICAgICAgcmV0dXJuIF90aGlzMjtcbiAgICB9XG5cbiAgICByZXR1cm4gRHJhZ01hbmFnZXI7XG59KE1vdXNlRG93blRyYWNrZXIpO1xuXG47XG5cbmZ1bmN0aW9uIHNldENhbnZhc1Ntb290aGluZyhjdHgsIGVuYWJsZSkge1xuICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBlbmFibGU7XG4gICAgY3R4Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbiAgICBjdHgud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xuICAgIGN0eC5tbkltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGNvbnRhaW5lciwgYm91bmRpbmdSZWN0KSB7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IGJvdW5kaW5nUmVjdC53aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gYm91bmRpbmdSZWN0LmhlaWdodDtcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGNhbnZhcy5zdHlsZS5sZWZ0ID0gYm91bmRpbmdSZWN0LmxlZnQudG9TdHJpbmcoKSArICdweCc7XG4gICAgY2FudmFzLnN0eWxlLnRvcCA9IGJvdW5kaW5nUmVjdC50b3AudG9TdHJpbmcoKSArICdweCc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgcmV0dXJuIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xufVxuXG5mdW5jdGlvbiBnZXRDYW52YXNEaW1zKGN0eCkge1xuICAgIHJldHVybiBuZXcgRGltZW5zaW9ucyhjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG59XG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIoY3R4LCBzcmMsIHR5cGUpIHtcbiAgICB2YXIgc2hhZGVyID0gY3R4LmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICBjdHguc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcbiAgICBjdHguY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgIGlmICghY3R4LmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGN0eC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgICAgY29uc29sZS5sb2coc3JjKTtcbiAgICAgICAgdGhyb3cgJ1NoYWRlciBjb21waWxlIGVycm9yOiAnICsgY3R4LmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShjdHgsIHZlcnRTcmMsIGZyYWdTcmMpIHtcbiAgICB2YXIgcHJvZ3JhbSA9IGN0eC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgY3R4LmF0dGFjaFNoYWRlcihwcm9ncmFtLCBjb21waWxlU2hhZGVyKGN0eCwgdmVydFNyYywgY3R4LlZFUlRFWF9TSEFERVIpKTtcbiAgICBjdHguYXR0YWNoU2hhZGVyKHByb2dyYW0sIGNvbXBpbGVTaGFkZXIoY3R4LCBmcmFnU3JjLCBjdHguRlJBR01FTlRfU0hBREVSKSk7XG4gICAgY3R4LmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuICAgIHJldHVybiBwcm9ncmFtO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wdXRlVGV4dHVyZShjdHgsIGRpbXMpIHtcbiAgICB2YXIgdGV4VHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IGN0eC5GTE9BVCA6IGFyZ3VtZW50c1syXTtcbiAgICB2YXIgY29udGVudHMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzNdO1xuXG4gICAgdmFyIHRleCA9IGN0eC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXgpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTkVBUkVTVCk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9TLCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfVCwgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgIGN0eC50ZXhJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBjdHguUkdCQSwgZGltcy53aWR0aCwgZGltcy5oZWlnaHQsIDAsIGN0eC5SR0JBLCB0ZXhUeXBlLCBjb250ZW50cyk7XG4gICAgcmV0dXJuIHRleDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRkJPKGN0eCwgZXh0REIsIHRleHR1cmVzKSB7XG4gICAgdmFyIGZibyA9IGN0eC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmYm8pO1xuICAgIGlmICh0ZXh0dXJlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGV4dERCLmRyYXdCdWZmZXJzV0VCR0woY29tcHV0ZTFEQXJyYXkodGV4dHVyZXMubGVuZ3RoLCBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4dERCWydDT0xPUl9BVFRBQ0hNRU5UJyArIGkudG9TdHJpbmcoKSArICdfV0VCR0wnXTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0ZXh0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXgsIGkpIHtcbiAgICAgICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChjdHguRlJBTUVCVUZGRVIsIGV4dERCWydDT0xPUl9BVFRBQ0hNRU5UJyArIGkudG9TdHJpbmcoKSArICdfV0VCR0wnXSwgY3R4LlRFWFRVUkVfMkQsIHRleCwgMCk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChjdHguRlJBTUVCVUZGRVIsIGN0eC5DT0xPUl9BVFRBQ0hNRU5UMCwgY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVzWzBdLCAwKTtcbiAgICB9XG4gICAgaWYgKGN0eC5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKGN0eC5GUkFNRUJVRkZFUikgIT0gY3R4LkZSQU1FQlVGRkVSX0NPTVBMRVRFKSB7XG4gICAgICAgIHRocm93ICdHTF9GUkFNRUJVRkZFUl9DT01QTEVURSBmYWlsZWQuJztcbiAgICB9XG4gICAgcmV0dXJuIGZibztcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXJyYXlCdWZmZXIoY3R4LCBidWZUeXBlLCBjb250ZW50cykge1xuICAgIHZhciBidWYgPSBjdHguY3JlYXRlQnVmZmVyKCk7XG4gICAgY3R4LmJpbmRCdWZmZXIoYnVmVHlwZSwgYnVmKTtcbiAgICBjdHguYnVmZmVyRGF0YShidWZUeXBlLCBjb250ZW50cywgY3R4LlNUQVRJQ19EUkFXKTtcbiAgICByZXR1cm4gYnVmO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclZlcnRleEF0dHJpYihjdHgsIHByb2dyYW0sIGF0dHJpYk5hbWUsIGl0ZW1TaXplLCBidWYpIHtcbiAgICB2YXIgYXR0cmliID0gY3R4LmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIGF0dHJpYk5hbWUpO1xuICAgIGN0eC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRyaWIpO1xuICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIGJ1Zik7XG4gICAgY3R4LnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0cmliLCBpdGVtU2l6ZSwgY3R4LkZMT0FULCBmYWxzZSwgMCwgMCk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVGV4dHVyZXMoY3R4LCBwcm9ncmFtLCB0ZXhOYW1lcykge1xuICAgIHRleE5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHRleE5hbWUsIGkpIHtcbiAgICAgICAgdmFyIHRleExvYyA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGV4TmFtZSk7XG4gICAgICAgIGN0eC51bmlmb3JtMWkodGV4TG9jLCBpKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJVbmlmb3JtcyhjdHgsIHByb2dyYW0sIHVuaWZvcm1zLCB2YWxzKSB7XG4gICAgdW5pZm9ybXMuZm9yRWFjaChmdW5jdGlvbiAodW5pZm9ybSkge1xuICAgICAgICB2YXIgdW5pZm9ybUxvYyA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybS5uYW1lKTtcbiAgICAgICAgaWYgKHVuaWZvcm0udHlwZSA9PSAnaW50Jykge1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xaSh1bmlmb3JtTG9jLCB2YWxzW3VuaWZvcm0ubmFtZV0pO1xuICAgICAgICB9IGVsc2UgaWYgKHVuaWZvcm0udHlwZSA9PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFmKHVuaWZvcm1Mb2MsIHZhbHNbdW5pZm9ybS5uYW1lXSk7XG4gICAgICAgIH0gZWxzZSBpZiAoL15pdmVjWzItNF0kL2cudGVzdCh1bmlmb3JtLnR5cGUpKSB7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgdW5pZm9ybS50eXBlWzRdLnRvU3RyaW5nKCkgKyAnaXYnXSh1bmlmb3JtTG9jLCBuZXcgSW50MzJBcnJheSh2YWxzW3VuaWZvcm0ubmFtZV0pKTtcbiAgICAgICAgfSBlbHNlIGlmICgvXnZlY1syLTRdJC9nLnRlc3QodW5pZm9ybS50eXBlKSkge1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHVuaWZvcm0udHlwZVszXS50b1N0cmluZygpICsgJ2Z2J10odW5pZm9ybUxvYywgbmV3IEZsb2F0MzJBcnJheSh2YWxzW3VuaWZvcm0ubmFtZV0pKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBiaW5kVGV4dHVyZXMoY3R4LCB0ZXh0dXJlcykge1xuICAgIHRleHR1cmVzLmZvckVhY2goZnVuY3Rpb24gKHRleHR1cmUsIGkpIHtcbiAgICAgICAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4WydURVhUVVJFJyArIGkudG9TdHJpbmcoKV0pO1xuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmUpO1xuICAgIH0pO1xufVxuXG52YXIgRlVMTFNDUkVFTl9RVUFEX1BPU19BUlJBWSA9IG5ldyBGbG9hdDMyQXJyYXkoWy0xLjAsIC0xLjAsIDEuMCwgLTEuMCwgMS4wLCAxLjAsIC0xLjAsIDEuMF0pO1xuXG52YXIgRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZID0gbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAwLCAyLCAzXSk7XG5cbnZhciBGVUxMU0NSRUVOX1FVQURfTlVNX1ZFUlRJQ0VTID0gNjtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBHUEdQVUtlcm5lbFJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHUEdQVUtlcm5lbFJlc3VsdChjdHgsIGZibywgdGV4dHVyZXMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdQR1BVS2VybmVsUmVzdWx0KTtcblxuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5mYm8gPSBmYm87XG4gICAgICAgIHRoaXMudGV4dHVyZXMgPSB0ZXh0dXJlcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoR1BHUFVLZXJuZWxSZXN1bHQsIFt7XG4gICAgICAgIGtleTogJ2Rpc3Bvc2UnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmZibyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZGVsZXRlRnJhbWVidWZmZXIodGhpcy5mYm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY3R4LmRlbGV0ZVRleHR1cmUodGV4dHVyZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBHUEdQVUtlcm5lbFJlc3VsdDtcbn0oKTtcblxuO1xuXG52YXIgR1BHUFVLZXJuZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR1BHUFVLZXJuZWwobWFuYWdlciwgcHJvZ3JhbSkge1xuICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gW10gOiBhcmd1bWVudHNbMl07XG4gICAgICAgIHZhciBudW1PdXRwdXRzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1szXTtcbiAgICAgICAgdmFyIGlzR3JhcGhpY2FsID0gYXJndW1lbnRzLmxlbmd0aCA8PSA0IHx8IGFyZ3VtZW50c1s0XSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbNF07XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdQR1BVS2VybmVsKTtcblxuICAgICAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgdGhpcy5udW1PdXRwdXRzID0gbnVtT3V0cHV0cztcbiAgICAgICAgdGhpcy5pc0dyYXBoaWNhbCA9IGlzR3JhcGhpY2FsO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhHUEdQVUtlcm5lbCwgW3tcbiAgICAgICAga2V5OiAncnVuJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJ1bihpbnB1dFRleHR1cmVzLCBvdXRwdXREaW1zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHBhcmFtVmFscyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgdmFyIG91dHB1dFR5cGUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB0aGlzLmN0eC5GTE9BVCA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgICAgICAgdGhpcy5jdHgudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xuICAgICAgICAgICAgcmVnaXN0ZXJVbmlmb3Jtcyh0aGlzLmN0eCwgdGhpcy5wcm9ncmFtLCB0aGlzLnBhcmFtcywgcGFyYW1WYWxzKTtcbiAgICAgICAgICAgIHJlZ2lzdGVyVW5pZm9ybXModGhpcy5jdHgsIHRoaXMucHJvZ3JhbSwgW3tcbiAgICAgICAgICAgICAgICBuYW1lOiAndURpbXMnLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdpdmVjMidcbiAgICAgICAgICAgIH1dLCB7XG4gICAgICAgICAgICAgICAgdURpbXM6IG91dHB1dERpbXMudG9BcnJheSgpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG91dHB1dFRleHR1cmVzID0gY29tcHV0ZTFEQXJyYXkodGhpcy5udW1PdXRwdXRzLCBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb21wdXRlVGV4dHVyZShfdGhpczIuY3R4LCBvdXRwdXREaW1zLCBvdXRwdXRUeXBlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgZmJvID0gdGhpcy5pc0dyYXBoaWNhbCA/IG51bGwgOiBjcmVhdGVGQk8odGhpcy5jdHgsIHRoaXMuZXh0REIsIG91dHB1dFRleHR1cmVzKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmJpbmRGcmFtZWJ1ZmZlcih0aGlzLmN0eC5GUkFNRUJVRkZFUiwgZmJvKTtcblxuICAgICAgICAgICAgYmluZFRleHR1cmVzKHRoaXMuY3R4LCBpbnB1dFRleHR1cmVzKTtcblxuICAgICAgICAgICAgdGhpcy5jdHgudmlld3BvcnQoMCwgMCwgb3V0cHV0RGltcy53aWR0aCwgb3V0cHV0RGltcy5oZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmRyYXdGdWxsc2NyZWVuUXVhZCh0aGlzLnByb2dyYW0pO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdQR1BVS2VybmVsUmVzdWx0KHRoaXMuY3R4LCBmYm8sIG91dHB1dFRleHR1cmVzKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3R4JyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYW5hZ2VyLmN0eDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZXh0REInLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hbmFnZXIuZXh0REI7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gR1BHUFVLZXJuZWw7XG59KCk7XG5cbjtcblxudmFyIEdQR1BVTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHUEdQVU1hbmFnZXIoY3R4KSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHUEdQVU1hbmFnZXIpO1xuXG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLmV4dERCID0gdGhpcy5jdHguZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kcmF3X2J1ZmZlcnMnKTtcbiAgICAgICAgdGhpcy5jdHguZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdCcpO1xuXG4gICAgICAgIHRoaXMucXVhZFBvc0J1ZmZlciA9IGNyZWF0ZUFycmF5QnVmZmVyKHRoaXMuY3R4LCB0aGlzLmN0eC5BUlJBWV9CVUZGRVIsIEZVTExTQ1JFRU5fUVVBRF9QT1NfQVJSQVkpO1xuICAgICAgICB0aGlzLnF1YWRJbmRleEJ1ZmZlciA9IGNyZWF0ZUFycmF5QnVmZmVyKHRoaXMuY3R4LCB0aGlzLmN0eC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoR1BHUFVNYW5hZ2VyLCBbe1xuICAgICAgICBrZXk6ICdkcmF3RnVsbHNjcmVlblF1YWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0Z1bGxzY3JlZW5RdWFkKHByb2dyYW0pIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5iaW5kQnVmZmVyKHRoaXMuY3R4LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLnF1YWRJbmRleEJ1ZmZlcik7XG4gICAgICAgICAgICB0aGlzLmN0eC5kcmF3RWxlbWVudHModGhpcy5jdHguVFJJQU5HTEVfU1RSSVAsIEZVTExTQ1JFRU5fUVVBRF9OVU1fVkVSVElDRVMsIHRoaXMuY3R4LlVOU0lHTkVEX1NIT1JULCAwKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVhZFBhY2tlZEZsb2F0RGF0YScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkUGFja2VkRmxvYXREYXRhKGRpbXMpIHtcbiAgICAgICAgICAgIHZhciBidWYgPSBuZXcgVWludDhBcnJheShkaW1zLmdldEFyZWEoKSAqIDQpO1xuICAgICAgICAgICAgdGhpcy5jdHgucmVhZFBpeGVscygwLCAwLCBkaW1zLndpZHRoLCBkaW1zLmhlaWdodCwgdGhpcy5jdHguUkdCQSwgdGhpcy5jdHguVU5TSUdORURfQllURSwgYnVmKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KGJ1Zi5idWZmZXIpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhcnJheVRvVGV4dHVyZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhcnJheVRvVGV4dHVyZShkaW1zLCBhcnIpIHtcbiAgICAgICAgICAgIHZhciBmbGF0dGVuZWRBcnIgPSBuZXcgRmxvYXQzMkFycmF5KGZsYXR0ZW4oZmxhdHRlbihhcnIpKSk7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlQ29tcHV0ZVRleHR1cmUodGhpcy5jdHgsIGRpbXMsIHRoaXMuY3R4LkZMT0FULCBmbGF0dGVuZWRBcnIpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0ZXh0dXJlVG9BcnJheScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0ZXh0dXJlVG9BcnJheShkaW1zLCB0ZXgpIHtcbiAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAwIDogYXJndW1lbnRzWzJdO1xuXG4gICAgICAgICAgICB2YXIgY29tcHV0ZUZ1bmMgPSAndmVjMiBjVmFsID0gdGV4dHVyZTJEKHVJbnB1dCwgdkNvb3JkKS54eTtcXG5nbF9GcmFnRGF0YVswXSA9IHBhY2tGbG9hdChjVmFsLicgKyAneHl6dydbY29tcG9uZW50XSArICcpO1xcbic7XG4gICAgICAgICAgICB2YXIgaW5wdXROYW1lcyA9IFsndUlucHV0J107XG4gICAgICAgICAgICB2YXIga2VybmVsID0gdGhpcy5jcmVhdGVLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIGRpbXMsIFtdLCAwLCBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFKTtcblxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBrZXJuZWwucnVuKFt0ZXhdLCBkaW1zLCB7fSwgdGhpcy5jdHguVU5TSUdORURfQllURSk7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gdGhpcy5yZWFkUGFja2VkRmxvYXREYXRhKGRpbXMpO1xuICAgICAgICAgICAgcmVzdWx0cy5kaXNwb3NlKCk7XG5cbiAgICAgICAgICAgIHJldHVybiBjb21wdXRlMkRBcnJheShkaW1zLCBmdW5jdGlvbiAocG9zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dFtwb3MueSAqIGRpbXMud2lkdGggKyBwb3MueF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlS2VybmVsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUtlcm5lbChjb21wdXRlRnVuYywgaW5wdXROYW1lcywgb3V0cHV0RGltcykge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IFtdIDogYXJndW1lbnRzWzNdO1xuICAgICAgICAgICAgdmFyIG51bU91dHB1dHMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDQgfHwgYXJndW1lbnRzWzRdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzRdO1xuICAgICAgICAgICAgdmFyIGluY2x1ZGVTcmMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDUgfHwgYXJndW1lbnRzWzVdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1s1XTtcbiAgICAgICAgICAgIHZhciBpc0dyYXBoaWNhbCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gNiB8fCBhcmd1bWVudHNbNl0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzZdO1xuXG4gICAgICAgICAgICB2YXIgdW5pZm9ybXMgPSBbXS5jb25jYXQocGFyYW1zLCBpbnB1dE5hbWVzLm1hcChmdW5jdGlvbiAoaW5wdXROYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NhbXBsZXIyRCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGlucHV0TmFtZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSwgW3tcbiAgICAgICAgICAgICAgICB0eXBlOiAnaXZlYzInLFxuICAgICAgICAgICAgICAgIG5hbWU6ICd1RGltcydcbiAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICAgIHZhciB2ZXJ0U2hhZGVyU3JjID0gR1BHUFVNYW5hZ2VyLmNyZWF0ZVZlcnRTaGFkZXJTcmMoaXNHcmFwaGljYWwpO1xuICAgICAgICAgICAgdmFyIGZyYWdTaGFkZXJTcmMgPSBHUEdQVU1hbmFnZXIuY3JlYXRlRnJhZ1NoYWRlclNyYyhjb21wdXRlRnVuYy50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnICAgICcgKyBsaW5lO1xuICAgICAgICAgICAgfSkuam9pbignXFxuJykgKyAnXFxuJywgdW5pZm9ybXMsIGluY2x1ZGVTcmMsIG51bU91dHB1dHMgPiAxKTtcbiAgICAgICAgICAgIHZhciBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbSh0aGlzLmN0eCwgdmVydFNoYWRlclNyYywgZnJhZ1NoYWRlclNyYyk7XG5cbiAgICAgICAgICAgIHRoaXMuY3R4LnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgICAgICByZWdpc3RlclZlcnRleEF0dHJpYih0aGlzLmN0eCwgcHJvZ3JhbSwgJ2FQb3MnLCAyLCB0aGlzLnF1YWRQb3NCdWZmZXIpO1xuICAgICAgICAgICAgcmVnaXN0ZXJUZXh0dXJlcyh0aGlzLmN0eCwgcHJvZ3JhbSwgaW5wdXROYW1lcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEdQR1BVS2VybmVsKHRoaXMsIHByb2dyYW0sIHBhcmFtcywgbnVtT3V0cHV0cywgaXNHcmFwaGljYWwpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVHcmFwaGljYWxLZXJuZWwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlR3JhcGhpY2FsS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gW10gOiBhcmd1bWVudHNbM107XG4gICAgICAgICAgICB2YXIgaW5jbHVkZVNyYyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gNCB8fCBhcmd1bWVudHNbNF0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzRdO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIG91dHB1dERpbXMsIHBhcmFtcywgMCwgaW5jbHVkZVNyYywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gR1BHUFVNYW5hZ2VyO1xufSgpO1xuXG47XG5cbkdQR1BVTWFuYWdlci5nZXRDYW52YXNDb250ZXh0ID0gZnVuY3Rpb24gKGNhbnZhcykge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBkZXB0aDogZmFsc2UsXG4gICAgICAgIGFudGlhbGlhczogZmFsc2VcbiAgICB9O1xuICAgIHJldHVybiBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCBvcHRpb25zKSB8fCBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wtZXhwZXJpbWVudGFsJywgb3B0aW9ucyk7XG59O1xuXG5HUEdQVU1hbmFnZXIuY3JlYXRlVmVydFNoYWRlclNyYyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmxpcFkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IGFyZ3VtZW50c1swXTtcbiAgICByZXR1cm4gJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG5cXG5hdHRyaWJ1dGUgdmVjMiBhUG9zO1xcblxcbnZhcnlpbmcgdmVjMiB2Q29vcmQ7XFxuXFxudm9pZCBtYWluKCl7XFxuICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgnICsgKGZsaXBZID8gJ2FQb3MueCwgLWFQb3MueScgOiAnYVBvcycpICsgJywgMC4wLCAxLjApO1xcbiAgICB2Q29vcmQgPSAoYVBvcyArIDEuMCkgLyAyLjA7XFxufSc7XG59O1xuXG5HUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFID0gJ2Zsb2F0IGludGVnZXJNb2QoZmxvYXQgeCwgZmxvYXQgeSkge1xcblxcdGZsb2F0IHJlcyA9IGZsb29yKG1vZCh4LCB5KSk7XFxuXFx0aWYgKHJlcyA+IGZsb29yKHkpIC0gMS4wKSByZXR1cm4gMC4wO1xcblxcdGVsc2UgcmV0dXJuIHJlcztcXG59XFxuXFxudmVjNCBwYWNrRmxvYXQoZmxvYXQgZikge1xcblxcdGlmIChmID09IDAuMCkgcmV0dXJuIHZlYzQoMC4wKTtcXG5cXHRmbG9hdCBGID0gYWJzKGYpO1xcblxcdGZsb2F0IGV4cG9uZW50ID0gZmxvb3IobG9nMihGKSk7XFxuXFx0ZmxvYXQgbWFudGlzc2EgPSBleHAyKC1leHBvbmVudCkgKiBGO1xcblxcdGV4cG9uZW50ID0gZXhwb25lbnQgKyBmbG9vcihsb2cyKG1hbnRpc3NhKSk7XFxuXFx0ZmxvYXQgbWFudGlzc2FfcGFydDEgPSBpbnRlZ2VyTW9kKEYgKiBleHAyKDIzLjAtZXhwb25lbnQpLCAyNTYuMCk7XFxuXFx0ZmxvYXQgbWFudGlzc2FfcGFydDIgPSBpbnRlZ2VyTW9kKEYgKiBleHAyKDE1LjAtZXhwb25lbnQpLCAyNTYuMCk7XFxuXFx0ZmxvYXQgbWFudGlzc2FfcGFydDMgPSBpbnRlZ2VyTW9kKEYgKiBleHAyKDcuMC1leHBvbmVudCksIDEyOC4wKTtcXG5cXHRleHBvbmVudCArPSAxMjcuMDtcXG5cXHRyZXR1cm4gdmVjNChcXG4gICAgICAgIG1hbnRpc3NhX3BhcnQxLFxcbiAgICAgICAgbWFudGlzc2FfcGFydDIsXFxuICAgICAgICAxMjguMCAqIGludGVnZXJNb2QoZXhwb25lbnQsIDIuMCkgKyBtYW50aXNzYV9wYXJ0MyxcXG4gICAgICAgIDEyOC4wICogKGYgPCAwLjAgPyAxLjAgOiAwLjApICsgZXhwb25lbnQgLyAyLjBcXG4gICAgKSAqIDAuMDAzOTIxNTY5O1xcbn1cXG5cXG4nO1xuXG5HUEdQVU1hbmFnZXIuY3JlYXRlRnJhZ1NoYWRlclNyYyA9IGZ1bmN0aW9uIChjb21wdXRlRnVuYywgdW5pZm9ybXMpIHtcbiAgICB2YXIgaW5jbHVkZVNyYyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/ICcnIDogYXJndW1lbnRzWzJdO1xuICAgIHZhciB1c2VEcmF3QnVmZmVycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmd1bWVudHNbM107XG4gICAgcmV0dXJuIFt1c2VEcmF3QnVmZmVycyA/ICcjZXh0ZW5zaW9uIEdMX0VYVF9kcmF3X2J1ZmZlcnM6IHJlcXVpcmVcXG4nIDogJycsICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxucHJlY2lzaW9uIGhpZ2hwIHNhbXBsZXIyRDtcXG5cXG4jZGVmaW5lIEVQUyAwLjAwMDAwMDFcXG5cXG4nXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHVuaWZvcm1zLm1hcChmdW5jdGlvbiAodW5pZm9ybSkge1xuICAgICAgICByZXR1cm4gJ3VuaWZvcm0gJyArIHVuaWZvcm0udHlwZSArICcgJyArIHVuaWZvcm0ubmFtZSArICc7XFxuJztcbiAgICB9KSksIFsnXFxudmFyeWluZyB2ZWMyIHZDb29yZDtcXG5cXG52ZWM0IGFyckdldChzYW1wbGVyMkQgYXJyLCBpdmVjMiBpZCl7XFxuICAgIHJldHVybiB0ZXh0dXJlMkQoYXJyLCAodmVjMihpZCkgKyB2ZWMyKDAuNSkpIC8gdmVjMih1RGltcykpO1xcbn1cXG5cXG4nLCBpbmNsdWRlU3JjLCAndm9pZCBjb21wdXRlRnVuYygpe1xcbiAgICBpdmVjMiB0aHJlYWRJZCA9IGl2ZWMyKHZDb29yZCAqIHZlYzIodURpbXMpKTtcXG4nLCBjb21wdXRlRnVuYywgJ31cXG5cXG52b2lkIG1haW4oKXtcXG4gICAgY29tcHV0ZUZ1bmMoKTtcXG59J10pLmpvaW4oJycpO1xufTtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFJFRCA9IG5ldyBDb2xvcigyNTUsIDAsIDApO1xudmFyIEdSRUVOID0gbmV3IENvbG9yKDAsIDI1NSwgMCk7XG52YXIgQkxVRSA9IG5ldyBDb2xvcigwLCAwLCAyNTUpO1xudmFyIFdISVRFID0gbmV3IENvbG9yKDI1NSwgMjU1LCAyNTUpO1xuXG52YXIgQ29udG91cmVyTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb250b3VyZXJNYW5hZ2VyKGRyYXdGdW5jKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250b3VyZXJNYW5hZ2VyKTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gbmV3IFNjYWxhYmxlVmlld3BvcnRNYW5hZ2VyKG5ldyBWZWN0b3IoMCwgMCksIDAuMDEpO1xuICAgICAgICB0aGlzLnpvb21TZW5zaXRpdml0eSA9IDAuMztcbiAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyA9IDEuMDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29udG91cmVyTWFuYWdlciwgW3tcbiAgICAgICAga2V5OiAnY2hhbmdlRHJhd0Z1bmMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlRHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMpIHtcbiAgICAgICAgICAgIHZhciBpc0FuaW1hdGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbMl07XG5cbiAgICAgICAgICAgIHZhciBmaWVsZEZ1bmMgPSAndmVjMiBjUG9zID0gKHZlYzIodGhyZWFkSWQpICogdVNjYWxlKSArIHVQb3M7XFxudmVjMiByZXM7XFxuJyArIGRyYXdGdW5jLnRyaW0oKSArICdcXG4nICsgJ2dsX0ZyYWdEYXRhWzBdID0gdmVjNChcXG4gICAgcmVzLFxcbiAgICAwLjAsIDAuMFxcbik7XFxuJztcbiAgICAgICAgICAgIHRoaXMuZmllbGRLZXJuZWwgPSB0aGlzLmdwZ3B1TWFuYWdlci5jcmVhdGVLZXJuZWwoZmllbGRGdW5jLCBbXSwgdGhpcy5kaW1zLCBbe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3VTY2FsZSdcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndmVjMicsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3VQb3MnXG4gICAgICAgICAgICB9XS5jb25jYXQoaXNBbmltYXRlZCA/IFt7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JyxcbiAgICAgICAgICAgICAgICBuYW1lOiAndGltZSdcbiAgICAgICAgICAgIH1dIDogW10pLCAxLCBpbmNsdWRlU3JjLnRyaW0oKSArICdcXG5cXG4nKTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zY2FsZSA9IDEwLjAgLyB0aGlzLmRpbXMud2lkdGg7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnBvcyA9IG5ldyBWZWN0b3IoLXRoaXMuZGltcy53aWR0aCwgLXRoaXMuZGltcy5oZWlnaHQpLmRpdmlkZSgyLjApLm11bHRpcGx5KHRoaXMudmlld3BvcnQuc2NhbGUpO1xuICAgICAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyA9IDEuMDtcblxuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGVkID0gaXNBbmltYXRlZDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXNlQ2FudmFzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVzZUNhbnZhcyhjYW52YXMpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4ID0gR1BHUFVNYW5hZ2VyLmdldENhbnZhc0NvbnRleHQoY2FudmFzKTtcbiAgICAgICAgICAgIHRoaXMuZ3BncHVNYW5hZ2VyID0gbmV3IEdQR1BVTWFuYWdlcih0aGlzLmN0eCk7XG4gICAgICAgICAgICB0aGlzLmRpbXMgPSBnZXRDYW52YXNEaW1zKHRoaXMuY3R4KTtcblxuICAgICAgICAgICAgdGhpcy5wbG90S2VybmVsID0gdGhpcy5ncGdwdU1hbmFnZXIuY3JlYXRlR3JhcGhpY2FsS2VybmVsKENvbnRvdXJlck1hbmFnZXIucGxvdEZ1bmMsIFsndUZpZWxkJ10sIHRoaXMuZGltcywgW3tcbiAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICd1Q29udG91clNwYWNpbmcnXG4gICAgICAgICAgICB9XSwgQ29udG91cmVyTWFuYWdlci5GSUVMRF9DSEVDS19JTkNMVURFKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVzdHJveUNvbnRleHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveUNvbnRleHQoKSB7XG4gICAgICAgICAgICB0aGlzLmN0eC5jYW52YXMud2lkdGggPSAxO1xuICAgICAgICAgICAgdGhpcy5jdHguY2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NoYW5nZVpvb20nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlWm9vbShjaGFuZ2VBbW91bnQpIHtcbiAgICAgICAgICAgIHZhciB6b29tUG9pbnQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBuZXcgVmVjdG9yKHRoaXMuZGltcy53aWR0aCAvIDIsIHRoaXMuZGltcy5oZWlnaHQgLyAyKSA6IGFyZ3VtZW50c1sxXTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zY2FsZUF0UG9pbnQoLWNoYW5nZUFtb3VudCAqIHRoaXMuem9vbVNlbnNpdGl2aXR5LCB6b29tUG9pbnQpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjaGFuZ2VDb250b3VyU3BhY2luZycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VDb250b3VyU3BhY2luZyhjaGFuZ2VBbW91bnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udG91clNwYWNpbmcgKj0gTWF0aC5leHAoY2hhbmdlQW1vdW50ICogdGhpcy56b29tU2Vuc2l0aXZpdHkpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0cmFuc2xhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudCkge1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC50cmFuc2xhdGUodHJhbnNsYXRlQW1vdW50KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZHJhd0NvbnRvdXJzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdDb250b3VycygpIHtcbiAgICAgICAgICAgIHZhciB0aW1lID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1swXTtcblxuICAgICAgICAgICAgdmFyIHVuaWZvcm1Bc3NpZ25tZW50cyA9IHtcbiAgICAgICAgICAgICAgICB1U2NhbGU6IHRoaXMudmlld3BvcnQuc2NhbGUsXG4gICAgICAgICAgICAgICAgdVBvczogdGhpcy52aWV3cG9ydC5wb3MudG9BcnJheSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmltYXRlZCkge1xuICAgICAgICAgICAgICAgIHVuaWZvcm1Bc3NpZ25tZW50c1sndGltZSddID0gdGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaWVsZFJlc3VsdCA9IHRoaXMuZmllbGRLZXJuZWwucnVuKFtdLCB0aGlzLmRpbXMsIHVuaWZvcm1Bc3NpZ25tZW50cyk7XG4gICAgICAgICAgICB0aGlzLnBsb3RLZXJuZWwucnVuKFtmaWVsZFJlc3VsdC50ZXh0dXJlc1swXV0sIHRoaXMuZGltcywge1xuICAgICAgICAgICAgICAgIHVDb250b3VyU3BhY2luZzogdGhpcy5jb250b3VyU3BhY2luZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmaWVsZFJlc3VsdC5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udG91cmVyTWFuYWdlcjtcbn0oKTtcblxuO1xuXG5Db250b3VyZXJNYW5hZ2VyLnBsb3RGdW5jID0gJ2l2ZWMyIGxpbmVJbmRleCA9IGl2ZWMyKGZsb29yKHRleHR1cmUyRCh1RmllbGQsIHZDb29yZCkueHkgLyB1Q29udG91clNwYWNpbmcpKTtcXG52ZWMyIGNtcEZpZWxkID0gdmVjMihsaW5lSW5kZXgpICogdUNvbnRvdXJTcGFjaW5nO1xcbml2ZWMyIGRyYXdEYXRhID0gaXZlYzIoZ3JlYXRlclRoYW5FcXVhbChcXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoMCwgMSksIGNtcEZpZWxkKSArXFxuICAgIGZpZWxkQ2hlY2sodGhyZWFkSWQsIGl2ZWMyKDEsIDApLCBjbXBGaWVsZCkgK1xcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigwLCAtMSksIGNtcEZpZWxkKSArXFxuICAgIGZpZWxkQ2hlY2sodGhyZWFkSWQsIGl2ZWMyKC0xLCAwKSwgY21wRmllbGQpLFxcbiAgICBpdmVjMigxKSkpO1xcbmlmKGFsbChlcXVhbChkcmF3RGF0YSwgaXZlYzIoMCkpKSl7XFxuICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNCgxLjAsIDEuMCwgMS4wLCAxLjApO1xcbn1cXG5lbHNle1xcbiAgICB2ZWMyIGlzQXhpcyA9IHZlYzIoZXF1YWwobGluZUluZGV4LCBpdmVjMigwKSkpO1xcbiAgICB2ZWMyIGxpbmVDb2xvciA9IHZlYzIoZHJhd0RhdGEpICogKDEuMCAtIDAuNSAqIGlzQXhpcyk7XFxuICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNChsaW5lQ29sb3IueCwgMC41ICogZG90KHZlYzIoZHJhd0RhdGEpLCBpc0F4aXMpLCBsaW5lQ29sb3IueSwgMS4wKTtcXG59XFxuJztcblxuQ29udG91cmVyTWFuYWdlci5GSUVMRF9DSEVDS19JTkNMVURFID0gJ2l2ZWMyIGZpZWxkQ2hlY2soaXZlYzIgY1BvcywgaXZlYzIgZGlyLCB2ZWMyIGNtcEZpZWxkKXtcXG4gICAgaXZlYzIgb1BvcyA9IGNQb3MgKyBkaXI7XFxuICAgIGlmKGFsbChncmVhdGVyVGhhbkVxdWFsKG9Qb3MsIGl2ZWMyKDApKSkgJiYgYWxsKGxlc3NUaGFuKG9Qb3MsIHVEaW1zKSkpe1xcbiAgICAgICAgcmV0dXJuIGl2ZWMyKGxlc3NUaGFuKGFyckdldCh1RmllbGQsIG9Qb3MpLnh5LCBjbXBGaWVsZCkpO1xcbiAgICB9XFxuICAgIGVsc2UgcmV0dXJuIGl2ZWMyKDApO1xcbn1cXG5cXG4nO1xuXG52YXIgQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb250b3VyZXJBbmltYXRpb25NYW5hZ2VyKG1hbmFnZXIpIHtcbiAgICAgICAgdmFyIG51bUZyYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IDEwMDAgOiBhcmd1bWVudHNbMV07XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIpO1xuXG4gICAgICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5udW1GcmFtZXMgPSBudW1GcmFtZXM7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcbiAgICAgICAgdGhpcy5vblN0b3BDYWxsYmFjayA9IG51bGw7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uTG9vcCA9IHRoaXMuYW5pbWF0aW9uTG9vcC5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDb250b3VyZXJBbmltYXRpb25NYW5hZ2VyLCBbe1xuICAgICAgICBrZXk6ICdzdGFydCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgICAgIHZhciBzdGFydEZyYW1lID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIHZhciBvbkRyYXcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzFdO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IHN0YXJ0RnJhbWU7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMub25EcmF3ID0gb25EcmF3O1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkxvb3ApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhbmltYXRpb25Mb29wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFuaW1hdGlvbkxvb3AodGltZXN0YW1wKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5jdXJyZW50RnJhbWUgLyB0aGlzLm51bUZyYW1lcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25EcmF3ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRyYXcodGhpcy5jdXJyZW50RnJhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9ICh0aGlzLmN1cnJlbnRGcmFtZSArIDEpICUgdGhpcy5udW1GcmFtZXM7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkxvb3ApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vblN0b3BDYWxsYmFjayAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TdG9wQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3N0b3AnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgICAgIHZhciBvblN0b3BDYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMub25TdG9wQ2FsbGJhY2sgPSBvblN0b3BDYWxsYmFjaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9uU3RvcENhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb25TdG9wQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlcjtcbn0oKTtcblxuO1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBtYW5hZ2VyID0gbmV3IENvbnRvdXJlck1hbmFnZXIoKTtcbiAgICBpbml0UmVuZGVyKG1hbmFnZXIpO1xufVxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgRGVtb0Z1bmN0aW9ucyA9IGZ1bmN0aW9uIERlbW9GdW5jdGlvbnMoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERlbW9GdW5jdGlvbnMpO1xufTtcblxuO1xuXG5EZW1vRnVuY3Rpb25zLklOQ0xVREVTID0ge1xuICAgIHBpOiAnY29uc3QgZmxvYXQgUEkgPSAzLjE0MTU5MjY1MzU4OTc5MzIzODQ2MjY0MzM4MzI3OTU7XFxuXFxuJyxcbiAgICBjb21wbGV4TGliOiAndmVjMiBjb21wbGV4TXVsdCh2ZWMyIGEsIHZlYzIgYil7XFxuICAgIHJldHVybiB2ZWMyKGEueCAqIGIueCAtIGEueSAqIGIueSwgYS55ICogYi54ICsgYS54ICogYi55KTtcXG59XFxuXFxudmVjMiBjb21wbGV4RGl2KHZlYzIgYSwgdmVjMiBiKXtcXG4gICAgZmxvYXQgZGl2aXNvciA9IGRvdChiLCBiKTtcXG4gICAgcmV0dXJuIHZlYzIoZG90KGEsIGIpLCBhLnkgKiBiLnggLSBhLnggKiBiLnkpIC8gZGl2aXNvcjtcXG59XFxuXFxudmVjMiBjb21wbGV4UG93KHZlYzIgYSwgdmVjMiBiKXtcXG4gICAgZmxvYXQgciA9IGxlbmd0aChhKSwgcGhpID0gYXRhbihhLnksIGEueCk7XFxuICAgIGZsb2F0IG5ld1IgPSBwb3cociwgYi54KSAqIGV4cCgtYi55ICogcGhpKTtcXG4gICAgZmxvYXQgbmV3UGhpID0gYi55ICogbG9nKHIpICsgYi54ICogcGhpO1xcbiAgICByZXR1cm4gbmV3UiAqIHZlYzIoY29zKG5ld1BoaSksIHNpbihuZXdQaGkpKTtcXG59XFxuXFxudmVjMiBjb21wbGV4RXhwKHZlYzIgYil7XFxuICAgIHJldHVybiBleHAoYi54KSAqIHZlYzIoY29zKGIueSksIHNpbihiLnkpKTtcXG59XFxuXFxudmVjMiBjb21wbGV4TG9nKHZlYzIgeCl7XFxuICAgIHJldHVybiB2ZWMyKGxvZyhsZW5ndGgoeCkpLCBhdGFuKHgueSwgeC54KSk7XFxufVxcblxcbicsXG4gICAgZ2FtbWE6ICcvKipcXG4gKiBUcmFuc2xhdGVkIHRvIE9wZW5HTCBFUyBmcm9tIG1hdGguanNcXG4gKiBodHRwczovL2dpdGh1Yi5jb20vam9zZGVqb25nL21hdGhqc1xcbiAqXFxuICogTWF0aC5qcyBpcyBhbiBleHRlbnNpdmUgbWF0aCBsaWJyYXJ5IGZvciBKYXZhU2NyaXB0IGFuZCBOb2RlLmpzLFxcbiAqIEl0IGZlYXR1cmVzIHJlYWwgYW5kIGNvbXBsZXggbnVtYmVycywgdW5pdHMsIG1hdHJpY2VzLCBhIGxhcmdlIHNldCBvZlxcbiAqIG1hdGhlbWF0aWNhbCBmdW5jdGlvbnMsIGFuZCBhIGZsZXhpYmxlIGV4cHJlc3Npb24gcGFyc2VyLlxcbiAqXFxuICogQHZlcnNpb24gMy4yLjFcXG4gKiBAZGF0ZSAgICAyMDE2LTA0LTI2XFxuICpcXG4gKiBAbGljZW5zZVxcbiAqIENvcHlyaWdodCAoQykgMjAxMy0yMDE2IEpvcyBkZSBKb25nIDx3am9zZGVqb25nQGdtYWlsLmNvbT5cXG4gKlxcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90XFxuICogdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcXG4gKiBvZiB0aGUgTGljZW5zZSBhdFxcbiAqXFxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXFxuICpcXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXFxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUXFxuICogV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlXFxuICogTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXJcXG4gKiB0aGUgTGljZW5zZS5cXG4gKi9cXG5cXG52ZWMyIGdhbW1hU3RlcCh2ZWMyIHgsIGludCBpLCB2ZWMyIG4sIGZsb2F0IHApe1xcbiAgICBmbG9hdCByZWFsID0gbi54ICsgZmxvYXQoaSk7XFxuICAgIGZsb2F0IGRlbiA9IHJlYWwgKiByZWFsICsgbi55ICogbi55O1xcbiAgICBpZihkZW4gIT0gMC4wKXtcXG4gICAgICAgIHJldHVybiB4ICsgdmVjMihwICogcmVhbCAvIGRlbiwgLShwICogbi55KSAvIGRlbik7XFxuICAgIH1cXG4gICAgZWxzZSByZXR1cm4gdmVjMigwLjApO1xcbn1cXG5cXG52ZWMyIGdhbW1hKHZlYzIgbil7XFxuICAgIG4ueCAtPSAxLjA7XFxuICAgIHZlYzIgeCA9IHZlYzIoMC45OTk5OTk5OTk5OTk5OTcwOTE4MiwgMC4wKTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDEsIG4sIDU3LjE1NjIzNTY2NTg2MjkyMzUxNyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAyLCBuLCAtNTkuNTk3OTYwMzU1NDc1NDkxMjQ4KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDMsIG4sIDE0LjEzNjA5Nzk3NDc0MTc0NzE3NCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA0LCBuLCAtMC40OTE5MTM4MTYwOTc2MjAxOTk3OCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA1LCBuLCAwLjMzOTk0NjQ5OTg0ODExODg4Njk5ZS00KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDYsIG4sIDAuNDY1MjM2Mjg5MjcwNDg1NzU2NjVlLTQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgNywgbiwgLTAuOTgzNzQ0NzUzMDQ4Nzk1NjQ2NzdlLTQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgOCwgbiwgMC4xNTgwODg3MDMyMjQ5MTI0ODg4NGUtMyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA5LCBuLCAtMC4yMTAyNjQ0NDE3MjQxMDQ4ODMxOWUtMyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAxMCwgbiwgMC4yMTc0Mzk2MTgxMTUyMTI2NDMyMGUtMyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAxMSwgbiwgLTAuMTY0MzE4MTA2NTM2NzYzODkwMjJlLTMpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgMTIsIG4sIDAuODQ0MTgyMjM5ODM4NTI3NDMyOTNlLTQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgMTMsIG4sIC0wLjI2MTkwODM4NDAxNTgxNDA4NjcwZS00KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDE0LCBuLCAwLjM2ODk5MTgyNjU5NTMxNjIyNzA0ZS01KTtcXG4gICAgdmVjMiB0ID0gdmVjMihuLnggKyA0Ljc0MjE4NzUgKyAwLjUsIG4ueSk7XFxuICAgIGZsb2F0IHR3b1BpU3FydCA9IHNxcnQoMi4wICogUEkpO1xcblxcbiAgICBuLnggKz0gMC41O1xcbiAgICB2ZWMyIHJlc3VsdCA9IGNvbXBsZXhQb3codCwgbik7XFxuICAgIHJlc3VsdCAqPSB0d29QaVNxcnQ7XFxuICAgIGZsb2F0IHIgPSBleHAoLXQueCk7XFxuICAgIHQgPSByICogdmVjMihjb3MoLXQueSksIHNpbigtdC55KSk7XFxuXFxuICAgIHJldHVybiBjb21wbGV4TXVsdChjb21wbGV4TXVsdChyZXN1bHQsIHQpLCB4KTtcXG59XFxuXFxuJyxcbiAgICByb3RhdGVXaXRoVGltZTogJ3ZlYzIgcm90YXRlV2l0aFRpbWUodmVjMiB2KXtcXG4gICAgZmxvYXQgY29zVCA9IGNvcyh0aW1lICogMi4wICogUEkpLCBzaW5UID0gc2luKHRpbWUgKiAyLjAgKiBQSSk7XFxuICAgIHJldHVybiB2ZWMyKFxcbiAgICAgICAgdi54ICogY29zVCAtIHYueSAqIHNpblQsXFxuICAgICAgICB2LnggKiBzaW5UICsgdi55ICogY29zVFxcbiAgICApO1xcbn1cXG5cXG4nLFxuICAgIHNub2lzZTogJy8vXFxuLy8gRGVzY3JpcHRpb24gOiBBcnJheSBhbmQgdGV4dHVyZWxlc3MgR0xTTCAyRC8zRC80RCBzaW1wbGV4IFxcbi8vICAgICAgICAgICAgICAgbm9pc2UgZnVuY3Rpb25zLlxcbi8vICAgICAgQXV0aG9yIDogSWFuIE1jRXdhbiwgQXNoaW1hIEFydHMuXFxuLy8gIE1haW50YWluZXIgOiBzdGVndVxcbi8vICAgICBMYXN0bW9kIDogMjAxMTA4MjIgKGlqbSlcXG4vLyAgICAgTGljZW5zZSA6IENvcHlyaWdodCAoQykgMjAxMSBBc2hpbWEgQXJ0cy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cXG4vLyAgICAgICAgICAgICAgIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZS5cXG4vLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2hpbWEvd2ViZ2wtbm9pc2VcXG4vLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9zdGVndS93ZWJnbC1ub2lzZVxcbi8vIFxcblxcbnZlYzQgbW9kMjg5KHZlYzQgeCkge1xcbiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsgfVxcblxcbmZsb2F0IG1vZDI4OShmbG9hdCB4KSB7XFxuICByZXR1cm4geCAtIGZsb29yKHggKiAoMS4wIC8gMjg5LjApKSAqIDI4OS4wOyB9XFxuXFxudmVjNCBwZXJtdXRlKHZlYzQgeCkge1xcbiAgICAgcmV0dXJuIG1vZDI4OSgoKHgqMzQuMCkrMS4wKSp4KTtcXG59XFxuXFxuZmxvYXQgcGVybXV0ZShmbG9hdCB4KSB7XFxuICAgICByZXR1cm4gbW9kMjg5KCgoeCozNC4wKSsxLjApKngpO1xcbn1cXG5cXG52ZWM0IHRheWxvckludlNxcnQodmVjNCByKVxcbntcXG4gIHJldHVybiAxLjc5Mjg0MjkxNDAwMTU5IC0gMC44NTM3MzQ3MjA5NTMxNCAqIHI7XFxufVxcblxcbmZsb2F0IHRheWxvckludlNxcnQoZmxvYXQgcilcXG57XFxuICByZXR1cm4gMS43OTI4NDI5MTQwMDE1OSAtIDAuODUzNzM0NzIwOTUzMTQgKiByO1xcbn1cXG5cXG52ZWM0IGdyYWQ0KGZsb2F0IGosIHZlYzQgaXApXFxuICB7XFxuICBjb25zdCB2ZWM0IG9uZXMgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIC0xLjApO1xcbiAgdmVjNCBwLHM7XFxuXFxuICBwLnh5eiA9IGZsb29yKCBmcmFjdCAodmVjMyhqKSAqIGlwLnh5eikgKiA3LjApICogaXAueiAtIDEuMDtcXG4gIHAudyA9IDEuNSAtIGRvdChhYnMocC54eXopLCBvbmVzLnh5eik7XFxuICBzID0gdmVjNChsZXNzVGhhbihwLCB2ZWM0KDAuMCkpKTtcXG4gIHAueHl6ID0gcC54eXogKyAocy54eXoqMi4wIC0gMS4wKSAqIHMud3d3OyBcXG5cXG4gIHJldHVybiBwO1xcbiAgfVxcblxcdFxcdFxcdFxcdFxcdFxcdFxcbi8vIChzcXJ0KDUpIC0gMSkvNCA9IEY0LCB1c2VkIG9uY2UgYmVsb3dcXG4jZGVmaW5lIEY0IDAuMzA5MDE2OTk0Mzc0OTQ3NDUxXFxuXFxuZmxvYXQgc25vaXNlKHZlYzQgdilcXG4gIHtcXG4gIGNvbnN0IHZlYzQgIEMgPSB2ZWM0KCAwLjEzODE5NjYwMTEyNTAxMSwgIC8vICg1IC0gc3FydCg1KSkvMjAgIEc0XFxuICAgICAgICAgICAgICAgICAgICAgICAgMC4yNzYzOTMyMDIyNTAwMjEsICAvLyAyICogRzRcXG4gICAgICAgICAgICAgICAgICAgICAgICAwLjQxNDU4OTgwMzM3NTAzMiwgIC8vIDMgKiBHNFxcbiAgICAgICAgICAgICAgICAgICAgICAgLTAuNDQ3MjEzNTk1NDk5OTU4KTsgLy8gLTEgKyA0ICogRzRcXG5cXG4vLyBGaXJzdCBjb3JuZXJcXG4gIHZlYzQgaSAgPSBmbG9vcih2ICsgZG90KHYsIHZlYzQoRjQpKSApO1xcbiAgdmVjNCB4MCA9IHYgLSAgIGkgKyBkb3QoaSwgQy54eHh4KTtcXG5cXG4vLyBPdGhlciBjb3JuZXJzXFxuXFxuLy8gUmFuayBzb3J0aW5nIG9yaWdpbmFsbHkgY29udHJpYnV0ZWQgYnkgQmlsbCBMaWNlYS1LYW5lLCBBTUQgKGZvcm1lcmx5IEFUSSlcXG4gIHZlYzQgaTA7XFxuICB2ZWMzIGlzWCA9IHN0ZXAoIHgwLnl6dywgeDAueHh4ICk7XFxuICB2ZWMzIGlzWVogPSBzdGVwKCB4MC56d3csIHgwLnl5eiApO1xcbi8vICBpMC54ID0gZG90KCBpc1gsIHZlYzMoIDEuMCApICk7XFxuICBpMC54ID0gaXNYLnggKyBpc1gueSArIGlzWC56O1xcbiAgaTAueXp3ID0gMS4wIC0gaXNYO1xcbi8vICBpMC55ICs9IGRvdCggaXNZWi54eSwgdmVjMiggMS4wICkgKTtcXG4gIGkwLnkgKz0gaXNZWi54ICsgaXNZWi55O1xcbiAgaTAuencgKz0gMS4wIC0gaXNZWi54eTtcXG4gIGkwLnogKz0gaXNZWi56O1xcbiAgaTAudyArPSAxLjAgLSBpc1laLno7XFxuXFxuICAvLyBpMCBub3cgY29udGFpbnMgdGhlIHVuaXF1ZSB2YWx1ZXMgMCwxLDIsMyBpbiBlYWNoIGNoYW5uZWxcXG4gIHZlYzQgaTMgPSBjbGFtcCggaTAsIDAuMCwgMS4wICk7XFxuICB2ZWM0IGkyID0gY2xhbXAoIGkwLTEuMCwgMC4wLCAxLjAgKTtcXG4gIHZlYzQgaTEgPSBjbGFtcCggaTAtMi4wLCAwLjAsIDEuMCApO1xcblxcbiAgLy8gIHgwID0geDAgLSAwLjAgKyAwLjAgKiBDLnh4eHhcXG4gIC8vICB4MSA9IHgwIC0gaTEgICsgMS4wICogQy54eHh4XFxuICAvLyAgeDIgPSB4MCAtIGkyICArIDIuMCAqIEMueHh4eFxcbiAgLy8gIHgzID0geDAgLSBpMyAgKyAzLjAgKiBDLnh4eHhcXG4gIC8vICB4NCA9IHgwIC0gMS4wICsgNC4wICogQy54eHh4XFxuICB2ZWM0IHgxID0geDAgLSBpMSArIEMueHh4eDtcXG4gIHZlYzQgeDIgPSB4MCAtIGkyICsgQy55eXl5O1xcbiAgdmVjNCB4MyA9IHgwIC0gaTMgKyBDLnp6eno7XFxuICB2ZWM0IHg0ID0geDAgKyBDLnd3d3c7XFxuXFxuLy8gUGVybXV0YXRpb25zXFxuICBpID0gbW9kMjg5KGkpOyBcXG4gIGZsb2F0IGowID0gcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZShpLncpICsgaS56KSArIGkueSkgKyBpLngpO1xcbiAgdmVjNCBqMSA9IHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUgKFxcbiAgICAgICAgICAgICBpLncgKyB2ZWM0KGkxLncsIGkyLncsIGkzLncsIDEuMCApKVxcbiAgICAgICAgICAgKyBpLnogKyB2ZWM0KGkxLnosIGkyLnosIGkzLnosIDEuMCApKVxcbiAgICAgICAgICAgKyBpLnkgKyB2ZWM0KGkxLnksIGkyLnksIGkzLnksIDEuMCApKVxcbiAgICAgICAgICAgKyBpLnggKyB2ZWM0KGkxLngsIGkyLngsIGkzLngsIDEuMCApKTtcXG5cXG4vLyBHcmFkaWVudHM6IDd4N3g2IHBvaW50cyBvdmVyIGEgY3ViZSwgbWFwcGVkIG9udG8gYSA0LWNyb3NzIHBvbHl0b3BlXFxuLy8gNyo3KjYgPSAyOTQsIHdoaWNoIGlzIGNsb3NlIHRvIHRoZSByaW5nIHNpemUgMTcqMTcgPSAyODkuXFxuICB2ZWM0IGlwID0gdmVjNCgxLjAvMjk0LjAsIDEuMC80OS4wLCAxLjAvNy4wLCAwLjApIDtcXG5cXG4gIHZlYzQgcDAgPSBncmFkNChqMCwgICBpcCk7XFxuICB2ZWM0IHAxID0gZ3JhZDQoajEueCwgaXApO1xcbiAgdmVjNCBwMiA9IGdyYWQ0KGoxLnksIGlwKTtcXG4gIHZlYzQgcDMgPSBncmFkNChqMS56LCBpcCk7XFxuICB2ZWM0IHA0ID0gZ3JhZDQoajEudywgaXApO1xcblxcbi8vIE5vcm1hbGlzZSBncmFkaWVudHNcXG4gIHZlYzQgbm9ybSA9IHRheWxvckludlNxcnQodmVjNChkb3QocDAscDApLCBkb3QocDEscDEpLCBkb3QocDIsIHAyKSwgZG90KHAzLHAzKSkpO1xcbiAgcDAgKj0gbm9ybS54O1xcbiAgcDEgKj0gbm9ybS55O1xcbiAgcDIgKj0gbm9ybS56O1xcbiAgcDMgKj0gbm9ybS53O1xcbiAgcDQgKj0gdGF5bG9ySW52U3FydChkb3QocDQscDQpKTtcXG5cXG4vLyBNaXggY29udHJpYnV0aW9ucyBmcm9tIHRoZSBmaXZlIGNvcm5lcnNcXG4gIHZlYzMgbTAgPSBtYXgoMC42IC0gdmVjMyhkb3QoeDAseDApLCBkb3QoeDEseDEpLCBkb3QoeDIseDIpKSwgMC4wKTtcXG4gIHZlYzIgbTEgPSBtYXgoMC42IC0gdmVjMihkb3QoeDMseDMpLCBkb3QoeDQseDQpICAgICAgICAgICAgKSwgMC4wKTtcXG4gIG0wID0gbTAgKiBtMDtcXG4gIG0xID0gbTEgKiBtMTtcXG4gIHJldHVybiA0OS4wICogKCBkb3QobTAqbTAsIHZlYzMoIGRvdCggcDAsIHgwICksIGRvdCggcDEsIHgxICksIGRvdCggcDIsIHgyICkpKVxcbiAgICAgICAgICAgICAgICsgZG90KG0xKm0xLCB2ZWMyKCBkb3QoIHAzLCB4MyApLCBkb3QoIHA0LCB4NCApICkgKSApIDtcXG5cXG59XFxuXFxuJ1xufTtcblxuRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnMgPSB7XG4gICAgbG9yZW50ejoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0xvcmVudHogQm9vc3QnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6ICdmbG9hdCBiZXRhID0gc2luKHRpbWUgKiAyLjAgKiBQSSkgKiAwLjk7XFxuZmxvYXQgZ2FtbWEgPSAxLjAgLyBzcXJ0KDEuMCAtIGJldGEgKiBiZXRhKTtcXG5yZXMgPSBnYW1tYSAqIHZlYzIoXFxuICAgIGNQb3MueCAqIDEuMCArIGNQb3MueSAqIGJldGEsXFxuICAgIGNQb3MueSAqIDEuMCArIGNQb3MueCAqIGJldGFcXG4pO1xcblxcbidcbiAgICB9LFxuICAgIC8vICAgIHJvdGF0aW9uOiB7XG4gICAgLy8gICAgICAgIGRpc3BsYXlOYW1lOiAnUm90YXRpb24nLFxuICAgIC8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgIC8vICAgICAgICBudW1GcmFtZXM6IDgwMCxcbiAgICAvLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgLy8gICAgICAgIGRyYXdGdW5jOlxuICAgIC8vYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKGNQb3MpO1xuICAgIC8vYFxuICAgIC8vICAgIH0sXG4gICAgbWVyY2F0b3J3YXJwOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTWVyY2F0b3IgV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogODAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6ICd2ZWMyIHNjYWxlZFBvcyA9IGNQb3MgKiAwLjY7XFxudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSkgKiA4LjA7XFxucmVzID0gcm90YXRlV2l0aFRpbWUoaW52TWVyY2F0b3IpO1xcbidcbiAgICB9LFxuICAgIG1lcmNhdG9yTW9sbHdlaWRlOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTWVyY2F0b3IgdG8gTW9sbHdlaWRlJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBzY2FsZWRQb3MgPSBjUG9zICogMC4zO1xcbmZsb2F0IHRoZXRhID0gYXNpbihzY2FsZWRQb3MueSAqIDIuMCAvIFBJKTtcXG52ZWMyIGludk1vbGx3ZWlkZSA9IHZlYzIoXFxuICAgIHNjYWxlZFBvcy54IC8gY29zKHRoZXRhKSxcXG4gICAgYXNpbigoMi4wICogdGhldGEgKyBzaW4oMi4wICogdGhldGEpKSAvIFBJKVxcbik7XFxudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSk7XFxuZmxvYXQgbWl4UGFyYW0gPSAtIGNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnJlcyA9IChpbnZNb2xsd2VpZGUgKiBtaXhQYXJhbSArIGludk1lcmNhdG9yICogKDEuMCAtIG1peFBhcmFtKSkgKiA4LjA7XFxuJ1xuICAgIH0sXG4gICAgZGlwb2xlOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnRGlwb2xlIEZvcm1hdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogJ2Zsb2F0IGRpc3QgPSBzaW4odGltZSAqIDIuMCAqIFBJICsgUEkgLyAyLjApICogMi4wICsgMi41O1xcbnJlcyA9IDUwLjAgLyAoMi4wICogZGlzdCkgKiAoXFxuICAgIGNvbXBsZXhMb2coY1BvcyAtIHZlYzIoZGlzdCwgMC4wKSkgLVxcbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKC1kaXN0LCAwLjApKVxcbik7XFxuJ1xuICAgIH0sXG4gICAgYXR0cmFjdFJlcGVsOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnQXR0cmFjdGlvbiB0byBSZXB1bHNpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiAncmVzID0gMTAuMCAqIChcXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMigxLjAsIDAuMCkpICtcXG4gICAgc2luKHRpbWUgKiAyLjAgKiBQSSAtIFBJIC8gMi4wKSAqIGNvbXBsZXhMb2coY1BvcyAtIHZlYzIoLTEuMCwgMC4wKSlcXG4pO1xcbidcbiAgICB9LFxuICAgIG5ldXJhbG5ldHdvcms6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdOZXVyYWwgTmV0d29yaycsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzogJ2Zsb2F0IG1peFBhcmFtID0gLWNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnZlYzIgdW5zaWdtb2lkID0gLWxvZygxLjAgLyAoKGNQb3MgKyB2ZWMyKDMuMywgMy4wKSkgLyA2LjMpIC0gMS4wKTtcXG5yZXMgPSAodmVjMihcXG4gICAgdW5zaWdtb2lkLnggKiAyLjAgKyB1bnNpZ21vaWQueSAqIDEuMCxcXG4gICAgdW5zaWdtb2lkLnggKiAyLjAgKyB1bnNpZ21vaWQueSAqIDMuMFxcbikgLSB2ZWMyKDEuMCwgLTIuMCkpICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcXG4nXG4gICAgfSxcbiAgICBnYWxheHk6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdHYWxheHkgV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzogJ2Zsb2F0IG1peFBhcmFtID0gLWNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnZlYzIgcG9sUG9zID0gdmVjMihsZW5ndGgoY1BvcyksIGF0YW4oY1Bvcy55LCBjUG9zLngpKTtcXG5wb2xQb3MgPSB2ZWMyKHBvbFBvcy54LCBwb2xQb3MueSAtIG1peFBhcmFtIC8gNTAuMCAqIHNxcnQoMS4wIC8gcG93KHBvbFBvcy54IC8gNDAuMCwgMy4wKSkpO1xcbnJlcyA9IHZlYzIocG9sUG9zLnggKiBjb3MocG9sUG9zLnkpLCBwb2xQb3MueCAqIHNpbihwb2xQb3MueSkpO1xcbidcbiAgICB9LFxuICAgIHNpbXBsZXg6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdTaW1wbGV4IFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnNub2lzZSxcbiAgICAgICAgZHJhd0Z1bmM6ICd2ZWMyIGNpcmNsZVZhcnkgPSAyLjAgKiB2ZWMyKFxcbiAgICBjb3ModGltZSAqIDIuMCAqIFBJKSxcXG4gICAgc2luKHRpbWUgKiAyLjAgKiBQSSlcXG4pO1xcbnJlcyA9IDIuMCAqIChjUG9zICtcXG4wLjUgKiB2ZWMyKFxcbiAgICBzbm9pc2UodmVjNChjUG9zICogMC4yNSwgY2lyY2xlVmFyeSArIHZlYzIoMTAwLjAsIDEwMC4wKSkpLFxcbiAgICBzbm9pc2UodmVjNChjUG9zICogMC4yNSwgY2lyY2xlVmFyeSArIHZlYzIoMjAwLjAsIDIwMC4wKSkpXFxuKSk7XFxuJ1xuICAgIH0sXG4gICAgZXhwb25lbnRpYXRpb246IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IEV4cG9uZW50aWF0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAzMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBjYXJ0UmVzID0gMTAuMCAqIGNvbXBsZXhQb3coY1BvcywgdmVjMigxLjAgLyAoMi41IC0gMS41ICogY29zKHRpbWUgKiAyLjAgKiBQSSkpLCAwLjApKTtcXG5yZXMgPSB2ZWMyKGxlbmd0aChjYXJ0UmVzKSwgMTAuMCAqIGF0YW4oY2FydFJlcy55LCBjYXJ0UmVzLngpKTtcXG4nXG4gICAgfSxcbiAgICBtb2JpdXM6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdNb2JpdXMgVHJhbnNmb3JtYXRpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgICAgICBkcmF3RnVuYzogJ3JlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBjb21wbGV4RGl2KFxcbiAgICBjb21wbGV4TXVsdCh2ZWMyKDAuNSwgMy4wKSwgY1BvcykgKyB2ZWMyKDAuNSwgMS41KSxcXG4gICAgY29tcGxleE11bHQodmVjMig0LjAsIDEuNSksIGNQb3MpICsgdmVjMigyLjAsIDMuNSlcXG4pKTtcXG4nXG4gICAgfSxcbiAgICAvLyAgICBsb2c6IHtcbiAgICAvLyAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IExvZ2FyaXRobScsXG4gICAgLy8gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgLy8gICAgICAgIG51bUZyYW1lczogMTAwMCxcbiAgICAvLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgLy8gICAgICAgIGRyYXdGdW5jOlxuICAgIC8vYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBjb21wbGV4TG9nKGNQb3MpKTtcbiAgICAvL2BcbiAgICAvLyAgICB9LFxuICAgIC8vICAgIHNpbjoge1xuICAgIC8vICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggU2luZScsXG4gICAgLy8gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgLy8gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgIC8vICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgIC8vICAgICAgICBkcmF3RnVuYzpcbiAgICAvL2B2ZWMyIGV4cG9uZW50ID0gdmVjMigtY1Bvcy55LCBjUG9zLngpO1xuICAgIC8vcmVzID0gcm90YXRlV2l0aFRpbWUoY29tcGxleERpdihcbiAgICAvLyAgICBjb21wbGV4RXhwKGV4cG9uZW50KSAtIGNvbXBsZXhFeHAoLWV4cG9uZW50KSxcbiAgICAvLyAgICB2ZWMyKDAuMCwgMi4wKVxuICAgIC8vKSk7XG4gICAgLy9gXG4gICAgLy8gICAgfSxcbiAgICBhcmNzaW46IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IEludmVyc2UgU2luZScsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogJ3ZlYzIgaW52U2luID0gLSAxMC4wICogY29tcGxleE11bHQoY29tcGxleExvZyhjb21wbGV4UG93KHZlYzIoMS4wLCAwLjApIC0gY29tcGxleFBvdyhjUG9zLCB2ZWMyKDIuMCwgMC4wKSksIHZlYzIoMC41LCAwLjApKSArIGNvbXBsZXhNdWx0KGNQb3MsIHZlYzIoMC4wLCAxLjApKSksIHZlYzIoMC4wLCAxLjApKTtcXG5mbG9hdCBtaXhQYXJhbSA9IC0gY29zKHRpbWUgKiAyLjAgKiBQSSkgLyAyLjAgKyAwLjU7XFxucmVzID0gaW52U2luICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcXG4nXG4gICAgfSxcbiAgICBnYW1tYToge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0dhbW1hIEZ1bmN0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiA0MDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmdhbW1hICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6ICdyZXMgPSByb3RhdGVXaXRoVGltZSgxMC4wICogZ2FtbWEoKGNQb3MgKyB2ZWMyKDIuMCwgMC4wKSkgLyAyLjApKTtcXG4nXG4gICAgfSxcbiAgICBtYWRuZXNzOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnQ29tcGxleCA/Pz8nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDgwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYixcbiAgICAgICAgZHJhd0Z1bmM6ICd2ZWMyIG1hZG5lc3MgPSAtIDEwLjAgKiBjb21wbGV4TXVsdChjb21wbGV4TG9nKGNvbXBsZXhQb3codmVjMigyLjAsIDMuMCkgLSBjb21wbGV4UG93KGNQb3MgKiAyLjAsIHZlYzIoMi4wLCAxLjApKSwgdmVjMigwLjUsIDEuMCkpICsgY29tcGxleE11bHQoY1BvcyAqIDIuMCwgdmVjMigyLjAsIDEuMCkpKSwgdmVjMigyLjAsIDEuMCkpO1xcbmZsb2F0IG1peFBhcmFtID0gLSBjb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcXG5yZXMgPSBtYWRuZXNzICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcXG4nXG4gICAgfVxufTtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgQ2FudmFzRGlzcGxheVBhbmUgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhDYW52YXNEaXNwbGF5UGFuZSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBDYW52YXNEaXNwbGF5UGFuZSgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbnZhc0Rpc3BsYXlQYW5lKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKENhbnZhc0Rpc3BsYXlQYW5lKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ2FudmFzRGlzcGxheVBhbmUsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgICAgaWYgKCdvbk1vdW50Q2FsbGJhY2snIGluIHRoaXMucHJvcHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbk1vdW50Q2FsbGJhY2soY2FudmFzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgICBpZiAoJ29uRGlzbW91bnRDYWxsYmFjaycgaW4gdGhpcy5wcm9wcykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25EaXNtb3VudENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnY2FudmFzJywgeyB3aWR0aDogdGhpcy5wcm9wcy5kaW1zLndpZHRoLCBoZWlnaHQ6IHRoaXMucHJvcHMuZGltcy5oZWlnaHQsIHN0eWxlOiB7IHdpZHRoOiAnMTAwJScgfSB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDYW52YXNEaXNwbGF5UGFuZTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuO1xuQ2FudmFzRGlzcGxheVBhbmUucHJvcFR5cGVzID0ge1xuICAgIGRpbXM6IFJlYWN0LlByb3BUeXBlcy5pbnN0YW5jZU9mKERpbWVuc2lvbnMpLmlzUmVxdWlyZWQsXG4gICAgb25Nb3VudENhbGxiYWNrOiBSZWFjdC5Qcm9wVHlwZXMuZnVuY1xufTtcblxudmFyIERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQyKSB7XG4gICAgX2luaGVyaXRzKERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uLCBfUmVhY3QkQ29tcG9uZW50Mik7XG5cbiAgICBmdW5jdGlvbiBEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24sIFt7XG4gICAgICAgIGtleTogJ3JlbmRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnbGlzdC1ncm91cC1pdGVtJyArICh0aGlzLnByb3BzLnNlbGVjdGVkID8gJyBhY3RpdmUnIDogJycpLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnByb3BzLm9uQ2xpY2soX3RoaXMzLnByb3BzLmZ1bmNOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZGlzcGxheU5hbWVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b247XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbjtcblxudmFyIERyYXdGdW5jdGlvblNlbGVjdG9yID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQzKSB7XG4gICAgX2luaGVyaXRzKERyYXdGdW5jdGlvblNlbGVjdG9yLCBfUmVhY3QkQ29tcG9uZW50Myk7XG5cbiAgICBmdW5jdGlvbiBEcmF3RnVuY3Rpb25TZWxlY3Rvcihwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJhd0Z1bmN0aW9uU2VsZWN0b3IpO1xuXG4gICAgICAgIHZhciBfdGhpczQgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRHJhd0Z1bmN0aW9uU2VsZWN0b3IpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpczQuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZEZ1bmM6IERyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQ1xuICAgICAgICB9O1xuICAgICAgICBfdGhpczQuaGFuZGxlQ2xpY2sgPSBfdGhpczQuaGFuZGxlQ2xpY2suYmluZChfdGhpczQpO1xuICAgICAgICByZXR1cm4gX3RoaXM0O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhEcmF3RnVuY3Rpb25TZWxlY3RvciwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2xpc3QtZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnMpLm1hcChmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbiwgeyBkaXNwbGF5TmFtZTogRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnNbZnVuY10uZGlzcGxheU5hbWUsIGtleTogZnVuYywgZnVuY05hbWU6IGZ1bmMsIHNlbGVjdGVkOiBmdW5jID09IF90aGlzNS5zdGF0ZS5zZWxlY3RlZEZ1bmMsIG9uQ2xpY2s6IF90aGlzNS5oYW5kbGVDbGljayB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlQ2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2soZnVuY05hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkRnVuYzogZnVuY05hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdChmdW5jTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRHJhd0Z1bmN0aW9uU2VsZWN0b3I7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbjtcbkRyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQyA9ICdhdHRyYWN0UmVwZWwnO1xuXG52YXIgQWNlRWRpdG9yID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQ0KSB7XG4gICAgX2luaGVyaXRzKEFjZUVkaXRvciwgX1JlYWN0JENvbXBvbmVudDQpO1xuXG4gICAgZnVuY3Rpb24gQWNlRWRpdG9yKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWNlRWRpdG9yKTtcblxuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKEFjZUVkaXRvcikuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEFjZUVkaXRvciwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICB2YXIgZWRpdG9yRGl2ID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvciA9IGFjZS5lZGl0KGVkaXRvckRpdik7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zZXRUaGVtZSgnYWNlL3RoZW1lL21vbm9rYWknKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXb3JrZXIoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldE1vZGUoJ2FjZS9tb2RlL2dsc2wnKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLiRibG9ja1Njcm9sbGluZyA9IEluZmluaXR5O1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0Rm9udFNpemUoMTgpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0T3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgbWF4TGluZXM6IEluZmluaXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXcmFwTW9kZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFZhbHVlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKG5ld0NvbnRlbnRzKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zZXRWYWx1ZShuZXdDb250ZW50cyk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRWYWx1ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IHN0eWxlOiB7IGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQudG9TdHJpbmcoKSArICdweCcgfSB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBBY2VFZGl0b3I7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbjtcblxudmFyIENvbnRvdXJlckFwcCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50NSkge1xuICAgIF9pbmhlcml0cyhDb250b3VyZXJBcHAsIF9SZWFjdCRDb21wb25lbnQ1KTtcblxuICAgIGZ1bmN0aW9uIENvbnRvdXJlckFwcChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udG91cmVyQXBwKTtcblxuICAgICAgICB2YXIgX3RoaXM3ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbnRvdXJlckFwcCkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzNy5hbmltYXRpb25NYW5hZ2VyID0gbmV3IENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIoX3RoaXM3LnByb3BzLm1hbmFnZXIpO1xuICAgICAgICBfdGhpczcuc3RhdGUgPSB7XG4gICAgICAgICAgICBpc0FuaW1hdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogMCxcbiAgICAgICAgICAgIG51bUZyYW1lczogMCxcbiAgICAgICAgICAgIGlzQW5pbWF0ZWRTZWxlY3RTdGF0ZTogZmFsc2UsXG4gICAgICAgICAgICBudW1GcmFtZXNJbnB1dFZhbDogJzAnLFxuICAgICAgICAgICAgc2hhZGVyQ29tcGlsZUVycm9yOiAnJ1xuICAgICAgICB9O1xuICAgICAgICBfdGhpczcudXNlQ2FudmFzID0gX3RoaXM3LnVzZUNhbnZhcy5iaW5kKF90aGlzNyk7XG4gICAgICAgIF90aGlzNy5zZXREcmF3RnVuYyA9IF90aGlzNy5zZXREcmF3RnVuYy5iaW5kKF90aGlzNyk7XG4gICAgICAgIF90aGlzNy5vbkRyYXdGdW5jU2VsZWN0ID0gX3RoaXM3Lm9uRHJhd0Z1bmNTZWxlY3QuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcucmVkcmF3ID0gX3RoaXM3LnJlZHJhdy5iaW5kKF90aGlzNyk7XG4gICAgICAgIF90aGlzNy5jaGFuZ2Vab29tQW5kUmVkcmF3ID0gX3RoaXM3LmNoYW5nZVpvb21BbmRSZWRyYXcuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcgPSBfdGhpczcuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcudHJhbnNsYXRlQW5kUmVkcmF3ID0gX3RoaXM3LnRyYW5zbGF0ZUFuZFJlZHJhdy5iaW5kKF90aGlzNyk7XG4gICAgICAgIF90aGlzNy5oYW5kbGVQbG90Q2xpY2sgPSBfdGhpczcuaGFuZGxlUGxvdENsaWNrLmJpbmQoX3RoaXM3KTtcbiAgICAgICAgcmV0dXJuIF90aGlzNztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29udG91cmVyQXBwLCBbe1xuICAgICAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMub25EcmF3RnVuY1NlbGVjdChEcmF3RnVuY3Rpb25TZWxlY3Rvci5ERUZBVUxUX0ZVTkMpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBDQU5WQVNfRElNUyA9IG5ldyBEaW1lbnNpb25zKDY0MCwgNDgwKTtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh7IGNsYXNzTmFtZTogJ2NvbnRhaW5lcicgfSwgJ2NsYXNzTmFtZScsICdjb2wtbGctMTInKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwYWdlLWhlYWRlcicgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0Z1biB3aXRoIENvbnRvdXJzJ1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd3ZWxsJyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0RyYWcnXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyB0byBtb3ZlIHRoZSBncmFwaCwgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Njcm9sbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIHpvb20sIGFuZCAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ3RybCArIHNjcm9sbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIGNoYW5nZSB0aGUgY29udG91ciBkZW5zaXR5LidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnTW9kaWZ5ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnIycsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgubnVtRnJhbWVzSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRnJhbWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIChudW1iZXIgb2YgZnJhbWVzKSwgdGhlbiBjbGljayAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUGxvdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIGNoYW5nZSB0aGUgYW5pbWF0aW9uIHNwZWVkLidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVXNlIHRoZSAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2xpZGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgdG8gZXhwbG9yZSB0aGUgYW5pbWF0aW9uIGluIG1vcmUgZGV0YWlsLidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnUGxvdCB5b3VyIG93biBmdW5jdGlvbnMgd2l0aCB0aGUgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RleHQgZWRpdG9ycydcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIGJlbG93LidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnSnVzdCBlbmpveSB0aGUgcHJldHR5IGFuaW1hdGlvbnMsIG9yICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnaHR0cHM6Ly9naXRodWIuY29tL2tyYXd0aGVrcm93L2NvbnRvdXJlcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsaWNrIGhlcmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgdG8gbGVhcm4gbW9yZS4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm90ZTogVGhpcyBhcHAgdXNlcyBXZWJHTCwgc28gaXQgbmVlZHMgYSBzdWZmaWNpZW50bHkgbW9kZXJuIGJyb3dzZXIgYW5kIEdQVSB0byB3b3JrLidcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0zJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEcmF3RnVuY3Rpb25TZWxlY3RvciwgeyBvblNlbGVjdDogdGhpcy5vbkRyYXdGdW5jU2VsZWN0IH0pXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTknIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC14cy04JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICd0b29sYmFyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2J0bi1ncm91cCcsIHJvbGU6ICdncm91cCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmNoYW5nZVpvb21BbmRSZWRyYXcoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tem9vbS1pbicgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguY2hhbmdlWm9vbUFuZFJlZHJhdygtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tem9vbS1vdXQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzJyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdygxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1taW51cycgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoMSwgMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LWxlZnQnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDAsIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy11cCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoMCwgLTEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1kb3duJyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC50cmFuc2xhdGVBbmRSZWRyYXcobmV3IFZlY3RvcigtMSwgMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LXJpZ2h0JyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc3RhdGUuaXNBbmltYXRlZCB8fCAhdGhpcy5zdGF0ZS5pc0FuaW1hdGluZyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2J0bicsICdidG4tZGVmYXVsdCcsIHsgZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWQgfSksIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczguc3RhdGUuaXNBbmltYXRlZCAmJiAhX3RoaXM4LnN0YXRlLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5hbmltYXRpb25NYW5hZ2VyLnN0YXJ0KF90aGlzOC5zdGF0ZS5jdXJyZW50RnJhbWUsIGZ1bmN0aW9uIChjdXJyZW50RnJhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZyYW1lOiBjdXJyZW50RnJhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1wbGF5JyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdidG4nLCAnYnRuLWRlZmF1bHQnLCB7IGRpc2FibGVkOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkIH0pLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LnN0YXRlLmlzQW5pbWF0ZWQgJiYgX3RoaXM4LnN0YXRlLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5hbmltYXRpb25NYW5hZ2VyLnN0b3AoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcGF1c2UnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtNCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkID8gUmVhY3QuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5cGU6ICdyYW5nZScsIG1pbjogJzAnLCBtYXg6ICh0aGlzLnN0YXRlLm51bUZyYW1lcyAtIDEpLnRvU3RyaW5nKCksIHZhbHVlOiB0aGlzLnN0YXRlLmN1cnJlbnRGcmFtZSwgc3R5bGU6IHsgbWFyZ2luVG9wOiAnNXB4JyB9LCBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzOC5zdGF0ZS5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguYW5pbWF0aW9uTWFuYWdlci5zdG9wKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3VycyhfdGhpczguc3RhdGUuY3VycmVudEZyYW1lIC8gX3RoaXM4LnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3VycyhfdGhpczguc3RhdGUuY3VycmVudEZyYW1lIC8gX3RoaXM4LnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiB7IG1hcmdpblRvcDogJzEwcHgnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENhbnZhc0Rpc3BsYXlQYW5lLCB7IGRpbXM6IENBTlZBU19ESU1TLCBvbk1vdW50Q2FsbGJhY2s6IGZ1bmN0aW9uIG9uTW91bnRDYWxsYmFjayhjYW52YXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC51c2VDYW52YXMoY2FudmFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgb25EaXNtb3VudENhbGxiYWNrOiBmdW5jdGlvbiBvbkRpc21vdW50Q2FsbGJhY2soKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvcHMubWFuYWdlci5kZXN0cm95Q29udGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMTInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoMScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUGxvdCBGdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC14cy05JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2Zvcm0taW5saW5lJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2J0bi1ncm91cCcsIHN0eWxlOiB7IG1hcmdpblJpZ2h0OiAnMTBweCcgfSwgcm9sZTogJ2dyb3VwJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2J0bicsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gJ2J0bi1kZWZhdWx0JyA6ICdidG4tcHJpbWFyeScsIHsgJ2FjdGl2ZSc6ICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSB9KSwgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHsgaXNBbmltYXRlZFNlbGVjdFN0YXRlOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1N0YXRpYydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2J0bicsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gJ2J0bi1wcmltYXJ5JyA6ICdidG4tZGVmYXVsdCcsIHsgJ2FjdGl2ZSc6IHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlIH0pLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoeyBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEeW5hbWljJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdmb3JtLWdyb3VwJywgeyAnaGFzLWVycm9yJzogdGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpIH0pLCBzdHlsZTogeyBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJywgbWFyZ2luQm90dG9tOiAwLCB2ZXJ0aWNhbEFsaWduOiAnbWlkZGxlJyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaW5wdXQtZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2lucHV0LWdyb3VwLWFkZG9uJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZyYW1lcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJywgdmFsdWU6IHRoaXMuc3RhdGUubnVtRnJhbWVzSW5wdXRWYWwsIGRpc2FibGVkOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUsIHJlZjogZnVuY3Rpb24gcmVmKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4Lm51bUZyYW1lc0lucHV0ID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7IG51bUZyYW1lc0lucHV0VmFsOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHN0eWxlOiB7IHdpZHRoOiAnNjBweCcgfSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaGVscC1ibG9jaycsIHN0eWxlOiB7IGRpc3BsYXk6IHRoaXMuaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKSA/ICdpbmxpbmUtYmxvY2snIDogJ25vbmUnLCBtYXJnaW5MZWZ0OiAnMTBweCcgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTXVzdCBiZSBhbiBpbnRlZ2VyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXhzLTMnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tc3VjY2VzcyBidG4tYmxvY2sgcHVsbC1yaWdodCcsIHN0eWxlOiB7IHdpZHRoOiAnODBweCcgfSwgZGlzYWJsZWQ6IHRoaXMuaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKSwgcmVmOiBmdW5jdGlvbiByZWYoYnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5wbG90QnV0dG9uID0gYnV0dG9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuaGFuZGxlUGxvdENsaWNrIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUGxvdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNoYWRlckNvbXBpbGVFcnJvciA9PSAnJyA/IG51bGwgOiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaGFzLWVycm9yJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2hlbHAtYmxvY2snIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1lvdXIgY29kZSBmYWlsZWQgdG8gY29tcGlsZSB3aXRoIHRoZSBmb2xsb3dpbmcgZXJyb3I6J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yLnRyaW0oKS5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uIChsaW5lLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsga2V5OiBpbmRleCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yLmluZGV4T2YoJ3dyb25nIG9wZXJhbmQgdHlwZXMnKSAhPSAtMSA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm90ZSB0aGF0IEdMU0wgRVMgZG9lcyBub3QgaW1wbGljaXRseSBjYXN0IGludHMgdG8gZmxvYXRzLiBXcml0ZSBudW1iZXJzIGxpa2UgXCIyM1wiIGFzIFwiMjMuMFwiLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yLmluZGV4T2YoJ2dsX0ZyYWdEYXRhJykgIT0gLTEgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0RpZCB5b3UgZm9yZ2V0IGEgc2VtaWNvbG9uIG9uIHRoZSBsYXN0IGxpbmU/J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVmlldyB0aGUgY29uc29sZSB0byBzZWUgdGhlIGZ1bGwgZ2VuZXJhdGVkIFdlYkdMIHNoYWRlciBjb2RlLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHsgbWFyZ2luVG9wOiAnMTBweCcgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQWNlRWRpdG9yLCB7IGhlaWdodDogJzIwMCcsIGtleTogJ2RyYXdGdW5jRWRpdG9yJywgcmVmOiBmdW5jdGlvbiByZWYoZWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguZHJhd0Z1bmNFZGl0b3IgPSBlZGl0b3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncm93JyB9LFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS0xMicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2gxJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdMaWJyYXJ5IEZ1bmN0aW9ucydcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6IHsgbWFyZ2luQm90dG9tOiAnMTBweCcgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQWNlRWRpdG9yLCB7IGhlaWdodDogJzIwMCcsIGtleTogJ2luY2x1ZGVTcmNFZGl0b3InLCByZWY6IGZ1bmN0aW9uIHJlZihlZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5pbmNsdWRlU3JjRWRpdG9yID0gZWRpdG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1c2VDYW52YXMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXNlQ2FudmFzKGNhbnZhcykge1xuICAgICAgICAgICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBkcmFnTWFuYWdlciA9IG5ldyBEcmFnTWFuYWdlcihjYW52YXMsIGZ1bmN0aW9uIChkcmFnVmVjKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM5LnByb3BzLm1hbmFnZXIudmlld3BvcnQudHJhbnNsYXRlKGRyYWdWZWMpO1xuICAgICAgICAgICAgICAgIF90aGlzOS5yZWRyYXcoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgIGlmIChldi5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzOS5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdyhnZXRTY3JvbGxEaXIoZXYpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczkucHJvcHMubWFuYWdlci5jaGFuZ2Vab29tKC1nZXRTY3JvbGxEaXIoZXYpLCBnZXRDYW52YXNNb3VzZVBvcyhjYW52YXMsIGV2KSk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzOS5yZWRyYXcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIudXNlQ2FudmFzKGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2lzTnVtRnJhbWVzSW5wdXRJbnZhbGlkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlICYmIHRoaXMuc3RhdGUubnVtRnJhbWVzSW5wdXRWYWwuc3BsaXQoJycpLnNvbWUoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYy5jaGFyQ29kZUF0KCkgPCAnMCcuY2hhckNvZGVBdCgpIHx8IGMuY2hhckNvZGVBdCgpID4gJzknLmNoYXJDb2RlQXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVQbG90Q2xpY2snLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlUGxvdENsaWNrKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RHJhd0Z1bmModGhpcy5kcmF3RnVuY0VkaXRvci5nZXRWYWx1ZSgpLCB0aGlzLmluY2x1ZGVTcmNFZGl0b3IuZ2V0VmFsdWUoKSwgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gcGFyc2VJbnQodGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbCkgOiAwKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVkcmF3JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlZHJhdygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmlzQW5pbWF0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKHRoaXMuc3RhdGUuY3VycmVudEZyYW1lIC8gdGhpcy5zdGF0ZS5udW1GcmFtZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NoYW5nZVpvb21BbmRSZWRyYXcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlWm9vbUFuZFJlZHJhdyhjaGFuZ2VBbW91bnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5jaGFuZ2Vab29tKGNoYW5nZUFtb3VudCk7XG4gICAgICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdyhjaGFuZ2VBbW91bnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5jaGFuZ2VDb250b3VyU3BhY2luZyhjaGFuZ2VBbW91bnQpO1xuICAgICAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndHJhbnNsYXRlQW5kUmVkcmF3JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyYW5zbGF0ZUFuZFJlZHJhdyh0cmFuc2xhdGVBbW91bnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci50cmFuc2xhdGUodHJhbnNsYXRlQW1vdW50Lm11bHRpcGx5KDUwLjApKTtcbiAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldERyYXdGdW5jJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERyYXdGdW5jKGRyYXdGdW5jLCBpbmNsdWRlU3JjKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBpc0FuaW1hdGVkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICB2YXIgbnVtRnJhbWVzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8gMCA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlRHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMsIGlzQW5pbWF0ZWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogZXJyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBpc0FuaW1hdGVkOiBpc0FuaW1hdGVkLFxuICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBpc0FuaW1hdGVkLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogMCxcbiAgICAgICAgICAgICAgICBudW1GcmFtZXM6IG51bUZyYW1lcyxcbiAgICAgICAgICAgICAgICBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IGlzQW5pbWF0ZWQsXG4gICAgICAgICAgICAgICAgbnVtRnJhbWVzSW5wdXRWYWw6IG51bUZyYW1lcy50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogJydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLm51bUZyYW1lcyA9IG51bUZyYW1lcztcbiAgICAgICAgICAgIGlmIChpc0FuaW1hdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0b3AoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczEwLmFuaW1hdGlvbk1hbmFnZXIuc3RhcnQoMCwgZnVuY3Rpb24gKGN1cnJlbnRGcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZyYW1lOiBjdXJyZW50RnJhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3VycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdvbkRyYXdGdW5jU2VsZWN0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJhd0Z1bmNTZWxlY3QoZnVuYykge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRnVuYyA9IERlbW9GdW5jdGlvbnMuZnVuY3Rpb25zW2Z1bmNdO1xuICAgICAgICAgICAgdGhpcy5kcmF3RnVuY0VkaXRvci5zZXRWYWx1ZShzZWxlY3RlZEZ1bmMuZHJhd0Z1bmMudHJpbSgpKTtcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVNyY0VkaXRvci5zZXRWYWx1ZShzZWxlY3RlZEZ1bmMuaW5jbHVkZVNyYy50cmltKCkpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRnVuYy5pc0FuaW1hdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXREcmF3RnVuYyhzZWxlY3RlZEZ1bmMuZHJhd0Z1bmMsIHNlbGVjdGVkRnVuYy5pbmNsdWRlU3JjLCBzZWxlY3RlZEZ1bmMuaXNBbmltYXRlZCwgc2VsZWN0ZWRGdW5jLm51bUZyYW1lcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RHJhd0Z1bmMoc2VsZWN0ZWRGdW5jLmRyYXdGdW5jLCBzZWxlY3RlZEZ1bmMuaW5jbHVkZVNyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udG91cmVyQXBwO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG47XG5cbmZ1bmN0aW9uIGluaXRSZW5kZXIobWFuYWdlcikge1xuICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5kZXhDb250YWluZXInKTtcbiAgICBSZWFjdERPTS5yZW5kZXIoUmVhY3QuY3JlYXRlRWxlbWVudChDb250b3VyZXJBcHAsIHsgbWFuYWdlcjogbWFuYWdlciB9KSwgY29udGFpbmVyKTtcbn0iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGdldENhbnZhc01vdXNlUG9zKGNhbnZhcywgZXYpe1xuICAgIGNvbnN0IGJvdW5kaW5nUmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcihcbiAgICAgICAgKGV2LmNsaWVudFggLSBib3VuZGluZ1JlY3QubGVmdCkgKiAoY2FudmFzLndpZHRoIC8gYm91bmRpbmdSZWN0LndpZHRoKSxcbiAgICAgICAgKGV2LmNsaWVudFkgLSBib3VuZGluZ1JlY3QudG9wKSAqIChjYW52YXMuaGVpZ2h0IC8gYm91bmRpbmdSZWN0LmhlaWdodClcbiAgICApO1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGxEaXIoZXYpe1xuICAgIGlmKGV2LmRlbHRhWSA9PSAwKSByZXR1cm4gMDtcbiAgICBlbHNlIHJldHVybiBldi5kZWx0YVkgLyBNYXRoLmFicyhldi5kZWx0YVkpO1xufVxuXG5jbGFzcyBNb3VzZURvd25UcmFja2Vye1xuICAgIGNvbnN0cnVjdG9yKGNhbnZhcywgaW5pdFRyYWNrQ2FsbGJhY2ssIHRyYWNrQ2FsbGJhY2ssIGlzVHJhY2tpbmdFbmFibGVkID0gZXYgPT4gdHJ1ZSl7XG4gICAgICAgIHRoaXMuaW5pdFRyYWNrQ2FsbGJhY2sgPSBpbml0VHJhY2tDYWxsYmFjaztcbiAgICAgICAgdGhpcy50cmFja0NhbGxiYWNrID0gdHJhY2tDYWxsYmFjaztcbiAgICAgICAgdGhpcy5pc1RyYWNraW5nRW5hYmxlZCA9IGlzVHJhY2tpbmdFbmFibGVkO1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcblxuICAgICAgICB0aGlzLm9uTW91c2VEb3duID0gZXYgPT4ge1xuICAgICAgICAgICAgaWYodGhpcy5pc1RyYWNraW5nRW5hYmxlZChldikpe1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFRyYWNrQ2FsbGJhY2soZXYpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uTW91c2VVcCA9IGV2ID0+IHtcbiAgICAgICAgICAgIHRoaXMudHJhY2tDYWxsYmFjayhldik7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uTW91c2VNb3ZlID0gZXYgPT4ge1xuICAgICAgICAgICAgdGhpcy50cmFja0NhbGxiYWNrKGV2KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICB9XG59O1xuXG5jbGFzcyBEcmFnTWFuYWdlciBleHRlbmRzIE1vdXNlRG93blRyYWNrZXJ7XG4gICAgY29uc3RydWN0b3IoY2FudmFzLCBkcmFnQ2FsbGJhY2ssIGlzRHJhZ0VuYWJsZWQgPSBldiA9PiB0cnVlKXtcbiAgICAgICAgc3VwZXIoY2FudmFzLFxuICAgICAgICAgICAgZXYgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldk1vdXNlUG9zID0gZ2V0Q2FudmFzTW91c2VQb3ModGhpcy5jYW52YXMsIGV2KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBldiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW91c2VQb3MgPSBnZXRDYW52YXNNb3VzZVBvcyh0aGlzLmNhbnZhcywgZXYpO1xuICAgICAgICAgICAgICAgIGRyYWdDYWxsYmFjayhtb3VzZVBvcy5zdWJ0cmFjdCh0aGlzLnByZXZNb3VzZVBvcykpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldk1vdXNlUG9zID0gbW91c2VQb3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNEcmFnRW5hYmxlZCk7XG4gICAgICAgIHRoaXMucHJldk1vdXNlUG9zID0gbmV3IFZlY3RvcigwLCAwKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBzZXRDYW52YXNTbW9vdGhpbmcoY3R4LCBlbmFibGUpe1xuICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBlbmFibGU7XG4gICAgY3R4Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbiAgICBjdHgud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xuICAgIGN0eC5tbkltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGNvbnRhaW5lciwgYm91bmRpbmdSZWN0KXtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSBib3VuZGluZ1JlY3Qud2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGJvdW5kaW5nUmVjdC5oZWlnaHQ7XG4gICAgY2FudmFzLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBjYW52YXMuc3R5bGUubGVmdCA9IGJvdW5kaW5nUmVjdC5sZWZ0LnRvU3RyaW5nKCkgKyAncHgnO1xuICAgIGNhbnZhcy5zdHlsZS50b3AgPSBib3VuZGluZ1JlY3QudG9wLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgIHJldHVybiBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FudmFzRGltcyhjdHgpe1xuICAgIHJldHVybiBuZXcgRGltZW5zaW9ucyhjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIoY3R4LCBzcmMsIHR5cGUpe1xuICAgIGNvbnN0IHNoYWRlciA9IGN0eC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgY3R4LnNoYWRlclNvdXJjZShzaGFkZXIsIHNyYyk7XG4gICAgY3R4LmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgICBpZighY3R4LmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGN0eC5DT01QSUxFX1NUQVRVUykpe1xuICAgICAgICBjb25zb2xlLmxvZyhzcmMpO1xuICAgICAgICB0aHJvdyAnU2hhZGVyIGNvbXBpbGUgZXJyb3I6ICcgKyBjdHguZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpO1xuICAgIH1cbiAgICByZXR1cm4gc2hhZGVyO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9ncmFtKGN0eCwgdmVydFNyYywgZnJhZ1NyYyl7XG4gICAgY29uc3QgcHJvZ3JhbSA9IGN0eC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgY3R4LmF0dGFjaFNoYWRlcihwcm9ncmFtLCBjb21waWxlU2hhZGVyKGN0eCwgdmVydFNyYywgY3R4LlZFUlRFWF9TSEFERVIpKTtcbiAgICBjdHguYXR0YWNoU2hhZGVyKHByb2dyYW0sIGNvbXBpbGVTaGFkZXIoY3R4LCBmcmFnU3JjLCBjdHguRlJBR01FTlRfU0hBREVSKSk7XG4gICAgY3R4LmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuICAgIHJldHVybiBwcm9ncmFtO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wdXRlVGV4dHVyZShjdHgsIGRpbXMsIHRleFR5cGUgPSBjdHguRkxPQVQsIGNvbnRlbnRzID0gbnVsbCl7XG4gICAgY29uc3QgdGV4ID0gY3R4LmNyZWF0ZVRleHR1cmUoKTtcbiAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleCk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1MsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9ULCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgY3R4LnRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGN0eC5SR0JBLCBkaW1zLndpZHRoLCBkaW1zLmhlaWdodCwgMCwgY3R4LlJHQkEsIHRleFR5cGUsIGNvbnRlbnRzKTtcbiAgICByZXR1cm4gdGV4O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGQk8oY3R4LCBleHREQiwgdGV4dHVyZXMpe1xuICAgIGNvbnN0IGZibyA9IGN0eC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmYm8pO1xuICAgIGlmKHRleHR1cmVzLmxlbmd0aCA+IDEpe1xuICAgICAgICBleHREQi5kcmF3QnVmZmVyc1dFQkdMKGNvbXB1dGUxREFycmF5KHRleHR1cmVzLmxlbmd0aCxcbiAgICAgICAgICAgIGkgPT4gZXh0REJbJ0NPTE9SX0FUVEFDSE1FTlQnICsgaS50b1N0cmluZygpICsgJ19XRUJHTCddXG4gICAgICAgICkpO1xuICAgICAgICB0ZXh0dXJlcy5mb3JFYWNoKCh0ZXgsIGkpID0+IHtcbiAgICAgICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChjdHguRlJBTUVCVUZGRVIsIGV4dERCWydDT0xPUl9BVFRBQ0hNRU5UJyArIGkudG9TdHJpbmcoKSArICdfV0VCR0wnXSwgY3R4LlRFWFRVUkVfMkQsIHRleCwgMCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgICBjdHguZnJhbWVidWZmZXJUZXh0dXJlMkQoY3R4LkZSQU1FQlVGRkVSLCBjdHguQ09MT1JfQVRUQUNITUVOVDAsIGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlc1swXSwgMCk7XG4gICAgfVxuICAgIGlmKGN0eC5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKGN0eC5GUkFNRUJVRkZFUikgIT0gY3R4LkZSQU1FQlVGRkVSX0NPTVBMRVRFKXtcbiAgICAgICAgdGhyb3cgJ0dMX0ZSQU1FQlVGRkVSX0NPTVBMRVRFIGZhaWxlZC4nO1xuICAgIH1cbiAgICByZXR1cm4gZmJvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcnJheUJ1ZmZlcihjdHgsIGJ1ZlR5cGUsIGNvbnRlbnRzKXtcbiAgICBjb25zdCBidWYgPSBjdHguY3JlYXRlQnVmZmVyKCk7XG4gICAgY3R4LmJpbmRCdWZmZXIoYnVmVHlwZSwgYnVmKTtcbiAgICBjdHguYnVmZmVyRGF0YShidWZUeXBlLCBjb250ZW50cywgY3R4LlNUQVRJQ19EUkFXKTtcbiAgICByZXR1cm4gYnVmO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclZlcnRleEF0dHJpYihjdHgsIHByb2dyYW0sIGF0dHJpYk5hbWUsIGl0ZW1TaXplLCBidWYpe1xuICAgIGNvbnN0IGF0dHJpYiA9IGN0eC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBhdHRyaWJOYW1lKTtcbiAgICBjdHguZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYXR0cmliKTtcbiAgICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCBidWYpO1xuICAgIGN0eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGF0dHJpYiwgaXRlbVNpemUsIGN0eC5GTE9BVCwgZmFsc2UsIDAsIDApO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclRleHR1cmVzKGN0eCwgcHJvZ3JhbSwgdGV4TmFtZXMpe1xuICAgIHRleE5hbWVzLmZvckVhY2goKHRleE5hbWUsIGkpID0+IHtcbiAgICAgICAgY29uc3QgdGV4TG9jID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0ZXhOYW1lKTtcbiAgICAgICAgY3R4LnVuaWZvcm0xaSh0ZXhMb2MsIGkpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclVuaWZvcm1zKGN0eCwgcHJvZ3JhbSwgdW5pZm9ybXMsIHZhbHMpe1xuICAgIHVuaWZvcm1zLmZvckVhY2godW5pZm9ybSA9PiB7XG4gICAgICAgIGNvbnN0IHVuaWZvcm1Mb2MgPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHVuaWZvcm0ubmFtZSk7XG4gICAgICAgIGlmKHVuaWZvcm0udHlwZSA9PSAnaW50Jyl7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFpKHVuaWZvcm1Mb2MsIHZhbHNbdW5pZm9ybS5uYW1lXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih1bmlmb3JtLnR5cGUgPT0gJ2Zsb2F0Jyl7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFmKHVuaWZvcm1Mb2MsIHZhbHNbdW5pZm9ybS5uYW1lXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZigvXml2ZWNbMi00XSQvZy50ZXN0KHVuaWZvcm0udHlwZSkpe1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHVuaWZvcm0udHlwZVs0XS50b1N0cmluZygpICsgJ2l2J10odW5pZm9ybUxvYywgbmV3IEludDMyQXJyYXkodmFsc1t1bmlmb3JtLm5hbWVdKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZigvXnZlY1syLTRdJC9nLnRlc3QodW5pZm9ybS50eXBlKSl7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgdW5pZm9ybS50eXBlWzNdLnRvU3RyaW5nKCkgKyAnZnYnXSh1bmlmb3JtTG9jLCBuZXcgRmxvYXQzMkFycmF5KHZhbHNbdW5pZm9ybS5uYW1lXSkpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGJpbmRUZXh0dXJlcyhjdHgsIHRleHR1cmVzKXtcbiAgICB0ZXh0dXJlcy5mb3JFYWNoKCh0ZXh0dXJlLCBpKSA9PiB7XG4gICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eFsnVEVYVFVSRScgKyBpLnRvU3RyaW5nKCldKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcbiAgICB9KTtcbn1cblxuY29uc3QgRlVMTFNDUkVFTl9RVUFEX1BPU19BUlJBWSA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgIC0xLjAsIC0xLjAsXG4gICAgMS4wLCAtMS4wLFxuICAgIDEuMCwgMS4wLFxuICAgIC0xLjAsIDEuMCxcbl0pO1xuXG5jb25zdCBGVUxMU0NSRUVOX1FVQURfSU5ERVhfQVJSQVkgPSBuZXcgVWludDE2QXJyYXkoW1xuICAgIDAsIDEsIDIsXG4gICAgMCwgMiwgM1xuXSk7XG5cbmNvbnN0IEZVTExTQ1JFRU5fUVVBRF9OVU1fVkVSVElDRVMgPSA2O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBSRUQgPSBuZXcgQ29sb3IoMjU1LCAwLCAwKTtcbmNvbnN0IEdSRUVOID0gbmV3IENvbG9yKDAsIDI1NSwgMCk7XG5jb25zdCBCTFVFID0gbmV3IENvbG9yKDAsIDAsIDI1NSk7XG5jb25zdCBXSElURSA9IG5ldyBDb2xvcigyNTUsIDI1NSwgMjU1KTtcblxuY2xhc3MgQ29udG91cmVyTWFuYWdlcntcbiAgICBjb25zdHJ1Y3RvcihkcmF3RnVuYyl7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgU2NhbGFibGVWaWV3cG9ydE1hbmFnZXIoXG4gICAgICAgICAgICBuZXcgVmVjdG9yKDAsIDApLFxuICAgICAgICAgICAgMC4wMVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnpvb21TZW5zaXRpdml0eSA9IDAuMztcbiAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyA9IDEuMDtcbiAgICB9XG4gICAgY2hhbmdlRHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMsIGlzQW5pbWF0ZWQgPSBmYWxzZSl7XG4gICAgICAgIGNvbnN0IGZpZWxkRnVuYyA9XG5gdmVjMiBjUG9zID0gKHZlYzIodGhyZWFkSWQpICogdVNjYWxlKSArIHVQb3M7XG52ZWMyIHJlcztcbmAgK1xuICAgICAgICBkcmF3RnVuYy50cmltKCkgKyAnXFxuJyArXG5gZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KFxuICAgIHJlcyxcbiAgICAwLjAsIDAuMFxuKTtcbmA7XG4gICAgICAgIHRoaXMuZmllbGRLZXJuZWwgPSB0aGlzLmdwZ3B1TWFuYWdlci5jcmVhdGVLZXJuZWwoXG4gICAgICAgICAgICBmaWVsZEZ1bmMsIFtdLCB0aGlzLmRpbXMsIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1U2NhbGUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2ZWMyJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3VQb3MnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXS5jb25jYXQoaXNBbmltYXRlZCA/IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0aW1lJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0gOiBbXSksIDEsIGluY2x1ZGVTcmMudHJpbSgpICsgJ1xcblxcbidcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0LnNjYWxlID0gMTAuMCAvIHRoaXMuZGltcy53aWR0aDtcbiAgICAgICAgdGhpcy52aWV3cG9ydC5wb3MgPSBuZXcgVmVjdG9yKC10aGlzLmRpbXMud2lkdGgsIC10aGlzLmRpbXMuaGVpZ2h0KS5kaXZpZGUoMi4wKS5tdWx0aXBseSh0aGlzLnZpZXdwb3J0LnNjYWxlKTtcbiAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyA9IDEuMDtcblxuICAgICAgICB0aGlzLmlzQW5pbWF0ZWQgPSBpc0FuaW1hdGVkO1xuICAgIH1cbiAgICB1c2VDYW52YXMoY2FudmFzKXtcbiAgICAgICAgdGhpcy5jdHggPSBHUEdQVU1hbmFnZXIuZ2V0Q2FudmFzQ29udGV4dChjYW52YXMpO1xuICAgICAgICB0aGlzLmdwZ3B1TWFuYWdlciA9IG5ldyBHUEdQVU1hbmFnZXIodGhpcy5jdHgpO1xuICAgICAgICB0aGlzLmRpbXMgPSBnZXRDYW52YXNEaW1zKHRoaXMuY3R4KTtcblxuICAgICAgICB0aGlzLnBsb3RLZXJuZWwgPSB0aGlzLmdwZ3B1TWFuYWdlci5jcmVhdGVHcmFwaGljYWxLZXJuZWwoXG4gICAgICAgICAgICBDb250b3VyZXJNYW5hZ2VyLnBsb3RGdW5jLCBbJ3VGaWVsZCddLCB0aGlzLmRpbXMsIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd1Q29udG91clNwYWNpbmcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSwgQ29udG91cmVyTWFuYWdlci5GSUVMRF9DSEVDS19JTkNMVURFXG4gICAgICAgICk7XG4gICAgfVxuICAgIGRlc3Ryb3lDb250ZXh0KCl7XG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IDE7XG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQgPSAxO1xuICAgIH1cbiAgICBjaGFuZ2Vab29tKGNoYW5nZUFtb3VudCwgem9vbVBvaW50ID0gbmV3IFZlY3Rvcih0aGlzLmRpbXMud2lkdGggLyAyLCB0aGlzLmRpbXMuaGVpZ2h0IC8gMikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LnNjYWxlQXRQb2ludChcbiAgICAgICAgICAgIC1jaGFuZ2VBbW91bnQgKiB0aGlzLnpvb21TZW5zaXRpdml0eSxcbiAgICAgICAgICAgIHpvb21Qb2ludFxuICAgICAgICApO1xuICAgIH1cbiAgICBjaGFuZ2VDb250b3VyU3BhY2luZyhjaGFuZ2VBbW91bnQpe1xuICAgICAgICB0aGlzLmNvbnRvdXJTcGFjaW5nICo9IE1hdGguZXhwKGNoYW5nZUFtb3VudCAqIHRoaXMuem9vbVNlbnNpdGl2aXR5KTtcbiAgICB9XG4gICAgdHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudCl7XG4gICAgICAgIHRoaXMudmlld3BvcnQudHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudCk7XG4gICAgfVxuICAgIGRyYXdDb250b3Vycyh0aW1lID0gMCl7XG4gICAgICAgIGNvbnN0IHVuaWZvcm1Bc3NpZ25tZW50cyA9IHtcbiAgICAgICAgICAgIHVTY2FsZTogdGhpcy52aWV3cG9ydC5zY2FsZSxcbiAgICAgICAgICAgIHVQb3M6IHRoaXMudmlld3BvcnQucG9zLnRvQXJyYXkoKVxuICAgICAgICB9O1xuICAgICAgICBpZih0aGlzLmlzQW5pbWF0ZWQpe1xuICAgICAgICAgICAgdW5pZm9ybUFzc2lnbm1lbnRzWyd0aW1lJ10gPSB0aW1lO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpZWxkUmVzdWx0ID0gdGhpcy5maWVsZEtlcm5lbC5ydW4oW10sIHRoaXMuZGltcywgdW5pZm9ybUFzc2lnbm1lbnRzKTtcbiAgICAgICAgdGhpcy5wbG90S2VybmVsLnJ1bihbZmllbGRSZXN1bHQudGV4dHVyZXNbMF1dLCB0aGlzLmRpbXMsIHtcbiAgICAgICAgICAgIHVDb250b3VyU3BhY2luZzogdGhpcy5jb250b3VyU3BhY2luZ1xuICAgICAgICB9KTtcbiAgICAgICAgZmllbGRSZXN1bHQuZGlzcG9zZSgpO1xuICAgIH1cbn07XG5cbkNvbnRvdXJlck1hbmFnZXIucGxvdEZ1bmMgPVxuYGl2ZWMyIGxpbmVJbmRleCA9IGl2ZWMyKGZsb29yKHRleHR1cmUyRCh1RmllbGQsIHZDb29yZCkueHkgLyB1Q29udG91clNwYWNpbmcpKTtcbnZlYzIgY21wRmllbGQgPSB2ZWMyKGxpbmVJbmRleCkgKiB1Q29udG91clNwYWNpbmc7XG5pdmVjMiBkcmF3RGF0YSA9IGl2ZWMyKGdyZWF0ZXJUaGFuRXF1YWwoXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoMCwgMSksIGNtcEZpZWxkKSArXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoMSwgMCksIGNtcEZpZWxkKSArXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoMCwgLTEpLCBjbXBGaWVsZCkgK1xuICAgIGZpZWxkQ2hlY2sodGhyZWFkSWQsIGl2ZWMyKC0xLCAwKSwgY21wRmllbGQpLFxuICAgIGl2ZWMyKDEpKSk7XG5pZihhbGwoZXF1YWwoZHJhd0RhdGEsIGl2ZWMyKDApKSkpe1xuICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNCgxLjAsIDEuMCwgMS4wLCAxLjApO1xufVxuZWxzZXtcbiAgICB2ZWMyIGlzQXhpcyA9IHZlYzIoZXF1YWwobGluZUluZGV4LCBpdmVjMigwKSkpO1xuICAgIHZlYzIgbGluZUNvbG9yID0gdmVjMihkcmF3RGF0YSkgKiAoMS4wIC0gMC41ICogaXNBeGlzKTtcbiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQobGluZUNvbG9yLngsIDAuNSAqIGRvdCh2ZWMyKGRyYXdEYXRhKSwgaXNBeGlzKSwgbGluZUNvbG9yLnksIDEuMCk7XG59XG5gO1xuXG5Db250b3VyZXJNYW5hZ2VyLkZJRUxEX0NIRUNLX0lOQ0xVREUgPVxuYGl2ZWMyIGZpZWxkQ2hlY2soaXZlYzIgY1BvcywgaXZlYzIgZGlyLCB2ZWMyIGNtcEZpZWxkKXtcbiAgICBpdmVjMiBvUG9zID0gY1BvcyArIGRpcjtcbiAgICBpZihhbGwoZ3JlYXRlclRoYW5FcXVhbChvUG9zLCBpdmVjMigwKSkpICYmIGFsbChsZXNzVGhhbihvUG9zLCB1RGltcykpKXtcbiAgICAgICAgcmV0dXJuIGl2ZWMyKGxlc3NUaGFuKGFyckdldCh1RmllbGQsIG9Qb3MpLnh5LCBjbXBGaWVsZCkpO1xuICAgIH1cbiAgICBlbHNlIHJldHVybiBpdmVjMigwKTtcbn1cblxuYDtcblxuY2xhc3MgQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlcntcbiAgICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBudW1GcmFtZXMgPSAxMDAwKXtcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm51bUZyYW1lcyA9IG51bUZyYW1lcztcbiAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAwO1xuICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25Mb29wID0gdGhpcy5hbmltYXRpb25Mb29wLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIHN0YXJ0KHN0YXJ0RnJhbWUgPSAwLCBvbkRyYXcgPSBudWxsKXtcbiAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSBzdGFydEZyYW1lO1xuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vbkRyYXcgPSBvbkRyYXc7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25Mb29wKTtcbiAgICB9XG4gICAgYW5pbWF0aW9uTG9vcCh0aW1lc3RhbXApe1xuICAgICAgICBpZih0aGlzLmlzQW5pbWF0aW5nKXtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5jdXJyZW50RnJhbWUgLyB0aGlzLm51bUZyYW1lcyk7XG4gICAgICAgICAgICBpZih0aGlzLm9uRHJhdyAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRHJhdyh0aGlzLmN1cnJlbnRGcmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9ICh0aGlzLmN1cnJlbnRGcmFtZSArIDEpICUgdGhpcy5udW1GcmFtZXM7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uTG9vcCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGlmKHRoaXMub25TdG9wQ2FsbGJhY2sgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgdGhpcy5vblN0b3BDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3Aob25TdG9wQ2FsbGJhY2sgPSBudWxsKXtcbiAgICAgICAgaWYodGhpcy5pc0FuaW1hdGluZyl7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrID0gb25TdG9wQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGlmKG9uU3RvcENhbGxiYWNrICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9uU3RvcENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5mdW5jdGlvbiBpbml0KCl7XG4gICAgY29uc3QgbWFuYWdlciA9IG5ldyBDb250b3VyZXJNYW5hZ2VyKCk7XG4gICAgaW5pdFJlbmRlcihtYW5hZ2VyKTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuY2xhc3MgQ2FudmFzRGlzcGxheVBhbmUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICAgICAgaWYoJ29uTW91bnRDYWxsYmFjaycgaW4gdGhpcy5wcm9wcyl7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25Nb3VudENhbGxiYWNrKGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKXtcbiAgICAgICAgaWYoJ29uRGlzbW91bnRDYWxsYmFjaycgaW4gdGhpcy5wcm9wcyl7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uRGlzbW91bnRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpe1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGNhbnZhcyB3aWR0aD17dGhpcy5wcm9wcy5kaW1zLndpZHRofSBoZWlnaHQ9e3RoaXMucHJvcHMuZGltcy5oZWlnaHR9IHN0eWxlPXt7d2lkdGg6ICcxMDAlJ319PjwvY2FudmFzPlxuICAgICAgICApO1xuICAgIH1cbn07XG5DYW52YXNEaXNwbGF5UGFuZS5wcm9wVHlwZXMgPSB7XG4gICAgZGltczogUmVhY3QuUHJvcFR5cGVzLmluc3RhbmNlT2YoRGltZW5zaW9ucykuaXNSZXF1aXJlZCxcbiAgICBvbk1vdW50Q2FsbGJhY2s6IFJlYWN0LlByb3BUeXBlcy5mdW5jXG59O1xuXG5jbGFzcyBEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgICByZW5kZXIoKXtcbiAgICAgICAgcmV0dXJuIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT17J2xpc3QtZ3JvdXAtaXRlbScgKyAodGhpcy5wcm9wcy5zZWxlY3RlZCA/ICcgYWN0aXZlJyA6ICcnKX0gb25DbGljaz17KCkgPT4ge3RoaXMucHJvcHMub25DbGljayh0aGlzLnByb3BzLmZ1bmNOYW1lKTt9fT57dGhpcy5wcm9wcy5kaXNwbGF5TmFtZX08L2J1dHRvbj47XG4gICAgfVxufTtcblxuY2xhc3MgRHJhd0Z1bmN0aW9uU2VsZWN0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29uc3RydWN0b3IocHJvcHMpe1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZEZ1bmM6IERyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUNsaWNrID0gdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICByZW5kZXIoKXtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC1ncm91cFwiPlxuICAgICAgICAgICAgICAgIHtPYmplY3Qua2V5cyhEZW1vRnVuY3Rpb25zLmZ1bmN0aW9ucykubWFwKGZ1bmMgPT5cbiAgICAgICAgICAgICAgICAgICAgPERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uIGRpc3BsYXlOYW1lPXtEZW1vRnVuY3Rpb25zLmZ1bmN0aW9uc1tmdW5jXS5kaXNwbGF5TmFtZX0ga2V5PXtmdW5jfSBmdW5jTmFtZT17ZnVuY30gc2VsZWN0ZWQ9e2Z1bmMgPT0gdGhpcy5zdGF0ZS5zZWxlY3RlZEZ1bmN9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9IC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbiAgICBoYW5kbGVDbGljayhmdW5jTmFtZSl7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VsZWN0ZWRGdW5jOiBmdW5jTmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdChmdW5jTmFtZSk7XG4gICAgfVxufTtcbkRyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQyA9ICdhdHRyYWN0UmVwZWwnO1xuXG5jbGFzcyBBY2VFZGl0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICAgICAgY29uc3QgZWRpdG9yRGl2ID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgIHRoaXMuZWRpdG9yID0gYWNlLmVkaXQoZWRpdG9yRGl2KTtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VGhlbWUoJ2FjZS90aGVtZS9tb25va2FpJyk7XG4gICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXb3JrZXIoZmFsc2UpO1xuICAgICAgICB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgnYWNlL21vZGUvZ2xzbCcpO1xuICAgICAgICB0aGlzLmVkaXRvci4kYmxvY2tTY3JvbGxpbmcgPSBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0Rm9udFNpemUoMTgpO1xuICAgICAgICB0aGlzLmVkaXRvci5zZXRPcHRpb25zKHtcbiAgICAgICAgICAgIG1heExpbmVzOiBJbmZpbml0eVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFVzZVdyYXBNb2RlKHRydWUpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpe1xuICAgICAgICB0aGlzLmVkaXRvci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHNldFZhbHVlKG5ld0NvbnRlbnRzKXtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VmFsdWUobmV3Q29udGVudHMpO1xuICAgICAgICB0aGlzLmVkaXRvci5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldFZhbHVlKCk7XG4gICAgfVxuICAgIHJlbmRlcigpe1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2hlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQudG9TdHJpbmcoKSArICdweCd9fT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn07XG5cbmNsYXNzIENvbnRvdXJlckFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcyl7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyID0gbmV3IENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIodGhpcy5wcm9wcy5tYW5hZ2VyKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGlzQW5pbWF0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgY3VycmVudEZyYW1lOiAwLFxuICAgICAgICAgICAgbnVtRnJhbWVzOiAwLFxuICAgICAgICAgICAgaXNBbmltYXRlZFNlbGVjdFN0YXRlOiBmYWxzZSxcbiAgICAgICAgICAgIG51bUZyYW1lc0lucHV0VmFsOiAnMCcsXG4gICAgICAgICAgICBzaGFkZXJDb21waWxlRXJyb3I6ICcnXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlQ2FudmFzID0gdGhpcy51c2VDYW52YXMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zZXREcmF3RnVuYyA9IHRoaXMuc2V0RHJhd0Z1bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkRyYXdGdW5jU2VsZWN0ID0gdGhpcy5vbkRyYXdGdW5jU2VsZWN0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVkcmF3ID0gdGhpcy5yZWRyYXcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jaGFuZ2Vab29tQW5kUmVkcmF3ID0gdGhpcy5jaGFuZ2Vab29tQW5kUmVkcmF3LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcgPSB0aGlzLmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudHJhbnNsYXRlQW5kUmVkcmF3ID0gdGhpcy50cmFuc2xhdGVBbmRSZWRyYXcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVQbG90Q2xpY2sgPSB0aGlzLmhhbmRsZVBsb3RDbGljay5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpe1xuICAgICAgICB0aGlzLm9uRHJhd0Z1bmNTZWxlY3QoRHJhd0Z1bmN0aW9uU2VsZWN0b3IuREVGQVVMVF9GVU5DKTtcbiAgICB9XG4gICAgcmVuZGVyKCl7XG4gICAgICAgIGNvbnN0IENBTlZBU19ESU1TID0gbmV3IERpbWVuc2lvbnMoNjQwLCA0ODApO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIiBjbGFzc05hbWU9XCJjb2wtbGctMTJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2UtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5GdW4gd2l0aCBDb250b3VyczwvaDE+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3ZWxsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGI+RHJhZzwvYj4gdG8gbW92ZSB0aGUgZ3JhcGgsIDxiPnNjcm9sbDwvYj4gdG8gem9vbSwgYW5kIDxiPkN0cmwgKyBzY3JvbGw8L2I+IHRvIGNoYW5nZSB0aGUgY29udG91ciBkZW5zaXR5LlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgTW9kaWZ5IDxiPjxhIGhyZWY9XCIjXCIgb25DbGljaz17KGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5udW1GcmFtZXNJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fT5GcmFtZXM8L2E+PC9iPiAobnVtYmVyIG9mIGZyYW1lcyksIHRoZW4gY2xpY2sgPGI+UGxvdDwvYj4gdG8gY2hhbmdlIHRoZSBhbmltYXRpb24gc3BlZWQuXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICBVc2UgdGhlIDxiPnNsaWRlcjwvYj4gdG8gZXhwbG9yZSB0aGUgYW5pbWF0aW9uIGluIG1vcmUgZGV0YWlsLlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgUGxvdCB5b3VyIG93biBmdW5jdGlvbnMgd2l0aCB0aGUgPGI+dGV4dCBlZGl0b3JzPC9iPiBiZWxvdy5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIEp1c3QgZW5qb3kgdGhlIHByZXR0eSBhbmltYXRpb25zLCBvciA8Yj48YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL2tyYXd0aGVrcm93L2NvbnRvdXJlclwiPmNsaWNrIGhlcmU8L2E+PC9iPiB0byBsZWFybiBtb3JlLlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGI+Tm90ZTogVGhpcyBhcHAgdXNlcyBXZWJHTCwgc28gaXQgbmVlZHMgYSBzdWZmaWNpZW50bHkgbW9kZXJuIGJyb3dzZXIgYW5kIEdQVSB0byB3b3JrLjwvYj5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEcmF3RnVuY3Rpb25TZWxlY3RvciBvblNlbGVjdD17dGhpcy5vbkRyYXdGdW5jU2VsZWN0fS8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS05XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhzLThcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiByb2xlPVwidG9vbGJhclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tZ3JvdXBcIiByb2xlPVwiZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLmNoYW5nZVpvb21BbmRSZWRyYXcoMSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi16b29tLWluXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMuY2hhbmdlWm9vbUFuZFJlZHJhdygtMSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi16b29tLW91dFwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KC0xKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXBsdXNcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdygxKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLW1pbnVzXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoMSwgMCkpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctbGVmdFwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDAsIDEpKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LXVwXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoMCwgLTEpKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LWRvd25cIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy50cmFuc2xhdGVBbmRSZWRyYXcobmV3IFZlY3RvcigtMSwgMCkpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctcmlnaHRcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAoIXRoaXMuc3RhdGUuaXNBbmltYXRlZCB8fCAhdGhpcy5zdGF0ZS5pc0FuaW1hdGluZykgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnYnRuJywgJ2J0bi1kZWZhdWx0Jywge2Rpc2FibGVkOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkfSl9IG9uQ2xpY2s9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN0YXRlLmlzQW5pbWF0ZWQgJiYgIXRoaXMuc3RhdGUuaXNBbmltYXRpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0YXJ0KHRoaXMuc3RhdGUuY3VycmVudEZyYW1lLCBjdXJyZW50RnJhbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWU6IGN1cnJlbnRGcmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXBsYXlcIj48L3NwYW4+PC9idXR0b24+IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2J0bicsICdidG4tZGVmYXVsdCcsIHtkaXNhYmxlZDogIXRoaXMuc3RhdGUuaXNBbmltYXRlZH0pfSBvbkNsaWNrPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5pc0FuaW1hdGVkICYmIHRoaXMuc3RhdGUuaXNBbmltYXRpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0b3AoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wYXVzZVwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC14cy00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNBbmltYXRlZCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMFwiIG1heD17KHRoaXMuc3RhdGUubnVtRnJhbWVzIC0gMSkudG9TdHJpbmcoKX0gdmFsdWU9e3RoaXMuc3RhdGUuY3VycmVudEZyYW1lfSBzdHlsZT17e21hcmdpblRvcDogJzVweCd9fSBvbkNoYW5nZT17ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5pc0FuaW1hdGluZyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdG9wKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmRyYXdDb250b3Vycyh0aGlzLnN0YXRlLmN1cnJlbnRGcmFtZSAvIHRoaXMuc3RhdGUubnVtRnJhbWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5zdGF0ZS5jdXJyZW50RnJhbWUgLyB0aGlzLnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0gLz4gOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpblRvcDogJzEwcHgnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbnZhc0Rpc3BsYXlQYW5lIGRpbXM9e0NBTlZBU19ESU1TfSBvbk1vdW50Q2FsbGJhY2s9e2NhbnZhcyA9PiB7dGhpcy51c2VDYW52YXMoY2FudmFzKTt9fSBvbkRpc21vdW50Q2FsbGJhY2s9eygpID0+IHt0aGlzLnByb3BzLm1hbmFnZXIuZGVzdHJveUNvbnRleHQoKTt9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNtLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+UGxvdCBGdW5jdGlvbjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhzLTlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWlubGluZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tZ3JvdXBcIiBzdHlsZT17e21hcmdpblJpZ2h0OiAnMTBweCd9fSByb2xlPVwiZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2J0bicsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gJ2J0bi1kZWZhdWx0JyA6ICdidG4tcHJpbWFyeScsIHsnYWN0aXZlJzogIXRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlfSl9IG9uQ2xpY2s9eyBlID0+IHsgdGhpcy5zZXRTdGF0ZSh7aXNBbmltYXRlZFNlbGVjdFN0YXRlOiBmYWxzZX0pO30gfT5TdGF0aWM8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2J0bicsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gJ2J0bi1wcmltYXJ5JyA6ICdidG4tZGVmYXVsdCcsIHsnYWN0aXZlJzogdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGV9KX0gb25DbGljaz17IGUgPT4geyB0aGlzLnNldFN0YXRlKHtpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IHRydWV9KTt9IH0+RHluYW1pYzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZm9ybS1ncm91cCcsIHsnaGFzLWVycm9yJzogdGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpfSl9IHN0eWxlPXt7ZGlzcGxheTogJ2lubGluZS1ibG9jaycsIG1hcmdpbkJvdHRvbTogMCwgdmVydGljYWxBbGlnbjogJ21pZGRsZSd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlucHV0LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlucHV0LWdyb3VwLWFkZG9uXCI+RnJhbWVzPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2xcIiB2YWx1ZT17dGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbH0gZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZX0gcmVmPXtpbnB1dCA9PiB7dGhpcy5udW1GcmFtZXNJbnB1dCA9IGlucHV0O319IG9uQ2hhbmdlPXtlID0+IHt0aGlzLnNldFN0YXRlKHtudW1GcmFtZXNJbnB1dFZhbDogZS50YXJnZXQudmFsdWV9KTt9fSBzdHlsZT17e3dpZHRoOiAnNjBweCd9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiIHN0eWxlPXt7ZGlzcGxheTogdGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpID8gJ2lubGluZS1ibG9jaycgOiAnbm9uZScsIG1hcmdpbkxlZnQ6ICcxMHB4J319Pk11c3QgYmUgYW4gaW50ZWdlcjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXhzLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1zdWNjZXNzIGJ0bi1ibG9jayBwdWxsLXJpZ2h0XCIgc3R5bGU9e3t3aWR0aDogJzgwcHgnfX0gZGlzYWJsZWQ9e3RoaXMuaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKX0gcmVmPXtidXR0b24gPT4ge3RoaXMucGxvdEJ1dHRvbiA9IGJ1dHRvbjt9fSBvbkNsaWNrPXt0aGlzLmhhbmRsZVBsb3RDbGlja30+UGxvdDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yID09ICcnID8gbnVsbCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoYXMtZXJyb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZb3VyIGNvZGUgZmFpbGVkIHRvIGNvbXBpbGUgd2l0aCB0aGUgZm9sbG93aW5nIGVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0aGlzLnN0YXRlLnNoYWRlckNvbXBpbGVFcnJvci50cmltKCkuc3BsaXQoJ1xcbicpLm1hcCgobGluZSwgaW5kZXgpID0+IDxzcGFuIGtleT17aW5kZXh9PntsaW5lfTxiciAvPjwvc3Bhbj4pIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgKHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yLmluZGV4T2YoJ3dyb25nIG9wZXJhbmQgdHlwZXMnKSAhPSAtMSkgPyA8cD48Yj5Ob3RlIHRoYXQgR0xTTCBFUyBkb2VzIG5vdCBpbXBsaWNpdGx5IGNhc3QgaW50cyB0byBmbG9hdHMuIFdyaXRlIG51bWJlcnMgbGlrZSBcIjIzXCIgYXMgXCIyMy4wXCIuPC9iPjwvcD4gOiBudWxsIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgKHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yLmluZGV4T2YoJ2dsX0ZyYWdEYXRhJykgIT0gLTEpID8gPHA+PGI+RGlkIHlvdSBmb3JnZXQgYSBzZW1pY29sb24gb24gdGhlIGxhc3QgbGluZT88L2I+PC9wPiA6IG51bGwgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpZXcgdGhlIGNvbnNvbGUgdG8gc2VlIHRoZSBmdWxsIGdlbmVyYXRlZCBXZWJHTCBzaGFkZXIgY29kZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5Ub3A6ICcxMHB4J319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2VFZGl0b3IgaGVpZ2h0PVwiMjAwXCIga2V5PVwiZHJhd0Z1bmNFZGl0b3JcIiByZWY9eyBlZGl0b3IgPT4ge3RoaXMuZHJhd0Z1bmNFZGl0b3IgPSBlZGl0b3I7fSB9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5MaWJyYXJ5IEZ1bmN0aW9uczwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luQm90dG9tOiAnMTBweCd9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNlRWRpdG9yIGhlaWdodD1cIjIwMFwiIGtleT1cImluY2x1ZGVTcmNFZGl0b3JcIiByZWY9eyBlZGl0b3IgPT4ge3RoaXMuaW5jbHVkZVNyY0VkaXRvciA9IGVkaXRvcjt9IH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbiAgICB1c2VDYW52YXMoY2FudmFzKXtcbiAgICAgICAgY29uc3QgZHJhZ01hbmFnZXIgPSBuZXcgRHJhZ01hbmFnZXIoY2FudmFzLFxuICAgICAgICAgICAgZHJhZ1ZlYyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLnZpZXdwb3J0LnRyYW5zbGF0ZShkcmFnVmVjKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGV2ID0+IHRydWVcbiAgICAgICAgKTtcblxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBldiA9PiB7XG4gICAgICAgICAgICBpZihldi5jdHJsS2V5KXtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KGdldFNjcm9sbERpcihldikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlWm9vbSgtZ2V0U2Nyb2xsRGlyKGV2KSwgZ2V0Q2FudmFzTW91c2VQb3MoY2FudmFzLCBldikpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIudXNlQ2FudmFzKGNhbnZhcyk7XG4gICAgfVxuICAgIGlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSAmJiB0aGlzLnN0YXRlLm51bUZyYW1lc0lucHV0VmFsLnNwbGl0KCcnKS5zb21lKGMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGMuY2hhckNvZGVBdCgpIDwgJzAnLmNoYXJDb2RlQXQoKSB8fCBjLmNoYXJDb2RlQXQoKSA+ICc5Jy5jaGFyQ29kZUF0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVQbG90Q2xpY2soZSl7XG4gICAgICAgIHRoaXMuc2V0RHJhd0Z1bmModGhpcy5kcmF3RnVuY0VkaXRvci5nZXRWYWx1ZSgpLCB0aGlzLmluY2x1ZGVTcmNFZGl0b3IuZ2V0VmFsdWUoKSwgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gcGFyc2VJbnQodGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbCkgOiAwKTtcbiAgICB9XG4gICAgcmVkcmF3KCl7XG4gICAgICAgIGlmKHRoaXMuc3RhdGUuaXNBbmltYXRlZCl7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKHRoaXMuc3RhdGUuY3VycmVudEZyYW1lIC8gdGhpcy5zdGF0ZS5udW1GcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hhbmdlWm9vbUFuZFJlZHJhdyhjaGFuZ2VBbW91bnQpe1xuICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlWm9vbShjaGFuZ2VBbW91bnQpO1xuICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH1cbiAgICBjaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdyhjaGFuZ2VBbW91bnQpe1xuICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlQ29udG91clNwYWNpbmcoY2hhbmdlQW1vdW50KTtcbiAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICB9XG4gICAgdHJhbnNsYXRlQW5kUmVkcmF3KHRyYW5zbGF0ZUFtb3VudCl7XG4gICAgICAgIHRoaXMucHJvcHMubWFuYWdlci50cmFuc2xhdGUodHJhbnNsYXRlQW1vdW50Lm11bHRpcGx5KDUwLjApKTtcbiAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICB9XG4gICAgc2V0RHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMsIGlzQW5pbWF0ZWQgPSBmYWxzZSwgbnVtRnJhbWVzID0gMCl7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5jaGFuZ2VEcmF3RnVuYyhkcmF3RnVuYywgaW5jbHVkZVNyYywgaXNBbmltYXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2goZXJyKXtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogZXJyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNBbmltYXRlZDogaXNBbmltYXRlZCxcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBpc0FuaW1hdGVkLFxuICAgICAgICAgICAgY3VycmVudEZyYW1lOiAwLFxuICAgICAgICAgICAgbnVtRnJhbWVzOiBudW1GcmFtZXMsXG4gICAgICAgICAgICBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IGlzQW5pbWF0ZWQsXG4gICAgICAgICAgICBudW1GcmFtZXNJbnB1dFZhbDogbnVtRnJhbWVzLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBzaGFkZXJDb21waWxlRXJyb3I6ICcnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIubnVtRnJhbWVzID0gbnVtRnJhbWVzO1xuICAgICAgICBpZihpc0FuaW1hdGVkKXtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdG9wKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc3RhcnQoMCwgY3VycmVudEZyYW1lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWU6IGN1cnJlbnRGcmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EcmF3RnVuY1NlbGVjdChmdW5jKXtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRGdW5jID0gRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnNbZnVuY107XG4gICAgICAgIHRoaXMuZHJhd0Z1bmNFZGl0b3Iuc2V0VmFsdWUoc2VsZWN0ZWRGdW5jLmRyYXdGdW5jLnRyaW0oKSk7XG4gICAgICAgIHRoaXMuaW5jbHVkZVNyY0VkaXRvci5zZXRWYWx1ZShzZWxlY3RlZEZ1bmMuaW5jbHVkZVNyYy50cmltKCkpO1xuICAgICAgICBpZihzZWxlY3RlZEZ1bmMuaXNBbmltYXRlZCl7XG4gICAgICAgICAgICB0aGlzLnNldERyYXdGdW5jKHNlbGVjdGVkRnVuYy5kcmF3RnVuYywgc2VsZWN0ZWRGdW5jLmluY2x1ZGVTcmMsIHNlbGVjdGVkRnVuYy5pc0FuaW1hdGVkLCBzZWxlY3RlZEZ1bmMubnVtRnJhbWVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5zZXREcmF3RnVuYyhzZWxlY3RlZEZ1bmMuZHJhd0Z1bmMsIHNlbGVjdGVkRnVuYy5pbmNsdWRlU3JjKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGluaXRSZW5kZXIobWFuYWdlcil7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZGV4Q29udGFpbmVyJyk7XG4gICAgUmVhY3RET00ucmVuZGVyKFxuICAgICAgICA8Q29udG91cmVyQXBwIG1hbmFnZXI9e21hbmFnZXJ9IC8+LFxuICAgICAgICBjb250YWluZXJcbiAgICApO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBHUEdQVUtlcm5lbFJlc3VsdHtcbiAgICBjb25zdHJ1Y3RvcihjdHgsIGZibywgdGV4dHVyZXMpe1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5mYm8gPSBmYm87XG4gICAgICAgIHRoaXMudGV4dHVyZXMgPSB0ZXh0dXJlcztcbiAgICB9XG4gICAgZGlzcG9zZSgpe1xuICAgICAgICBpZih0aGlzLmZibyAhPSBudWxsKXtcbiAgICAgICAgICAgIHRoaXMuY3R4LmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuZmJvKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHR1cmVzLmZvckVhY2godGV4dHVyZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN0eC5kZWxldGVUZXh0dXJlKHRleHR1cmUpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5jbGFzcyBHUEdQVUtlcm5lbHtcbiAgICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBwcm9ncmFtLCBwYXJhbXMgPSBbXSwgbnVtT3V0cHV0cyA9IDEsIGlzR3JhcGhpY2FsID0gZmFsc2Upe1xuICAgICAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgdGhpcy5udW1PdXRwdXRzID0gbnVtT3V0cHV0cztcbiAgICAgICAgdGhpcy5pc0dyYXBoaWNhbCA9IGlzR3JhcGhpY2FsO1xuICAgIH1cbiAgICBnZXQgY3R4KCl7XG4gICAgICAgIHJldHVybiB0aGlzLm1hbmFnZXIuY3R4O1xuICAgIH1cbiAgICBnZXQgZXh0REIoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFuYWdlci5leHREQjtcbiAgICB9XG4gICAgcnVuKGlucHV0VGV4dHVyZXMsIG91dHB1dERpbXMsIHBhcmFtVmFscyA9IHt9LCBvdXRwdXRUeXBlID0gdGhpcy5jdHguRkxPQVQpe1xuICAgICAgICB0aGlzLmN0eC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XG4gICAgICAgIHJlZ2lzdGVyVW5pZm9ybXModGhpcy5jdHgsIHRoaXMucHJvZ3JhbSwgdGhpcy5wYXJhbXMsIHBhcmFtVmFscyk7XG4gICAgICAgIHJlZ2lzdGVyVW5pZm9ybXModGhpcy5jdHgsIHRoaXMucHJvZ3JhbSwgW3tcbiAgICAgICAgICAgIG5hbWU6ICd1RGltcycsXG4gICAgICAgICAgICB0eXBlOiAnaXZlYzInXG4gICAgICAgIH1dLCB7XG4gICAgICAgICAgICB1RGltczogb3V0cHV0RGltcy50b0FycmF5KClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0VGV4dHVyZXMgPSBjb21wdXRlMURBcnJheSh0aGlzLm51bU91dHB1dHMsIGkgPT5cbiAgICAgICAgICAgIGNyZWF0ZUNvbXB1dGVUZXh0dXJlKHRoaXMuY3R4LCBvdXRwdXREaW1zLCBvdXRwdXRUeXBlKVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGZibyA9IHRoaXMuaXNHcmFwaGljYWwgPyBudWxsIDogY3JlYXRlRkJPKHRoaXMuY3R4LCB0aGlzLmV4dERCLCBvdXRwdXRUZXh0dXJlcyk7XG4gICAgICAgIHRoaXMuY3R4LmJpbmRGcmFtZWJ1ZmZlcih0aGlzLmN0eC5GUkFNRUJVRkZFUiwgZmJvKTtcblxuICAgICAgICBiaW5kVGV4dHVyZXModGhpcy5jdHgsIGlucHV0VGV4dHVyZXMpO1xuXG4gICAgICAgIHRoaXMuY3R4LnZpZXdwb3J0KDAsIDAsIG91dHB1dERpbXMud2lkdGgsIG91dHB1dERpbXMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5tYW5hZ2VyLmRyYXdGdWxsc2NyZWVuUXVhZCh0aGlzLnByb2dyYW0pO1xuXG4gICAgICAgIHJldHVybiBuZXcgR1BHUFVLZXJuZWxSZXN1bHQodGhpcy5jdHgsIGZibywgb3V0cHV0VGV4dHVyZXMpO1xuICAgIH1cbn07XG5cbmNsYXNzIEdQR1BVTWFuYWdlcntcbiAgICBjb25zdHJ1Y3RvcihjdHgpe1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5leHREQiA9IHRoaXMuY3R4LmdldEV4dGVuc2lvbignV0VCR0xfZHJhd19idWZmZXJzJyk7XG4gICAgICAgIHRoaXMuY3R4LmdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfZmxvYXQnKTtcblxuICAgICAgICB0aGlzLnF1YWRQb3NCdWZmZXIgPSBjcmVhdGVBcnJheUJ1ZmZlcih0aGlzLmN0eCwgdGhpcy5jdHguQVJSQVlfQlVGRkVSLCBGVUxMU0NSRUVOX1FVQURfUE9TX0FSUkFZKTtcbiAgICAgICAgdGhpcy5xdWFkSW5kZXhCdWZmZXIgPSBjcmVhdGVBcnJheUJ1ZmZlcih0aGlzLmN0eCwgdGhpcy5jdHguRUxFTUVOVF9BUlJBWV9CVUZGRVIsIEZVTExTQ1JFRU5fUVVBRF9JTkRFWF9BUlJBWSk7XG4gICAgfVxuICAgIGRyYXdGdWxsc2NyZWVuUXVhZChwcm9ncmFtKXtcbiAgICAgICAgdGhpcy5jdHgudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgdGhpcy5jdHguYmluZEJ1ZmZlcih0aGlzLmN0eC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5xdWFkSW5kZXhCdWZmZXIpO1xuICAgICAgICB0aGlzLmN0eC5kcmF3RWxlbWVudHModGhpcy5jdHguVFJJQU5HTEVfU1RSSVAsIEZVTExTQ1JFRU5fUVVBRF9OVU1fVkVSVElDRVMsIHRoaXMuY3R4LlVOU0lHTkVEX1NIT1JULCAwKTtcbiAgICB9XG4gICAgcmVhZFBhY2tlZEZsb2F0RGF0YShkaW1zKXtcbiAgICAgICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkoZGltcy5nZXRBcmVhKCkgKiA0KTtcbiAgICAgICAgdGhpcy5jdHgucmVhZFBpeGVscygwLCAwLCBkaW1zLndpZHRoLCBkaW1zLmhlaWdodCwgdGhpcy5jdHguUkdCQSwgdGhpcy5jdHguVU5TSUdORURfQllURSwgYnVmKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoYnVmLmJ1ZmZlcik7XG4gICAgfVxuICAgIGFycmF5VG9UZXh0dXJlKGRpbXMsIGFycil7XG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZEFyciA9IG5ldyBGbG9hdDMyQXJyYXkoZmxhdHRlbihmbGF0dGVuKGFycikpKVxuICAgICAgICByZXR1cm4gY3JlYXRlQ29tcHV0ZVRleHR1cmUodGhpcy5jdHgsIGRpbXMsIHRoaXMuY3R4LkZMT0FULCBmbGF0dGVuZWRBcnIpO1xuICAgIH1cbiAgICB0ZXh0dXJlVG9BcnJheShkaW1zLCB0ZXgsIGNvbXBvbmVudCA9IDApe1xuICAgICAgICBjb25zdCBjb21wdXRlRnVuYyA9IFxuYHZlYzIgY1ZhbCA9IHRleHR1cmUyRCh1SW5wdXQsIHZDb29yZCkueHk7XG5nbF9GcmFnRGF0YVswXSA9IHBhY2tGbG9hdChjVmFsLmAgKyAneHl6dydbY29tcG9uZW50XSArIGApO1xuYDtcbiAgICAgICAgY29uc3QgaW5wdXROYW1lcyA9IFsndUlucHV0J107XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuY3JlYXRlS2VybmVsKFxuICAgICAgICAgICAgY29tcHV0ZUZ1bmMsXG4gICAgICAgICAgICBpbnB1dE5hbWVzLFxuICAgICAgICAgICAgZGltcyxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIEdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREVcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXN1bHRzID0ga2VybmVsLnJ1bihbdGV4XSwgZGltcywge30sIHRoaXMuY3R4LlVOU0lHTkVEX0JZVEUpO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB0aGlzLnJlYWRQYWNrZWRGbG9hdERhdGEoZGltcyk7XG4gICAgICAgIHJlc3VsdHMuZGlzcG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBjb21wdXRlMkRBcnJheShkaW1zLCBwb3MgPT5cbiAgICAgICAgICAgIG91dHB1dFtwb3MueSAqIGRpbXMud2lkdGggKyBwb3MueF1cbiAgICAgICAgKTtcbiAgICB9XG4gICAgY3JlYXRlS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zLCBwYXJhbXMgPSBbXSwgbnVtT3V0cHV0cyA9IDEsIGluY2x1ZGVTcmMgPSAnJywgaXNHcmFwaGljYWwgPSBmYWxzZSl7XG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0gW10uY29uY2F0KHBhcmFtcywgaW5wdXROYW1lcy5tYXAoXG4gICAgICAgICAgICBpbnB1dE5hbWUgPT4gKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2FtcGxlcjJEJyxcbiAgICAgICAgICAgICAgICBuYW1lOiBpbnB1dE5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICksW3tcbiAgICAgICAgICAgIHR5cGU6ICdpdmVjMicsXG4gICAgICAgICAgICBuYW1lOiAndURpbXMnXG4gICAgICAgIH1dKTtcbiAgICAgICAgY29uc3QgdmVydFNoYWRlclNyYyA9IEdQR1BVTWFuYWdlci5jcmVhdGVWZXJ0U2hhZGVyU3JjKGlzR3JhcGhpY2FsKTtcbiAgICAgICAgY29uc3QgZnJhZ1NoYWRlclNyYyA9IEdQR1BVTWFuYWdlci5jcmVhdGVGcmFnU2hhZGVyU3JjKGNvbXB1dGVGdW5jLnRyaW0oKS5zcGxpdCgnXFxuJykubWFwKGxpbmUgPT4gJyAgICAnICsgbGluZSkuam9pbignXFxuJykgKyAnXFxuJywgdW5pZm9ybXMsIGluY2x1ZGVTcmMsIG51bU91dHB1dHMgPiAxKTtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW0odGhpcy5jdHgsIHZlcnRTaGFkZXJTcmMsIGZyYWdTaGFkZXJTcmMpO1xuXG4gICAgICAgIHRoaXMuY3R4LnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgIHJlZ2lzdGVyVmVydGV4QXR0cmliKHRoaXMuY3R4LCBwcm9ncmFtLCAnYVBvcycsIDIsIHRoaXMucXVhZFBvc0J1ZmZlcik7XG4gICAgICAgIHJlZ2lzdGVyVGV4dHVyZXModGhpcy5jdHgsIHByb2dyYW0sIGlucHV0TmFtZXMpO1xuICAgICAgICByZXR1cm4gbmV3IEdQR1BVS2VybmVsKHRoaXMsIHByb2dyYW0sIHBhcmFtcywgbnVtT3V0cHV0cywgaXNHcmFwaGljYWwpO1xuICAgIH1cbiAgICBjcmVhdGVHcmFwaGljYWxLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIG91dHB1dERpbXMsIHBhcmFtcyA9IFtdLCBpbmNsdWRlU3JjID0gJycpe1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIG91dHB1dERpbXMsIHBhcmFtcywgMCwgaW5jbHVkZVNyYywgdHJ1ZSk7XG4gICAgfVxufTtcblxuR1BHUFVNYW5hZ2VyLmdldENhbnZhc0NvbnRleHQgPSBjYW52YXMgPT4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIGRlcHRoOiBmYWxzZSxcbiAgICAgICAgYW50aWFsaWFzOiBmYWxzZVxuICAgIH07XG4gICAgcmV0dXJuIGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcsIG9wdGlvbnMpIHx8IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbC1leHBlcmltZW50YWwnLCBvcHRpb25zKTtcbn07XG5cbkdQR1BVTWFuYWdlci5jcmVhdGVWZXJ0U2hhZGVyU3JjID0gKGZsaXBZID0gZmFsc2UpID0+XG5gcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG5hdHRyaWJ1dGUgdmVjMiBhUG9zO1xuXG52YXJ5aW5nIHZlYzIgdkNvb3JkO1xuXG52b2lkIG1haW4oKXtcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoYCArXG4gICAgKGZsaXBZID8gYGFQb3MueCwgLWFQb3MueWAgOiBgYVBvc2ApICtcbiAgICBgLCAwLjAsIDEuMCk7XG4gICAgdkNvb3JkID0gKGFQb3MgKyAxLjApIC8gMi4wO1xufWA7XG5cbkdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREUgPVxuYGZsb2F0IGludGVnZXJNb2QoZmxvYXQgeCwgZmxvYXQgeSkge1xuXHRmbG9hdCByZXMgPSBmbG9vcihtb2QoeCwgeSkpO1xuXHRpZiAocmVzID4gZmxvb3IoeSkgLSAxLjApIHJldHVybiAwLjA7XG5cdGVsc2UgcmV0dXJuIHJlcztcbn1cblxudmVjNCBwYWNrRmxvYXQoZmxvYXQgZikge1xuXHRpZiAoZiA9PSAwLjApIHJldHVybiB2ZWM0KDAuMCk7XG5cdGZsb2F0IEYgPSBhYnMoZik7XG5cdGZsb2F0IGV4cG9uZW50ID0gZmxvb3IobG9nMihGKSk7XG5cdGZsb2F0IG1hbnRpc3NhID0gZXhwMigtZXhwb25lbnQpICogRjtcblx0ZXhwb25lbnQgPSBleHBvbmVudCArIGZsb29yKGxvZzIobWFudGlzc2EpKTtcblx0ZmxvYXQgbWFudGlzc2FfcGFydDEgPSBpbnRlZ2VyTW9kKEYgKiBleHAyKDIzLjAtZXhwb25lbnQpLCAyNTYuMCk7XG5cdGZsb2F0IG1hbnRpc3NhX3BhcnQyID0gaW50ZWdlck1vZChGICogZXhwMigxNS4wLWV4cG9uZW50KSwgMjU2LjApO1xuXHRmbG9hdCBtYW50aXNzYV9wYXJ0MyA9IGludGVnZXJNb2QoRiAqIGV4cDIoNy4wLWV4cG9uZW50KSwgMTI4LjApO1xuXHRleHBvbmVudCArPSAxMjcuMDtcblx0cmV0dXJuIHZlYzQoXG4gICAgICAgIG1hbnRpc3NhX3BhcnQxLFxuICAgICAgICBtYW50aXNzYV9wYXJ0MixcbiAgICAgICAgMTI4LjAgKiBpbnRlZ2VyTW9kKGV4cG9uZW50LCAyLjApICsgbWFudGlzc2FfcGFydDMsXG4gICAgICAgIDEyOC4wICogKGYgPCAwLjAgPyAxLjAgOiAwLjApICsgZXhwb25lbnQgLyAyLjBcbiAgICApICogMC4wMDM5MjE1Njk7XG59XG5cbmA7XG5cbkdQR1BVTWFuYWdlci5jcmVhdGVGcmFnU2hhZGVyU3JjID0gKGNvbXB1dGVGdW5jLCB1bmlmb3JtcywgaW5jbHVkZVNyYyA9ICcnLCB1c2VEcmF3QnVmZmVycyA9IHRydWUpID0+IFtcbiAgICB1c2VEcmF3QnVmZmVycyA/XG5gI2V4dGVuc2lvbiBHTF9FWFRfZHJhd19idWZmZXJzOiByZXF1aXJlXG5gIDogJycsXG5gcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xucHJlY2lzaW9uIGhpZ2hwIHNhbXBsZXIyRDtcblxuI2RlZmluZSBFUFMgMC4wMDAwMDAxXG5cbmAsXG4gICAgLi4udW5pZm9ybXMubWFwKHVuaWZvcm0gPT5cbmB1bmlmb3JtIGAgKyB1bmlmb3JtLnR5cGUgKyBgIGAgKyB1bmlmb3JtLm5hbWUgKyBgO1xuYFxuICAgICksXG5gXG52YXJ5aW5nIHZlYzIgdkNvb3JkO1xuXG52ZWM0IGFyckdldChzYW1wbGVyMkQgYXJyLCBpdmVjMiBpZCl7XG4gICAgcmV0dXJuIHRleHR1cmUyRChhcnIsICh2ZWMyKGlkKSArIHZlYzIoMC41KSkgLyB2ZWMyKHVEaW1zKSk7XG59XG5cbmAsXG4gICAgaW5jbHVkZVNyYyxcbmB2b2lkIGNvbXB1dGVGdW5jKCl7XG4gICAgaXZlYzIgdGhyZWFkSWQgPSBpdmVjMih2Q29vcmQgKiB2ZWMyKHVEaW1zKSk7XG5gLFxuICAgIGNvbXB1dGVGdW5jLFxuYH1cblxudm9pZCBtYWluKCl7XG4gICAgY29tcHV0ZUZ1bmMoKTtcbn1gXS5qb2luKCcnKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuY2xhc3MgRGVtb0Z1bmN0aW9uc3tcbn07XG5cbkRlbW9GdW5jdGlvbnMuSU5DTFVERVMgPSB7XG4gICAgcGk6XG5gY29uc3QgZmxvYXQgUEkgPSAzLjE0MTU5MjY1MzU4OTc5MzIzODQ2MjY0MzM4MzI3OTU7XG5cbmAsXG4gICAgY29tcGxleExpYjpcbmB2ZWMyIGNvbXBsZXhNdWx0KHZlYzIgYSwgdmVjMiBiKXtcbiAgICByZXR1cm4gdmVjMihhLnggKiBiLnggLSBhLnkgKiBiLnksIGEueSAqIGIueCArIGEueCAqIGIueSk7XG59XG5cbnZlYzIgY29tcGxleERpdih2ZWMyIGEsIHZlYzIgYil7XG4gICAgZmxvYXQgZGl2aXNvciA9IGRvdChiLCBiKTtcbiAgICByZXR1cm4gdmVjMihkb3QoYSwgYiksIGEueSAqIGIueCAtIGEueCAqIGIueSkgLyBkaXZpc29yO1xufVxuXG52ZWMyIGNvbXBsZXhQb3codmVjMiBhLCB2ZWMyIGIpe1xuICAgIGZsb2F0IHIgPSBsZW5ndGgoYSksIHBoaSA9IGF0YW4oYS55LCBhLngpO1xuICAgIGZsb2F0IG5ld1IgPSBwb3cociwgYi54KSAqIGV4cCgtYi55ICogcGhpKTtcbiAgICBmbG9hdCBuZXdQaGkgPSBiLnkgKiBsb2cocikgKyBiLnggKiBwaGk7XG4gICAgcmV0dXJuIG5ld1IgKiB2ZWMyKGNvcyhuZXdQaGkpLCBzaW4obmV3UGhpKSk7XG59XG5cbnZlYzIgY29tcGxleEV4cCh2ZWMyIGIpe1xuICAgIHJldHVybiBleHAoYi54KSAqIHZlYzIoY29zKGIueSksIHNpbihiLnkpKTtcbn1cblxudmVjMiBjb21wbGV4TG9nKHZlYzIgeCl7XG4gICAgcmV0dXJuIHZlYzIobG9nKGxlbmd0aCh4KSksIGF0YW4oeC55LCB4LngpKTtcbn1cblxuYCxcbiAgICBnYW1tYTpcbmAvKipcbiAqIFRyYW5zbGF0ZWQgdG8gT3BlbkdMIEVTIGZyb20gbWF0aC5qc1xuICogaHR0cHM6Ly9naXRodWIuY29tL2pvc2Rlam9uZy9tYXRoanNcbiAqXG4gKiBNYXRoLmpzIGlzIGFuIGV4dGVuc2l2ZSBtYXRoIGxpYnJhcnkgZm9yIEphdmFTY3JpcHQgYW5kIE5vZGUuanMsXG4gKiBJdCBmZWF0dXJlcyByZWFsIGFuZCBjb21wbGV4IG51bWJlcnMsIHVuaXRzLCBtYXRyaWNlcywgYSBsYXJnZSBzZXQgb2ZcbiAqIG1hdGhlbWF0aWNhbCBmdW5jdGlvbnMsIGFuZCBhIGZsZXhpYmxlIGV4cHJlc3Npb24gcGFyc2VyLlxuICpcbiAqIEB2ZXJzaW9uIDMuMi4xXG4gKiBAZGF0ZSAgICAyMDE2LTA0LTI2XG4gKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoQykgMjAxMy0yMDE2IEpvcyBkZSBKb25nIDx3am9zZGVqb25nQGdtYWlsLmNvbT5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdFxuICogdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUXG4gKiBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGVcbiAqIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyXG4gKiB0aGUgTGljZW5zZS5cbiAqL1xuXG52ZWMyIGdhbW1hU3RlcCh2ZWMyIHgsIGludCBpLCB2ZWMyIG4sIGZsb2F0IHApe1xuICAgIGZsb2F0IHJlYWwgPSBuLnggKyBmbG9hdChpKTtcbiAgICBmbG9hdCBkZW4gPSByZWFsICogcmVhbCArIG4ueSAqIG4ueTtcbiAgICBpZihkZW4gIT0gMC4wKXtcbiAgICAgICAgcmV0dXJuIHggKyB2ZWMyKHAgKiByZWFsIC8gZGVuLCAtKHAgKiBuLnkpIC8gZGVuKTtcbiAgICB9XG4gICAgZWxzZSByZXR1cm4gdmVjMigwLjApO1xufVxuXG52ZWMyIGdhbW1hKHZlYzIgbil7XG4gICAgbi54IC09IDEuMDtcbiAgICB2ZWMyIHggPSB2ZWMyKDAuOTk5OTk5OTk5OTk5OTk3MDkxODIsIDAuMCk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgMSwgbiwgNTcuMTU2MjM1NjY1ODYyOTIzNTE3KTtcblx0eCA9IGdhbW1hU3RlcCh4LCAyLCBuLCAtNTkuNTk3OTYwMzU1NDc1NDkxMjQ4KTtcblx0eCA9IGdhbW1hU3RlcCh4LCAzLCBuLCAxNC4xMzYwOTc5NzQ3NDE3NDcxNzQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDQsIG4sIC0wLjQ5MTkxMzgxNjA5NzYyMDE5OTc4KTtcblx0eCA9IGdhbW1hU3RlcCh4LCA1LCBuLCAwLjMzOTk0NjQ5OTg0ODExODg4Njk5ZS00KTtcblx0eCA9IGdhbW1hU3RlcCh4LCA2LCBuLCAwLjQ2NTIzNjI4OTI3MDQ4NTc1NjY1ZS00KTtcblx0eCA9IGdhbW1hU3RlcCh4LCA3LCBuLCAtMC45ODM3NDQ3NTMwNDg3OTU2NDY3N2UtNCk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgOCwgbiwgMC4xNTgwODg3MDMyMjQ5MTI0ODg4NGUtMyk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgOSwgbiwgLTAuMjEwMjY0NDQxNzI0MTA0ODgzMTllLTMpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDEwLCBuLCAwLjIxNzQzOTYxODExNTIxMjY0MzIwZS0zKTtcblx0eCA9IGdhbW1hU3RlcCh4LCAxMSwgbiwgLTAuMTY0MzE4MTA2NTM2NzYzODkwMjJlLTMpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDEyLCBuLCAwLjg0NDE4MjIzOTgzODUyNzQzMjkzZS00KTtcblx0eCA9IGdhbW1hU3RlcCh4LCAxMywgbiwgLTAuMjYxOTA4Mzg0MDE1ODE0MDg2NzBlLTQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDE0LCBuLCAwLjM2ODk5MTgyNjU5NTMxNjIyNzA0ZS01KTtcbiAgICB2ZWMyIHQgPSB2ZWMyKG4ueCArIDQuNzQyMTg3NSArIDAuNSwgbi55KTtcbiAgICBmbG9hdCB0d29QaVNxcnQgPSBzcXJ0KDIuMCAqIFBJKTtcblxuICAgIG4ueCArPSAwLjU7XG4gICAgdmVjMiByZXN1bHQgPSBjb21wbGV4UG93KHQsIG4pO1xuICAgIHJlc3VsdCAqPSB0d29QaVNxcnQ7XG4gICAgZmxvYXQgciA9IGV4cCgtdC54KTtcbiAgICB0ID0gciAqIHZlYzIoY29zKC10LnkpLCBzaW4oLXQueSkpO1xuXG4gICAgcmV0dXJuIGNvbXBsZXhNdWx0KGNvbXBsZXhNdWx0KHJlc3VsdCwgdCksIHgpO1xufVxuXG5gLFxuICAgIHJvdGF0ZVdpdGhUaW1lOlxuYHZlYzIgcm90YXRlV2l0aFRpbWUodmVjMiB2KXtcbiAgICBmbG9hdCBjb3NUID0gY29zKHRpbWUgKiAyLjAgKiBQSSksIHNpblQgPSBzaW4odGltZSAqIDIuMCAqIFBJKTtcbiAgICByZXR1cm4gdmVjMihcbiAgICAgICAgdi54ICogY29zVCAtIHYueSAqIHNpblQsXG4gICAgICAgIHYueCAqIHNpblQgKyB2LnkgKiBjb3NUXG4gICAgKTtcbn1cblxuYCxcbiAgICBzbm9pc2U6XG5gLy9cbi8vIERlc2NyaXB0aW9uIDogQXJyYXkgYW5kIHRleHR1cmVsZXNzIEdMU0wgMkQvM0QvNEQgc2ltcGxleCBcbi8vICAgICAgICAgICAgICAgbm9pc2UgZnVuY3Rpb25zLlxuLy8gICAgICBBdXRob3IgOiBJYW4gTWNFd2FuLCBBc2hpbWEgQXJ0cy5cbi8vICBNYWludGFpbmVyIDogc3RlZ3Vcbi8vICAgICBMYXN0bW9kIDogMjAxMTA4MjIgKGlqbSlcbi8vICAgICBMaWNlbnNlIDogQ29weXJpZ2h0IChDKSAyMDExIEFzaGltYSBBcnRzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gICAgICAgICAgICAgICBEaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMSUNFTlNFIGZpbGUuXG4vLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2hpbWEvd2ViZ2wtbm9pc2Vcbi8vICAgICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3N0ZWd1L3dlYmdsLW5vaXNlXG4vLyBcblxudmVjNCBtb2QyODkodmVjNCB4KSB7XG4gIHJldHVybiB4IC0gZmxvb3IoeCAqICgxLjAgLyAyODkuMCkpICogMjg5LjA7IH1cblxuZmxvYXQgbW9kMjg5KGZsb2F0IHgpIHtcbiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsgfVxuXG52ZWM0IHBlcm11dGUodmVjNCB4KSB7XG4gICAgIHJldHVybiBtb2QyODkoKCh4KjM0LjApKzEuMCkqeCk7XG59XG5cbmZsb2F0IHBlcm11dGUoZmxvYXQgeCkge1xuICAgICByZXR1cm4gbW9kMjg5KCgoeCozNC4wKSsxLjApKngpO1xufVxuXG52ZWM0IHRheWxvckludlNxcnQodmVjNCByKVxue1xuICByZXR1cm4gMS43OTI4NDI5MTQwMDE1OSAtIDAuODUzNzM0NzIwOTUzMTQgKiByO1xufVxuXG5mbG9hdCB0YXlsb3JJbnZTcXJ0KGZsb2F0IHIpXG57XG4gIHJldHVybiAxLjc5Mjg0MjkxNDAwMTU5IC0gMC44NTM3MzQ3MjA5NTMxNCAqIHI7XG59XG5cbnZlYzQgZ3JhZDQoZmxvYXQgaiwgdmVjNCBpcClcbiAge1xuICBjb25zdCB2ZWM0IG9uZXMgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIC0xLjApO1xuICB2ZWM0IHAscztcblxuICBwLnh5eiA9IGZsb29yKCBmcmFjdCAodmVjMyhqKSAqIGlwLnh5eikgKiA3LjApICogaXAueiAtIDEuMDtcbiAgcC53ID0gMS41IC0gZG90KGFicyhwLnh5eiksIG9uZXMueHl6KTtcbiAgcyA9IHZlYzQobGVzc1RoYW4ocCwgdmVjNCgwLjApKSk7XG4gIHAueHl6ID0gcC54eXogKyAocy54eXoqMi4wIC0gMS4wKSAqIHMud3d3OyBcblxuICByZXR1cm4gcDtcbiAgfVxuXHRcdFx0XHRcdFx0XG4vLyAoc3FydCg1KSAtIDEpLzQgPSBGNCwgdXNlZCBvbmNlIGJlbG93XG4jZGVmaW5lIEY0IDAuMzA5MDE2OTk0Mzc0OTQ3NDUxXG5cbmZsb2F0IHNub2lzZSh2ZWM0IHYpXG4gIHtcbiAgY29uc3QgdmVjNCAgQyA9IHZlYzQoIDAuMTM4MTk2NjAxMTI1MDExLCAgLy8gKDUgLSBzcXJ0KDUpKS8yMCAgRzRcbiAgICAgICAgICAgICAgICAgICAgICAgIDAuMjc2MzkzMjAyMjUwMDIxLCAgLy8gMiAqIEc0XG4gICAgICAgICAgICAgICAgICAgICAgICAwLjQxNDU4OTgwMzM3NTAzMiwgIC8vIDMgKiBHNFxuICAgICAgICAgICAgICAgICAgICAgICAtMC40NDcyMTM1OTU0OTk5NTgpOyAvLyAtMSArIDQgKiBHNFxuXG4vLyBGaXJzdCBjb3JuZXJcbiAgdmVjNCBpICA9IGZsb29yKHYgKyBkb3QodiwgdmVjNChGNCkpICk7XG4gIHZlYzQgeDAgPSB2IC0gICBpICsgZG90KGksIEMueHh4eCk7XG5cbi8vIE90aGVyIGNvcm5lcnNcblxuLy8gUmFuayBzb3J0aW5nIG9yaWdpbmFsbHkgY29udHJpYnV0ZWQgYnkgQmlsbCBMaWNlYS1LYW5lLCBBTUQgKGZvcm1lcmx5IEFUSSlcbiAgdmVjNCBpMDtcbiAgdmVjMyBpc1ggPSBzdGVwKCB4MC55encsIHgwLnh4eCApO1xuICB2ZWMzIGlzWVogPSBzdGVwKCB4MC56d3csIHgwLnl5eiApO1xuLy8gIGkwLnggPSBkb3QoIGlzWCwgdmVjMyggMS4wICkgKTtcbiAgaTAueCA9IGlzWC54ICsgaXNYLnkgKyBpc1guejtcbiAgaTAueXp3ID0gMS4wIC0gaXNYO1xuLy8gIGkwLnkgKz0gZG90KCBpc1laLnh5LCB2ZWMyKCAxLjAgKSApO1xuICBpMC55ICs9IGlzWVoueCArIGlzWVoueTtcbiAgaTAuencgKz0gMS4wIC0gaXNZWi54eTtcbiAgaTAueiArPSBpc1laLno7XG4gIGkwLncgKz0gMS4wIC0gaXNZWi56O1xuXG4gIC8vIGkwIG5vdyBjb250YWlucyB0aGUgdW5pcXVlIHZhbHVlcyAwLDEsMiwzIGluIGVhY2ggY2hhbm5lbFxuICB2ZWM0IGkzID0gY2xhbXAoIGkwLCAwLjAsIDEuMCApO1xuICB2ZWM0IGkyID0gY2xhbXAoIGkwLTEuMCwgMC4wLCAxLjAgKTtcbiAgdmVjNCBpMSA9IGNsYW1wKCBpMC0yLjAsIDAuMCwgMS4wICk7XG5cbiAgLy8gIHgwID0geDAgLSAwLjAgKyAwLjAgKiBDLnh4eHhcbiAgLy8gIHgxID0geDAgLSBpMSAgKyAxLjAgKiBDLnh4eHhcbiAgLy8gIHgyID0geDAgLSBpMiAgKyAyLjAgKiBDLnh4eHhcbiAgLy8gIHgzID0geDAgLSBpMyAgKyAzLjAgKiBDLnh4eHhcbiAgLy8gIHg0ID0geDAgLSAxLjAgKyA0LjAgKiBDLnh4eHhcbiAgdmVjNCB4MSA9IHgwIC0gaTEgKyBDLnh4eHg7XG4gIHZlYzQgeDIgPSB4MCAtIGkyICsgQy55eXl5O1xuICB2ZWM0IHgzID0geDAgLSBpMyArIEMuenp6ejtcbiAgdmVjNCB4NCA9IHgwICsgQy53d3d3O1xuXG4vLyBQZXJtdXRhdGlvbnNcbiAgaSA9IG1vZDI4OShpKTsgXG4gIGZsb2F0IGowID0gcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZShpLncpICsgaS56KSArIGkueSkgKyBpLngpO1xuICB2ZWM0IGoxID0gcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZSAoXG4gICAgICAgICAgICAgaS53ICsgdmVjNChpMS53LCBpMi53LCBpMy53LCAxLjAgKSlcbiAgICAgICAgICAgKyBpLnogKyB2ZWM0KGkxLnosIGkyLnosIGkzLnosIDEuMCApKVxuICAgICAgICAgICArIGkueSArIHZlYzQoaTEueSwgaTIueSwgaTMueSwgMS4wICkpXG4gICAgICAgICAgICsgaS54ICsgdmVjNChpMS54LCBpMi54LCBpMy54LCAxLjAgKSk7XG5cbi8vIEdyYWRpZW50czogN3g3eDYgcG9pbnRzIG92ZXIgYSBjdWJlLCBtYXBwZWQgb250byBhIDQtY3Jvc3MgcG9seXRvcGVcbi8vIDcqNyo2ID0gMjk0LCB3aGljaCBpcyBjbG9zZSB0byB0aGUgcmluZyBzaXplIDE3KjE3ID0gMjg5LlxuICB2ZWM0IGlwID0gdmVjNCgxLjAvMjk0LjAsIDEuMC80OS4wLCAxLjAvNy4wLCAwLjApIDtcblxuICB2ZWM0IHAwID0gZ3JhZDQoajAsICAgaXApO1xuICB2ZWM0IHAxID0gZ3JhZDQoajEueCwgaXApO1xuICB2ZWM0IHAyID0gZ3JhZDQoajEueSwgaXApO1xuICB2ZWM0IHAzID0gZ3JhZDQoajEueiwgaXApO1xuICB2ZWM0IHA0ID0gZ3JhZDQoajEudywgaXApO1xuXG4vLyBOb3JtYWxpc2UgZ3JhZGllbnRzXG4gIHZlYzQgbm9ybSA9IHRheWxvckludlNxcnQodmVjNChkb3QocDAscDApLCBkb3QocDEscDEpLCBkb3QocDIsIHAyKSwgZG90KHAzLHAzKSkpO1xuICBwMCAqPSBub3JtLng7XG4gIHAxICo9IG5vcm0ueTtcbiAgcDIgKj0gbm9ybS56O1xuICBwMyAqPSBub3JtLnc7XG4gIHA0ICo9IHRheWxvckludlNxcnQoZG90KHA0LHA0KSk7XG5cbi8vIE1peCBjb250cmlidXRpb25zIGZyb20gdGhlIGZpdmUgY29ybmVyc1xuICB2ZWMzIG0wID0gbWF4KDAuNiAtIHZlYzMoZG90KHgwLHgwKSwgZG90KHgxLHgxKSwgZG90KHgyLHgyKSksIDAuMCk7XG4gIHZlYzIgbTEgPSBtYXgoMC42IC0gdmVjMihkb3QoeDMseDMpLCBkb3QoeDQseDQpICAgICAgICAgICAgKSwgMC4wKTtcbiAgbTAgPSBtMCAqIG0wO1xuICBtMSA9IG0xICogbTE7XG4gIHJldHVybiA0OS4wICogKCBkb3QobTAqbTAsIHZlYzMoIGRvdCggcDAsIHgwICksIGRvdCggcDEsIHgxICksIGRvdCggcDIsIHgyICkpKVxuICAgICAgICAgICAgICAgKyBkb3QobTEqbTEsIHZlYzIoIGRvdCggcDMsIHgzICksIGRvdCggcDQsIHg0ICkgKSApICkgO1xuXG59XG5cbmBcbn07XG5cbkRlbW9GdW5jdGlvbnMuZnVuY3Rpb25zID0ge1xuICAgIGxvcmVudHo6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdMb3JlbnR6IEJvb3N0JyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOlxuYGZsb2F0IGJldGEgPSBzaW4odGltZSAqIDIuMCAqIFBJKSAqIDAuOTtcbmZsb2F0IGdhbW1hID0gMS4wIC8gc3FydCgxLjAgLSBiZXRhICogYmV0YSk7XG5yZXMgPSBnYW1tYSAqIHZlYzIoXG4gICAgY1Bvcy54ICogMS4wICsgY1Bvcy55ICogYmV0YSxcbiAgICBjUG9zLnkgKiAxLjAgKyBjUG9zLnggKiBiZXRhXG4pO1xuXG5gXG4gICAgfSxcbi8vICAgIHJvdGF0aW9uOiB7XG4vLyAgICAgICAgZGlzcGxheU5hbWU6ICdSb3RhdGlvbicsXG4vLyAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbi8vICAgICAgICBudW1GcmFtZXM6IDgwMCxcbi8vICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbi8vICAgICAgICBkcmF3RnVuYzpcbi8vYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKGNQb3MpO1xuLy9gXG4vLyAgICB9LFxuICAgIG1lcmNhdG9yd2FycDoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ01lcmNhdG9yIFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDgwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgICAgIGRyYXdGdW5jOlxuYHZlYzIgc2NhbGVkUG9zID0gY1BvcyAqIDAuNjtcbnZlYzIgaW52TWVyY2F0b3IgPSB2ZWMyKHNjYWxlZFBvcy54LCAyLjAgKiBhdGFuKGV4cChzY2FsZWRQb3MueSkpIC0gMC41ICogUEkpICogOC4wO1xucmVzID0gcm90YXRlV2l0aFRpbWUoaW52TWVyY2F0b3IpO1xuYFxuICAgIH0sXG4gICAgbWVyY2F0b3JNb2xsd2VpZGU6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdNZXJjYXRvciB0byBNb2xsd2VpZGUnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6XG5gdmVjMiBzY2FsZWRQb3MgPSBjUG9zICogMC4zO1xuZmxvYXQgdGhldGEgPSBhc2luKHNjYWxlZFBvcy55ICogMi4wIC8gUEkpO1xudmVjMiBpbnZNb2xsd2VpZGUgPSB2ZWMyKFxuICAgIHNjYWxlZFBvcy54IC8gY29zKHRoZXRhKSxcbiAgICBhc2luKCgyLjAgKiB0aGV0YSArIHNpbigyLjAgKiB0aGV0YSkpIC8gUEkpXG4pO1xudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSk7XG5mbG9hdCBtaXhQYXJhbSA9IC0gY29zKHRpbWUgKiAyLjAgKiBQSSkgLyAyLjAgKyAwLjU7XG5yZXMgPSAoaW52TW9sbHdlaWRlICogbWl4UGFyYW0gKyBpbnZNZXJjYXRvciAqICgxLjAgLSBtaXhQYXJhbSkpICogOC4wO1xuYFxuICAgIH0sXG4gICAgZGlwb2xlOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnRGlwb2xlIEZvcm1hdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzpcbmBmbG9hdCBkaXN0ID0gc2luKHRpbWUgKiAyLjAgKiBQSSArIFBJIC8gMi4wKSAqIDIuMCArIDIuNTtcbnJlcyA9IDUwLjAgLyAoMi4wICogZGlzdCkgKiAoXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMihkaXN0LCAwLjApKSAtXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMigtZGlzdCwgMC4wKSlcbik7XG5gXG4gICAgfSxcbiAgICBhdHRyYWN0UmVwZWw6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdBdHRyYWN0aW9uIHRvIFJlcHVsc2lvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMTAwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYixcbiAgICAgICAgZHJhd0Z1bmM6IFxuYHJlcyA9IDEwLjAgKiAoXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMigxLjAsIDAuMCkpICtcbiAgICBzaW4odGltZSAqIDIuMCAqIFBJIC0gUEkgLyAyLjApICogY29tcGxleExvZyhjUG9zIC0gdmVjMigtMS4wLCAwLjApKVxuKTtcbmBcbiAgICB9LFxuICAgIG5ldXJhbG5ldHdvcms6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdOZXVyYWwgTmV0d29yaycsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzogXG5gZmxvYXQgbWl4UGFyYW0gPSAtY29zKHRpbWUgKiAyLjAgKiBQSSkgLyAyLjAgKyAwLjU7XG52ZWMyIHVuc2lnbW9pZCA9IC1sb2coMS4wIC8gKChjUG9zICsgdmVjMigzLjMsIDMuMCkpIC8gNi4zKSAtIDEuMCk7XG5yZXMgPSAodmVjMihcbiAgICB1bnNpZ21vaWQueCAqIDIuMCArIHVuc2lnbW9pZC55ICogMS4wLFxuICAgIHVuc2lnbW9pZC54ICogMi4wICsgdW5zaWdtb2lkLnkgKiAzLjBcbikgLSB2ZWMyKDEuMCwgLTIuMCkpICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcbmBcbiAgICB9LFxuICAgIGdhbGF4eToge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0dhbGF4eSBXYXJwJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOiBcbmBmbG9hdCBtaXhQYXJhbSA9IC1jb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcbnZlYzIgcG9sUG9zID0gdmVjMihsZW5ndGgoY1BvcyksIGF0YW4oY1Bvcy55LCBjUG9zLngpKTtcbnBvbFBvcyA9IHZlYzIocG9sUG9zLngsIHBvbFBvcy55IC0gbWl4UGFyYW0gLyA1MC4wICogc3FydCgxLjAgLyBwb3cocG9sUG9zLnggLyA0MC4wLCAzLjApKSk7XG5yZXMgPSB2ZWMyKHBvbFBvcy54ICogY29zKHBvbFBvcy55KSwgcG9sUG9zLnggKiBzaW4ocG9sUG9zLnkpKTtcbmBcbiAgICB9LFxuICAgIHNpbXBsZXg6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdTaW1wbGV4IFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnNub2lzZSxcbiAgICAgICAgZHJhd0Z1bmM6IFxuYHZlYzIgY2lyY2xlVmFyeSA9IDIuMCAqIHZlYzIoXG4gICAgY29zKHRpbWUgKiAyLjAgKiBQSSksXG4gICAgc2luKHRpbWUgKiAyLjAgKiBQSSlcbik7XG5yZXMgPSAyLjAgKiAoY1BvcyArXG4wLjUgKiB2ZWMyKFxuICAgIHNub2lzZSh2ZWM0KGNQb3MgKiAwLjI1LCBjaXJjbGVWYXJ5ICsgdmVjMigxMDAuMCwgMTAwLjApKSksXG4gICAgc25vaXNlKHZlYzQoY1BvcyAqIDAuMjUsIGNpcmNsZVZhcnkgKyB2ZWMyKDIwMC4wLCAyMDAuMCkpKVxuKSk7XG5gXG4gICAgfSxcbiAgICBleHBvbmVudGlhdGlvbjoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggRXhwb25lbnRpYXRpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDMwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYixcbiAgICAgICAgZHJhd0Z1bmM6IFxuYHZlYzIgY2FydFJlcyA9IDEwLjAgKiBjb21wbGV4UG93KGNQb3MsIHZlYzIoMS4wIC8gKDIuNSAtIDEuNSAqIGNvcyh0aW1lICogMi4wICogUEkpKSwgMC4wKSk7XG5yZXMgPSB2ZWMyKGxlbmd0aChjYXJ0UmVzKSwgMTAuMCAqIGF0YW4oY2FydFJlcy55LCBjYXJ0UmVzLngpKTtcbmBcbiAgICB9LFxuICAgIG1vYml1czoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ01vYml1cyBUcmFuc2Zvcm1hdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMTAwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgICAgIGRyYXdGdW5jOlxuYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBjb21wbGV4RGl2KFxuICAgIGNvbXBsZXhNdWx0KHZlYzIoMC41LCAzLjApLCBjUG9zKSArIHZlYzIoMC41LCAxLjUpLFxuICAgIGNvbXBsZXhNdWx0KHZlYzIoNC4wLCAxLjUpLCBjUG9zKSArIHZlYzIoMi4wLCAzLjUpXG4pKTtcbmBcbiAgICB9LFxuLy8gICAgbG9nOiB7XG4vLyAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IExvZ2FyaXRobScsXG4vLyAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbi8vICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4vLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4vLyAgICAgICAgZHJhd0Z1bmM6IFxuLy9gcmVzID0gcm90YXRlV2l0aFRpbWUoMTAuMCAqIGNvbXBsZXhMb2coY1BvcykpO1xuLy9gXG4vLyAgICB9LFxuLy8gICAgc2luOiB7XG4vLyAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IFNpbmUnLFxuLy8gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4vLyAgICAgICAgbnVtRnJhbWVzOiAzMDAsXG4vLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbi8vICAgICAgICBkcmF3RnVuYzogXG4vL2B2ZWMyIGV4cG9uZW50ID0gdmVjMigtY1Bvcy55LCBjUG9zLngpO1xuLy9yZXMgPSByb3RhdGVXaXRoVGltZShjb21wbGV4RGl2KFxuLy8gICAgY29tcGxleEV4cChleHBvbmVudCkgLSBjb21wbGV4RXhwKC1leHBvbmVudCksXG4vLyAgICB2ZWMyKDAuMCwgMi4wKVxuLy8pKTtcbi8vYFxuLy8gICAgfSxcbiAgICBhcmNzaW46IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IEludmVyc2UgU2luZScsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogXG5gdmVjMiBpbnZTaW4gPSAtIDEwLjAgKiBjb21wbGV4TXVsdChjb21wbGV4TG9nKGNvbXBsZXhQb3codmVjMigxLjAsIDAuMCkgLSBjb21wbGV4UG93KGNQb3MsIHZlYzIoMi4wLCAwLjApKSwgdmVjMigwLjUsIDAuMCkpICsgY29tcGxleE11bHQoY1BvcywgdmVjMigwLjAsIDEuMCkpKSwgdmVjMigwLjAsIDEuMCkpO1xuZmxvYXQgbWl4UGFyYW0gPSAtIGNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xucmVzID0gaW52U2luICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcbmBcbiAgICB9LFxuICAgIGdhbW1hOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnR2FtbWEgRnVuY3Rpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDQwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuZ2FtbWEgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgICAgICBkcmF3RnVuYzpcbmByZXMgPSByb3RhdGVXaXRoVGltZSgxMC4wICogZ2FtbWEoKGNQb3MgKyB2ZWMyKDIuMCwgMC4wKSkgLyAyLjApKTtcbmBcbiAgICB9LFxuICAgIG1hZG5lc3M6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4ID8/PycsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogODAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogXG5gdmVjMiBtYWRuZXNzID0gLSAxMC4wICogY29tcGxleE11bHQoY29tcGxleExvZyhjb21wbGV4UG93KHZlYzIoMi4wLCAzLjApIC0gY29tcGxleFBvdyhjUG9zICogMi4wLCB2ZWMyKDIuMCwgMS4wKSksIHZlYzIoMC41LCAxLjApKSArIGNvbXBsZXhNdWx0KGNQb3MgKiAyLjAsIHZlYzIoMi4wLCAxLjApKSksIHZlYzIoMi4wLCAxLjApKTtcbmZsb2F0IG1peFBhcmFtID0gLSBjb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcbnJlcyA9IG1hZG5lc3MgKiBtaXhQYXJhbSArIGNQb3MgKiAoMS4wIC0gbWl4UGFyYW0pO1xuYFxuICAgIH0sXG59O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
